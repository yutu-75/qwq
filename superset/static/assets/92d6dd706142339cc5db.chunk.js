"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[1393],{452630:(e,a,t)=>{a.iB=a.YM=void 0;var n=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},r=o(t(667294)),i=o(t(45697)),s=t(402371);function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e,a,t){return function(i){var s,o,u,l=e[i.type],g=(o=(s=i).value,u=s.isDisabled,function(){!u&&t&&a!==o&&t(o)});return r.default.createElement(l,n({onClick:g},i))}};a.YM=function(e){var a=e.itemTypeToComponent,t=e.WrapperComponent,o=void 0===t?"div":t,l=function(e){var t=e.currentPage,i=e.totalPages,l=e.boundaryPagesRange,g=e.siblingPagesRange,d=e.hideEllipsis,c=e.hidePreviousAndNextPageLinks,P=e.hideFirstAndLastPageLinks,E=e.onChange,h=e.disabled,p=function(e,a){var t={};for(var n in e)a.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(e,["currentPage","totalPages","boundaryPagesRange","siblingPagesRange","hideEllipsis","hidePreviousAndNextPageLinks","hideFirstAndLastPageLinks","onChange","disabled"]),v=(0,s.getPaginationModel)({currentPage:t,totalPages:i,boundaryPagesRange:l,siblingPagesRange:g,hideEllipsis:d,hidePreviousAndNextPageLinks:c,hideFirstAndLastPageLinks:P}),b=u(a,t,E);return r.default.createElement(o,p,v.map((function(e){return b(n({},e,{isDisabled:!!h}))})))};return l.propTypes={currentPage:i.default.number.isRequired,totalPages:i.default.number.isRequired,boundaryPagesRange:i.default.number,siblingPagesRange:i.default.number,hideEllipsis:i.default.bool,hidePreviousAndNextPageLinks:i.default.bool,hideFirstAndLastPageLinks:i.default.bool,onChange:i.default.func,disabled:i.default.bool},l},a.iB=s.ITEM_TYPES},495413:(e,a,t)=>{t.d(a,{Y:()=>i});var n=t(455867),r=t(653002);const i={name:"SQL",tabs:[{name:"Saved queries",label:(0,n.t)("Saved queries"),url:"/savedqueryview/list/",usesRouter:!0,show:(0,r.lI)("Saved Query")},{name:"Query history",label:(0,n.t)("Query history"),url:"/superset/sqllab/history/",usesRouter:!0,show:(0,r.lI)("Query Search")}]}},331673:(e,a,t)=>{t.d(a,{Z:()=>v});var n=t(205872),r=t.n(n),i=(t(667294),t(751995)),s=t(455867),o=t(833743),u=t(849889),l=t(453459),g=t(622489),d=t(600120),c=t(242110),P=t(731293),E=t(710222),h=t(211965);c.Z.registerLanguage("sql",o.Z),c.Z.registerLanguage("markdown",l.Z),c.Z.registerLanguage("html",u.Z),c.Z.registerLanguage("json",g.Z);const p=i.iK.div`
  margin-top: -24px;

  &:hover {
    svg {
      visibility: visible;
    }
  }

  svg {
    position: relative;
    top: 40px;
    left: 512px;
    visibility: hidden;
    margin: -4px;
    color: ${({theme:e})=>e.colors.grayscale.base};
  }
`;function v({addDangerToast:e,addSuccessToast:a,children:t,...n}){return(0,h.tZ)(p,null,(0,h.tZ)(P.Z.Copy,{tabIndex:0,role:"button",onClick:n=>{var r;n.preventDefault(),n.currentTarget.blur(),r=t,(0,E.Z)((()=>Promise.resolve(r))).then((()=>{a&&a((0,s.t)("SQL Copied!"))})).catch((()=>{e&&e((0,s.t)("Sorry, your browser does not support copying."))}))}}),(0,h.tZ)(c.Z,r()({style:d.Z},n),t))}},14025:(e,a,t)=>{t.d(a,{Cq:()=>g,Fk:()=>d,bI:()=>c});var n=t(667294),r=t(431069),i=t(455867),s=t(68492),o=t(115926),u=t.n(o),l=t(672570);function g({queries:e,fetchData:a,currentQueryId:t}){const r=e.findIndex((e=>e.id===t)),[i,s]=(0,n.useState)(r),[o,u]=(0,n.useState)(!1),[l,g]=(0,n.useState)(!1);function d(){u(0===i),g(i===e.length-1)}function c(t){const n=i+(t?-1:1);n>=0&&n<e.length&&(a(e[n].id),s(n),d())}return(0,n.useEffect)((()=>{d()})),{handleKeyPress:function(a){i>=0&&i<e.length&&("ArrowDown"===a.key||"k"===a.key?(a.preventDefault(),c(!1)):"ArrowUp"!==a.key&&"j"!==a.key||(a.preventDefault(),c(!0)))},handleDataChange:c,disablePrevious:o,disableNext:l}}const d=(e,a)=>{const[t,o]=(0,n.useState)([]),g=a?encodeURIComponent(a):void 0,d=(0,n.useCallback)((async e=>{let a,t=[],n=0;for(;void 0===a||t.length<a;){const o=u().encode_uri({filters:e,page:n});try{const e=await r.Z.get({endpoint:`/api/v1/dataset/?q=${o}`});({count:a}=e.json);const{json:{result:i}}=e;t=[...t,...i],n+=1}catch(e){(0,l.Gb)((0,i.t)("There was an error fetching dataset")),s.Z.error((0,i.t)("There was an error fetching dataset"),e)}}o(t)}),[]);(0,n.useEffect)((()=>{const t=[{col:"database",opr:"rel_o_m",value:null==e?void 0:e.id},{col:"schema",opr:"eq",value:g},{col:"sql",opr:"dataset_is_null_or_empty",value:!0}];a&&d(t)}),[null==e?void 0:e.id,a,g,d]);const c=null==t?void 0:t.map((e=>e.table_name));return{datasets:t,datasetNames:c}},c=e=>{const[a,t]=(0,n.useState)(0),o=(0,n.useCallback)((()=>r.Z.get({endpoint:`/api/v1/dataset/${e}/related_objects`}).then((({json:e})=>{t(null==e?void 0:e.charts.count)})).catch((e=>{(0,l.Gb)((0,i.t)("There was an error fetching dataset's related objects")),s.Z.error(e)}))),[e]);return(0,n.useEffect)((()=>{e&&o()}),[e,o]),{usageCount:a}}},656590:(e,a)=>{a.ITEM_TYPES={PAGE:"PAGE",ELLIPSIS:"ELLIPSIS",FIRST_PAGE_LINK:"FIRST_PAGE_LINK",PREVIOUS_PAGE_LINK:"PREVIOUS_PAGE_LINK",NEXT_PAGE_LINK:"NEXT_PAGE_LINK",LAST_PAGE_LINK:"LAST_PAGE_LINK"},a.ITEM_KEYS={FIRST_ELLIPSIS:-1,SECOND_ELLIPSIS:-2,FIRST_PAGE_LINK:-3,PREVIOUS_PAGE_LINK:-4,NEXT_PAGE_LINK:-5,LAST_PAGE_LINK:-6}},653804:(e,a,t)=>{var n=t(656590);a.createFirstEllipsis=function(e){return{type:n.ITEM_TYPES.ELLIPSIS,key:n.ITEM_KEYS.FIRST_ELLIPSIS,value:e,isActive:!1}},a.createSecondEllipsis=function(e){return{type:n.ITEM_TYPES.ELLIPSIS,key:n.ITEM_KEYS.SECOND_ELLIPSIS,value:e,isActive:!1}},a.createFirstPageLink=function(e){var a=e.currentPage;return{type:n.ITEM_TYPES.FIRST_PAGE_LINK,key:n.ITEM_KEYS.FIRST_PAGE_LINK,value:1,isActive:1===a}},a.createPreviousPageLink=function(e){var a=e.currentPage;return{type:n.ITEM_TYPES.PREVIOUS_PAGE_LINK,key:n.ITEM_KEYS.PREVIOUS_PAGE_LINK,value:Math.max(1,a-1),isActive:1===a}},a.createNextPageLink=function(e){var a=e.currentPage,t=e.totalPages;return{type:n.ITEM_TYPES.NEXT_PAGE_LINK,key:n.ITEM_KEYS.NEXT_PAGE_LINK,value:Math.min(t,a+1),isActive:a===t}},a.createLastPageLink=function(e){var a=e.currentPage,t=e.totalPages;return{type:n.ITEM_TYPES.LAST_PAGE_LINK,key:n.ITEM_KEYS.LAST_PAGE_LINK,value:t,isActive:a===t}},a.createPageFunctionFactory=function(e){var a=e.currentPage;return function(e){return{type:n.ITEM_TYPES.PAGE,key:e,value:e,isActive:e===a}}}},1158:(e,a)=>{a.createRange=function(e,a){for(var t=[],n=e;n<=a;n++)t.push(n);return t}},402371:(e,a,t)=>{var n=t(1158),r=t(653804);a.getPaginationModel=function(e){if(null==e)throw new Error("getPaginationModel(): options object should be a passed");var a=Number(e.totalPages);if(isNaN(a))throw new Error("getPaginationModel(): totalPages should be a number");if(a<0)throw new Error("getPaginationModel(): totalPages shouldn't be a negative number");var t=Number(e.currentPage);if(isNaN(t))throw new Error("getPaginationModel(): currentPage should be a number");if(t<0)throw new Error("getPaginationModel(): currentPage shouldn't be a negative number");if(t>a)throw new Error("getPaginationModel(): currentPage shouldn't be greater than totalPages");var i=null==e.boundaryPagesRange?1:Number(e.boundaryPagesRange);if(isNaN(i))throw new Error("getPaginationModel(): boundaryPagesRange should be a number");if(i<0)throw new Error("getPaginationModel(): boundaryPagesRange shouldn't be a negative number");var s=null==e.siblingPagesRange?1:Number(e.siblingPagesRange);if(isNaN(s))throw new Error("getPaginationModel(): siblingPagesRange should be a number");if(s<0)throw new Error("getPaginationModel(): siblingPagesRange shouldn't be a negative number");var o=Boolean(e.hidePreviousAndNextPageLinks),u=Boolean(e.hideFirstAndLastPageLinks),l=Boolean(e.hideEllipsis),g=l?0:1,d=[],c=r.createPageFunctionFactory(e);if(u||d.push(r.createFirstPageLink(e)),o||d.push(r.createPreviousPageLink(e)),1+2*g+2*s+2*i>=a){var P=n.createRange(1,a).map(c);d.push.apply(d,P)}else{var E=i,h=n.createRange(1,E).map(c),p=a+1-i,v=a,b=n.createRange(p,v).map(c),I=Math.min(Math.max(t-s,E+g+1),p-g-2*s-1),_=I+2*s,f=n.createRange(I,_).map(c);if(d.push.apply(d,h),!l){var L=I-1,S=(L===E+1?c:r.createFirstEllipsis)(L);d.push(S)}if(d.push.apply(d,f),!l){var y=_+1,T=(y===p-1?c:r.createSecondEllipsis)(y);d.push(T)}d.push.apply(d,b)}return o||d.push(r.createNextPageLink(e)),u||d.push(r.createLastPageLink(e)),d};var i=t(656590);a.ITEM_TYPES=i.ITEM_TYPES,a.ITEM_KEYS=i.ITEM_KEYS}}]);