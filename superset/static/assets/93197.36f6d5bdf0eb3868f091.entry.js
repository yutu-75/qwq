"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[93197],{493197:(e,t,n)=>{n.d(t,{tR:()=>S,iZ:()=>R,ex:()=>T,ZP:()=>A});var l=n(205872),o=n.n(l),i=n(667294),r=n(3006),s=n(120271),a=n(751995),d=n(455867),u=n(68492),c=n(838703);const h=(e,t,n)=>{let l=!1;const o=t-e;return o>0&&o<=n&&(l=!0),l};class g{constructor(e,t,n){this.tableRef=void 0,this.columnRef=void 0,this.setDerivedColumns=void 0,this.isDragging=void 0,this.resizable=void 0,this.reorderable=void 0,this.derivedColumns=void 0,this.RESIZE_INDICATOR_THRESHOLD=void 0,this.clearListeners=()=>{document.removeEventListener("mouseup",this.handleMouseup),this.initializeResizableColumns(!1,this.tableRef),this.initializeDragDropColumns(!1,this.tableRef)},this.setTableRef=e=>{this.tableRef=e},this.getColumnIndex=()=>{var e;let t=-1;const n=null==(e=this.columnRef)?void 0:e.parentNode;return n&&(t=Array.prototype.indexOf.call(n.children,this.columnRef)),t},this.handleColumnDragStart=e=>{var t;const n=null==e?void 0:e.currentTarget;n&&(this.columnRef=n),this.isDragging=!0;const l=this.getColumnIndex(),o={index:l,columnData:this.derivedColumns[l]};null==e||null==(t=e.dataTransfer)||t.setData(R,JSON.stringify(o))},this.handleDragDrop=e=>{var t;if(null==(t=e.dataTransfer)||null==t.getData?void 0:t.getData(R)){var n;e.preventDefault();const t=null==(n=e.currentTarget)?void 0:n.parentNode,l=Array.prototype.indexOf.call(t.children,e.currentTarget),o=this.getColumnIndex(),i=[...this.derivedColumns],r=i.slice(o,o+1);i.splice(o,1),i.splice(l,0,r[0]),this.derivedColumns=[...i],this.setDerivedColumns(i)}},this.allowDrop=e=>{e.preventDefault()},this.handleMouseDown=e=>{const t=null==e?void 0:e.currentTarget;t&&(this.columnRef=t,e&&h(e.offsetX,t.offsetWidth,this.RESIZE_INDICATOR_THRESHOLD)?(t.mouseDown=!0,t.oldX=e.x,t.oldWidth=t.offsetWidth,t.draggable=!1):this.reorderable&&(t.draggable=!0))},this.handleMouseMove=e=>{if(!0===this.resizable&&!this.isDragging){const t=e.currentTarget;e&&h(e.offsetX,t.offsetWidth,this.RESIZE_INDICATOR_THRESHOLD)?t.style.cursor="col-resize":t.style.cursor="default";const n=this.columnRef;if(null!=n&&n.mouseDown){let t=n.oldWidth;const l=e.x-n.oldX;n.oldWidth+(e.x-n.oldX)>0&&(t=n.oldWidth+l);const o=this.getColumnIndex();if(!Number.isNaN(o)){const e={...this.derivedColumns[o]};e.width=t,this.derivedColumns[o]=e,this.setDerivedColumns([...this.derivedColumns])}}}},this.handleMouseup=()=>{this.columnRef&&(this.columnRef.mouseDown=!1,this.columnRef.style.cursor="default",this.columnRef.draggable=!1),this.isDragging=!1},this.initializeResizableColumns=(e=!1,t)=>{var n,l;this.tableRef=t;const o=null==(n=this.tableRef)||null==(l=n.rows)?void 0:l[0];if(o){const{cells:t}=o,n=t.length;for(let l=0;l<n;l+=1){const n=t[l];!0===e?(this.resizable=!0,n.addEventListener("mousedown",this.handleMouseDown),n.addEventListener("mousemove",this.handleMouseMove,!0)):(this.resizable=!1,n.removeEventListener("mousedown",this.handleMouseDown),n.removeEventListener("mousemove",this.handleMouseMove,!0))}}},this.initializeDragDropColumns=(e=!1,t)=>{var n,l;this.tableRef=t;const o=null==(n=this.tableRef)||null==(l=n.rows)?void 0:l[0];if(o){const{cells:t}=o,n=t.length;for(let l=0;l<n;l+=1){const n=t[l];!0===e?(this.reorderable=!0,n.addEventListener("mousedown",this.handleMouseDown),n.addEventListener("dragover",this.allowDrop),n.addEventListener("dragstart",this.handleColumnDragStart),n.addEventListener("drop",this.handleDragDrop)):(this.reorderable=!1,n.draggable=!1,n.removeEventListener("mousedown",this.handleMouseDown),n.removeEventListener("dragover",this.allowDrop),n.removeEventListener("dragstart",this.handleColumnDragStart),n.removeEventListener("drop",this.handleDragDrop))}}},this.setDerivedColumns=n,this.tableRef=e,this.isDragging=!1,this.RESIZE_INDICATOR_THRESHOLD=8,this.resizable=!1,this.reorderable=!1,this.derivedColumns=[...t],document.addEventListener("mouseup",this.handleMouseup)}}var f=n(294184),v=n.n(f),p=n(899612),m=n(274061),b=n(211965);const w=(0,a.iK)("div")((({theme:e,height:t})=>`\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding-left: ${2*e.gridUnit}px;\n  padding-right: ${e.gridUnit}px;\n  border-bottom: 1px solid ${e.colors.grayscale.light3};\n  transition: background 0.3s;\n  line-height: ${t}px;\n  box-sizing: border-box;\n`)),D=(0,a.iK)(r.Z)((({theme:e})=>`\n    th.ant-table-cell {\n      font-weight: ${e.typography.weights.bold};\n      color: ${e.colors.grayscale.dark1};\n      user-select: none;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    .ant-pagination-item-active {\n      border-color: ${e.colors.primary.base};\n    }\n  }\n`)),E=e=>{var t;const{columns:n,pagination:l,onChange:r,height:s,scroll:d,size:u}=e,[c,h]=(0,i.useState)(0),g=(0,i.useCallback)((e=>{h(e)}),[]),{ref:f}=(0,p.NB)({onResize:g}),E=(0,a.Fg)(),R=37*(null==E?void 0:E.gridUnit)||150,C=n.filter((({width:e})=>!e)).length;let L=0;null==n||n.forEach((e=>{e.width&&(L+=e.width)}));let y=0;const x=Math.max(Math.floor((c-L)/C),50),I=null!=(t=null==n||null==n.map?void 0:n.map((e=>{const t={...e};return e.width||(t.width=x),y+=t.width,t})))?t:[];if(y<c){const e=I[I.length-1];e.width=e.width+Math.floor(c-y)}const z=(0,i.useRef)(),[N]=(0,i.useState)((()=>{const e={};return Object.defineProperty(e,"scrollLeft",{get:()=>{var e,t;return z.current?null==(e=z.current)||null==(t=e.state)?void 0:t.scrollLeft:null},set:e=>{z.current&&z.current.scrollTo({scrollLeft:e})}}),e})),A=()=>{var e;null==(e=z.current)||e.resetAfterIndices({columnIndex:0,shouldForceUpdate:!0})};(0,i.useEffect)((()=>A),[c,n,u]);const M={...l,onChange:(e,t)=>{var n;null==(n=z.current)||null==n.scrollTo||n.scrollTo({scrollTop:0}),null==r||r({...l,current:e,pageSize:t},{},{},{action:S.PAGINATE,currentDataSource:[]})}};return(0,b.tZ)("div",{ref:f},(0,b.tZ)(D,o()({},e,{sticky:!1,className:"virtual-table",columns:I,components:{body:(e,{ref:t,onScroll:n})=>{t.current=N;const l=u===T.MIDDLE?47:39;return(0,b.tZ)(m.cd,{ref:z,className:"virtual-grid",columnCount:I.length,columnWidth:e=>{const{width:t=R}=I[e];return t},height:s||d.y,rowCount:e.length,rowHeight:()=>l,width:c,onScroll:({scrollLeft:e})=>{n({scrollLeft:e})}},(({columnIndex:t,rowIndex:n,style:o})=>{var i,r;const s=null==e?void 0:e[n];let a=null==s?void 0:s[null==I||null==(i=I[t])?void 0:i.dataIndex];const d=null==(r=I[t])?void 0:r.render;return"function"===typeof d&&(a=d(a,s,n)),(0,b.tZ)(w,{className:v()("virtual-table-cell",{"virtual-table-cell-last":t===I.length-1}),style:o,title:"string"===typeof a?a:void 0,theme:E,height:l},a)}))}},pagination:M})))},R="superset/table-column";var C,S,T;!function(e){e.DISABLED="disabled",e.SINGLE="single",e.MULTI="multi"}(C||(C={})),function(e){e.PAGINATE="paginate",e.SORT="sort",e.FILTER="filter"}(S||(S={})),function(e){e.SMALL="small",e.MIDDLE="middle"}(T||(T={}));const L=[],y=(0,a.iK)(r.Z)((({theme:e,height:t})=>`\n    .ant-table-body {\n      overflow: auto;\n      height: ${t?`${t}px`:void 0};\n    }\n\n    th.ant-table-cell {\n      font-weight: ${e.typography.weights.bold};\n      color: ${e.colors.grayscale.dark1};\n      user-select: none;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    .ant-table-tbody > tr > td {\n      user-select: none;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      border-bottom: 1px solid ${e.colors.grayscale.light3};\n    }\n\n    .ant-pagination-item-active {\n      border-color: ${e.colors.primary.base};\n    }\n  }\n`)),x=(0,a.iK)(E)((({theme:e})=>`\n  .virtual-table .ant-table-container:before,\n  .virtual-table .ant-table-container:after {\n    display: none;\n  }\n  .virtual-table-cell {\n    box-sizing: border-box;\n    padding: ${4*e.gridUnit}px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n`)),I={filterTitle:(0,d.t)("Filter menu"),filterConfirm:(0,d.t)("OK"),filterReset:(0,d.t)("Reset"),filterEmptyText:(0,d.t)("No filters"),filterCheckall:(0,d.t)("Select all items"),filterSearchPlaceholder:(0,d.t)("Search in filters"),emptyText:(0,d.t)("No data"),selectAll:(0,d.t)("Select current page"),selectInvert:(0,d.t)("Invert current page"),selectNone:(0,d.t)("Clear all data"),selectionAll:(0,d.t)("Select all data"),sortTitle:(0,d.t)("Sort"),expand:(0,d.t)("Expand row"),collapse:(0,d.t)("Collapse row"),triggerDesc:(0,d.t)("Click to sort descending"),triggerAsc:(0,d.t)("Click to sort ascending"),cancelSort:(0,d.t)("Click to cancel sorting")},z={},N=()=>{};z[C.MULTI]="checkbox",z[C.SINGLE]="radio",z[C.DISABLED]=null;const A=function(e){const{data:t,columns:n,selectedRows:l=L,handleRowSelection:r,size:d=T.SMALL,selectionType:h=C.DISABLED,sticky:f=!0,loading:v=!1,resizable:p=!1,reorderable:m=!1,usePagination:w=!0,defaultPageSize:D=15,pageSizeOptions:E=["5","15","25","50","100"],hideData:R=!1,emptyComponent:S,locale:A,height:M,virtualize:Z=!1,onChange:O=N,recordCount:k}=e,$=(0,i.useRef)(null),[P,H]=(0,i.useState)(n),[U,W]=(0,i.useState)(D),[_,B]=(0,i.useState)({...I}),[F,X]=(0,i.useState)(l),K=(0,i.useRef)(null),G=z[h],j={type:G,selectedRowKeys:F,onChange:e=>{X(e),null==r||r(e)}};(0,i.useEffect)((()=>{!0===m&&u.Z.warn('EXPERIMENTAL FEATURE ENABLED: The "reorderable" prop of Table is experimental and NOT recommended for use in production deployments.'),!0===p&&u.Z.warn('EXPERIMENTAL FEATURE ENABLED: The "resizable" prop of Table is experimental and NOT recommended for use in production deployments.')}),[m,p]),(0,i.useEffect)((()=>{let e;e=A?{...I,...A}:{...I},B(e)}),[A]),(0,i.useEffect)((()=>H(n)),[n]),(0,i.useEffect)((()=>{var e,t;K.current&&(null==(t=K.current)||t.clearListeners());const n=null==(e=$.current)?void 0:e.getElementsByTagName("table")[0];if(n){var l,o;if(K.current=new g(n,P,H),m)null==K||null==(l=K.current)||l.initializeDragDropColumns(m,n);if(p)null==K||null==(o=K.current)||o.initializeResizableColumns(p,n)}return()=>{var e;null==K||null==(e=K.current)||null==e.clearListeners||e.clearListeners()}}),[$,m,p,Z,K]);const J=(0,a.Fg)(),q=!!w&&{hideOnSinglePage:!0,pageSize:U,pageSizeOptions:E,onShowSizeChange:(e,t)=>W(t)};q&&k&&(q.total=k);let Q=M;if(Q){Q-=68;w&&k&&k>U&&(Q-=40)}const V={loading:{spinning:null!=v&&v,indicator:(0,b.tZ)(c.Z,null)},hasData:!R&&t,columns:P,dataSource:R?[void 0]:t,size:d,pagination:q,locale:_,showSorterTooltip:!1,onChange:O,theme:J,height:Q};return(0,b.tZ)(s.ZP,{renderEmpty:()=>null!=S?S:(0,b.tZ)("div",null,_.emptyText)},(0,b.tZ)("div",{ref:$},!Z&&(0,b.tZ)(y,o()({},V,{rowSelection:G?j:void 0,sticky:f})),Z&&(0,b.tZ)(x,o()({},V,{scroll:{y:300,x:"100vw"}}))))}}}]);