"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[62580],{62580:(e,t,r)=>{r.r(t),r.d(t,{default:()=>i});r(667294);var n=r(263475),c=r(211965);function i(e){const{height:t,width:r,echartOptions:i,refs:s}=e;return(0,c.tZ)(n.Z,{refs:s,height:t,width:r,echartOptions:i})}},263475:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(667294),c=r(751995),i=r(53552),s=r(211965);const u=c.iK.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function h({width:e,height:t,echartOptions:r,eventHandlers:c,zrEventHandlers:h,selectedValues:a={},refs:d},o){const f=(0,n.useRef)(null);d&&(d.divRef=f);const l=(0,n.useRef)(),p=(0,n.useMemo)((()=>Object.keys(a)||[]),[a]),g=(0,n.useRef)([]);(0,n.useImperativeHandle)(o,(()=>({getEchartInstance:()=>l.current}))),(0,n.useEffect)((()=>{f.current&&(l.current||(l.current=(0,i.S1)(f.current)),Object.entries(c||{}).forEach((([e,t])=>{var r,n;null==(r=l.current)||r.off(e),null==(n=l.current)||n.on(e,t)})),Object.entries(h||{}).forEach((([e,t])=>{var r,n;null==(r=l.current)||r.getZr().off(e),null==(n=l.current)||n.getZr().on(e,t)})),l.current.setOption(r,!0))}),[r,c,h]),(0,n.useEffect)((()=>{l.current&&(l.current.dispatchAction({type:"downplay",dataIndex:g.current.filter((e=>!p.includes(e)))}),p.length&&l.current.dispatchAction({type:"highlight",dataIndex:p}),l.current.dispatchAction({type:"hideTip"}),g.current=p)}),[p]);const w=(0,n.useCallback)((({width:e,height:t})=>{l.current&&l.current.resize({width:e,height:t})}),[]);return(0,n.useEffect)((()=>{if(!l.current)return;const e=()=>{l.current&&l.current.dispatchAction({type:"hideTip"})};return window.addEventListener("message",(t=>{"share-page-scroll"===t.data.type&&e()})),()=>{window.removeEventListener("message",e)}}),[l.current]),(0,n.useEffect)((()=>(w({width:e,height:t}),()=>{var e;return null==(e=l.current)?void 0:e.dispose()})),[]),(0,n.useLayoutEffect)((()=>{w({width:e,height:t})}),[e,t,w]),(0,s.tZ)(u,{ref:f,height:t,width:e})}const a=(0,n.forwardRef)(h)}}]);