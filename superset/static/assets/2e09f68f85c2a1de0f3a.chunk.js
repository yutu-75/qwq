(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[96092],{676929:(n,t,e)=>{var r=e(88258).W,i=Math.PI/180,o=2048;function a(n){return n.text}function u(){return"serif"}function c(){return"normal"}function s(n){return Math.sqrt(n.value)}function l(){return 30*(~~(6*Math.random())-3)}function f(){return 1}function h(n,t,e,r){if(!t.sprite){var a=n.context,u=n.ratio;a.clearRect(0,0,2048/u,o/u);var c=0,s=0,l=0,f=e.length;for(--r;++r<f;){t=e[r],a.save(),a.font=t.style+" "+t.weight+" "+~~((t.size+1)/u)+"px "+t.font;var h=a.measureText(t.text+"m").width*u,d=t.size<<1;if(t.rotate){var g=Math.sin(t.rotate*i),p=Math.cos(t.rotate*i),m=h*p,y=h*g,v=d*p,w=d*g;h=Math.max(Math.abs(m+w),Math.abs(m-w))+31>>5<<5,d=~~Math.max(Math.abs(y+v),Math.abs(y-v))}else h=h+31>>5<<5;if(d>l&&(l=d),c+h>=2048&&(c=0,s+=l,l=0),s+d>=o)break;a.translate((c+(h>>1))/u,(s+(d>>1))/u),t.rotate&&a.rotate(t.rotate*i),a.fillText(t.text,0,0),t.padding&&(a.lineWidth=2*t.padding,a.strokeText(t.text,0,0)),a.restore(),t.width=h,t.height=d,t.xoff=c,t.yoff=s,t.x1=h>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,c+=h}for(var b=a.getImageData(0,0,2048/u,o/u).data,M=[];--r>=0;)if((t=e[r]).hasText){for(var x=(h=t.width)>>5,T=(d=t.y1-t.y0,0);T<d*x;T++)M[T]=0;if(null==(c=t.xoff))return;s=t.yoff;for(var N=0,D=-1,k=0;k<d;k++){for(T=0;T<h;T++){var C=x*k+(T>>5),I=b[2048*(s+k)+(c+T)<<2]?1<<31-T%32:0;M[C]|=I,N|=I}N?D=k:(t.y0++,d--,k--,s++)}t.y1=t.y0+D,t.sprite=M.slice(0,(t.y1-t.y0)*x)}}}function d(n,t,e){e>>=5;for(var r,i=n.sprite,o=n.width>>5,a=n.x-(o<<4),u=127&a,c=32-u,s=n.y1-n.y0,l=(n.y+n.y0)*e+(a>>5),f=0;f<s;f++){r=0;for(var h=0;h<=o;h++)if((r<<c|(h<o?(r=i[f*o+h])>>>u:0))&t[l+h])return!0;l+=e}return!1}function g(n,t){var e=n[0],r=n[1];t.x+t.x0<e.x&&(e.x=t.x+t.x0),t.y+t.y0<e.y&&(e.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function p(n){var t=n[0]/n[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function m(){return document.createElement("canvas")}function y(n){return"function"===typeof n?n:function(){return n}}n.exports=function(){var n=[256,256],t=a,e=u,i=s,w=c,b=c,M=l,x=f,T=p,N=[],D=1/0,k=r("word","end"),C=null,I=Math.random,O={},A=m;function E(t,e,r){n[0],n[1];for(var i,o,a,u,c,s=e.x,l=e.y,f=Math.sqrt(n[0]*n[0]+n[1]*n[1]),h=T(n),g=I()<.5?1:-1,p=-g;(i=h(p+=g))&&(o=~~i[0],a=~~i[1],!(Math.min(Math.abs(o),Math.abs(a))>=f));)if(e.x=s+o,e.y=l+a,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>n[0]||e.y+e.y1>n[1])&&(!r||!d(e,t,n[0]))&&(!r||(c=r,(u=e).x+u.x1>c[0].x&&u.x+u.x0<c[1].x&&u.y+u.y1>c[0].y&&u.y+u.y0<c[1].y))){for(var m,y=e.sprite,v=e.width>>5,w=n[0]>>5,b=e.x-(v<<4),M=127&b,x=32-M,N=e.y1-e.y0,D=(e.y+e.y0)*w+(b>>5),k=0;k<N;k++){m=0;for(var C=0;C<=v;C++)t[D+C]|=m<<x|(C<v?(m=y[k*v+C])>>>M:0);D+=w}return delete e.sprite,!0}return!1}return O.canvas=function(n){return arguments.length?(A=y(n),O):A},O.start=function(){var r=function(n){n.width=n.height=1;var t=Math.sqrt(n.getContext("2d").getImageData(0,0,1,1).data.length>>2);n.width=2048/t,n.height=o/t;var e=n.getContext("2d");return e.fillStyle=e.strokeStyle="red",e.textAlign="center",{context:e,ratio:t}}(A()),a=function(n){var t=[],e=-1;for(;++e<n;)t[e]=0;return t}((n[0]>>5)*n[1]),u=null,c=N.length,s=-1,l=[],f=N.map((function(n,r){return n.text=t.call(this,n,r),n.font=e.call(this,n,r),n.style=w.call(this,n,r),n.weight=b.call(this,n,r),n.rotate=M.call(this,n,r),n.size=~~i.call(this,n,r),n.padding=x.call(this,n,r),n})).sort((function(n,t){return t.size-n.size}));return C&&clearInterval(C),C=setInterval(d,0),d(),O;function d(){for(var t=Date.now();Date.now()-t<D&&++s<c&&C;){var e=f[s];e.x=n[0]*(I()+.5)>>1,e.y=n[1]*(I()+.5)>>1,h(r,e,f,s),e.hasText&&E(a,e,u)&&(l.push(e),k.call("word",O,e),u?g(u,e):u=[{x:e.x+e.x0,y:e.y+e.y0},{x:e.x+e.x1,y:e.y+e.y1}],e.x-=n[0]>>1,e.y-=n[1]>>1)}s>=c&&(O.stop(),k.call("end",O,l,u))}},O.stop=function(){return C&&(clearInterval(C),C=null),O},O.timeInterval=function(n){return arguments.length?(D=null==n?1/0:n,O):D},O.words=function(n){return arguments.length?(N=n,O):N},O.size=function(t){return arguments.length?(n=[+t[0],+t[1]],O):n},O.font=function(n){return arguments.length?(e=y(n),O):e},O.fontStyle=function(n){return arguments.length?(w=y(n),O):w},O.fontWeight=function(n){return arguments.length?(b=y(n),O):b},O.rotate=function(n){return arguments.length?(M=y(n),O):M},O.text=function(n){return arguments.length?(t=y(n),O):t},O.spiral=function(n){return arguments.length?(T=v[n]||n,O):T},O.fontSize=function(n){return arguments.length?(i=y(n),O):i},O.padding=function(n){return arguments.length?(x=y(n),O):x},O.random=function(n){return arguments.length?(I=n,O):I},O.on=function(){var n=k.on.apply(k,arguments);return n===k?O:n},O};var v={archimedean:p,rectangular:function(n){var t=4*n[0]/n[1],e=0,r=0;return function(n){var i=n<0?-1:1;switch(Math.sqrt(1+4*i*n)-i&3){case 0:e+=t;break;case 1:r+=4;break;case 2:e-=t;break;default:r-=4}return[e,r]}}}},192626:(n,t,e)=>{"use strict";e.d(t,{Z:()=>c});var r={value:function(){}};function i(){for(var n,t=0,e=arguments.length,r={};t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new o(r)}function o(n){this._=n}function a(n,t){for(var e,r=0,i=n.length;r<i;++r)if((e=n[r]).name===t)return e.value}function u(n,t,e){for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n[i]=r,n=n.slice(0,i).concat(n.slice(i+1));break}return null!=e&&n.push({name:t,value:e}),n}o.prototype=i.prototype={constructor:o,on:function(n,t){var e,r,i=this._,o=(r=i,(n+"").trim().split(/^|\s+/).map((function(n){var t="",e=n.indexOf(".");if(e>=0&&(t=n.slice(e+1),n=n.slice(0,e)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:t}}))),c=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++c<s;)if(e=(n=o[c]).type)i[e]=u(i[e],n.name,t);else if(null==t)for(e in i)i[e]=u(i[e],n.name,null);return this}for(;++c<s;)if((e=(n=o[c]).type)&&(e=a(i[e],n.name)))return e},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new o(n)},call:function(n,t){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=0,e=(r=this._[n]).length;o<e;++o)r[o].value.apply(t,i)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,o=r.length;i<o;++i)r[i].value.apply(t,e)}};const c=i},88258:(n,t,e)=>{"use strict";e.d(t,{W:()=>r.Z});var r=e(192626)},22222:(n,t,e)=>{"use strict";function r(n,t){return n===t}e.d(t,{P1:()=>i});var i=function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=0,a=r.pop(),u=function(n){var t=Array.isArray(n[0])?n[0]:n;if(!t.every((function(n){return"function"===typeof n}))){var e=t.map((function(n){return typeof n})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+e+"]")}return t}(r),c=n.apply(void 0,[function(){return o++,a.apply(null,arguments)}].concat(e)),s=n((function(){for(var n=[],t=u.length,e=0;e<t;e++)n.push(u[e].apply(null,arguments));return c.apply(null,n)}));return s.resultFunc=a,s.dependencies=u,s.recomputations=function(){return o},s.resetRecomputations=function(){return o=0},s}}((function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,e=null,i=null;return function(){return function(n,t,e){if(null===t||null===e||t.length!==e.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}(t,e,arguments)||(i=n.apply(null,arguments)),e=arguments,i}}))},170406:(n,t,e)=>{"use strict";e.d(t,{D:()=>o,b:()=>a});var r=e(236377),i=e.n(r);function o(n){return i()(n)}function a(){return i()("superset-ui")()}},542149:(n,t,e)=>{"use strict";e.r(t),e.d(t,{ROTATION:()=>Ii,default:()=>Ai});var r=e(618446),i=e.n(r),o=e(667294),a=e(676929),u=e.n(a),c=e(22222);function s(n){return n&&"value"in n}function l(n){return n&&"field"in n&&!!n.field}function f(n){return l(n)&&"type"in n&&!!n.type}function h(n){return!Array.isArray(n)}function d(n){return"undefined"!==typeof n&&null!==n}function g(n,t){let e,r;if(void 0===t)for(const t of n)null!=t&&(void 0===e?t>=t&&(e=r=t):(e>t&&(e=t),r<t&&(r=t)));else{let i=-1;for(let o of n)null!=(o=t(o,++i,n))&&(void 0===e?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}const p={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"};function m(n){return"X"===n||"XBand"===n}function y(n){return"Y"===n||"YBand"===n}function v(n){return m(n)||y(n)}const w=Object.keys;function b(n,t){return"Invalid "+n+": "+String(t)+"."}const M=2006,x=["january","february","march","april","may","june","july","august","september","october","november","december"],T=x.map((n=>n.slice(0,3))),N=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],D=N.map((n=>n.slice(0,3)));function k(n){return"number"===typeof n}function C(n){return!!k(n)||!isNaN(n)&&!isNaN(parseFloat(n))}function I(n,t){const e=[];if(t&&void 0!==n.day&&w(n).length>1&&delete(n={...n}).day,void 0!==n.year?e.push(n.year):void 0!==n.day?e.push(M):e.push(0),void 0!==n.month){const r=t?function(n){if(C(n)&&(n=Number(n)),k(n))return n-1;const t=n.toLowerCase(),e=x.indexOf(t);if(-1!==e)return e;const r=t.slice(0,3),i=T.indexOf(r);if(-1!==i)return i;throw new Error(b("month",n))}(n.month):n.month;e.push(r)}else if(void 0!==n.quarter){const r=t?function(n){if(C(n)&&(n=Number(n)),k(n))return n-1;throw new Error(b("quarter",n))}(n.quarter):n.quarter;e.push(k(r)?3*r:r+"*3")}else e.push(0);if(void 0!==n.date)e.push(n.date);else if(void 0!==n.day){const r=t?function(n){if(C(n)&&(n=Number(n)),k(n))return n%7;const t=n.toLowerCase(),e=N.indexOf(t);if(-1!==e)return e;const r=t.slice(0,3),i=D.indexOf(r);if(-1!==i)return i;throw new Error(b("day",n))}(n.day):n.day;e.push(k(r)?r+1:r+"+1")}else e.push(1);return["hours","minutes","seconds","milliseconds"].forEach((t=>{const r=n[t];e.push("undefined"===typeof r?0:r)})),e}function O(n){return"number"===typeof n||"string"===typeof n?new Date(n):new Date(function(n){const t=I(n,!0);return n.utc?Number(new Date(Date.UTC(...t))):Number(new Date(...t))}(n))}function A(n){return!!n&&!(n instanceof Date)&&"string"!==typeof n&&"boolean"!==typeof n&&"number"!==typeof n&&("year"in n&&null!=n.year||"quarter"in n&&null!=n.quarter||"month"in n&&null!=n.month||"date"in n&&null!=n.date||"day"in n&&null!=n.day||"hours"in n&&null!=n.hours||"minutes"in n&&null!=n.minutes||"seconds"in n&&null!=n.seconds||"milliseconds"in n&&null!=n.milliseconds)}function E(n){return""+n}var F=e(813663);function S({formatType:n,format:t,formatInLocalTime:e}){if("time"===n){const n=F.Z.resolveTimeFormat({format:t,formatInLocalTime:e});return t=>n(t)}if("number"===n||"undefined"!==typeof t&&t.length>0){const n=F.Z.resolveNumberFormat(t);return t=>n(t)}return E}function L(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}class U{constructor(n){L(this,"channelEncoder",void 0),L(this,"config",void 0),L(this,"formatValue",void 0),this.channelEncoder=n,this.config=n.definition.axis,this.formatValue=S(this.config)}getTitle(){return this.config.title}hasTitle(){const{title:n}=this.config;return null!==n&&"undefined"!==typeof n&&""!==n}getTickLabels(){const{tickCount:n,values:t}=this.config;if("undefined"!==typeof t)return t.map((n=>this.formatValue(A(n)?O(n):n)));const{scale:e}=this.channelEncoder;if(e&&"domain"in e){return("ticks"in e?e.ticks(n):e.domain()).map(this.formatValue)}return[]}}var R=e(629208),Y=e.n(R);function q(n){return!function(n){return!1===n||null===n}(n)}const H={strategy:"flat"},P={labelAngle:40,strategy:"rotate"};function z(n,t="auto"){let e;switch(t){case"flat":e=H;break;case"rotate":e=P;break;case"auto":e=m(n)?P:H;break;default:e=t}return{...e}}const B=[p.LINEAR,p.POW,p.SQRT,p.SYMLOG,p.LOG,p.TIME,p.UTC],V=new Set(B),j=[p.QUANTILE,p.QUANTIZE,p.THRESHOLD],W=(new Set(j),B.concat(j)),Q=(new Set(W),[p.ORDINAL,p.BIN_ORDINAL,p.POINT,p.BAND]),Z=(new Set(Q),B),$=V,G=[p.BAND,p.POINT,p.ORDINAL],_=new Set(G),X=[p.BIN_ORDINAL,p.QUANTILE,p.QUANTIZE,p.THRESHOLD],J=new Set(X),K=[p.TIME,p.UTC],nn=new Set(K),tn=[p.LINEAR,p.LOG,p.POW,p.SQRT,p.SYMLOG,p.TIME,p.UTC,p.QUANTILE,p.QUANTIZE,p.THRESHOLD,p.BIN_ORDINAL,p.ORDINAL,p.POINT,p.BAND],en=new Set(tn);function rn(n,t){if(function(n,t){return f(t)&&v(n)}(n,t)&&q(t.axis)){const e=!0===t.axis||"undefined"===typeof t.axis?{}:t.axis,r=m(n),{format:i=t.format,formatType:o=t.formatType,formatInLocalTime:a=t.formatInLocalTime,labelAngle:u=0,labelFlush:c,labelOverlap:s,labelPadding:l=4,orient:f=(r?"bottom":"left"),tickCount:h=5,ticks:d=!0,title:g=t.title,titlePadding:p=4}=e,y={...e,format:i,formatType:o,labelAngle:u,labelFlush:"undefined"===typeof c?t.scale&&"undefined"!==typeof t.scale.type&&V.has(t.scale.type):c,labelOverlap:z(n,s),labelPadding:l,orient:f,tickCount:h,ticks:d,title:g,titlePadding:p};return"undefined"!==typeof a&&(y.formatInLocalTime=a),y}return!1}function on(n,t,e=!1){if("nominal"===t||"ordinal"===t)switch(n){case"XBand":case"YBand":return p.BAND;case"X":case"Y":case"Numeric":return p.POINT;case"Color":case"Category":return p.ORDINAL}else if("quantitative"===t)switch(n){case"XBand":case"YBand":case"X":case"Y":case"Numeric":return p.LINEAR;case"Color":return e?p.BIN_ORDINAL:p.LINEAR}else if("temporal"===t)switch(n){case"XBand":case"YBand":case"X":case"Y":case"Numeric":return p.UTC;case"Color":return p.LINEAR}}const an=[p.POINT,p.BAND],un=new Set(an),cn=tn.filter((n=>!un.has(n))),sn=new Set(cn),ln=new Set(Z.concat(an)),fn=new Set(W);fn.delete(p.LOG),fn.delete(p.TIME),fn.delete(p.UTC),fn.delete(p.THRESHOLD),fn.delete(p.QUANTILE);const hn={align:un,base:new Set([p.LOG]),clamp:$,constant:new Set([p.SYMLOG]),domain:en,exponent:new Set([p.POW]),interpolate:sn,nice:new Set(Z.concat([p.QUANTIZE,p.THRESHOLD])),padding:ln,paddingInner:new Set([p.BAND]),paddingOuter:un,range:en,reverse:en,round:ln,scheme:sn,type:en,unknown:new Set([p.ORDINAL]),zero:fn};function dn(n){return $.has(n.type)}function gn(n){return t="zero",e=n.type,hn[t].has(e);var t,e}const pn=new Set(["time","date","datetime","timestamp"]);function mn(n,t=""){return v(n)||"Numeric"===n?pn.has(t.toLowerCase())?"temporal":"quantitative":"nominal"}function yn(n,t){var e;if(s(t))return{...t,axis:!1,legend:!1,scale:!1,title:""};const r={...t,title:l(t)?null!=(e=t.title)?e:t.field:"",type:f(t)?t.type:mn(n,t.field)},i=function(n,t){if(f(t)&&q(t.scale)){const{scale:e={},type:r,bin:i}=t,{type:o=on(n,r,i)}=e;if("undefined"===typeof o)return!1;const a={...e,type:o};return dn(a)&&("undefined"===typeof a.nice&&(a.nice=!nn.has(o)),"undefined"===typeof a.clamp&&(a.clamp=!0)),gn(a)&&"undefined"===typeof a.zero&&(a.zero=!0),a}return!1}(n,r),o=function(n){const{formatType:t,formatInLocalTime:e,format:r,type:i,scaleType:o}=n;let a;return"undefined"!==typeof t?a=t:"quantitative"===i?a="number":"temporal"===i||"time"===o||"utc"===o?a="time":"undefined"!==typeof r&&r.length>0&&(a="number"),"time"===a?{formatType:"time",formatInLocalTime:e||"undefined"===typeof e&&"time"===o,format:r}:{formatType:a,format:r}}({...t,scaleType:i?i.type:void 0}),a={...r,...o,scale:i},u=rn(n,a),c=function(n,t){return"legend"in t&&void 0!==t.legend?t.legend:!v(n)&&"Text"!==n&&{}}(n,a);return{...a,axis:u,legend:c}}var vn=Math.sqrt(50),wn=Math.sqrt(10),bn=Math.sqrt(2);function Mn(n,t,e){var r,i,o,a,u=-1;if(e=+e,(n=+n)===(t=+t)&&e>0)return[n];if((r=t<n)&&(i=n,n=t,t=i),0===(a=xn(n,t,e))||!isFinite(a))return[];if(a>0){let e=Math.round(n/a),r=Math.round(t/a);for(e*a<n&&++e,r*a>t&&--r,o=new Array(i=r-e+1);++u<i;)o[u]=(e+u)*a}else{a=-a;let e=Math.round(n*a),r=Math.round(t*a);for(e/a<n&&++e,r/a>t&&--r,o=new Array(i=r-e+1);++u<i;)o[u]=(e+u)/a}return r&&o.reverse(),o}function xn(n,t,e){var r=(t-n)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=vn?10:o>=wn?5:o>=bn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=vn?10:o>=wn?5:o>=bn?2:1)}function Tn(n,t,e){var r=Math.abs(t-n)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=vn?i*=10:o>=wn?i*=5:o>=bn&&(i*=2),t<n?-i:i}function Nn(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function Dn(n){let t=n,e=n;function r(n,t,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){const o=r+i>>>1;e(n[o],t)<0?r=o+1:i=o}return r}return 1===n.length&&(t=(t,e)=>n(t)-e,e=function(n){return(t,e)=>Nn(n(t),e)}(n)),{left:r,center:function(n,e,i,o){null==i&&(i=0),null==o&&(o=n.length);const a=r(n,e,i,o-1);return a>i&&t(n[a-1],e)>-t(n[a],e)?a-1:a},right:function(n,t,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){const o=r+i>>>1;e(n[o],t)>0?i=o:r=o+1}return r}}}function kn(n){return null===n?NaN:+n}const Cn=Dn(Nn),In=Cn.right,On=(Cn.left,Dn(kn).center,In);function An(n,t,e){n.prototype=t.prototype=e,e.constructor=n}function En(n,t){var e=Object.create(n.prototype);for(var r in t)e[r]=t[r];return e}function Fn(){}var Sn=.7,Ln=1/Sn,Un="\\s*([+-]?\\d+)\\s*",Rn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qn=/^#([0-9a-f]{3,8})$/,Hn=new RegExp("^rgb\\("+[Un,Un,Un]+"\\)$"),Pn=new RegExp("^rgb\\("+[Yn,Yn,Yn]+"\\)$"),zn=new RegExp("^rgba\\("+[Un,Un,Un,Rn]+"\\)$"),Bn=new RegExp("^rgba\\("+[Yn,Yn,Yn,Rn]+"\\)$"),Vn=new RegExp("^hsl\\("+[Rn,Yn,Yn]+"\\)$"),jn=new RegExp("^hsla\\("+[Rn,Yn,Yn,Rn]+"\\)$"),Wn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Qn(){return this.rgb().formatHex()}function Zn(){return this.rgb().formatRgb()}function $n(n){var t,e;return n=(n+"").trim().toLowerCase(),(t=qn.exec(n))?(e=t[1].length,t=parseInt(t[1],16),6===e?Gn(t):3===e?new Kn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===e?_n(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===e?_n(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Hn.exec(n))?new Kn(t[1],t[2],t[3],1):(t=Pn.exec(n))?new Kn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=zn.exec(n))?_n(t[1],t[2],t[3],t[4]):(t=Bn.exec(n))?_n(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Vn.exec(n))?rt(t[1],t[2]/100,t[3]/100,1):(t=jn.exec(n))?rt(t[1],t[2]/100,t[3]/100,t[4]):Wn.hasOwnProperty(n)?Gn(Wn[n]):"transparent"===n?new Kn(NaN,NaN,NaN,0):null}function Gn(n){return new Kn(n>>16&255,n>>8&255,255&n,1)}function _n(n,t,e,r){return r<=0&&(n=t=e=NaN),new Kn(n,t,e,r)}function Xn(n){return n instanceof Fn||(n=$n(n)),n?new Kn((n=n.rgb()).r,n.g,n.b,n.opacity):new Kn}function Jn(n,t,e,r){return 1===arguments.length?Xn(n):new Kn(n,t,e,null==r?1:r)}function Kn(n,t,e,r){this.r=+n,this.g=+t,this.b=+e,this.opacity=+r}function nt(){return"#"+et(this.r)+et(this.g)+et(this.b)}function tt(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===n?")":", "+n+")")}function et(n){return((n=Math.max(0,Math.min(255,Math.round(n)||0)))<16?"0":"")+n.toString(16)}function rt(n,t,e,r){return r<=0?n=t=e=NaN:e<=0||e>=1?n=t=NaN:t<=0&&(n=NaN),new at(n,t,e,r)}function it(n){if(n instanceof at)return new at(n.h,n.s,n.l,n.opacity);if(n instanceof Fn||(n=$n(n)),!n)return new at;if(n instanceof at)return n;var t=(n=n.rgb()).r/255,e=n.g/255,r=n.b/255,i=Math.min(t,e,r),o=Math.max(t,e,r),a=NaN,u=o-i,c=(o+i)/2;return u?(a=t===o?(e-r)/u+6*(e<r):e===o?(r-t)/u+2:(t-e)/u+4,u/=c<.5?o+i:2-o-i,a*=60):u=c>0&&c<1?0:a,new at(a,u,c,n.opacity)}function ot(n,t,e,r){return 1===arguments.length?it(n):new at(n,t,e,null==r?1:r)}function at(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}function ut(n,t,e){return 255*(n<60?t+(e-t)*n/60:n<180?e:n<240?t+(e-t)*(240-n)/60:t)}function ct(n,t,e,r,i){var o=n*n,a=o*n;return((1-3*n+3*o-a)*t+(4-6*o+3*a)*e+(1+3*n+3*o-3*a)*r+a*i)/6}An(Fn,$n,{copy:function(n){return Object.assign(new this.constructor,this,n)},displayable:function(){return this.rgb().displayable()},hex:Qn,formatHex:Qn,formatHsl:function(){return it(this).formatHsl()},formatRgb:Zn,toString:Zn}),An(Kn,Jn,En(Fn,{brighter:function(n){return n=null==n?Ln:Math.pow(Ln,n),new Kn(this.r*n,this.g*n,this.b*n,this.opacity)},darker:function(n){return n=null==n?Sn:Math.pow(Sn,n),new Kn(this.r*n,this.g*n,this.b*n,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:nt,formatHex:nt,formatRgb:tt,toString:tt})),An(at,ot,En(Fn,{brighter:function(n){return n=null==n?Ln:Math.pow(Ln,n),new at(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?Sn:Math.pow(Sn,n),new at(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=this.h%360+360*(this.h<0),t=isNaN(n)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*t,i=2*e-r;return new Kn(ut(n>=240?n-240:n+120,i,r),ut(n,i,r),ut(n<120?n+240:n-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var n=this.opacity;return(1===(n=isNaN(n)?1:Math.max(0,Math.min(1,n)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===n?")":", "+n+")")}}));const st=n=>()=>n;function lt(n,t){return function(e){return n+e*t}}function ft(n,t){var e=t-n;return e?lt(n,e>180||e<-180?e-360*Math.round(e/360):e):st(isNaN(n)?t:n)}function ht(n){return 1===(n=+n)?dt:function(t,e){return e-t?function(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(r){return Math.pow(n+r*t,e)}}(t,e,n):st(isNaN(t)?e:t)}}function dt(n,t){var e=t-n;return e?lt(n,e):st(isNaN(n)?t:n)}const gt=function n(t){var e=ht(t);function r(n,t){var r=e((n=Jn(n)).r,(t=Jn(t)).r),i=e(n.g,t.g),o=e(n.b,t.b),a=dt(n.opacity,t.opacity);return function(t){return n.r=r(t),n.g=i(t),n.b=o(t),n.opacity=a(t),n+""}}return r.gamma=n,r}(1);function pt(n){return function(t){var e,r,i=t.length,o=new Array(i),a=new Array(i),u=new Array(i);for(e=0;e<i;++e)r=Jn(t[e]),o[e]=r.r||0,a[e]=r.g||0,u[e]=r.b||0;return o=n(o),a=n(a),u=n(u),r.opacity=1,function(n){return r.r=o(n),r.g=a(n),r.b=u(n),r+""}}}pt((function(n){var t=n.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,t-1):Math.floor(e*t),i=n[r],o=n[r+1],a=r>0?n[r-1]:2*i-o,u=r<t-1?n[r+2]:2*o-i;return ct((e-r/t)*t,a,i,o,u)}})),pt((function(n){var t=n.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*t),i=n[(r+t-1)%t],o=n[r%t],a=n[(r+1)%t],u=n[(r+2)%t];return ct((e-r/t)*t,i,o,a,u)}}));function mt(n,t){var e,r=t?t.length:0,i=n?Math.min(r,n.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=Nt(n[e],t[e]);for(;e<r;++e)a[e]=t[e];return function(n){for(e=0;e<i;++e)a[e]=o[e](n);return a}}function yt(n,t){var e=new Date;return n=+n,t=+t,function(r){return e.setTime(n*(1-r)+t*r),e}}function vt(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function wt(n,t){var e,r={},i={};for(e in null!==n&&"object"===typeof n||(n={}),null!==t&&"object"===typeof t||(t={}),t)e in n?r[e]=Nt(n[e],t[e]):i[e]=t[e];return function(n){for(e in r)i[e]=r[e](n);return i}}var bt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mt=new RegExp(bt.source,"g");function xt(n,t){var e,r,i,o=bt.lastIndex=Mt.lastIndex=0,a=-1,u=[],c=[];for(n+="",t+="";(e=bt.exec(n))&&(r=Mt.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,c.push({i:a,x:vt(e,r)})),o=Mt.lastIndex;return o<t.length&&(i=t.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?function(n){return function(t){return n(t)+""}}(c[0].x):function(n){return function(){return n}}(t):(t=c.length,function(n){for(var e,r=0;r<t;++r)u[(e=c[r]).i]=e.x(n);return u.join("")})}function Tt(n,t){t||(t=[]);var e,r=n?Math.min(t.length,n.length):0,i=t.slice();return function(o){for(e=0;e<r;++e)i[e]=n[e]*(1-o)+t[e]*o;return i}}function Nt(n,t){var e,r,i=typeof t;return null==t||"boolean"===i?st(t):("number"===i?vt:"string"===i?(e=$n(t))?(t=e,gt):xt:t instanceof $n?gt:t instanceof Date?yt:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?mt:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?wt:vt:Tt))(n,t)}function Dt(n,t){return n=+n,t=+t,function(e){return Math.round(n*(1-e)+t*e)}}function kt(n){return+n}var Ct=[0,1];function It(n){return n}function Ot(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:(e=isNaN(t)?NaN:.5,function(){return e});var e}function At(n,t,e){var r=n[0],i=n[1],o=t[0],a=t[1];return i<r?(r=Ot(i,r),o=e(a,o)):(r=Ot(r,i),o=e(o,a)),function(n){return o(r(n))}}function Et(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Ot(n[a],n[a+1]),o[a]=e(t[a],t[a+1]);return function(t){var e=On(n,t,1,r)-1;return o[e](i[e](t))}}function Ft(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function St(){var n,t,e,r,i,o,a=Ct,u=Ct,c=Nt,s=It;function l(){var n,t,e,c=Math.min(a.length,u.length);return s!==It&&(n=a[0],t=a[c-1],n>t&&(e=n,n=t,t=e),s=function(e){return Math.max(n,Math.min(t,e))}),r=c>2?Et:At,i=o=null,f}function f(t){return null==t||isNaN(t=+t)?e:(i||(i=r(a.map(n),u,c)))(n(s(t)))}return f.invert=function(e){return s(t((o||(o=r(u,a.map(n),vt)))(e)))},f.domain=function(n){return arguments.length?(a=Array.from(n,kt),l()):a.slice()},f.range=function(n){return arguments.length?(u=Array.from(n),l()):u.slice()},f.rangeRound=function(n){return u=Array.from(n),c=Dt,l()},f.clamp=function(n){return arguments.length?(s=!!n||It,l()):s!==It},f.interpolate=function(n){return arguments.length?(c=n,l()):c},f.unknown=function(n){return arguments.length?(e=n,f):e},function(e,r){return n=e,t=r,l()}}function Lt(){return St()(It,It)}function Ut(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n)}return this}var Rt=e(516722);function Yt(n){var t=n.domain;return n.ticks=function(n){var e=t();return Mn(e[0],e[e.length-1],null==n?10:n)},n.tickFormat=function(n,e){var r=t();return function(n,t,e,r){var i,o=Tn(n,t,e);switch((r=(0,Rt.YQ)(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(n),Math.abs(t));return null!=r.precision||isNaN(i=(0,Rt.S5)(o,a))||(r.precision=i),(0,Rt.jH)(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=(0,Rt.F0)(o,Math.max(Math.abs(n),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=(0,Rt.zB)(o))||(r.precision=i-2*("%"===r.type))}return(0,Rt.WU)(r)}(r[0],r[r.length-1],null==n?10:n,e)},n.nice=function(e){null==e&&(e=10);var r,i,o=t(),a=0,u=o.length-1,c=o[a],s=o[u],l=10;for(s<c&&(i=c,c=s,s=i,i=a,a=u,u=i);l-- >0;){if((i=xn(c,s,e))===r)return o[a]=c,o[u]=s,t(o);if(i>0)c=Math.floor(c/i)*i,s=Math.ceil(s/i)*i;else{if(!(i<0))break;c=Math.ceil(c*i)/i,s=Math.floor(s*i)/i}r=i}return n},n}function qt(){var n=Lt();return n.copy=function(){return Ft(n,qt())},Ut.apply(n,arguments),Yt(n)}function Ht(n,t){var e,r=0,i=(n=n.slice()).length-1,o=n[r],a=n[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),n[r]=t.floor(o),n[i]=t.ceil(a),n}function Pt(n){return Math.log(n)}function zt(n){return Math.exp(n)}function Bt(n){return-Math.log(-n)}function Vt(n){return-Math.exp(-n)}function jt(n){return isFinite(n)?+("1e"+n):n<0?0:n}function Wt(n){return function(t){return-n(-t)}}function Qt(n){var t,e,r=n(Pt,zt),i=r.domain,o=10;function a(){return t=function(n){return n===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n})}(o),e=function(n){return 10===n?jt:n===Math.E?Math.exp:function(t){return Math.pow(n,t)}}(o),i()[0]<0?(t=Wt(t),e=Wt(e),n(Bt,Vt)):n(Pt,zt),r}return r.base=function(n){return arguments.length?(o=+n,a()):o},r.domain=function(n){return arguments.length?(i(n),a()):i()},r.ticks=function(n){var r,a=i(),u=a[0],c=a[a.length-1];(r=c<u)&&(h=u,u=c,c=h);var s,l,f,h=t(u),d=t(c),g=null==n?10:+n,p=[];if(!(o%1)&&d-h<g){if(h=Math.floor(h),d=Math.ceil(d),u>0){for(;h<=d;++h)for(l=1,s=e(h);l<o;++l)if(!((f=s*l)<u)){if(f>c)break;p.push(f)}}else for(;h<=d;++h)for(l=o-1,s=e(h);l>=1;--l)if(!((f=s*l)<u)){if(f>c)break;p.push(f)}2*p.length<g&&(p=Mn(u,c,g))}else p=Mn(h,d,Math.min(d-h,g)).map(e);return r?p.reverse():p},r.tickFormat=function(n,i){if(null==i&&(i=10===o?".0e":","),"function"!==typeof i&&(i=(0,Rt.WU)(i)),n===1/0)return i;null==n&&(n=10);var a=Math.max(1,o*n/r.ticks().length);return function(n){var r=n/e(Math.round(t(n)));return r*o<o-.5&&(r*=o),r<=a?i(n):""}},r.nice=function(){return i(Ht(i(),{floor:function(n){return e(Math.floor(t(n)))},ceil:function(n){return e(Math.ceil(t(n)))}}))},r}function Zt(){var n=Qt(St()).domain([1,10]);return n.copy=function(){return Ft(n,Zt()).base(n.base())},Ut.apply(n,arguments),n}function $t(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function Gt(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function _t(n){return n<0?-n*n:n*n}function Xt(n){var t=n(It,It),e=1;return t.exponent=function(t){return arguments.length?1===(e=+t)?n(It,It):.5===e?n(Gt,_t):n($t(e),$t(1/e)):e},Yt(t)}function Jt(){var n=Xt(St());return n.copy=function(){return Ft(n,Jt()).exponent(n.exponent())},Ut.apply(n,arguments),n}const Kt=1e3,ne=6e4,te=36e5,ee=864e5,re=6048e5,ie=2592e6,oe=31536e6;var ae=new Date,ue=new Date;function ce(n,t,e,r){function i(t){return n(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return n(t=new Date(+t)),t},i.ceil=function(e){return n(e=new Date(e-1)),t(e,1),n(e),e},i.round=function(n){var t=i(n),e=i.ceil(n);return n-t<e-n?t:e},i.offset=function(n,e){return t(n=new Date(+n),null==e?1:Math.floor(e)),n},i.range=function(e,r,o){var a,u=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r)||!(o>0))return u;do{u.push(a=new Date(+e)),t(e,o),n(e)}while(a<e&&e<r);return u},i.filter=function(e){return ce((function(t){if(t>=t)for(;n(t),!e(t);)t.setTime(t-1)}),(function(n,r){if(n>=n)if(r<0)for(;++r<=0;)for(;t(n,-1),!e(n););else for(;--r>=0;)for(;t(n,1),!e(n););}))},e&&(i.count=function(t,r){return ae.setTime(+t),ue.setTime(+r),n(ae),n(ue),Math.floor(e(ae,ue))},i.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?i.filter(r?function(t){return r(t)%n===0}:function(t){return i.count(0,t)%n===0}):i:null}),i}var se=ce((function(){}),(function(n,t){n.setTime(+n+t)}),(function(n,t){return t-n}));se.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?ce((function(t){t.setTime(Math.floor(t/n)*n)}),(function(t,e){t.setTime(+t+e*n)}),(function(t,e){return(e-t)/n})):se:null};const le=se;se.range;var fe=ce((function(n){n.setTime(n-n.getMilliseconds())}),(function(n,t){n.setTime(+n+t*Kt)}),(function(n,t){return(t-n)/Kt}),(function(n){return n.getUTCSeconds()}));const he=fe;fe.range;var de=ce((function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*Kt)}),(function(n,t){n.setTime(+n+t*ne)}),(function(n,t){return(t-n)/ne}),(function(n){return n.getMinutes()}));const ge=de;de.range;var pe=ce((function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*Kt-n.getMinutes()*ne)}),(function(n,t){n.setTime(+n+t*te)}),(function(n,t){return(t-n)/te}),(function(n){return n.getHours()}));const me=pe;pe.range;var ye=ce((n=>n.setHours(0,0,0,0)),((n,t)=>n.setDate(n.getDate()+t)),((n,t)=>(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*ne)/ee),(n=>n.getDate()-1));const ve=ye;ye.range;function we(n){return ce((function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)}),(function(n,t){n.setDate(n.getDate()+7*t)}),(function(n,t){return(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*ne)/re}))}var be=we(0),Me=we(1),xe=we(2),Te=we(3),Ne=we(4),De=we(5),ke=we(6),Ce=(be.range,Me.range,xe.range,Te.range,Ne.range,De.range,ke.range,ce((function(n){n.setDate(1),n.setHours(0,0,0,0)}),(function(n,t){n.setMonth(n.getMonth()+t)}),(function(n,t){return t.getMonth()-n.getMonth()+12*(t.getFullYear()-n.getFullYear())}),(function(n){return n.getMonth()})));const Ie=Ce;Ce.range;var Oe=ce((function(n){n.setMonth(0,1),n.setHours(0,0,0,0)}),(function(n,t){n.setFullYear(n.getFullYear()+t)}),(function(n,t){return t.getFullYear()-n.getFullYear()}),(function(n){return n.getFullYear()}));Oe.every=function(n){return isFinite(n=Math.floor(n))&&n>0?ce((function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e*n)})):null};const Ae=Oe;Oe.range;var Ee=ce((function(n){n.setUTCSeconds(0,0)}),(function(n,t){n.setTime(+n+t*ne)}),(function(n,t){return(t-n)/ne}),(function(n){return n.getUTCMinutes()}));const Fe=Ee;Ee.range;var Se=ce((function(n){n.setUTCMinutes(0,0,0)}),(function(n,t){n.setTime(+n+t*te)}),(function(n,t){return(t-n)/te}),(function(n){return n.getUTCHours()}));const Le=Se;Se.range;var Ue=ce((function(n){n.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCDate(n.getUTCDate()+t)}),(function(n,t){return(t-n)/ee}),(function(n){return n.getUTCDate()-1}));const Re=Ue;Ue.range;function Ye(n){return ce((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCDate(n.getUTCDate()+7*t)}),(function(n,t){return(t-n)/re}))}var qe=Ye(0),He=Ye(1),Pe=Ye(2),ze=Ye(3),Be=Ye(4),Ve=Ye(5),je=Ye(6),We=(qe.range,He.range,Pe.range,ze.range,Be.range,Ve.range,je.range,ce((function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCMonth(n.getUTCMonth()+t)}),(function(n,t){return t.getUTCMonth()-n.getUTCMonth()+12*(t.getUTCFullYear()-n.getUTCFullYear())}),(function(n){return n.getUTCMonth()})));const Qe=We;We.range;var Ze=ce((function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCFullYear(n.getUTCFullYear()+t)}),(function(n,t){return t.getUTCFullYear()-n.getUTCFullYear()}),(function(n){return n.getUTCFullYear()}));Ze.every=function(n){return isFinite(n=Math.floor(n))&&n>0?ce((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)})):null};const $e=Ze;Ze.range;function Ge(n,t,e,r,i,o){const a=[[he,1,Kt],[he,5,5e3],[he,15,15e3],[he,30,3e4],[o,1,ne],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,te],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,ee],[r,2,1728e5],[e,1,re],[t,1,ie],[t,3,7776e6],[n,1,oe]];function u(t,e,r){const i=Math.abs(e-t)/r,o=Dn((([,,n])=>n)).right(a,i);if(o===a.length)return n.every(Tn(t/oe,e/oe,r));if(0===o)return le.every(Math.max(Tn(t,e,r),1));const[u,c]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return u.every(c)}return[function(n,t,e){const r=t<n;r&&([n,t]=[t,n]);const i=e&&"function"===typeof e.range?e:u(n,t,e),o=i?i.range(n,+t+1):[];return r?o.reverse():o},u]}const[_e,Xe]=Ge($e,Qe,qe,Re,Le,Fe),[Je,Ke]=Ge(Ae,Ie,be,ve,me,ge);var nr=e(990317);function tr(n){return new Date(n)}function er(n){return n instanceof Date?+n:+new Date(+n)}function rr(n,t,e,r,i,o,a,u,c,s){var l=Lt(),f=l.invert,h=l.domain,d=s(".%L"),g=s(":%S"),p=s("%I:%M"),m=s("%I %p"),y=s("%a %d"),v=s("%b %d"),w=s("%B"),b=s("%Y");function M(n){return(c(n)<n?d:u(n)<n?g:a(n)<n?p:o(n)<n?m:r(n)<n?i(n)<n?y:v:e(n)<n?w:b)(n)}return l.invert=function(n){return new Date(f(n))},l.domain=function(n){return arguments.length?h(Array.from(n,er)):h().map(tr)},l.ticks=function(t){var e=h();return n(e[0],e[e.length-1],null==t?10:t)},l.tickFormat=function(n,t){return null==t?M:s(t)},l.nice=function(n){var e=h();return n&&"function"===typeof n.range||(n=t(e[0],e[e.length-1],null==n?10:n)),n?h(Ht(e,n)):l},l.copy=function(){return Ft(l,rr(n,t,e,r,i,o,a,u,c,s))},l}function ir(n,t,e=kn){if(r=n.length){if((t=+t)<=0||r<2)return+e(n[0],0,n);if(t>=1)return+e(n[r-1],r-1,n);var r,i=(r-1)*t,o=Math.floor(i),a=+e(n[o],o,n);return a+(+e(n[o+1],o+1,n)-a)*(i-o)}}function or(){var n,t=[],e=[],r=[];function i(){var n=0,i=Math.max(1,e.length);for(r=new Array(i-1);++n<i;)r[n-1]=ir(t,n/i);return o}function o(t){return null==t||isNaN(t=+t)?n:e[On(r,t)]}return o.invertExtent=function(n){var i=e.indexOf(n);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},o.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let e of n)null==e||isNaN(e=+e)||t.push(e);return t.sort(Nn),i()},o.range=function(n){return arguments.length?(e=Array.from(n),i()):e.slice()},o.unknown=function(t){return arguments.length?(n=t,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return or().domain(t).range(e).unknown(n)},Ut.apply(o,arguments)}function ar(){var n,t=0,e=1,r=1,i=[.5],o=[0,1];function a(t){return null!=t&&t<=t?o[On(i,t,0,r)]:n}function u(){var n=-1;for(i=new Array(r);++n<r;)i[n]=((n+1)*e-(n-r)*t)/(r+1);return a}return a.domain=function(n){return arguments.length?([t,e]=n,t=+t,e=+e,u()):[t,e]},a.range=function(n){return arguments.length?(r=(o=Array.from(n)).length-1,u()):o.slice()},a.invertExtent=function(n){var a=o.indexOf(n);return a<0?[NaN,NaN]:a<1?[t,i[0]]:a>=r?[i[r-1],e]:[i[a-1],i[a]]},a.unknown=function(t){return arguments.length?(n=t,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return ar().domain([t,e]).range(o).unknown(n)},Ut.apply(Yt(a),arguments)}function ur(){var n,t=[.5],e=[0,1],r=1;function i(i){return null!=i&&i<=i?e[On(t,i,0,r)]:n}return i.domain=function(n){return arguments.length?(t=Array.from(n),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(n){return arguments.length?(e=Array.from(n),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(n){var r=e.indexOf(n);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(n=t,i):n},i.copy=function(){return ur().domain(t).range(e).unknown(n)},Ut.apply(i,arguments)}const cr=Symbol("implicit");function sr(){var n=new Map,t=[],e=[],r=cr;function i(i){var o=i+"",a=n.get(o);if(!a){if(r!==cr)return r;n.set(o,a=t.push(i))}return e[(a-1)%e.length]}return i.domain=function(e){if(!arguments.length)return t.slice();t=[],n=new Map;for(const r of e){const e=r+"";n.has(e)||n.set(e,t.push(r))}return i},i.range=function(n){return arguments.length?(e=Array.from(n),i):e.slice()},i.unknown=function(n){return arguments.length?(r=n,i):r},i.copy=function(){return sr(t,e).unknown(r)},Ut.apply(i,arguments),i}function lr(){var n,t,e=sr().unknown(void 0),r=e.domain,i=e.range,o=0,a=1,u=!1,c=0,s=0,l=.5;function f(){var e=r().length,f=a<o,h=f?a:o,d=f?o:a;n=(d-h)/Math.max(1,e-c+2*s),u&&(n=Math.floor(n)),h+=(d-h-n*(e-c))*l,t=n*(1-c),u&&(h=Math.round(h),t=Math.round(t));var g=function(n,t,e){n=+n,t=+t,e=(i=arguments.length)<2?(t=n,n=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((t-n)/e)),o=new Array(i);++r<i;)o[r]=n+r*e;return o}(e).map((function(t){return h+n*t}));return i(f?g.reverse():g)}return delete e.unknown,e.domain=function(n){return arguments.length?(r(n),f()):r()},e.range=function(n){return arguments.length?([o,a]=n,o=+o,a=+a,f()):[o,a]},e.rangeRound=function(n){return[o,a]=n,o=+o,a=+a,u=!0,f()},e.bandwidth=function(){return t},e.step=function(){return n},e.round=function(n){return arguments.length?(u=!!n,f()):u},e.padding=function(n){return arguments.length?(c=Math.min(1,s=+n),f()):c},e.paddingInner=function(n){return arguments.length?(c=Math.min(1,n),f()):c},e.paddingOuter=function(n){return arguments.length?(s=+n,f()):s},e.align=function(n){return arguments.length?(l=Math.max(0,Math.min(1,n)),f()):l},e.copy=function(){return lr(r(),[o,a]).round(u).paddingInner(c).paddingOuter(s).align(l)},Ut.apply(f(),arguments)}function fr(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return fr(t())},n}function hr(){return fr(lr.apply(null,arguments).paddingInner(1))}function dr(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function gr(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function pr(){var n=function(n){var t=1,e=n(dr(t),gr(t));return e.constant=function(e){return arguments.length?n(dr(t=+e),gr(t)):t},Yt(e)}(St());return n.copy=function(){return Ft(n,pr()).constant(n.constant())},Ut.apply(n,arguments)}function mr(n){switch(n){case p.LINEAR:return qt();case p.LOG:return Zt();case p.POW:return Jt();case p.SQRT:return function(){return Jt.apply(null,arguments).exponent(.5)}();case p.TIME:return function(){return Ut.apply(rr(Je,Ke,Ae,Ie,be,ve,me,ge,he,nr.i$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}();case p.UTC:return function(){return Ut.apply(rr(_e,Xe,$e,Qe,qe,Re,Le,Fe,he,nr.g0).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}();case p.QUANTILE:return or();case p.QUANTIZE:return ar();case p.THRESHOLD:return ur();case p.ORDINAL:return sr();case p.POINT:return hr();case p.BAND:return lr();case p.SYMLOG:return pr();case p.BIN_ORDINAL:throw new Error('"type = '+n+'" is not supported yet.');default:return qt()}}const yr={day:ve,hour:me,minute:ge,month:Ie,second:he,week:be,year:Ae},vr={day:Re,hour:Le,minute:Fe,month:Qe,second:he,week:qe,year:$e};function wr(n,t){if("nice"in n&&"undefined"!==typeof n.nice&&"nice"in t){const{nice:e}=n;if("boolean"===typeof e)e&&t.nice();else if("number"===typeof e)t.nice(e);else{const r=t,{type:i}=n;if("string"===typeof e)r.nice(i===p.UTC?vr[e]:yr[e]);else{const{interval:n,step:t}=e,o=(i===p.UTC?vr[n]:yr[n]).every(t);null!==o&&r.nice(o)}}}}function br(n,t){return n&&$.has(t)}function Mr(n,t){if("zero"in n&&!0===n.zero&&br(t,n.type)){const n=t.domain(),[e,r]=n,i=r<e,[o,a]=i?[r,e]:[e,r],u=[Math.min(0,o),Math.max(0,a)];t.domain(i?u.reverse():u)}}const xr=Math.PI/180,Tr=180/Math.PI,Nr=.96422,Dr=1,kr=.82521,Cr=4/29,Ir=6/29,Or=3*Ir*Ir,Ar=.008856451679035631;function Er(n){if(n instanceof Sr)return new Sr(n.l,n.a,n.b,n.opacity);if(n instanceof Pr)return zr(n);n instanceof Kn||(n=Xn(n));var t,e,r=Yr(n.r),i=Yr(n.g),o=Yr(n.b),a=Lr((.2225045*r+.7168786*i+.0606169*o)/Dr);return r===i&&i===o?t=e=a:(t=Lr((.4360747*r+.3850649*i+.1430804*o)/Nr),e=Lr((.0139322*r+.0971045*i+.7141733*o)/kr)),new Sr(116*a-16,500*(t-a),200*(a-e),n.opacity)}function Fr(n,t,e,r){return 1===arguments.length?Er(n):new Sr(n,t,e,null==r?1:r)}function Sr(n,t,e,r){this.l=+n,this.a=+t,this.b=+e,this.opacity=+r}function Lr(n){return n>Ar?Math.pow(n,1/3):n/Or+Cr}function Ur(n){return n>Ir?n*n*n:Or*(n-Cr)}function Rr(n){return 255*(n<=.0031308?12.92*n:1.055*Math.pow(n,1/2.4)-.055)}function Yr(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function qr(n){if(n instanceof Pr)return new Pr(n.h,n.c,n.l,n.opacity);if(n instanceof Sr||(n=Er(n)),0===n.a&&0===n.b)return new Pr(NaN,0<n.l&&n.l<100?0:NaN,n.l,n.opacity);var t=Math.atan2(n.b,n.a)*Tr;return new Pr(t<0?t+360:t,Math.sqrt(n.a*n.a+n.b*n.b),n.l,n.opacity)}function Hr(n,t,e,r){return 1===arguments.length?qr(n):new Pr(n,t,e,null==r?1:r)}function Pr(n,t,e,r){this.h=+n,this.c=+t,this.l=+e,this.opacity=+r}function zr(n){if(isNaN(n.h))return new Sr(n.l,0,0,n.opacity);var t=n.h*xr;return new Sr(n.l,Math.cos(t)*n.c,Math.sin(t)*n.c,n.opacity)}function Br(n){return function(t,e){var r=n((t=Hr(t)).h,(e=Hr(e)).h),i=dt(t.c,e.c),o=dt(t.l,e.l),a=dt(t.opacity,e.opacity);return function(n){return t.h=r(n),t.c=i(n),t.l=o(n),t.opacity=a(n),t+""}}}An(Sr,Fr,En(Fn,{brighter:function(n){return new Sr(this.l+18*(null==n?1:n),this.a,this.b,this.opacity)},darker:function(n){return new Sr(this.l-18*(null==n?1:n),this.a,this.b,this.opacity)},rgb:function(){var n=(this.l+16)/116,t=isNaN(this.a)?n:n+this.a/500,e=isNaN(this.b)?n:n-this.b/200;return new Kn(Rr(3.1338561*(t=Nr*Ur(t))-1.6168667*(n=Dr*Ur(n))-.4906146*(e=kr*Ur(e))),Rr(-.9787684*t+1.9161415*n+.033454*e),Rr(.0719453*t-.2289914*n+1.4052427*e),this.opacity)}})),An(Pr,Hr,En(Fn,{brighter:function(n){return new Pr(this.h,this.c,this.l+18*(null==n?1:n),this.opacity)},darker:function(n){return new Pr(this.h,this.c,this.l-18*(null==n?1:n),this.opacity)},rgb:function(){return zr(this).rgb()}}));const Vr=Br(ft);var jr=Br(dt);function Wr(n){return function(t,e){var r=n((t=ot(t)).h,(e=ot(e)).h),i=dt(t.s,e.s),o=dt(t.l,e.l),a=dt(t.opacity,e.opacity);return function(n){return t.h=r(n),t.s=i(n),t.l=o(n),t.opacity=a(n),t+""}}}const Qr=Wr(ft);var Zr=Wr(dt),$r=-.14861,Gr=1.78277,_r=-.29227,Xr=-.90649,Jr=1.97294,Kr=Jr*Xr,ni=Jr*Gr,ti=Gr*_r-Xr*$r;function ei(n,t,e,r){return 1===arguments.length?function(n){if(n instanceof ri)return new ri(n.h,n.s,n.l,n.opacity);n instanceof Kn||(n=Xn(n));var t=n.r/255,e=n.g/255,r=n.b/255,i=(ti*r+Kr*t-ni*e)/(ti+Kr-ni),o=r-i,a=(Jr*(e-i)-_r*o)/Xr,u=Math.sqrt(a*a+o*o)/(Jr*i*(1-i)),c=u?Math.atan2(a,o)*Tr-120:NaN;return new ri(c<0?c+360:c,u,i,n.opacity)}(n):new ri(n,t,e,null==r?1:r)}function ri(n,t,e,r){this.h=+n,this.s=+t,this.l=+e,this.opacity=+r}function ii(n){return function t(e){function r(t,r){var i=n((t=ei(t)).h,(r=ei(r)).h),o=dt(t.s,r.s),a=dt(t.l,r.l),u=dt(t.opacity,r.opacity);return function(n){return t.h=i(n),t.s=o(n),t.l=a(Math.pow(n,e)),t.opacity=u(n),t+""}}return e=+e,r.gamma=t,r}(1)}An(ri,ei,En(Fn,{brighter:function(n){return n=null==n?Ln:Math.pow(Ln,n),new ri(this.h,this.s,this.l*n,this.opacity)},darker:function(n){return n=null==n?Sn:Math.pow(Sn,n),new ri(this.h,this.s,this.l*n,this.opacity)},rgb:function(){var n=isNaN(this.h)?0:(this.h+120)*xr,t=+this.l,e=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(n),i=Math.sin(n);return new Kn(255*(t+e*($r*r+Gr*i)),255*(t+e*(_r*r+Xr*i)),255*(t+e*(Jr*r)),this.opacity)}}));const oi={lab:function(n,t){var e=dt((n=Fr(n)).l,(t=Fr(t)).l),r=dt(n.a,t.a),i=dt(n.b,t.b),o=dt(n.opacity,t.opacity);return function(t){return n.l=e(t),n.a=r(t),n.b=i(t),n.opacity=o(t),n+""}},hcl:Vr,"hcl-long":jr,hsl:Qr,"hsl-long":Zr,cubehelix:ii(ft),"cubehelix-long":ii(dt),rgb:gt};function ai(n,t){"interpolate"in n&&"undefined"!==typeof n.interpolate&&"interpolate"in t&&t.interpolate(function(n){switch(n){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return oi[n]}const{type:t,gamma:e}=n,r=oi[t];return"undefined"===typeof e?r:r.gamma(e)}(n.interpolate))}function ui(n,t){return nn.has(t)?n.filter((n=>"boolean"!==typeof n)).map((n=>"string"===typeof n||"number"===typeof n?new Date(n):n)):n.map((n=>"string"===typeof n||"boolean"===typeof n?Number(n):n))}function ci(n){return n.map((n=>""+n))}function si(n,t){if(n.length>0&&function(n){return n.every(d)}(n))return n;if(2===n.length&&2===t.length&&n.filter(d).length>0){const[e,r]=n,[i,o]=t;let a=i;d(e)&&(a=e.valueOf()>i.valueOf()?e:i);let u=o;return d(r)&&(u=r.valueOf()<o.valueOf()?r:o),[a,u]}return t}function li(n){return n.filter((n=>"undefined"!==typeof n&&null!==n))}function fi(n){return n.map((n=>n instanceof Date||!A(n)?n:O(n)))}function hi(n,t,e){const{reverse:r,type:i}=n,o=function(n){return n?n=>n.concat().reverse():n=>n}(r);if(br(t,i)&&dn(n)||function(n,t){return n&&J.has(t)}(t,i)&&function(n){return J.has(n.type)}(n))n.domain?2!==(a=n.domain).length||null!=a[0]&&null!=a[1]?t.domain(o(fi(n.domain))):e&&t.domain(o(si(ui(fi(n.domain),i),ui(li(e),i)))):e&&t.domain(o(ui(li(e),i)));else if(function(n,t){return n&&_.has(t)}(t,i)&&function(n){return _.has(n.type)}(n))if(n.domain){const r=ci(fi(n.domain));t.domain(o(e?function(n,t=[]){if(0===n.length)return t;const e=new Set(n);return n.concat(t.filter((n=>!e.has(n))))}(r,ci(e)):r))}else e&&t.domain(o(ci(e)));var a}var di=e(671525);function gi(n){return"[object String]"!==Object.prototype.toString.call(n)}function pi(n,t){const{range:e,domain:r}=n;if("undefined"===typeof e){if("scheme"in n&&"undefined"!==typeof n.scheme){const{scheme:e}=n;let i,o,a;dn(n)&&r&&(o=r.length),gi(e)?(i=e.name,e.count&&(o=e.count),a=e.extent):i=e;const u=F.Z.resolveColorScheme({name:i,type:"sequential"});if("undefined"!==typeof u&&"sequential"===u.type){const n=(0,di.Z)(u);t.range(n.getColors(o,a))}}}else t.range(e)}function mi(n,t){return hi(t,n),pi(t,n),function(n,t){"align"in n&&"undefined"!==typeof n.align&&"align"in t&&t.align(n.align)}(t,n),function(n,t){"base"in n&&"undefined"!==typeof n.base&&"base"in t&&t.base(n.base)}(t,n),function(n,t){"clamp"in n&&!0===n.clamp&&"clamp"in t&&t.clamp(n.clamp)}(t,n),function(n,t){"exponent"in n&&"undefined"!==typeof n.exponent&&"exponent"in t&&t.exponent(n.exponent)}(t,n),ai(t,n),wr(t,n),function(n,t){"padding"in n&&"undefined"!==typeof n.padding&&"padding"in t&&t.padding(n.padding),"paddingInner"in n&&"undefined"!==typeof n.paddingInner&&"paddingInner"in t&&t.paddingInner(n.paddingInner),"paddingOuter"in n&&"undefined"!==typeof n.paddingOuter&&"paddingOuter"in t&&t.paddingOuter(n.paddingOuter)}(t,n),function(n,t){if("round"in n&&!0===n.round){const e=t;"round"in e?e.round(n.round):e.interpolate(Dt)}}(t,n),Mr(t,n),n}const yi=function(n){const{range:t}=n;if(n.type===p.ORDINAL&&"undefined"===typeof t){const t="scheme"in n?n.scheme:void 0,e=F.Z.getCategoricalColorScaleResolver();let r;r="undefined"===typeof t?e({}):gi(t)?e(t):e({name:t});const i=r;return hi(n,i),i}return mi(mr(n.type),n)};function vi(n){return n}function wi(n){return"value"in n}function bi(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}class Mi{constructor({name:n,channelType:t,definition:e}){var r;if(bi(this,"name",void 0),bi(this,"channelType",void 0),bi(this,"originalDefinition",void 0),bi(this,"definition",void 0),bi(this,"scale",void 0),bi(this,"axis",void 0),bi(this,"getValue",void 0),bi(this,"encodeFunc",void 0),bi(this,"formatValue",void 0),bi(this,"encodeValue",((n,t)=>"undefined"===typeof t||null!==n&&"undefined"!==typeof n?this.encodeFunc(n):t)),bi(this,"encodeDatum",((n,t)=>"undefined"===typeof t?this.encodeValue(this.getValueFromDatum(n)):this.encodeValue(this.getValueFromDatum(n),t))),bi(this,"formatDatum",(n=>this.formatValue(this.getValueFromDatum(n)))),bi(this,"getValueFromDatum",((n,t)=>{const e=this.getValue(n);return void 0===t||null!==e&&void 0!==e?e:t})),bi(this,"getDomainFromDataset",(n=>{if(s(this.definition)){const{value:n}=this.definition;return[n]}const{type:t}=this.definition;if("nominal"===t||"ordinal"===t)return Array.from(new Set(n.map((n=>this.getValueFromDatum(n)))));if("quantitative"===t){if(this.definition.scale&&"quantile"===this.definition.scale.type)return n.map((n=>this.getValueFromDatum(n)));const t=g(n,(n=>this.getValueFromDatum(n)));return"undefined"===typeof t[0]?[0,1]:t}if("temporal"===t){const t=g(n,(n=>this.getValueFromDatum(n)));return"undefined"===typeof t[0]?[0,1]:t}return[]})),this.name=n,this.channelType=t,this.originalDefinition=e,this.definition=yn(this.channelType,e),this.getValue=s(r=this.definition)?()=>r.value:"undefined"!==typeof r.field?n=>Y()(n,r.field):()=>{},this.formatValue=l(this.definition)?S(this.definition):E,this.definition.scale){const n=yi(this.definition.scale);this.encodeFunc=t=>n(t),this.scale=n}else{const{definition:n}=this;this.encodeFunc=wi(n)?()=>n.value:vi}this.definition.axis&&(this.axis=new U(this))}getDomain(){return this.scale&&"domain"in this.scale?this.scale.domain():[]}setDomain(n){if(!1!==this.definition.scale&&this.scale&&!this.hasCategoricalColorScale()&&"domain"in this.scale){const t=this.definition.scale;hi(t,this.scale,n),pi(t,this.scale),Mr(t,this.scale),wr(t,this.scale)}return this}setDomainFromDataset(n){return this.scale&&"domain"in this.scale?this.setDomain(this.getDomainFromDataset(n)):this}getTitle(){return this.definition.title}isGroupBy(){if(f(this.definition)){const{type:n}=this.definition;return"Category"===this.channelType||"Text"===this.channelType||"Color"===this.channelType&&("nominal"===n||"ordinal"===n)||v(this.channelType)&&("nominal"===n||"ordinal"===n)}return!1}isX(){return m(this.channelType)}isXOrY(){return v(this.channelType)}isY(){return y(this.channelType)}hasCategoricalColorScale(){const n=this.definition.scale;return this.scale&&n&&n.type===p.ORDINAL&&"undefined"===typeof n.range}hasLegend(){return!1!==this.definition.legend}hasValueDefinition(){return wi(this.definition)}hasFieldDefinition(){return"field"in this.definition}}function xi(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}class Ti{constructor({channelTypes:n,encoding:t}){xi(this,"encoding",void 0),xi(this,"channelTypes",void 0),xi(this,"channels",void 0),xi(this,"legends",void 0),this.channelTypes=n,this.encoding=t;const e=this.getChannelNames(),r={};e.forEach((e=>{const i=t[e];if(Array.isArray(i)){const t=i;r[e]=t.map(((t,r)=>new Mi({channelType:n[e],definition:t,name:e+"["+r+"]"})))}else{const t=i;r[e]=new Mi({channelType:n[e],definition:t,name:e})}})),this.channels=r,this.legends={},e.map((n=>this.channels[n])).forEach((n=>{if(h(n)&&n.hasLegend()&&f(n.definition)){const{field:t}=n.definition,e=n;this.legends[t]?this.legends[t].push(e):this.legends[t]=[e]}}))}getChannelNames(){return Object.keys(this.channelTypes)}getChannelEncoders(){return this.getChannelNames().flatMap((n=>this.channels[n]))}getGroupBys(){const n=this.getChannelEncoders().filter((n=>n.isGroupBy())).map((n=>n.definition.field));return Array.from(new Set(n))}createLegendItemsFactory(n){const t=this.getChannelEncoders().filter((n=>h(n)&&s(n.definition))).flat().concat(this.legends[n]);return n=>n.map((n=>({input:n,output:t.reduce(((t,e)=>{const r=t;return r[e.name]=e.encodeValue(n),r}),{})})))}getLegendInformation(n=[]){return Object.keys(this.legends).map((t=>{const e=this.legends[t],r=e[0],i=r.definition,o=this.createLegendItemsFactory(t);return"nominal"===i.type?{channelEncoders:e,createLegendItems:o,field:t,items:o(r.getDomainFromDataset(n)),type:i.type}:{channelEncoders:e,createLegendItems:o,field:t,type:i.type}}))}setDomainFromDataset(n){return this.getChannelEncoders().forEach((t=>{t.setDomainFromDataset(n)})),this}hasLegend(){return Object.keys(this.legends).length>0}}var Ni=e(170406),Di=e(468135),ki=e(211965);const Ci=(0,Ni.D)("superset-ui"),Ii={flat:()=>0,random:()=>30*Math.floor(6*Ci()-3),square:()=>90*Math.floor(2*Ci())};class Oi extends o.PureComponent{constructor(n){super(n),this.isComponentMounted=!1,this.wordCloudEncoderFactory=function(n){const{channelTypes:t}=n,e="defaultEncoding"in n?t=>function(n,t){return{...n,...t}}(n.defaultEncoding,t):n.completeEncoding,r=(n={})=>new Ti({channelTypes:t,encoding:e(n)});return{channelTypes:t,create:r,createSelector:()=>(0,c.P1)((n=>n),r),DEFAULT_ENCODING:e({})}}({channelTypes:{color:"Color",fontFamily:"Category",fontSize:"Numeric",fontWeight:"Category",text:"Text"},defaultEncoding:{color:{value:this.props.theme.colors.grayscale.dark2},fontFamily:{value:this.props.theme.typography.families.sansSerif},fontSize:{value:20},fontWeight:{value:"bold"},text:{value:""}}}),this.createEncoder=this.wordCloudEncoderFactory.createSelector(),this.state={words:[],scaleFactor:1},this.setWords=this.setWords.bind(this)}componentDidMount(){this.isComponentMounted=!0,this.update()}componentDidUpdate(n){const{data:t,encoding:e,width:r,height:o,rotation:a}=this.props;i()(n.data,t)&&i()(n.encoding,e)&&n.width===r&&n.height===o&&n.rotation===a||this.update()}componentWillUnmount(){this.isComponentMounted=!1}setWords(n){this.isComponentMounted&&this.setState({words:n})}update(){const{data:n,encoding:t}=this.props,e=this.createEncoder(t);e.setDomainFromDataset(n);const r=[...n].sort(((n,t)=>e.channels.fontSize.encodeDatum(t,0)-e.channels.fontSize.encodeDatum(n,0))),i=Math.max(.1*r.length,10),o=r.slice(0,i);this.generateCloud(e,1,(n=>o.every((t=>n.find((({text:n})=>e.channels.text.getValueFromDatum(t)===n))))))}generateCloud(n,t,e){const{data:r,width:i,height:o,rotation:a}=this.props;u()().size([i*t,o*t]).words(r.map((n=>({...n})))).padding(5).rotate(Ii[a]||Ii.flat).text((t=>n.channels.text.getValueFromDatum(t))).font((t=>n.channels.fontFamily.encodeDatum(t,this.props.theme.typography.families.sansSerif))).fontWeight((t=>n.channels.fontWeight.encodeDatum(t,"normal"))).fontSize((t=>n.channels.fontSize.encodeDatum(t,0))).on("end",(r=>{e(r)||t>3?this.isComponentMounted&&this.setState({words:r,scaleFactor:t}):this.generateCloud(n,t+.5,e)})).start()}render(){const{scaleFactor:n}=this.state,{width:t,height:e,encoding:r,sliceId:i}=this.props,{words:o}=this.state,a=this.createEncoder(r);a.channels.color.setDomainFromDataset(o);const{getValueFromDatum:u}=a.channels.color,c=a.channels.color.scale,s=t*n,l=e*n;return(0,ki.tZ)("svg",{width:t,height:e,viewBox:`-${s/2} -${l/2} ${s} ${l}`},(0,ki.tZ)("g",null,o.map((n=>(0,ki.tZ)("text",{key:n.text,fontSize:`${n.size}px`,fontWeight:n.weight,fontFamily:n.font,fill:c(u(n),i),textAnchor:"middle",transform:`translate(${n.x}, ${n.y}) rotate(${n.rotate})`},n.text)))))}}Oi.defaultProps={encoding:{},rotation:"flat"};const Ai=(0,Di.b)(Oi)},175042:()=>{}}]);