"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[63651],{212946:(e,t,a)=>{a.d(t,{iv:()=>Z,cx:()=>w});var r=a(684792);var n={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function o(e){var t=Object.create(null);return function(a){return void 0===t[a]&&(t[a]=e(a)),t[a]}}var l=/[A-Z]|^ms/g,i=/_EMO_([^_]+?)_([^]*?)_EMO_/g,s=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},u=o((function(e){return s(e)?e:e.replace(l,"-$&").toLowerCase()})),d=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(i,(function(e,t,a){return h={name:t,styles:a,next:h},t}))}return 1===n[e]||s(e)||"number"!==typeof t||0===t?t:t+"px"};function f(e,t,a){if(null==a)return"";if(void 0!==a.__emotion_styles)return a;switch(typeof a){case"boolean":return"";case"object":if(1===a.anim)return h={name:a.name,styles:a.styles,next:h},a.name;if(void 0!==a.styles){var r=a.next;if(void 0!==r)for(;void 0!==r;)h={name:r.name,styles:r.styles,next:h},r=r.next;return a.styles+";"}return function(e,t,a){var r="";if(Array.isArray(a))for(var n=0;n<a.length;n++)r+=f(e,t,a[n])+";";else for(var o in a){var l=a[o];if("object"!==typeof l)null!=t&&void 0!==t[l]?r+=o+"{"+t[l]+"}":c(l)&&(r+=u(o)+":"+d(o,l)+";");else if(!Array.isArray(l)||"string"!==typeof l[0]||null!=t&&void 0!==t[l[0]]){var i=f(e,t,l);switch(o){case"animation":case"animationName":r+=u(o)+":"+i+";";break;default:r+=o+"{"+i+"}"}}else for(var s=0;s<l.length;s++)c(l[s])&&(r+=u(o)+":"+d(o,l[s])+";")}return r}(e,t,a);case"function":if(void 0!==e){var n=h,o=a(e);return h=n,f(e,t,o)}}if(null==t)return a;var l=t[a];return void 0!==l?l:a}var h,p=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var m=function(e,t,a){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,n="";h=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,n+=f(a,t,o)):n+=o[0];for(var l=1;l<e.length;l++)n+=f(a,t,e[l]),r&&(n+=o[l]);p.lastIndex=0;for(var i,s="";null!==(i=p.exec(n));)s+="-"+i[1];var c=function(e){for(var t,a=0,r=0,n=e.length;n>=4;++r,n-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),a=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&a)+(59797*(a>>>16)<<16);switch(n){case 3:a^=(255&e.charCodeAt(r+2))<<16;case 2:a^=(255&e.charCodeAt(r+1))<<8;case 1:a=1540483477*(65535&(a^=255&e.charCodeAt(r)))+(59797*(a>>>16)<<16)}return(((a=1540483477*(65535&(a^=a>>>13))+(59797*(a>>>16)<<16))^a>>>15)>>>0).toString(36)}(n)+s;return{name:c,styles:n,next:h}};function v(e,t,a){var r="";return a.split(" ").forEach((function(a){void 0!==e[a]?t.push(e[a]+";"):r+=a+" "})),r}function y(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function g(e,t,a){var r=[],n=v(e,r,a);return r.length<2?a:n+t(r)}var b=function e(t){for(var a="",r=0;r<t.length;r++){var n=t[r];if(null!=n){var o=void 0;switch(typeof n){case"boolean":break;case"object":if(Array.isArray(n))o=e(n);else for(var l in o="",n)n[l]&&l&&(o&&(o+=" "),o+=l);break;default:o=n}o&&(a&&(a+=" "),a+=o)}}return a},_=function(e){var t=(0,r.Z)(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var a=function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var n=m(a,t.registered,void 0);return function(e,t,a){!function(e,t,a){var r=e.key+"-"+t.name;!1===a&&void 0===e.registered[r]&&(e.registered[r]=t.styles)}(e,t,a);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var n=t;do{e.insert(t===n?"."+r:"",n,e.sheet,!0),n=n.next}while(void 0!==n)}}(t,n,!1),t.key+"-"+n.name};return{css:a,cx:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return g(t.registered,a,b(r))},injectGlobal:function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var n=m(a,t.registered);y(t,n)},keyframes:function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var n=m(a,t.registered),o="animation-"+n.name;return y(t,{name:n.name,styles:"@keyframes "+o+"{"+n.styles+"}"}),o},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:v.bind(null,t.registered),merge:g.bind(null,t.registered,a)}}({key:"css"}),w=(_.flush,_.hydrate,_.cx),Z=(_.merge,_.getRegisteredStyles,_.injectGlobal,_.keyframes,_.css);_.sheet,_.cache},596638:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(260229),n=a(667294),o=a(592770);const l=function(e){var t=(0,r.CR)((0,n.useState)(e),2),a=t[0],l=t[1];return[a,(0,n.useCallback)((function(e){l((function(t){var a=(0,o.mf)(e)?e(t):e;return a?(0,r.pi)((0,r.pi)({},t),a):t}))}),[])]}},419485:(e,t,a)=>{a.r(t),a.d(t,{FETCH_DASHBOARDS_FAILED:()=>f,FETCH_DASHBOARDS_SUCCEEDED:()=>u,INIT_RICH_TEXT:()=>C,REMOVE_SAVE_MODAL_ALERT:()=>w,SAVE_RICH_TEXT_SUCCESS:()=>S,SAVE_SLICE_FAILED:()=>y,SAVE_SLICE_SUCCESS:()=>b,SET_SAVE_CHART_MODAL_VISIBILITY:()=>p,createDashboard:()=>I,createSlice:()=>M,errorHandle:()=>R,fetchDashboards:()=>v,fetchDashboardsFailed:()=>h,fetchDashboardsSucceeded:()=>d,getDashboard:()=>O,getSliceDashboards:()=>T,getSlicePayload:()=>E,removeSaveModalAlert:()=>Z,saveRichTextSuccess:()=>x,saveSlice:()=>j,saveSliceFailed:()=>g,saveSliceSuccess:()=>_,setSaveChartModalVisibility:()=>m,todoRichTextState:()=>A,updateSlice:()=>D});var r=a(115926),n=a.n(r),o=a(431069),l=a(455867),i=a(672570),s=a(112515);const c=/^adhoc_filters/,u="FETCH_DASHBOARDS_SUCCEEDED";function d(e){return{type:u,choices:e}}const f="FETCH_DASHBOARDS_FAILED";function h(e){return{type:f,userId:e}}const p="SET_SAVE_CHART_MODAL_VISIBILITY";function m(e){return{type:p,isVisible:e}}function v(e){return function(t){return o.Z.get({endpoint:`/dashboardasync/api/read?_flt_0_owners=${e}`}).then((({json:e})=>{const a=e.pks.map(((t,a)=>({value:t,label:(e.result[a]||{}).dashboard_title})));return a.sort(((e,t)=>e.label.localeCompare(t.label,{sensitivity:"base",numeric:!0}))),t(d(a))})).catch((()=>t(h(e))))}}const y="SAVE_SLICE_FAILED";function g(e=""){return{type:y,msg:e}}const b="SAVE_SLICE_SUCCESS";function _(e){return{type:b,data:e}}const w="REMOVE_SAVE_MODAL_ALERT";function Z(){return{type:w}}const C=[{type:"paragraph",children:[{text:""}]}],S="SAVE_RICH_TEXT_SUCCESS";function x(e){return{type:S,data:e}}const E=(e,t,a,r,n,o)=>{const l=Object.entries(t).reduce(((e,[t,a])=>c.test(t)?{...e,[t]:null==a?void 0:a.filter((e=>!e.isExtra))}:e),{}),i={...t,...l,dashboards:a},[u,d]=i.datasource.split("__");"rich_text"===i.viz_type&&(i.rich_data_text=o);return{params:JSON.stringify(i),slice_name:e,viz_type:i.viz_type,datasource_id:parseInt(u,10),datasource_type:d,dashboards:a,owners:r,query_context:JSON.stringify((0,s.u)({formData:i,force:!1,resultFormat:"json",resultType:"full",setDataMask:null,ownState:null})),slice_group_id:n}},k=(e,t,a)=>{const r=[];return e?r.push((0,i.ws)((0,l.t)("Chart [%s] has been saved",t))):r.push((0,i.ws)((0,l.t)("Chart [%s] has been overwritten",t))),a&&(a.new?r.push((0,i.ws)((0,l.t)("Dashboard [%s] just got created and chart [%s] was added to it",a.title,t))):r.push((0,i.ws)((0,l.t)("Chart [%s] was added to dashboard [%s]",t,a.title)))),r},A=e=>async t=>{t(x(e))},D=({slice_id:e,owners:t},a,r,n,l)=>async(i,s)=>{const{explore:{form_data:{url_params:c,...u}},saveModal:{richTextData:d}}=s();try{const s=await o.Z.put({endpoint:`/api/v1/chart/${e}`,jsonPayload:E(a,u,r,t,l,d)});return i(_()),k(!1,a,n).map(i),s.json}catch(e){throw R(e,i),e}},R=(e,t)=>{var a;null==e||null==(a=e.json())||a.then((e=>{t(g(null==e?void 0:e.message))}))},M=(e,t,a,r=[],n)=>async(l,i)=>{const{explore:{form_data:{url_params:s,...c}},saveModal:{richTextData:u}}=i();try{const i=await o.Z.post({endpoint:"/api/v1/chart/",jsonPayload:E(e,c,t,r,n,u)});return l(_()),k(!0,e,a).map(l),i.json}catch(e){throw R(e,l),e}},I=(e,t)=>async a=>{try{return(await o.Z.post({endpoint:"/api/v1/dashboard/",jsonPayload:{dashboard_title:e,dashboard_group_id:t}})).json}catch(e){throw a(g()),e}},O=e=>async t=>{try{return(await o.Z.get({endpoint:`/api/v1/dashboard/${e}`})).json}catch(e){throw t(g()),e}},T=e=>async t=>{try{return(await o.Z.get({endpoint:`/api/v1/chart/${e.slice_id}?q=${n().encode({columns:["dashboards.id"]})}`})).json.result.dashboards.map((({id:e})=>e))}catch(e){throw t(g()),e}};function j(e,t){return a=>{const r=(0,s.H6)({formData:e,endpointType:"base",force:!1,curUrl:null,requestParams:t}),n=(0,s.u)({formData:e,force:!1,resultFormat:"json",resultType:"full"});return o.Z.post({url:r,postPayload:{form_data:e,query_context:n}}).then((e=>(a(_(e.json)),e.json))).catch((()=>a(g())))}}},466400:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K});var r=a(205872),n=a.n(r),o=a(667294),l=a(751995),i=a(431069),s=a(455867),c=a(211965),u=a(218156),d=a(604942),f=a(318933),h=a(818397),p=a(828216),m=a(419485),v=a(212946),y=(a(973935),a(653014)),g=a(855241),b=a(734041),_=a(579941),w=a(74401),Z=a(596638);const C=({onChange:e})=>{const[t,a]=(0,Z.Z)({displayColorPicker:!1,color:"#fff"}),r=(0,_.ZP)({default:{color:{width:"36px",height:"14px",borderRadius:"2px",background:t.color},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return(0,c.tZ)("div",{title:"\u6587\u5b57\u989c\u8272"},(0,c.tZ)("div",{style:r.swatch,onClick:()=>{a({displayColorPicker:!t.displayColorPicker})}},(0,c.tZ)("div",{style:r.color})),t.displayColorPicker?(0,c.tZ)("div",{style:r.popover},(0,c.tZ)("div",{style:r.cover,onClick:()=>{a({displayColorPicker:!1})}}),(0,c.tZ)(w.xS,{color:t.color,onChange:({hex:t})=>{a({color:t}),e&&e(t)}})):null)},S=o.forwardRef((({className:e,active:t,reversed:a,...r},o)=>(0,c.tZ)("span",n()({},r,{ref:o,className:(0,v.cx)(e,v.iv`
          cursor: pointer;
          color: ${a?t?"white":"#aaa":t?"black":"#ccc"};
        `)})))),x=o.forwardRef((({className:e,...t},a)=>(0,c.tZ)("span",n()({},t,{ref:a,className:(0,v.cx)("material-icons",e,v.iv`
          font-size: 18px;
          vertical-align: text-bottom;
        `)})))),E=o.forwardRef((({className:e,svg:t,title:a,popoverDom:r,...o},l)=>{const i=(0,c.tZ)(y.Z,n()({},o,{ref:l,className:(0,v.cx)("material-icons",e,v.iv`
            font-size: 18px;
            vertical-align: text-bottom;
          `),component:t}));return r?(0,c.tZ)(g.Z,{content:r,title:"\u8bf7\u9009\u62e9",trigger:"hover"},i):i})),k=o.forwardRef((({className:e,...t},a)=>(0,c.tZ)("div",n()({},t,{"data-test-id":"menu",ref:a,className:(0,v.cx)(e,v.iv`
          & > * {
            display: inline-block;
          }

          & > * + * {
            margin-left: 15px;
          }
        `)})))),A=o.forwardRef((({className:e,...t},a)=>(0,c.tZ)(k,n()({},t,{ref:a,className:(0,v.cx)(e,v.iv`
          position: relative;
          padding: 1px 18px 17px;
          margin: 0 -20px;
          border-bottom: 2px solid #eee;
          margin-bottom: 20px;
        `)})))),D=o.forwardRef((({className:e,title:t,handleFontsizeChange:a,...r},n)=>(0,c.tZ)(b.Z,{defaultValue:"12",onChange:a,options:[{value:"12",label:"12"},{value:"14",label:"14"},{value:"16",label:"16"},{value:"20",label:"20"},{value:"22",label:"22"},{value:"24",label:"24"},{value:"36",label:"36"},{value:"42",label:"42"},{value:"48",label:"48"},{value:"72",label:"72"}]}))),R=o.forwardRef((({className:e,title:t,handleColorChange:a,...r},n)=>(0,c.tZ)(C,{onChange:a}))),M=o.forwardRef((({className:e,title:t,handleFontfamilyChange:a,...r},n)=>(0,c.tZ)(b.Z,{defaultValue:"SimSun",onChange:a,options:[{value:"SimSun",label:"\u5b8b\u4f53"},{value:"cursive",label:"\u8349\u4e66"},{value:"SimHei",label:"\u9ed1\u4f53"},{value:"fangsong",label:"\u4eff\u5b8b"},{value:"fantasy",label:"\u7f57\u66fc"},{value:"YouYuan",label:"\u5e7c\u5706"},{value:"KaiTi",label:"\u6977\u4f53"},{value:"LiSu",label:"\u96b6\u4e66"},{value:"monospace",label:"\u7b49\u5bbd\u5b57\u4f53"},{value:"sans-serif",label:"\u65e0\u886c\u7ebf\u4f53"}]})));var I,O;function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},T.apply(this,arguments)}const j=function(e){return o.createElement("svg",T({width:64,height:80,viewBox:"0 0 64 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),I||(I=o.createElement("path",{d:"M53.233 10.74h0L63.5 21.796V79.5H.5V.5h43.281l9.452 10.24z",fill:"currentColor",stroke:"currentColor"})),O||(O=o.createElement("path",{d:"M44 0v22.4h20",stroke:"currentColor"})))},L=a.p+"0c35d18bf06992036b69.woff2";var N=a(835932),V=a(774069),z=a(931097);const H={"mod+b":"bold","mod+i":"italic","mod+u":"underline","mod+`":"code"},F=["numbered-list","bulleted-list"],$=["left","center","right","justify"],P=l.iK.div`
  /* fallback */
  @font-face {
    font-family: 'Material Icons';
    font-style: normal;
    font-weight: 400;
    src: url(${L}) format('woff2');
    // src: url(https://fonts.gstatic.com/s/materialicons/v140/flUhRq6tzZclQEJ-Vdg-IuiaDsNc.woff2) format('woff2');
  }

  .material-icons {
    font-family: 'Material Icons';
    font-weight: normal;
    font-style: normal;
    font-size: 24px;
    line-height: 1;
    letter-spacing: normal;
    text-transform: none;
    display: inline-block;
    white-space: nowrap;
    word-wrap: normal;
    direction: ltr;
    -webkit-font-feature-settings: 'liga';
    -webkit-font-smoothing: antialiased;
  }
`,U=(e,t)=>{B(e,t)?f.ML.removeMark(e,t):f.ML.addMark(e,t,!0)},q=(e,t,a="type")=>{const{selection:r}=e;if(!r)return!1;const[n]=Array.from(f.ML.nodes(e,{at:f.ML.unhangRange(e,r),match:e=>!f.ML.isEditor(e)&&f.W_.isElement(e)&&e[a]===t}));return!!n},B=(e,t)=>{const a=f.ML.marks(e);return!!a&&!0===a[t]},G=({attributes:e,children:t,element:a})=>{const r={textAlign:a.align};switch(a.type){case"block-quote":return(0,c.tZ)("blockquote",n()({style:r},e),t);case"bulleted-list":return(0,c.tZ)("ul",n()({style:r},e),t);case"heading-one":return(0,c.tZ)("h1",n()({style:r},e),t);case"heading-two":return(0,c.tZ)("h2",n()({style:r},e),t);case"list-item":return(0,c.tZ)("li",n()({style:r},e),t);case"numbered-list":return(0,c.tZ)("ol",n()({style:r},e),t);case"column_metrics":return(0,c.tZ)("span",n()({style:r},e),t);default:return(0,c.tZ)("p",n()({style:r},e),t)}},J=({attributes:e,children:t,leaf:a})=>(a.bold&&(t=(0,c.tZ)("strong",null,t)),a.code&&(t=(0,c.tZ)("code",null,t)),a.italic&&(t=(0,c.tZ)("em",null,t)),a.underline&&(t=(0,c.tZ)("u",null,t)),a["font-size"]&&(t=(0,c.tZ)("span",n()({},e,{style:{fontSize:`${a["font-size"]}px`}}),t)),a["font-color"]&&(t=(0,c.tZ)("span",n()({},e,{style:{...e.style,color:`${a["font-color"]}`}}),t)),a["font-family"]&&(t=(0,c.tZ)("span",n()({},e,{style:{...e.style,fontFamily:`${a["font-family"]}`}}),t)),(0,c.tZ)("span",e,t)),Y=({format:e,icon:t,title:a})=>{const r=(0,d.ui)();return(0,c.tZ)(z.Z,{title:a},(0,c.tZ)(S,{active:q(r,e,$.includes(e)?"align":"type"),onMouseDown:t=>{t.preventDefault(),((e,t)=>{const a=q(e,t,$.includes(t)?"align":"type"),r=F.includes(t);let n;if(f.YR.unwrapNodes(e,{match:e=>!f.ML.isEditor(e)&&f.W_.isElement(e)&&F.includes(e.type)&&!$.includes(t),split:!0}),n=$.includes(t)?{align:a?void 0:t}:{type:a?"paragraph":r?"list-item":t},f.YR.setNodes(e,n),!a&&r){const a={type:t,children:[]};f.YR.wrapNodes(e,a)}})(r,e)}},(0,c.tZ)(x,null,t)))},W=({format:e,icon:t,title:a})=>{const r=(0,d.ui)();return(0,c.tZ)(z.Z,{title:a},(0,c.tZ)(S,{active:B(r,e),onMouseDown:t=>{t.preventDefault(),U(r,e)}},(0,c.tZ)(x,null,t)))},X=({format:e,title:t,svg:a,popoverDom:r})=>{const n=(0,d.ui)();return(0,c.tZ)(S,{onMouseDown:t=>{t.preventDefault(),U(n,e)}},(0,c.tZ)(E,{svg:a,title:t,popoverDom:r}))},K=e=>{var t,a;const{data:r,slice_id:n,theme:l}=e,{width:v,height:y}=e,g=(null==r?void 0:r[0])||{},b=(0,p.I0)(),[_,w]=(0,o.useState)(m.INIT_RICH_TEXT),[Z,C]=(0,o.useState)(_),[S,x]=(0,o.useState)(!1),[E,k]=(0,o.useState)(!1),I=(0,p.v9)((e=>e)),O=((null==I||null==(t=I.explore)||null==(a=t.controls)?void 0:a.time_range)||{}).value;O&&"No filter"!==O&&O.split(" : ").length;const T=window.location.pathname.includes("/explore/"),L=(0,o.useCallback)((e=>(0,c.tZ)(G,e)),[]),z=(0,o.useCallback)((e=>(0,c.tZ)(J,e)),[]),F=(0,o.useMemo)((()=>(0,h.VC)((0,d.BU)((0,f.Jh)()))),[]),$=(0,o.useMemo)((()=>(0,h.VC)((0,d.BU)((0,f.Jh)()))),[]);(0,o.useEffect)((()=>{n&&(x(!0),i.Z.get({endpoint:`/api/v1/chart/${n}`}).then((({json:e})=>{var t;let a=null==e||null==(t=e.result)?void 0:t.query_context;try{var r,n;a=JSON.parse(a);let e=null==(r=a)||null==(n=r.form_data)?void 0:n.rich_data_text;e&&(T||(e=B(e)),w(e)),x(!1)}catch{}})).catch((e=>{x(!1)})).finally((()=>{x(!1)})))}),[n]);const q=e=>"<<"+e+">>",B=e=>{for(let t=0;t<e.length;t++){let a=e[t];a.children&&a.children.length>0&&B(a.children);Object.keys(g||{}).map((e=>q(e))).forEach((e=>{var t;let r=null==a||null==(t=a.text)||null==t.trim?void 0:t.trim();if((null==r?void 0:r.indexOf(e))>-1){var n;let t=null==e||null==e.replaceAll?void 0:e.replaceAll("<<","");t=null==(n=t)||null==n.replaceAll?void 0:n.replaceAll(">>","");const o=null==r||null==r.replaceAll?void 0:r.replaceAll(e,g[t]);a.text=o}}))}return e};(0,o.useEffect)((()=>{let e=JSON.parse(JSON.stringify(_));e=B(e),C(e)}),[_]);if(S)return null;const K=()=>{k(!1)},Q=T?y-75:y;return(0,c.tZ)(P,{css:c.iv`
        width: ${v}px;
        height: ${y}px;
      `},(0,c.tZ)(d.mH,{editor:F,initialValue:_,onChange:e=>{b((0,m.saveRichTextSuccess)(e)),w(e)}},T&&(0,c.tZ)(A,null,(0,c.tZ)(W,{format:"bold",icon:"format_bold",title:"\u5b57\u4f53\u52a0\u7c97"}),(0,c.tZ)(W,{format:"italic",icon:"format_italic",title:"\u659c\u4f53"}),(0,c.tZ)(W,{format:"underline",icon:"format_underlined",title:"\u4e0b\u5212\u7ebf"}),(0,c.tZ)(W,{format:"code",icon:"code",title:"\u884c\u7c7b\u4ee3\u7801"}),(0,c.tZ)(D,{format:"font-size",handleFontsizeChange:e=>{f.ML.addMark(F,"font-size",e)}}),(0,c.tZ)(M,{format:"font-family",handleFontfamilyChange:e=>{f.ML.addMark(F,"font-family",e)}}),(0,c.tZ)(Y,{format:"heading-one",icon:"looks_one",title:"\u6807\u9898\u4e00"}),(0,c.tZ)(Y,{format:"heading-two",icon:"looks_two",title:"\u6807\u9898\u4e8c"}),(0,c.tZ)(Y,{format:"block-quote",icon:"format_quote",title:"\u5f15\u7528"}),(0,c.tZ)(Y,{format:"numbered-list",icon:"format_list_numbered",title:"\u6709\u5e8f\u5217\u8868"}),(0,c.tZ)(Y,{format:"bulleted-list",icon:"format_list_bulleted",title:"\u65e0\u5e8f\u5217\u8868"}),(0,c.tZ)(Y,{format:"left",icon:"format_align_left",title:"\u5de6\u5bf9\u9f50"}),(0,c.tZ)(Y,{format:"center",icon:"format_align_center",title:"\u5c45\u4e2d\u5bf9\u9f50"}),(0,c.tZ)(Y,{format:"right",icon:"format_align_right",title:"\u53f3\u5bf9\u9f50"}),(0,c.tZ)(Y,{format:"justify",icon:"format_align_justify",title:"\u4e24\u7aef\u5bf9\u9f50"}),(0,c.tZ)(R,{handleColorChange:e=>{f.ML.addMark(F,"font-color",e)}}),(0,c.tZ)(X,{title:"\u63d2\u5165\u7ef4\u5ea6",format:"insert-dimension",svg:j,popoverDom:()=>{const e=Object.keys(g);return e.length?e.map((e=>(0,c.tZ)("p",{className:"popover-item",onClick:()=>{F.insertText(`<<${e}>>`)}},e))):(0,c.tZ)("span",null,(0,s.t)("There is currently no data available"))}})),(0,c.tZ)("div",{style:{width:v,height:Q,overflowY:"scroll"}},(0,c.tZ)(d.CX,{renderElement:L,renderLeaf:z,placeholder:"Enter some rich text\u2026",readOnly:!T,spellCheck:!0,autoFocus:!0,onKeyDown:e=>{for(const t in H)if((0,u.ZP)(t,e)){e.preventDefault();U(F,H[t])}}}))),T&&(0,c.tZ)(N.Z,{style:{position:"absolute",bottom:10,right:10},onClick:()=>{k(!0)}},(0,s.t)("preview")),E&&(0,c.tZ)(V.Z,{show:E,onHide:null!=K?K:()=>null,css:c.iv`
            .ant-modal-body {
              display: flex;
              flex-direction: column;
            }
          `,title:(0,s.t)("preview"),footer:(0,c.tZ)((()=>(0,c.tZ)(o.Fragment,null,(0,c.tZ)(N.Z,{buttonStyle:"primary",buttonSize:"small",onClick:K,"data-test":"close-drilltodetail-modal"},(0,s.t)("Close")))),null),responsive:!0,resizable:!0,resizableConfig:{minHeight:128*l.gridUnit,minWidth:128*l.gridUnit,defaultSize:{width:"auto",height:"75vh"}},draggable:!0,destroyOnClose:!0,maskClosable:!1},(0,c.tZ)(d.mH,{editor:$,initialValue:Z},(0,c.tZ)(d.CX,{renderElement:L,renderLeaf:z,placeholder:"Enter some rich text\u2026",readOnly:!0,spellCheck:!0,autoFocus:!0}))))}}}]);