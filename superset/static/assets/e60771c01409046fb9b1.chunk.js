(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[72178],{72178:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>j});var a=l(23279),n=l.n(a),o=l(607739),r=l.n(o),i=l(667294),s=l(970553),u=l(828216),d=l(455867),c=l(890057),v=l(52004),f=(l(454076),l(714670)),h=l.n(f),p=l(356080),g=l(436968),b=l.n(g),m=(l(973935),l(867e3)),y=l(981945),S=l(708509),x=l(246789),C=l(401498),w=l(555453),Z=l(751995),k=l(211965),T=l(800038);const O=Z.iK.div`
  ${()=>k.iv`
    overflow-x: hidden;
    display: flex;
    flex-direction: column;
    // &::-webkit-scrollBar {
    //   display: none;
    // }
  `}
`,R=Z.iK.div`
  display: flex;
  justify-content: space-between;
  height: 40px;
  line-height: 40px;
`,A=e=>{const{list:t,selectList:l,onClick:a=(()=>{})}=e,n=(0,u.v9)((e=>{var t;return(null==(t=e.dashboardState)?void 0:t.emulateRatio)||{width:350,height:680}}));return(0,k.tZ)(O,{style:{height:`calc(${n.height}px - 360px)`}},t.map((e=>{const{nodeType:t}=e,n=e[t]||"--",o=l.filter((t=>t.nodeType===e.nodeType&&t.value===e.value&&t.label===e.label));return(0,k.tZ)(R,{onClick:()=>{a(e)}},(0,k.tZ)("span",{style:{fontSize:"14px"}},n),o.length?(0,k.tZ)(T.Z,{style:{color:"var(--active-title-color)",height:"3em"}}):null)})))},E=(e,t)=>{const{options:l,onChange:a,filterState:n}=e,[o,r]=(0,i.useState)([l]),[s,d]=(0,i.useState)([]),[c,v]=(0,i.useState)(0),[f,h]=(0,i.useState)(new Array(o.length).fill("\u8bf7\u9009\u62e9")),p=Array.from(new Set(f)),g=(0,u.v9)((e=>{var t;return(null==(t=e.dashboardState)?void 0:t.emulateRatio)||{width:350,height:680}}));(0,i.useEffect)((()=>{if(n.value&&n.value.length>0){const e=n.value;d(e)}}),[n.value]),(0,i.useImperativeHandle)(t,(()=>({handleRestTudo:b})));const b=()=>{const e=[l];r(e),d([]),v(0),h(new Array(e.length).fill("\u8bf7\u9009\u62e9"))};return(0,k.tZ)("div",{style:{height:`calc(${g.height}px - 260px)`}},(0,k.tZ)(y.mQ,{activeKey:c.toString(),onChange:e=>{v(parseInt(e))}},o.map(((e,t)=>(0,k.tZ)(y.mQ.Tab,{title:p[t],key:t,style:{fontSize:"16px"}},(0,k.tZ)(A,{list:e,selectList:s,onClick:e=>{const l=[...f];l.fill("\u8bf7\u9009\u62e9",c),l[c]=e.label,h(l);const n=s.filter((t=>e.nodeType===t.nodeType&&e.value===t.value&&e.label===t.label));if(e.children){const a=o.slice(0,t+1);a.push(e.children),r(a),h([...l,"\u8bf7\u9009\u62e9"]),v(c+1)}else if(n.length){const t=s.filter((t=>e.nodeType===t.nodeType&&e.value!==t.value&&e.label!==t.label));if(0===t.length){const e=[...p];e[e.length-1]="\u8bf7\u9009\u62e9",h(e)}d(t),a(t,e)}else d([...s,e]),a([...s,e],e)}}))))))},N=(0,i.forwardRef)(E),D=e=>{const{onCancel:t=(()=>{}),onConfirm:l=(()=>{}),onSelect:a=(()=>{}),onChange:n=(()=>{}),onRest:o=(()=>{}),visible:r,name:s,options:u,filterState:d}=e,c=(0,i.useRef)();return(0,k.tZ)(S.Z,{visible:r,onMaskClick:()=>{t()},position:"bottom",bodyStyle:{width:"100%"}},(0,k.tZ)(w.Z,null,(0,k.tZ)(C.Z,{text:s}),(0,k.tZ)(N,{ref:c,options:u,visible:r,filterState:d,onChange:(e,t)=>{n(e,t)}}),(0,k.tZ)(x.Z,{onCancel:()=>{t()},onConfirm:()=>{l()},onRest:()=>{o(),c.current.handleRestTudo()}})))};var F=l(226618),_=l(542170);const I=e=>{const{onClick:t=(()=>{}),onCancel:l=(()=>{}),onSelect:a=(()=>{}),onConfirm:n=(()=>{}),visible:o,treeListData:r,domText:s,id:d,name:c,filterState:v}=e,f=(0,u.v9)((e=>e.dashboardState.mobileFilterType)),[h,p]=(0,i.useState)({value:[],label:[],extend:[]}),g=(0,u.v9)((e=>e.dashboardState.mobileFilterStatus)),S=(0,u.v9)((e=>e.dashboardState.drawerStatus));document.getElementById(F.H5);(0,i.useEffect)((()=>{let e,t;e=v.value&&v.value.length>0?v.value.map((e=>e.value)):[],v.value&&v.value.length>0&&(t=v.value.map((e=>({node:{props:{...e}}}))));p({value:e,label:e,extend:{allCheckedNodes:t}})}),[v.value]),(0,_.Z)((()=>{g.confirm&&!g.reset&&(h.value&&h.value.length>0||h.label&&h.label.length>0||h.extend&&h.extend.length>0)&&n(h.value,h.label,h.extend),!g.confirm&&g.reset&&(h.value&&h.value.length>0||h.label&&h.label.length>0||h.extend&&h.extend.length>0)&&(n([],[]),p({value:[],label:[],extend:[]}))}),[JSON.stringify(g)]);return(0,k.tZ)(i.Fragment,null,(0,k.tZ)(m.Z,{id:d,name:c,onClick:t,type:f,defaultActiveKey:[d]},(0,k.tZ)(y.zx,{size:"small",color:"default",block:!0,style:{fontSize:"14px",height:"40px",background:"#f0f2f5",marginBottom:"12px",marginTop:"6px",borderRadius:"30px",padding:"0 12px",textAlign:"center",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",backgroundColor:Array.isArray(h.value)&&h.value.length>0?F.Fu:F.hR,color:Array.isArray(h.value)&&h.value.length>0?F.zP:"#ccc"},onClick:()=>{t()}},Array.isArray(h.value)&&h.value.length>0?h.value.join(","):"\u70b9\u51fb\u9009\u62e9")),(0,k.tZ)(D,{options:r,visible:o,name:c,filterState:v,onChange:(e,t)=>{const l=[...new(b())(e.map((e=>e.label)))],a=e.map((e=>({node:{props:{...e}}})));p({value:l,label:l,extend:{allCheckedNodes:a}})},onConfirm:()=>{0===S?n(h.value,h.label,h.extend):l()},onCancel:()=>{l()},onRest:()=>{n([],[]),p({value:[],label:[],extend:[]})}}))},{SHOW_PARENT:L}=s.Z;function z(e,t){switch(t.type){case"ownState":return e.ownState={...e.ownState,...t.ownState},e;case"filterState":return e.extraFormData=t.extraFormData,e.__cache=t.__cache,e.filterState={...e.filterState,...t.filterState},e;default:return e}}function j(e){const{colnames:t=[],data:l=[],appSection:a,formData:o,filterState:f,setDataMask:g,showOverflow:b,parentRef:m}=e,{enableEmptyFilter:y,multiSelect:S,showSearch:x,inverseSelection:C,searchAllOptions:w}=o,Z=(0,i.useRef)(null),[T,O]=(0,i.useState)((null==f?void 0:f.value)||[]),[R,A]=(0,i.useState)(!1),E=(0,u.v9)((e=>{var t,l;return null==(t=e.dashboardInfo)||null==(l=t.metadata)?void 0:l.layout_type})),[N,D]=(0,c.C)(z,{extraFormData:{},filterState:f}),F=(0,u.v9)((e=>{var t,l;return null==e||null==(t=e.dashboardInfo)||null==(l=t.metadata)?void 0:l.layout_mode})),_=(0,i.useCallback)((e=>{D({type:"filterState",__cache:f,extraFormData:(0,p.gD)(e,t),filterState:{...f,value:e}})}),[a,D,y,C,JSON.stringify(f)]);(0,i.useEffect)((()=>{_(f.value)}),[JSON.stringify(f.value)]),(0,i.useEffect)((()=>{g(N)}),[JSON.stringify(N)]),(0,i.useEffect)((()=>{O((null==f?void 0:f.value)||[])}),[JSON.stringify(null==f?void 0:f.value)]);const j=(0,i.useCallback)(n()((e=>{var t,l;"dashbord-page-scroll"===e.data.type&&(null==Z||null==(t=Z.current)||t.f,null==Z||null==(l=Z.current)||l.blur())}),20),[]);(0,i.useEffect)((()=>(window.addEventListener("message",j),()=>{window.removeEventListener("message",j)})),[]);let B=[];if(t.length){const e=t[0],a=r()(l,e);let n=1;const o=(e,l)=>{t.slice(0,t.indexOf(l)).map((t=>e[t])).join("_"),e[l],n++;const a=e[l];return{...e,title:a,nodeType:l,label:a,value:a}},i=(e,l)=>Object.keys(e).map((a=>{const n=e[a].map((e=>o(e,l))),s=n[0];if(t.indexOf(l)+1<t.length){const e=t[t.indexOf(l)+1],a=r()(n,e);return{...s,children:i(Object.values(a),e),disabled:!F}}return{...s}}));B=i(a,e)}const J=(e,t,l)=>{var a;const n=(null==l||null==(a=l.allCheckedNodes)?void 0:a.map((e=>{var t;return(null==e||null==(t=e.node)?void 0:t.props)||(null==e?void 0:e.props)||{}})))||[];O(e),_(n)};let K=b?()=>(null==m?void 0:m.current)||document.body:e=>(null==e?void 0:e.parentNode)||document.body;const P=h().generate();"grid"===E&&(K=()=>document.body);const H={treeData:B,value:T,onChange:J,treeCheckable:S,showCheckedStrategy:L,placeholder:(0,d.t)("Please select"),style:{width:"100%"},getPopupContainer:K,ref:Z};return F===v.kB.MOBILE?(0,k.tZ)(I,{id:null==o?void 0:o.ftId,name:null==o?void 0:o.ftName,treeListData:B,visible:R,filterState:f,onCancel:()=>{A(!1)},onClick:()=>{A(!0)},onConfirm:(e,t,l)=>{J(e,0,l),A(!1)}}):(0,k.tZ)(i.Fragment,null,(0,k.tZ)("div",{id:P}),(0,k.tZ)(s.Z,H))}},436968:(e,t,l)=>{var a=l(10611);e.exports=function(e,t,l){return null==e?e:a(e,t,l)}}}]);