"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[81130],{915872:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(667294),i=n(757016),s=n(751995),a=n(455867),o=n(683862),u=n(211965);const l=s.iK.div`
  ${({position:e})=>`\n    position: ${e.position};\n    left: ${e.left||0};\n    top: ${e.top||0};\n    z-index: 9999;\n    border: 1px #eee solid;\n\n\n    .ant-menu-submenu-active {\n      background: #5d9cec;\n    }\n\n    .ant-menu-submenu-active .ant-menu-submenu-title {\n      color: #ffffff;\n    }\n    \n    .ant-menu-submenu{\n      color:#000000 !important\n    }\n  `}
`,c=({position:e,showDiv:t,sliceJumpSetData:n=[],setShowDiv:s,clickProps:c,handleDrillingIn:d,handleProps:h})=>{const[p,f]=(0,r.useState)(!1),[m,g]=(0,r.useState)(""),[v,w]=(0,r.useState)(0),y=(e,t,i)=>(0,u.tZ)(r.Fragment,null,i?(0,u.tZ)(o.v2.SubMenu,{title:e,key:t,style:{color:"000"}},i.map(((e,t)=>y(e.name,`jump_${t}`)))):(0,u.tZ)(o.v2.Item,{key:t,onClick:e=>{(e=>{if(e.key.includes("jump")){const t=e.key.split("_"),r=n[t[1]];let i="";1===r.type&&(i=`${window.location.origin}/dashboard/list/?target_id=${r.config.treeValue}&standalone=true${r.config.list.map((e=>e.targetId?`&${e.targetId}=${c[e.sourceId.split("&&")[1]]?c[e.sourceId.split("&&")[1]]:""}`:"")).join("")}`),2===r.type&&r.config&&r.config.jumpUrl&&(i=r.config.jumpUrl.map((e=>e.children.map((e=>c[e.character]?c[e.character]:e.text||"")).join(""))).join("")),"1"===r.config.openType?window.open(i):(g(i),f(!0),s(!1))}else d&&d(h);s(!1)})(e)}},(0,a.t)(e)));return(0,r.useEffect)((()=>{n&&Array.isArray(n)?w(n.length):w(0)}),[n]),(0,r.useEffect)((()=>{document.addEventListener("click",(()=>{s(!1)}))}),[]),(0,u.tZ)(r.Fragment,null,t&&(0,u.tZ)(l,{position:e},(0,u.tZ)(o.v2,{"data-test":"menu-item-menu"},y("\u4e0b\u94bb","drilling_in"),v>0&&(0,u.tZ)(r.Fragment,null,v>1?y((0,a.t)("Jumo to"),"jump",n):y(`${(0,a.t)("Jumo to")}${n[0].name}`,"jump_0")))),(0,u.tZ)(i.Z,{title:null,closable:!1,visible:p,width:"95%",style:{top:20,height:"90vh"},footer:null,onCancel:()=>f(!1)},(0,u.tZ)("iframe",{src:m,title:"myIframe",width:"800",height:"750",frameborder:"0",scrolling:"yes",name:"myIframe",id:"myIframe",sandbox:"allow-scripts allow-same-origin"})))}},281130:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var r=n(667294),i=n(263475),s=n(915872),a=n(211965);function o({echartOptions:e,height:t,refs:n,width:o,formData:u}){const{sliceJumpSetData:l}=(null==u?void 0:u.meta)||{},[c,d]=(0,r.useState)(!1),[h,p]=(0,r.useState)({}),[f,m]=(0,r.useState)({}),g={click:e=>{var t,n;"series"===e.componentType&&l&&Array.isArray(l)&&l.length>0&&(p({position:"absolute",left:`${null==(t=e.event)?void 0:t.offsetX}px`,top:`${null==(n=e.event)?void 0:n.offsetY}px`}),m({key:e.data.name,val:e.data.value}),setTimeout((()=>{d(!0)}),0))}};return(0,a.tZ)(r.Fragment,null,(0,a.tZ)(i.Z,{refs:n,height:t,width:o,echartOptions:e,eventHandlers:g}),(0,a.tZ)(s.Z,{position:h,showDiv:c,sliceJumpSetData:l,setShowDiv:d,clickProps:f,handleProps:f,handleDrillingIn:()=>{}}))}},263475:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(667294),i=n(751995),s=n(53552),a=n(211965);const o=i.iK.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function u({width:e,height:t,echartOptions:n,eventHandlers:i,zrEventHandlers:u,selectedValues:l={},refs:c},d){const h=(0,r.useRef)(null);c&&(c.divRef=h);const p=(0,r.useRef)(),f=(0,r.useMemo)((()=>Object.keys(l)||[]),[l]),m=(0,r.useRef)([]);(0,r.useImperativeHandle)(d,(()=>({getEchartInstance:()=>p.current}))),(0,r.useEffect)((()=>{h.current&&(p.current||(p.current=(0,s.S1)(h.current)),Object.entries(i||{}).forEach((([e,t])=>{var n,r;null==(n=p.current)||n.off(e),null==(r=p.current)||r.on(e,t)})),Object.entries(u||{}).forEach((([e,t])=>{var n,r;null==(n=p.current)||n.getZr().off(e),null==(r=p.current)||r.getZr().on(e,t)})),p.current.setOption(n,!0))}),[n,i,u]),(0,r.useEffect)((()=>{p.current&&(p.current.dispatchAction({type:"downplay",dataIndex:m.current.filter((e=>!f.includes(e)))}),f.length&&p.current.dispatchAction({type:"highlight",dataIndex:f}),p.current.dispatchAction({type:"hideTip"}),m.current=f)}),[f]);const g=(0,r.useCallback)((({width:e,height:t})=>{p.current&&p.current.resize({width:e,height:t})}),[]);return(0,r.useEffect)((()=>{if(!p.current)return;const e=()=>{p.current&&p.current.dispatchAction({type:"hideTip"})};return window.addEventListener("message",(t=>{"share-page-scroll"===t.data.type&&e()})),()=>{window.removeEventListener("message",e)}}),[p.current]),(0,r.useEffect)((()=>(g({width:e,height:t}),()=>{var e;return null==(e=p.current)?void 0:e.dispose()})),[]),(0,r.useLayoutEffect)((()=>{g({width:e,height:t})}),[e,t,g]),(0,a.tZ)(o,{ref:h,height:t,width:e})}const l=(0,r.forwardRef)(u)}}]);