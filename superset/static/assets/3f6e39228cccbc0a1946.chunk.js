"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[96693],{941842:(e,t,n)=>{n.d(t,{Z:()=>s});n(667294);var r=n(925550),l=n(455867),i=n(211965);function s(e){const{listValueFilter:t,bcItemClick:n=(()=>{}),clearFilter:s=(()=>{}),styleCums:c={}}=e,a={position:"absolute",zIndex:1,...c};return(0,i.tZ)("div",{style:a},t.length>0&&(0,i.tZ)(r.Z,null,(0,i.tZ)(r.g,{onClick:()=>{s()}},(0,l.t)("Back to all")),t.map(((e,t)=>(0,i.tZ)(r.g,{onClick:()=>{n(e,t)}},e)))))}},925550:(e,t,n)=>{n.d(t,{Z:()=>c,g:()=>a});var r=n(205872),l=n.n(r),i=(n(667294),n(435247)),s=n(211965);const c=e=>(0,s.tZ)(i.Z,l()({},e,{css:e=>({".ant-breadcrumb-link":{cursor:"pointer"}})})),a=i.Z.Item},696693:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(150361),l=n.n(r),i=n(667294),s=n(263475),c=n(499381),a=n(828216),u=n(748086),o=n(455867),h=n(941842),d=n(211965);function f(e){const{height:t,width:n,echartOptions:r,setDataMask:f,labelMap:p,groupby:g,selectedValues:v,emitCrossFilters:w,refs:m,formData:b}=e,{enableChartDrilldown:Z,drilldownColumns:y=[],sliceId:k=0}=b,C=(0,a.v9)((e=>e)),{dataMask:E={}}=C,S=(null==E?void 0:E[k])||{},{ownState:I={}}=S,{listValueFilter:O=[]}=I;(0,i.useEffect)((()=>{f({ownState:{}})}),[JSON.stringify(b.metrics),JSON.stringify(g),JSON.stringify(b.adhocFilters),Z,JSON.stringify(y)]);const V=(0,i.useCallback)((e=>{if(Z){const t=((null==e?void 0:e[0])||"").split(", "),n=[...g,...y];if(O.length>=n.length-1)return void u.ZP.warning((0,o.t)("It has reached the deepest level"));const r=l()(O);return r.push(...t),void f({ownState:{listValueFilter:r}})}if(!w)return;const t=e.map((e=>p[e]));f({extraFormData:{filters:0===e.length?[]:g.map(((e,n)=>{const r=t.map((e=>e[n]));return null===r||void 0===r?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:r}}))},filterState:{value:t.length?t:null,selectedValues:e.length?e:null}})}),[g,p,f,v]),F=(0,c.C0)(e,V),x=null!=O&&O.length?t-50:t;return(0,d.tZ)("div",{style:{width:n,height:t}},(0,d.tZ)(h.Z,{listValueFilter:O,bcItemClick:(e,t)=>{const n=O.filter(((e,n)=>n<=t));f({ownState:{listValueFilter:n}})},clearFilter:()=>{f({ownState:{}})},styleCums:{position:"relative"}}),(0,d.tZ)(s.Z,{refs:m,height:x,width:n,echartOptions:r,eventHandlers:F,selectedValues:v}))}},263475:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(667294),l=n(751995),i=n(53552),s=n(211965);const c=l.iK.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function a({width:e,height:t,echartOptions:n,eventHandlers:l,zrEventHandlers:a,selectedValues:u={},refs:o},h){const d=(0,r.useRef)(null);o&&(o.divRef=d);const f=(0,r.useRef)(),p=(0,r.useMemo)((()=>Object.keys(u)||[]),[u]),g=(0,r.useRef)([]);(0,r.useImperativeHandle)(h,(()=>({getEchartInstance:()=>f.current}))),(0,r.useEffect)((()=>{d.current&&(f.current||(f.current=(0,i.S1)(d.current)),Object.entries(l||{}).forEach((([e,t])=>{var n,r;null==(n=f.current)||n.off(e),null==(r=f.current)||r.on(e,t)})),Object.entries(a||{}).forEach((([e,t])=>{var n,r;null==(n=f.current)||n.getZr().off(e),null==(r=f.current)||r.getZr().on(e,t)})),f.current.setOption(n,!0))}),[n,l,a]),(0,r.useEffect)((()=>{f.current&&(f.current.dispatchAction({type:"downplay",dataIndex:g.current.filter((e=>!p.includes(e)))}),p.length&&f.current.dispatchAction({type:"highlight",dataIndex:p}),f.current.dispatchAction({type:"hideTip"}),g.current=p)}),[p]);const v=(0,r.useCallback)((({width:e,height:t})=>{f.current&&f.current.resize({width:e,height:t})}),[]);return(0,r.useEffect)((()=>{if(!f.current)return;const e=()=>{f.current&&f.current.dispatchAction({type:"hideTip"})};return window.addEventListener("message",(t=>{"share-page-scroll"===t.data.type&&e()})),()=>{window.removeEventListener("message",e)}}),[f.current]),(0,r.useEffect)((()=>(v({width:e,height:t}),()=>{var e;return null==(e=f.current)?void 0:e.dispose()})),[]),(0,r.useLayoutEffect)((()=>{v({width:e,height:t})}),[e,t,v]),(0,s.tZ)(c,{ref:d,height:t,width:e})}const u=(0,r.forwardRef)(a)},499381:(e,t,n)=>{n.d(t,{C0:()=>i});const r=(e,t)=>n=>{const{name:r}=n,l=Object.values(e);l.includes(r)?t(l.filter((e=>e!==r)),n):t([r],n)},l=(e,t,n)=>r=>{if(t){r.event.stop();const l=r.event.event,i=[];if(e.length>0){const t=n[r.name];e.forEach(((e,n)=>i.push({col:e,op:"==",val:t[n],formattedVal:String(t[n])})))}t(l.clientX,l.clientY,i)}},i=(e,t)=>{const{groupby:n,selectedValues:i,onContextMenu:s,labelMap:c}=e;return{click:r(i,t),contextmenu:l(n,s,c)}}}}]);