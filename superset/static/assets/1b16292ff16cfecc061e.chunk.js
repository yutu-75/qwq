"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[5830],{705830:(t,e,n)=>{n.r(e),n.d(e,{default:()=>p});var l=n(667294),i=n(263475),o=n(119673),r=n(211965);function s(t){const{height:e,width:n,lineScatterColor:l,name:i}=t,s=[];for(let t=0;t<(null==i?void 0:i.length);t++)s.push((0,r.tZ)("div",null,i[t]));return(0,r.tZ)("div",{style:{width:30,height:e-o.nh-o.F2,position:"absolute",left:0,top:o.F2,display:"flex",alignItems:"center",justifyContent:"center"}},(0,r.tZ)("div",{style:{display:"flex",height:"100%",alignItems:"center",position:"relative"}},(0,r.tZ)("div",{style:{position:"absolute",top:0}},"\u9ad8"),(0,r.tZ)("div",{style:{textAlign:"center"}},s),(0,r.tZ)("div",{style:{position:"absolute",bottom:0}},"\u4f4e")),(0,r.tZ)("div",{style:{width:10,height:"100%",position:"relative",display:"flex",justifyContent:"center"}},(0,r.tZ)("div",{style:{width:0,height:0,borderLeft:"5px solid transparent",borderRight:"5px solid transparent",borderBottom:`10px solid ${l}`,position:"absolute"}}),(0,r.tZ)("div",{style:{width:3,height:"calc(100% - 10px)",backgroundColor:l,marginTop:10}})))}function a(t){const{height:e,width:n,lineScatterColor:l,name:i}=t;return(0,r.tZ)("div",{style:{width:n-o.nh-o.F2,height:30,position:"absolute",bottom:0,left:o.nh,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},(0,r.tZ)("div",{style:{width:"100%",height:10,position:"relative",display:"flex",justifyContent:"center",alignItems:"center"}},(0,r.tZ)("div",{style:{width:"calc(100% - 10px)",height:3,backgroundColor:l}}),(0,r.tZ)("div",{style:{width:0,height:0,borderTop:"5px solid transparent",borderLeft:`10px solid ${l}`,borderBottom:"5px solid transparent"}})),(0,r.tZ)("div",{style:{display:"flex",height:"100%",alignItems:"center"}},(0,r.tZ)("div",{style:{position:"absolute",left:0}},"\u4f4e"),(0,r.tZ)("div",null,i),(0,r.tZ)("div",{style:{position:"absolute",right:0}},"\u9ad8")))}function u(t){const{xName:e,yName:n,showArrow:i,lineScatterColor:s}=t,a=i?o.nh:o.F2,u=o.F2;return(0,r.tZ)(l.Fragment,null,(0,r.tZ)("div",{style:{position:"absolute",right:u,top:u,color:s}},e,"\u9ad8\uff0c",n,"\u9ad8"),(0,r.tZ)("div",{style:{position:"absolute",left:a,top:u,color:s}},e,"\u4f4e\uff0c",n,"\u9ad8"),(0,r.tZ)("div",{style:{position:"absolute",bottom:a,left:a,color:s}},e,"\u4f4e\uff0c",n,"\u4f4e"),(0,r.tZ)("div",{style:{position:"absolute",right:u,bottom:a,color:s}},e,"\u9ad8\uff0c",n,"\u4f4e"))}const h=t=>{const{x1:e,y1:n,x2:i,y2:o,width:s,height:a,parentX:u,parentY:h}=t,c=(0,l.useRef)(null),d=u+e,p=h+n,v=u+i,f=h+o;return(0,l.useEffect)((()=>{const t=c.current,e=t.getContext("2d");e.strokeStyle="red",e.fillStyle="red",e.clearRect(0,0,t.width,t.height),e.beginPath(),e.moveTo(d,p),e.lineTo(v,f),e.stroke();const n=Math.atan2(f-p,v-d);e.beginPath(),e.moveTo(v,f),e.lineTo(v-10*Math.cos(n-Math.PI/6),f-10*Math.sin(n-Math.PI/6)),e.lineTo(v-10*Math.cos(n+Math.PI/6),f-10*Math.sin(n+Math.PI/6)),e.lineTo(v,f),e.fill()}),[d,p,v,f]),(0,r.tZ)("canvas",{ref:c,width:s,height:a,style:{position:"absolute",left:0,top:0}})};var c=n(53552),d=n(278448);function p(t){var e,n;const{height:p,width:v,echartOptions:f,lineScatterColor:g,formData:y,reconertData:w,refs:x,data:b}=t,m=(0,l.useRef)(null),[Z,C]=(0,l.useState)([]),[M,T]=(0,l.useState)(),{indicatorMarkers:I,xText:E,yText:S,yRow:F,xRow:R,showArrow:k,indicatorName:L,xCrossRow:A,yCrossRow:X,showTooltipstype:Y,showBasePoint:j,showCornerText:O}=y,P=k?o.nh:o.F2;(0,l.useEffect)((()=>{var t,e,n,l,i,r,s,a,u;const h=null==m||null==(t=m.current)?void 0:t.getEchartInstance(),c=(null==h||null==(e=h.getModel())||null==(n=e.getComponent("yAxis"))||null==(l=n.axis)||null==(i=l.scale)?void 0:i._extent)||[0,0],d=(null==h||null==(r=h.getModel())||null==(s=r.getComponent("xAxis"))||null==(a=s.axis)||null==(u=a.scale)?void 0:u._extent)||[0,0];if(2===(null==d?void 0:d.length)&&2===(null==c?void 0:c.length)){const t=[],e=d[1]-d[0],n=c[1]-c[0],l=(v-o.F2-P)/e,i=(p-o.F2-P)/n,r=d[0],s=c[1];w.forEach((e=>{let n=e[0],a=e[1];const u=Math.abs(r);n>0?n+=u:n=u-Math.abs(n),a=a>0?s-a:s+Math.abs(a);const h=[n*l+P+3,a*i+o.F2+3,e[2]];t.push(h)})),C(t);T({scaleXLine:d,scaleYLine:c,scaleX:l,scaleY:i})}}),[v,p,k]);const $=E||R,N=S||F,z=Math.abs(null==M?void 0:M.scaleXLine[0])*(null==M?void 0:M.scaleX)+P+3,B=(null==M?void 0:M.scaleYLine[1])*(null==M?void 0:M.scaleY)+o.F2+3,D=Z.map((t=>{var e,n;return[null==b||null==(e=b[t[2]])?void 0:e[L],null==b||null==(n=b[t[2]])?void 0:n[I]]})),H=Z.map(((t,e)=>t.concat(D[e]))).filter((t=>{var e;return(null==(e=t[4])?void 0:e.toString())===y.iText})),V=[];for(const t of H){const e={};for(let n=0;n<t.length;n++)e[n]=t[n];V.push(e)}return window.ecStat||(window.ecStat=d,c.rV(d.transform.clustering)),(0,r.tZ)(l.Fragment,null,(0,r.tZ)("div",{style:{position:"relative"}},y.iText&&V.map((t=>{var e,n;return(0,r.tZ)(h,{x1:null==b||null==(e=b[0])?void 0:e[A],y1:null==b||null==(n=b[0])?void 0:n[X],x2:t[0]-z,y2:t[1]-B+2,parentX:z,parentY:B,width:v,height:p})})),k&&(0,r.tZ)(s,{width:v,height:p,lineScatterColor:g,name:N}),O&&(0,r.tZ)(u,{xName:$,yName:N,showArrow:k,lineScatterColor:g}),j&&M&&(0,r.tZ)("div",{style:{position:"absolute",left:Math.abs(null==M?void 0:M.scaleXLine[0])*(null==M?void 0:M.scaleX)+P+3,top:(null==M?void 0:M.scaleYLine[1])*(null==M?void 0:M.scaleY)+o.F2+3,zIndex:1,color:g}},"\u4ea4\u53c9\u70b9(",null==b||null==(e=b[0])?void 0:e[A],",",null==b||null==(n=b[0])?void 0:n[X],")"),1!==Y&&Z.map((t=>{let e="";var n;if(2===Y)e=(null==b||null==(n=b[t[2]])?void 0:n[L])||"";else if(3===Y){var l,i,o;e=`${(null==b||null==(l=b[t[2]])?void 0:l[L])||""}(${(null==b||null==(i=b[t[2]])?void 0:i[R])||""},${(null==b||null==(o=b[t[2]])?void 0:o[F])||""})`}return(0,r.tZ)("div",{style:{position:"absolute",left:t[0],top:t[1],zIndex:1}},e)})),(0,r.tZ)(i.Z,{ref:m,refs:x,height:p,width:v,echartOptions:f}),k&&(0,r.tZ)(a,{width:v,height:p,lineScatterColor:g,name:$})))}},263475:(t,e,n)=>{n.d(e,{Z:()=>u});var l=n(667294),i=n(751995),o=n(53552),r=n(211965);const s=i.iK.div`
  height: ${({height:t})=>t};
  width: ${({width:t})=>t};
`;function a({width:t,height:e,echartOptions:n,eventHandlers:i,zrEventHandlers:a,selectedValues:u={},refs:h},c){const d=(0,l.useRef)(null);h&&(h.divRef=d);const p=(0,l.useRef)(),v=(0,l.useMemo)((()=>Object.keys(u)||[]),[u]),f=(0,l.useRef)([]);(0,l.useImperativeHandle)(c,(()=>({getEchartInstance:()=>p.current}))),(0,l.useEffect)((()=>{d.current&&(p.current||(p.current=(0,o.S1)(d.current)),Object.entries(i||{}).forEach((([t,e])=>{var n,l;null==(n=p.current)||n.off(t),null==(l=p.current)||l.on(t,e)})),Object.entries(a||{}).forEach((([t,e])=>{var n,l;null==(n=p.current)||n.getZr().off(t),null==(l=p.current)||l.getZr().on(t,e)})),p.current.setOption(n,!0))}),[n,i,a]),(0,l.useEffect)((()=>{p.current&&(p.current.dispatchAction({type:"downplay",dataIndex:f.current.filter((t=>!v.includes(t)))}),v.length&&p.current.dispatchAction({type:"highlight",dataIndex:v}),p.current.dispatchAction({type:"hideTip"}),f.current=v)}),[v]);const g=(0,l.useCallback)((({width:t,height:e})=>{p.current&&p.current.resize({width:t,height:e})}),[]);return(0,l.useEffect)((()=>{if(!p.current)return;const t=()=>{p.current&&p.current.dispatchAction({type:"hideTip"})};return window.addEventListener("message",(e=>{"share-page-scroll"===e.data.type&&t()})),()=>{window.removeEventListener("message",t)}}),[p.current]),(0,l.useEffect)((()=>(g({width:t,height:e}),()=>{var t;return null==(t=p.current)?void 0:t.dispose()})),[]),(0,l.useLayoutEffect)((()=>{g({width:t,height:e})}),[t,e,g]),(0,r.tZ)(s,{ref:d,height:e,width:t})}const u=(0,l.forwardRef)(a)}}]);