"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[40028],{880221:(e,t,o)=>{o.d(t,{Ad:()=>g,Aw:()=>P,GF:()=>F,Gr:()=>k,Gx:()=>f,HO:()=>v,Hy:()=>L,Ml:()=>Z,N4:()=>R,RO:()=>x,T7:()=>S,UG:()=>E,Vl:()=>_,fF:()=>p,gO:()=>m,n4:()=>y,o2:()=>A,po:()=>O,tH:()=>M,yy:()=>b,zK:()=>T,z_:()=>D});var r=o(615078),a=o.n(r),n=o(132383),i=o(827856),l=o.n(i),s=o(778900),c=o(767190);const d=/\d+ \w+ offset/,u=1e3;function m(e){return String(e).trim().replace(" (right axis)","").split(", ").filter((e=>!d.test(e))).join(", ")}function p(e){return"smart_date"===e?s.Z:(0,c.JB)(e)}function g(e,t,o,r){const n=(0,c.JB)(r),i=t.filter((e=>!e.disabled)).length,l=o&&0!==t.length?t[0].values.map(((e,o)=>{const r=t.filter((e=>!e.disabled)).map((e=>e.values[o]));return a().sum(r,(e=>e.y))})):[];e.selectAll(".bar-chart-label-group").remove(),setTimeout((()=>{e.selectAll(".bar-chart-label-group").remove();const t=e.select("g.nv-barsWrap").append("g").attr("class","bar-chart-label-group");e.selectAll("g.nv-group").filter(((e,t)=>!o||t===i-1)).selectAll("rect").each((function(e,r){const i=a().select(this),s=i.attr("transform"),c=parseFloat(i.attr("x")),d=parseFloat(i.attr("y")),u=parseFloat(i.attr("width")),m=parseFloat(i.attr("height")),p=t.append("text").text(n(o?l[r]:e.y)).attr("transform",s).attr("class","bar-chart-label"),g=p.node().getBBox(),h=g.width,f=g.height;p.attr("x",c+u/2-h/2),i.attr("class").includes("positive")?p.attr("y",d-5):p.attr("y",d+m+f)}))}),u)}function h(e,t){return"<NULL>"===e?`&lt;${e.slice(1,-1)}&gt;`:t?l().sanitize(e):e}function f(e,t,o){let r="";return r+=`<table><thead><tr><td colspan='3'><strong class='x-value'>${t(e.value)}</strong></td></tr></thead><tbody>`,e.series.sort(((e,t)=>e.value>=t.value?-1:1)),e.series.forEach((e=>{const t=h(e.key,!0);r+=`<tr class="${e.highlight?"emph":""}"><td class='legend-color-guide' style="opacity: ${e.highlight?"1":"0.75"};""><div style="border: 2px solid ${e.highlight?"black":"transparent"}; background-color: ${e.color};"></div></td><td>${t}</td><td>${o(e.value)}</td></tr>`})),r+="</tbody></table>",l().sanitize(r)}function b(e,t){let o="";return o+=`<table><thead><tr><td colspan='3'><strong class='x-value'>${e.value}</strong></td></tr></thead><tbody>`,e.series.sort(((e,t)=>e.value>=t.value?-1:1)),e.series.forEach((e=>{const r=h(e.key,!0);o+=`<tr class="${e.highlight?"emph":""}"><td class='legend-color-guide' style="opacity: ${e.highlight?"1":"0.75"};""><div style="border: 2px solid ${e.highlight?"black":"transparent"}; background-color: ${e.color};"></div></td><td>${r}</td><td>${t(e.value)}</td></tr>`})),o+="</tbody></table>",l().sanitize(o)}function y(e,t,o,r){const n="expand"===r.style()?a().sum(e.series,(e=>e.value)):e.series[e.series.length-1].value;let i="";return i+=`<table><thead><tr><td colspan='4'><strong class='x-value'>${t(e.value)}</strong></td></tr></thead><tbody><tr class="tooltip-header"><td></td><td>Category</td><td>Value</td><td>% to total</td></tr>`,e.series.forEach((e=>{const t=h(e.key,!0);let r="";e.highlight?r="superset-legacy-chart-nvd3-tr-highlight":"TOTAL"===e.key&&(r="superset-legacy-chart-nvd3-tr-total"),i+=`<tr class="${r}" style="border-color: ${e.color}"><td style="color: ${e.color}">${"TOTAL"===e.key?"":"&#9724;"}</td><td>${t}</td><td>${o(e.value)}</td><td>${(100*e.value/n).toFixed(2)}%</td></tr>`})),i+="</tbody></table>",l().sanitize(i)}function v(e,t,o){const r=t(e.value);let a="";return a+=`<table><thead><tr><td colspan='3'><strong class='x-value'>${r}</strong></td></tr></thead><tbody>`,e.series.forEach(((e,t)=>{const r=o[t],n=h(e.key,!1);a+=`<tr><td class='legend-color-guide'><div style="background-color: ${e.color};"></div></td><td class='key'>${n}</td><td class='value'>${r(e.value)}</td></tr>`})),a+="</tbody></table>",a}function x(e,t,o){const r=t(e.value);let a="";return a+=`<table><thead><tr><td colspan='3'><strong class='x-value'>${r}</strong></td></tr></thead><tbody>`,e.series.forEach((e=>{if(e.highlight){let t="";t="current"===e.key?e.key:`${e.key} of the selected frequency:`,a+=`<tr><td class='legend-color-guide'><div style="background-color: ${e.color};"></div></td><td class='key'>${t}</td><td class='value'>${o(e.value)}</td></tr>`}})),a+="</tbody></table>",l().sanitize(a)}function C(e){return e.label||e}function w(e,t){return`<tr><td>${e}</td><td>${t}</td></tr>`}function T({point:e,entity:t,xField:o,yField:r,sizeField:a,xFormatter:n,yFormatter:i,sizeFormatter:l}){let s="<table>";return s+=`<tr><td style="color: ${e.color};"><strong>${e[t]}</strong> (${e.group})</td></tr>`,s+=w(C(o),n(e.x)),s+=w(C(r),i(e.y)),s+=w(C(a),l(e.size)),s+="</table>",s}function _(e){const t=document.querySelectorAll(".nvtooltip");t.length>0&&t.forEach((t=>{e?t.remove():t.style.opacity=0}))}function S(e){return`tooltip-${e}`}function A(e){const t=`.${S(e)}`,o=document.querySelector(t);o&&o.remove()}function P(e){const t=e.useInteractiveGuideline&&e.useInteractiveGuideline()?e.interactiveLayer:e,o=t.tooltip.contentGenerator();t.tooltip.contentGenerator((e=>{let t="<div>";return t+=o(e),t+="</div>",t}))}function k(e){return(0,n.Z)().attr("class",`d3-tip ${e.annotationTipClass||""}`).direction("n").offset([-5,0]).html((t=>{if(!t)return"";return`<div><strong>${t[e.titleColumn]&&t[e.titleColumn].length>0?`${t[e.titleColumn]} - ${e.name}`:e.name}</strong></div><br/><div>${(Array.isArray(e.descriptionColumns)?e.descriptionColumns.map((e=>t[e])):Object.values(t)).join(", ")}</div>`}))}function F(e,t){const o=e.selectAll(`.${t} g.tick text`);if(o.length>0){const e=o[0].map((e=>e.getComputedTextLength()));return Math.ceil(Math.max(0,...e))}return 0}function R(e,t={}){const o=e=>t[e]||e;return Array.isArray(e)&&e.length>0?e.map((e=>d.test(e)?e:o(e))).join(", "):o(e)}const I=18;function E(e,t,o){const r=(t?a().max(e,(e=>e.values.length)):a().sum(e,(e=>e.values.length)))*I;return Math.max(r,o)}function L(e){const t=Number(e);return Number.isNaN(t)?e:t}function D(e){return e.some((e=>void 0===e.toISOString))?null:e.map((e=>e.toISOString().slice(0,-1))).join(" : ")}function Z(e,t){e&&e.showMaxMin&&void 0!==t&&e.showMaxMin(t)}function M(e){if(Array.isArray(e)&&e.length>0&&Array.isArray(e[0].values)){const t=e.filter((e=>!e.disabled)).map((e=>a().extent(e.values,(e=>e.y))));return[a().min(t,(([e])=>e)),a().max(t,(([,e])=>e))]}return[0,1]}function O(e){if(Array.isArray(e)&&e.length>0&&Array.isArray(e[0].values)){const t=e.filter((e=>!e.disabled)).map((e=>e.values.map((e=>e.y)))),o=t[0].map(((e,o)=>t.reduce(((e,t)=>e+t[o]),0)));return[Math.min(0,...o),Math.max(0,...o)]}return[0,1]}},383937:(e,t,o)=>{function r(e){return"boolean"===typeof e?e:"string"===typeof e?["yes","y","true","t","1"].includes(e.toLowerCase()):!!e}o.d(t,{Z:()=>r})},195963:(e,t,o)=>{o.d(t,{DT:()=>n,ZP:()=>c,yb:()=>s});var r=o(455867);function a(e){return Object.keys(e).reduce(((e,t)=>{const o=e;return o[t]=t,o}),{})}const n=a({FORMULA:{value:"FORMULA",label:(0,r.t)("Formula")},EVENT:{value:"EVENT",label:(0,r.t)("Event"),supportNativeSource:!0},INTERVAL:{value:"INTERVAL",label:(0,r.t)("Interval"),supportNativeSource:!0},TIME_SERIES:{value:"TIME_SERIES",label:(0,r.t)("Time Series")}}),i=(n.FORMULA,a({NATIVE:{value:"NATIVE",label:"Superset annotation"}}));const l={descriptionColumns:["long_descr"],intervalEndColumn:"end_dttm",timeColumn:"start_dttm",titleColumn:"short_descr"};function s(e){return e.sourceType===i.NATIVE?{...e,...l}:e}const c=n},353236:(e,t,o)=>{o.d(t,{Gy:()=>a,Ts:()=>c,dB:()=>l,hT:()=>i,s6:()=>n});var r=o(211965);const a="#F13941",n="#E7CD27",i="#27B657",l=40,s=(e,t)=>(0,r.tZ)("div",{style:{color:e,display:"flex",alignItems:"center"}},t),c=e=>[{value:1,up_color:a,ep_color:n,down_color:i,up_icon:(e,t)=>s(e,d(t)),eq_icon:(e,t)=>s(e,u(t)),down_icon:(e,t)=>s(e,m(t)),state:e},{value:2,up_color:a,ep_color:n,down_color:i,up_icon:(e,t)=>s(e,p(t)),eq_icon:(e,t)=>s(e,g(t)),down_icon:(e,t)=>s(e,h(t)),state:e},{value:3,up_color:a,ep_color:n,down_color:i,up_icon:(e,t)=>s(e,f(t)),eq_icon:(e,t)=>s(e,g(t)),down_icon:(e,t)=>s(e,b(t)),state:e},{value:4,up_color:a,ep_color:n,down_color:i,up_icon:(e,t)=>s(e,y(t)),eq_icon:(e,t)=>s(e,y(t)),down_icon:(e,t)=>s(e,y(t)),state:e},{value:5,up_color:a,ep_color:n,down_color:i,up_icon:(e,t)=>s(e,v(t)),eq_icon:(e,t)=>s(e,x(t)),down_icon:(e,t)=>s(e,C(t)),state:e}],d=e=>(0,r.tZ)("svg",{t:"1699929471562",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18044",width:e,height:e},(0,r.tZ)("path",{d:"M816.64 466.773333a21.333333 21.333333 0 0 1 0 30.293334l-8.533333 8.533333a20.906667 20.906667 0 0 1-15.36 6.4H640v320a21.333333 21.333333 0 0 1-21.333333 21.333333h-213.333334a21.333333 21.333333 0 0 1-21.333333-21.333333V512H231.253333a20.906667 20.906667 0 0 1-15.36-6.4l-8.533333-8.533333a21.333333 21.333333 0 0 1 0-30.293334l289.706667-289.706666a20.48 20.48 0 0 1 29.866666 0z","p-id":"18045",fill:"currentColor"})),u=e=>(0,r.tZ)("svg",{t:"1699931632681",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18336",width:e,height:e},(0,r.tZ)("path",{d:"M557.226667 816.64a21.333333 21.333333 0 0 1-30.293334 0l-8.533333-8.533333a20.906667 20.906667 0 0 1-6.4-15.36V640H192a21.333333 21.333333 0 0 1-21.333333-21.333333v-213.333334a21.333333 21.333333 0 0 1 21.333333-21.333333H512V231.253333a20.906667 20.906667 0 0 1 6.4-15.36l8.533333-8.533333a21.333333 21.333333 0 0 1 30.293334 0l289.706666 289.706667a20.48 20.48 0 0 1 0 29.866666z","p-id":"18337",fill:"currentColor"})),m=e=>(0,r.tZ)("svg",{t:"1699931483475",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18190",width:e,height:e},(0,r.tZ)("path",{d:"M207.36 557.226667a21.333333 21.333333 0 0 1 0-30.293334l8.533333-8.533333a20.906667 20.906667 0 0 1 15.36-6.4H384V192a21.333333 21.333333 0 0 1 21.333333-21.333333h213.333334a21.333333 21.333333 0 0 1 21.333333 21.333333V512h152.746667a20.906667 20.906667 0 0 1 15.36 6.4l8.533333 8.533333a21.333333 21.333333 0 0 1 0 30.293334l-289.706667 289.706666a20.48 20.48 0 0 1-29.866666 0z","p-id":"18191",fill:"currentColor"})),p=e=>(0,r.tZ)("svg",{t:"1699940584909",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18624",width:e,height:e,style:{transform:"rotate(-90deg)"}},(0,r.tZ)("path",{d:"M768 506.026667v11.946666a32.426667 32.426667 0 0 1-15.786667 27.733334L370.346667 768c-23.04 13.653333-34.986667 13.653333-45.226667 7.68l-10.666667-5.973333a32.426667 32.426667 0 0 1-15.786666-26.88V281.173333a32.426667 32.426667 0 0 1 15.786666-27.733333l10.666667-5.973333c10.24-5.973333 22.186667-5.973333 52.053333 11.52l375.04 219.306666a32.426667 32.426667 0 0 1 15.786667 27.733334z","p-id":"18625",fill:"currentColor"})),g=e=>(0,r.tZ)("svg",{t:"1699946231457",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"19286",width:e,height:e},(0,r.tZ)("path",{d:"M234.666667 554.666667a21.333333 21.333333 0 0 1-21.333334-21.333334v-42.666666a21.333333 21.333333 0 0 1 21.333334-21.333334h554.666666a21.333333 21.333333 0 0 1 21.333334 21.333334v42.666666a21.333333 21.333333 0 0 1-21.333334 21.333334z","p-id":"19287",fill:"currentColor"})),h=e=>(0,r.tZ)("svg",{t:"1699940584909",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18624",width:e,height:e,style:{transform:"rotate(90deg)"}},(0,r.tZ)("path",{d:"M768 506.026667v11.946666a32.426667 32.426667 0 0 1-15.786667 27.733334L370.346667 768c-23.04 13.653333-34.986667 13.653333-45.226667 7.68l-10.666667-5.973333a32.426667 32.426667 0 0 1-15.786666-26.88V281.173333a32.426667 32.426667 0 0 1 15.786666-27.733333l10.666667-5.973333c10.24-5.973333 22.186667-5.973333 52.053333 11.52l375.04 219.306666a32.426667 32.426667 0 0 1 15.786667 27.733334z","p-id":"18625",fill:"currentColor"})),f=e=>(0,r.tZ)("svg",{t:"1699941055666",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18044",width:e,height:e},(0,r.tZ)("path",{d:"M810.666667 850.346667a21.76 21.76 0 0 1-5.12 23.04l-16.213334 16.213333a20.906667 20.906667 0 0 1-29.013333 0 359.68 359.68 0 0 0-494.08 0 20.906667 20.906667 0 0 1-29.013333 0l-16.213334-16.213333a21.76 21.76 0 0 1-7.68-23.04l272.213334-708.693334a21.76 21.76 0 0 1 20.053333-13.653333h12.8a21.76 21.76 0 0 1 20.053333 13.653333z","p-id":"18045",fill:"currentColor"})),b=e=>(0,r.tZ)("svg",{t:"1699941055666",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18044",width:e,height:e,style:{transform:"rotate(180deg)"}},(0,r.tZ)("path",{d:"M810.666667 850.346667a21.76 21.76 0 0 1-5.12 23.04l-16.213334 16.213333a20.906667 20.906667 0 0 1-29.013333 0 359.68 359.68 0 0 0-494.08 0 20.906667 20.906667 0 0 1-29.013333 0l-16.213334-16.213333a21.76 21.76 0 0 1-7.68-23.04l272.213334-708.693334a21.76 21.76 0 0 1 20.053333-13.653333h12.8a21.76 21.76 0 0 1 20.053333 13.653333z","p-id":"18045",fill:"currentColor"})),y=e=>(0,r.tZ)("svg",{t:"1699942017565",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"19096",width:e,height:e},(0,r.tZ)("path",{d:"M853.333333 277.333333v384a21.333333 21.333333 0 0 1-21.333333 21.333334H597.333333a85.333333 85.333333 0 0 1-85.333333-85.333334H256v320a21.333333 21.333333 0 0 1-21.333333 21.333334h-42.666667a21.333333 21.333333 0 0 1-21.333333-21.333334v-810.666666a21.333333 21.333333 0 0 1 21.333333-21.333334h42.666667a21.333333 21.333333 0 0 1 21.333333 21.333334V170.666667h256a85.333333 85.333333 0 0 1 85.333333 85.333333h234.666667a21.333333 21.333333 0 0 1 21.333333 21.333333z","p-id":"19097",fill:"currentColor"})),v=e=>(0,r.tZ)("svg",{t:"1699946615389",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"19518",width:e,height:e},(0,r.tZ)("path",{d:"M512 85.333333a426.666667 426.666667 0 1 0 426.666667 426.666667A426.666667 426.666667 0 0 0 512 85.333333z m0 768a341.333333 341.333333 0 1 1 341.333333-341.333333 341.333333 341.333333 0 0 1-341.333333 341.333333z m131.84-450.56l-22.613333-22.613333a20.48 20.48 0 0 0-29.866667 0L512 459.093333l-79.36-78.933333a20.48 20.48 0 0 0-29.866667 0l-22.613333 22.613333a20.48 20.48 0 0 0 0 29.866667L459.093333 512l-78.933333 79.36a20.48 20.48 0 0 0 0 29.866667l22.613333 22.613333a20.48 20.48 0 0 0 29.866667 0L512 564.906667l79.36 78.933333a20.48 20.48 0 0 0 29.866667 0l22.613333-22.613333a20.48 20.48 0 0 0 0-29.866667L564.906667 512l78.933333-79.36a20.48 20.48 0 0 0 0-29.866667z","p-id":"19519",fill:"currentColor"})),x=e=>(0,r.tZ)("svg",{t:"1699946714902",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"19750",width:e,height:e},(0,r.tZ)("path",{d:"M512 85.333333a426.666667 426.666667 0 1 0 426.666667 426.666667A426.666667 426.666667 0 0 0 512 85.333333z m0 768a341.333333 341.333333 0 1 1 341.333333-341.333333 341.333333 341.333333 0 0 1-341.333333 341.333333z m42.666667-320a21.333333 21.333333 0 0 0-21.333334-21.333333h-42.666666a21.333333 21.333333 0 0 0-21.333334 21.333333v128a21.333333 21.333333 0 0 0 21.333334 21.333334h42.666666a21.333333 21.333333 0 0 0 21.333334-21.333334z m0-170.666666a21.333333 21.333333 0 0 0-21.333334-21.333334h-42.666666a21.333333 21.333333 0 0 0-21.333334 21.333334v42.666666a21.333333 21.333333 0 0 0 21.333334 21.333334h42.666666a21.333333 21.333333 0 0 0 21.333334-21.333334z","p-id":"19751",fill:"currentColor"})),C=e=>(0,r.tZ)("svg",{t:"1699946771575",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"19982",width:e,height:e},(0,r.tZ)("path",{d:"M512 85.333333a426.666667 426.666667 0 1 0 426.666667 426.666667A426.666667 426.666667 0 0 0 512 85.333333z m0 768a341.333333 341.333333 0 1 1 341.333333-341.333333 341.333333 341.333333 0 0 1-341.333333 341.333333z m162.986667-491.093333a21.333333 21.333333 0 0 0-29.866667 0l-202.24 202.24-64-63.573333a20.48 20.48 0 0 0-29.866667 0l-22.613333 22.613333a21.333333 21.333333 0 0 0 0 30.293333L426.666667 654.933333a20.48 20.48 0 0 0 29.866666 0l239.786667-239.786666a21.333333 21.333333 0 0 0 0-30.293334z","p-id":"19983",fill:"currentColor"}))},351824:(e,t,o)=>{function r(e){return e>550?.8:e>400&&e<=550?.55:.45}o.d(t,{Ce:()=>n,Py:()=>r});const a=(e,t=0)=>{const{x:o,y:r,width:a,height:n}=e.getBoundingClientRect();return{x:o,y:r+t,width:a,height:n-2*t}},n=e=>{const t=[];return e.forEach(((o,r)=>{const n=a(o,1);e.forEach(((o,i)=>{if(i<=r)return;const l=a(o,1);((e,t)=>{const{x:o,y:r,width:a,height:n}=e,{x:i,y:l,width:s,height:c}=t;return!(o>i+s||o+a<i||r>l+c||r+n<l)})(n,l)&&(t.push(e[i]),t.push(e[r]))}))})),t}},645683:(e,t,o)=>{o.d(t,{Z:()=>C});var r=o(455867),a=o(667294),n=o(578830),i=o(751995),l=o(205872),s=o.n(l),c=o(211965);const d=i.iK.div`
  display: flex;
  align-items: center;
  justify-content: center;
  height: ${({height:e})=>"number"===typeof e?e+"px":e};
  width: ${({width:e})=>"number"===typeof e?e+"px":e};
`;const u=function(e){const t=(0,a.forwardRef)(e);return function(e){return(0,c.tZ)(t,s()({},e,{ref:e.myRef}))}}((function({width:e,height:t,chartOptions:o,eventHandlers:r,plotConstructor:n,refs:i},l){const s=(0,a.useRef)(null),u=(0,a.useRef)(null);(0,a.useImperativeHandle)(l,(()=>({getEchartInstance:()=>u.current}))),(0,a.useEffect)((()=>{if(null==s||!s.current)return;const e={...o};null!=u&&u.current?u.current.update(e):(u.current=new n(s.current,e),Object.entries(r||{}).forEach((([e,t])=>{var o,r;null==(o=u.current)||o.off(e),null==(r=u.current)||r.on(e,t)})),u.current.render())}),[o,r]);const m=(0,a.useCallback)((({width:e,height:t})=>{!u.current||null!=o&&o.autoFit||u.current.changeSize(e,t)}),[o]);return(0,a.useEffect)((()=>(m({width:o.width,height:o.height}),()=>{var e;return null==(e=u.current)?void 0:e.destroy()})),[]),(0,a.useLayoutEffect)((()=>{m({width:o.width,height:o.height})}),[o,m]),(0,c.tZ)(d,{"data-test":"antv-g2-plot-chart",ref:s,height:t,width:e})}));var m=o(579793);const p=i.iK.div`
  width: ${({width:e})=>"number"===typeof e?e+"px":e};
  height: ${({height:e})=>"number"===typeof e?e+"px":e};
  padding-top: ${3*m.BD}px;

  .metric-name,
  .metric-percent {
    white-space: nowrap;
    word-break: break-all;
    z-index: 10;
  }

  .metric-name {
    overflow: hidden;
    text-overflow: ellipsis;
  }
`,g=i.iK.div`
  width: 100%;
  margin-top: 10px;
  color: #000;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  word-break: break-all;

  > span {
    &:nth-of-type(2) {
      color: rgba(0, 0, 0, 0.5);
      margin: 0 2px;
    }
  }
`,h=10,f=e=>{const{width:t,height:o,config:r,data:i,percentage:l}=e,{nameColor:s,nameFontSize:d,namePosition:m,nameFontWeight:f,valueColor:b,valueFontSize:y,valuePosition:v,valueFontWeight:x,chartWidth:C,color:w,isShowValueDesc:T,currentName:_,targetName:S}=r,[A,P]=i,{originalValue:k,formatValue:F}=l,R=(0,a.useCallback)((({text:e,chartWid:o,fontSize:r,fontColor:a,fontWeight:i,position:l})=>{const s=(0,n.Ux)(String(e),{fontSize:r})+2;return{width:Math.min(t,Number(s)+(["L","R"].includes(l)?h:0))+"px",fontWeight:i,fontSize:Number(r)+"px",color:`rgba(${[a.r,a.g,a.b,a.a].join(",")})`,position:["L","R","TL","TC","TR","BL","BC","BR"].includes(l)?"absolute":"relative",...["L","R"].includes(l)?{height:Math.max(Number(o),30)+"px",lineHeight:Math.max(Number(o),30)+"px",paddingLeft:"R"===l?"5px":0,paddingRight:"L"===l?"5px":0}:{},...["TL","TC","TR"].includes(l)?{top:0}:["L","R"].includes(l)?{top:"50%"}:["BL","BC","BR"].includes(l)?{top:"100%"}:{},left:["TC","BC"].includes(l)?"50%":["TR","BR","R"].includes(l)?"100%":0,transform:`translate(${["TC","BC"].includes(l)?"-50%":["TR","BR","R"].includes(l)?"-100%":0}, ${["TC","TL","TR"].includes(l)?"-100%":["L","R"].includes(l)?"-50%":0})`}}),[t]),I=(0,a.useCallback)((e=>{const t=(0,n.Ux)(String(A.label),{fontSize:d}),o=(0,n.Ux)(String(F),{fontSize:y});return Number(m===e&&v===e?Math.max(t,o)+h:m===e?t+h:v===e?o+h:0)}),[A.label,F,d,y,m,v]),E=(0,a.useMemo)((()=>({width:t-I("L")-I("R"),height:C,autoFit:!1,percent:k,barWidthRatio:1,color:[null!=w?w:"#5B8FF9","#E8EDF3"]})),[I,t,C,k,w]);return(0,c.tZ)(p,{"data-test":"progress-bar-chart",width:t,height:o},(0,c.tZ)("div",{"data-test":"progress-bar-chart-inner",style:{position:"relative",paddingLeft:I("L"),paddingRight:I("R")}},(0,c.tZ)("div",{className:"metric-name",style:R({text:A.label,chartWid:C,fontSize:d,fontColor:s,fontWeight:f,position:m}),title:A.label},A.label),(0,c.tZ)("div",{className:"metric-percent",style:R({text:F,chartWid:C,fontSize:y,fontColor:b,fontWeight:x,position:v}),title:F},F),(0,c.tZ)(u,{width:E.width,height:E.height,plotConstructor:n.Ex,chartOptions:E})),T&&(0,c.tZ)(g,{"data-test":"value-label-desc"},(0,c.tZ)("span",null,_," ",A.value),(0,c.tZ)("span",null," | "),(0,c.tZ)("span",null,S," ",P.value)))},b=i.iK.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: ${({height:e})=>"number"===typeof e?e+"px":e};
  width: ${({width:e})=>"number"===typeof e?e+"px":e};

  .ring-text-detail {
    height: 42px;
    margin-top: 12px;

    .ring-text-current,
    .ring-text-target {
      font-size: 12px;
      color: undefined;
      font-weight: normal;
      font-style: normal;
    }
  }
`,y=e=>{const{width:t,height:o,data:r,config:i,percentage:l}=e,{nameColor:s,nameFontSize:d,nameFontWeight:p,valueColor:g,valueFontSize:h,valueFontWeight:f,chartWidth:y,color:v,isShowValueDesc:x,currentName:C,targetName:w}=i,[T,_]=r,{originalValue:S,formatValue:A}=l,P=(0,a.useMemo)((()=>({width:m.Hd,height:m.Hd,autoFit:!1,percent:S,color:[null!=v?v:"#5B8FF9","#E8EDF3"],innerRadius:1-2*y/m.Hd,radius:1,statistic:{title:{style:{color:`rgba(${[s.r,s.g,s.b,s.a].join(",")})`,fontSize:`${d}px`,fontWeight:p,lineHeight:"14px"},formatter:()=>T.label},content:{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:m.Hd-2*y+"px",color:`rgba(${[g.r,g.g,g.b,g.a].join(",")})`,fontSize:`${h}px`,fontWeight:f},content:A}}})),[y,S,v,s,d,p,g,h,f,T.label,A]);return(0,c.tZ)(b,{"data-test":"progress-ring-chart",width:t,height:o},(0,c.tZ)(u,{width:P.width,height:P.height,plotConstructor:n.TZ,chartOptions:P}),x&&(0,c.tZ)("div",{"data-test":"ring-text-detail",className:"ring-text-detail"},(0,c.tZ)("div",{className:"ring-text-current"},C,": ",T.value),(0,c.tZ)("div",{className:"ring-text-target"},w,": ",_.value)))},v=i.iK.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: ${({height:e})=>"number"===typeof e?e+"px":e};
  width: ${({width:e})=>"number"===typeof e?e+"px":e};

  .ring-text-detail {
    height: 42px;
    margin-top: 12px;

    .ring-text-current,
    .ring-text-target {
      font-size: 12px;
      color: undefined;
      font-weight: normal;
      font-style: normal;
    }
  }
`,x=e=>{const{width:t,height:o,data:r,config:i,percentage:l}=e,{nameColor:s,nameFontSize:d,nameFontWeight:p,valueColor:g,valueFontSize:h,valueFontWeight:f,chartWidth:b,color:y,isShowValueDesc:x,currentName:C,targetName:w}=i,[T,_]=r,{originalValue:S,formatValue:A}=l,P=(0,a.useMemo)((()=>({width:m.Hd,height:m.Hd,outline:{border:b,distance:4},percent:S,radius:1,statistic:{title:{formatter:()=>T.label,style:{fill:`rgba(${[s.r,s.g,s.b,s.a].join(",")})`,fontSize:`${d}px`,fontWeight:p}},content:{style:{lineHeight:1,fill:`rgba(${[g.r,g.g,g.b,g.a].join(",")})`,fontSize:`${h}px`,fontWeight:f},content:A}},color:()=>y})),[b,S,y,s,d,p,g,h,f,T.label,A]);return(0,c.tZ)(v,{"data-test":"progress-liquid-chart",width:t,height:o},(0,c.tZ)(u,{width:P.width,height:P.height,plotConstructor:n.Kj,chartOptions:P}),x&&(0,c.tZ)("div",{"data-test":"ring-text-detail",className:"ring-text-detail"},(0,c.tZ)("div",{className:"ring-text-current"},C,": ",T.value),(0,c.tZ)("div",{className:"ring-text-target"},w,": ",_.value)))},C=[{name:(0,r.t)("Progress bar chart"),key:"BarChart",component:f},{name:(0,r.t)("Progress ring chart"),key:"RingChart",component:y},{name:(0,r.t)("Progress liquid chart"),key:"LiquidChart",component:x}]},579793:(e,t,o)=>{o.d(t,{BD:()=>n,Hd:()=>l,Rv:()=>s,SD:()=>i,ht:()=>r});var r,a=o(645636);!function(e){e.L="LEFT",e.R="RIGHT",e.TL="TOP LEFT",e.TC="TOP CENTER",e.TR="TOP RIGHT"}(r||(r={}));const n=10,i=10,l=150,s=[[a.Z.PERCENT_1_POINT,",.1% (12345.432 => 1,234,543.2%)"],[a.Z.PERCENT_2_POINT,",.2% (12345.432 => 1,234,543.20%)"],[a.Z.PERCENT_3_POINT,",.3% (12345.432 => 1,234,543.200%)"],[".1%",".1% (12345.432 => 1234543.20%)"],[".2%",".2% (12345.432 => 1234543.20%)"],[".3%",".3% (12345.432 => 1234543.200%)"]]},119673:(e,t,o)=>{o.d(t,{$k:()=>n,F2:()=>r,nh:()=>a});const r=10,a=40,n="#015DBA"},92638:(e,t,o)=>{o.d(t,{Im:()=>s,Lh:()=>i,My:()=>r,YF:()=>n,dS:()=>l,oO:()=>a});const r=[.7,.4],a=11,n=2,i=2,l="#fff",s=e=>{const t=(null!=e?e:[]).map((e=>(null==e?void 0:e.name)||"")).filter((e=>""!==e));return{metricLabel:t.shift()||"",treePath:t}}},849239:(e,t,o)=>{o.d(t,{GF:()=>d,N4:()=>s,O0:()=>u,Q8:()=>f,SM:()=>l,ZV:()=>c,f6:()=>g,hK:()=>m,li:()=>i,wD:()=>h,xo:()=>p});var r=o(455867),a=o(918010),n=o(330080);const i="<NULL>",l={gridOffsetRight:20,gridOffsetLeft:20,gridOffsetTop:20,gridOffsetBottom:20,gridOffsetBottomZoomable:80,legendRightTopOffset:30,legendTopRightOffset:55,zoomBottom:30,toolboxTop:0,toolboxRight:5,dataZoomStart:0,dataZoomEnd:100,yAxisLabelTopOffset:20,extraControlsOffset:22},s=[[n.Pl.Top,(0,r.t)("Top")],[n.Pl.Left,(0,r.t)("Left")],[n.Pl.Right,(0,r.t)("Right")],[n.Pl.Bottom,(0,r.t)("Bottom")],[n.Pl.Inside,(0,r.t)("Inside")],[n.Pl.InsideLeft,(0,r.t)("Inside left")],[n.Pl.InsideRight,(0,r.t)("Inside right")],[n.Pl.InsideTop,(0,r.t)("Inside top")],[n.Pl.InsideBottom,(0,r.t)("Inside bottom")],[n.Pl.InsideTopLeft,(0,r.t)("Inside top left")],[n.Pl.InsideBottomLeft,(0,r.t)("Inside bottom left")],[n.Pl.InsideTopRight,(0,r.t)("Inside top right")],[n.Pl.InsideBottomRight,(0,r.t)("Inside bottom right")]];var c,d;!function(e){e[e.Transparent=0]="Transparent",e[e.SemiTransparent=.3]="SemiTransparent",e[e.NonTransparent=1]="NonTransparent"}(c||(c={})),function(e){e.Stack="Stack",e.Expand="Expand"}(d||(d={}));const u=[[null,(0,r.t)("None")],[d.Stack,(0,r.t)("Stack")],[d.Expand,(0,r.t)("Expand")]],m={[a.AY.HOUR]:36e5,[a.AY.DAY]:864e5,[a.AY.MONTH]:26784e5,[a.AY.QUARTER]:80352e5,[a.AY.YEAR]:321408e5},p={legendMargin:null,legendOrientation:n.IY.Top,legendType:n.HJ.Scroll,showLegend:!0},g={xAxisTitle:"",xAxisTitleMargin:0,yAxisTitle:"",yAxisTitleMargin:0,yAxisTitlePosition:"Top"},h=10,f=5},196886:(e,t,o)=>{o.d(t,{C0:()=>n,mW:()=>i,oe:()=>a});var r=o(330080);const a={containLabel:!0},n={scale:!0},i={[r.IY.Top]:20,[r.IY.Bottom]:20,[r.IY.Left]:170,[r.IY.Right]:170}},330080:(e,t,o)=>{var r,a,n,i;o.d(t,{HJ:()=>n,IY:()=>a,Pl:()=>i,i1:()=>r}),function(e){e.Observation="",e.ForecastTrend="__yhat",e.ForecastUpper="__yhat_upper",e.ForecastLower="__yhat_lower"}(r||(r={})),function(e){e.Top="top",e.Bottom="bottom",e.Left="left",e.Right="right"}(a||(a={})),function(e){e.Scroll="scroll",e.Plain="plain"}(n||(n={})),function(e){e.Top="top",e.Left="left",e.Right="right",e.Bottom="bottom",e.Inside="inside",e.InsideLeft="insideLeft",e.InsideRight="insideRight",e.InsideTop="insideTop",e.InsideBottom="insideBottom",e.InsideTopLeft="insideTopLeft",e.InsideBottomLeft="insideBottomLeft",e.InsideTopRight="insideTopRight",e.InsideBottomRight="insideBottomRight"}(i||(i={}))},806915:(e,t,o)=>{o.d(t,{G_:()=>C,IE:()=>w,IW:()=>y,Ie:()=>f,P_:()=>S,Z6:()=>T,a6:()=>g,aI:()=>_,iw:()=>v,kU:()=>h,mj:()=>b,oO:()=>A,zp:()=>x});var r=o(5364),a=o(88889),n=o(355786),i=o(616355),l=o(777809),s=o(645636),c=o(53552),d=o(849239),u=o(330080),m=o(196886);function p(e){return void 0!==e&&null!==e}function g(e,t){const o=[],r=[],{stack:a,percentageThreshold:n,xAxisCol:i}=t;return a&&e.forEach((e=>{const t=Object.keys(e).reduce(((t,o)=>{if(o===i)return t;return t+(e[o]||0)}),0);o.push(t),r.push((n||0)/100*t)})),{totalStackedValues:o,thresholdValues:r}}function h(e,t){const o=[];return t.stack&&e.forEach(((e,r)=>{const{data:a=[]}=e;a.forEach(((e,a)=>{t.onlyTotal||null===e[t.isHorizontal?0:1]||(o[a]=r),t.onlyTotal&&(e[t.isHorizontal?0:1]>0&&(o[a]=r),o[a]||null===e[t.isHorizontal?0:1]||(o[a]=r))}))})),o}function f(e,t={}){const{fillNeighborValue:o,xAxis:a=r.W3,removeNulls:n=!1,stack:i=!1,totalStackedValues:l=[],isHorizontal:s=!1}=t;if(0===e.length)return[];const c=e.map((e=>({...e,[a]:e[a]})));return Object.keys(c[0]).filter((e=>e!==a&&e!==r.W3)).map((e=>({id:e,name:e,data:c.map(((t,r)=>{var n,s;const u=p(null==(n=c[r-1])?void 0:n[e])||p(null==(s=c[r+1])?void 0:s[e]),m=!p(t[e])&&u&&void 0!==o;let g=t[e];return m?g=o:i===d.GF.Expand&&l.length>0&&(g=(g||0)/l[r]),[t[a],g]})).filter((e=>!n||null!==e[0]&&null!==e[1])).map((e=>s?[e[1],e[0]]:e))})))}function b(e,{numberFormatter:t,timeFormatter:o,coltype:r}={}){if(void 0===e||null===e)return d.li;if("boolean"===typeof e)return e.toString();if(e instanceof Date||r===a.Z.TEMPORAL){const t=e instanceof Date?e:new Date(e);return o?o(t):t.toISOString()}return"number"===typeof e?t?t(e):e.toString():e}const y=({coltypes:e=[],colnames:t=[]})=>t.reduce(((t,o,r)=>({...t,[o]:e[r]})),{});function v({datum:e={},groupby:t,numberFormatter:o,timeFormatter:r,coltypeMapping:a={}}){return(0,n.Z)(t).map((t=>b(e[t],{numberFormatter:o,timeFormatter:r,...a[t]&&{coltype:a[t]}}))).join(", ")}function x(e,t,o,r=!1){const a={orient:[u.IY.Top,u.IY.Bottom].includes(t)?"horizontal":"vertical",show:o,type:e};switch(t){case u.IY.Left:a.left=0;break;case u.IY.Right:a.right=0,a.top=r?d.SM.legendRightTopOffset:0;break;case u.IY.Bottom:a.bottom=0;break;case u.IY.Top:default:a.top=0,a.right=r?d.SM.legendTopRightOffset:0}return a}function C(e,t,o,r){let a;a=e?null===o||void 0===o||"string"===typeof o?m.mW[t]:o:0;const{bottom:n=0,left:i=0,right:l=0,top:s=0}=r||{};return{left:i+(t===u.IY.Left?a:0),right:l+(t===u.IY.Right?a:0),top:s+(t===u.IY.Top?a:0),bottom:n+(t===u.IY.Bottom?a:0)}}function w(e){const t=new Map;return e.map((e=>{let{id:o}=e;if(void 0===o)return e;o=String(o);const r=t.get(o)||0,a=r>0?` (${r})`:"";return t.set(o,r+1),{...e,id:`${o}${a}`}}))}function T(e){return c.WU.encodeHTML(e)}const _={name:"",legend:""};function S(e){return e===a.Z.TEMPORAL?i.we.time:i.we.category}function A(e={}){const{max:t,formatter:o}=e,r=!!t||0===t;return new l.Z({formatFunc:e=>`${r&&e>t?"":(null==o?void 0:o.format(e))||e}`,id:s.Z.OVER_MAX_HIDDEN})}},386769:(e,t,o)=>{var r;o.d(t,{Q:()=>r}),function(e){e.ROWS="ROWS",e.COLUMNS="COLUMNS"}(r||(r={}))},412456:(e,t,o)=>{o.d(t,{X:()=>r});const r=(e=(()=>{}),t,o)=>e({ownState:{currentPage:t,pageSize:o}})},4098:(e,t,o)=>{o.d(t,{T:()=>i});var r=o(806126),a=o(455867);const n={en:{"Query Mode":[""],Aggregate:[""],"Raw Records":[""],"Emit Filter Events":[""],"Show Cell Bars":[""],"page_size.show":["Show"],"page_size.all":["All"],"page_size.entries":["entries"],"table.previous_page":["Previous"],"table.next_page":["Next"],"search.num_records":["%s record","%s records..."]},fr:{"Query Mode":[""],Aggregate:[""],"Raw Records":[""],"Emit Filter Events":[""],"Show Cell Bars":[""],"page_size.show":["Afficher"],"page_size.all":["tous"],"page_size.entries":["entr\xe9es"],"table.previous_page":["Pr\xe9c\xe9dent"],"table.next_page":["Suivante"],"search.num_records":["%s enregistrement","%s enregistrements..."]},zh:{"Query Mode":["\u67e5\u8be2\u6a21\u5f0f"],Aggregate:["\u5206\u7ec4\u805a\u5408"],"Raw Records":["\u539f\u59cb\u6570\u636e"],"Emit Filter Events":["\u5173\u8054\u770b\u677f\u8fc7\u6ee4\u5668"],"Show Cell Bars":["\u4e3a\u6307\u6807\u6dfb\u52a0\u6761\u72b6\u56fe\u80cc\u666f"],"page_size.show":["\u6bcf\u9875\u663e\u793a"],"page_size.all":["\u5168\u90e8"],"page_size.entries":["\u6761"],"table.previous_page":["\u4e0a\u4e00\u9875"],"table.next_page":["\u4e0b\u4e00\u9875"],"search.num_records":["%s\u6761\u8bb0\u5f55..."]}};(0,a.oK)(n);const i=(0,r.m)([[0,(0,a.t)("page_size.all")],10,20,50,100,200])},578676:(e,t,o)=>{var r;o.d(t,{c:()=>r}),function(e){e[e.Minimum=0]="Minimum",e[e.Exact=1]="Exact",e[e.Maximum=2]="Maximum"}(r||(r={}))},107447:(e,t,o)=>{o.d(t,{Z:()=>Zh});var r=o(837687),a=o(746449),n=o(593185),i=o(848805),l=o(455867),s=o(884912),c=o(767190),d=o(751115);function u(e){const{height:t,formData:o,queriesData:r,datasource:a}=e,{cellPadding:n,cellRadius:i,cellSize:l,domainGranularity:s,linearColorScheme:u,showLegend:m,showMetricName:p,showValues:g,steps:h,subdomainGranularity:f,xAxisTimeFormat:b,yAxisFormat:y}=o,{verboseMap:v}=a,x=(0,c.JB)(y);return{height:t,data:r[0].data,cellPadding:n,cellRadius:i,cellSize:l,domainGranularity:s,linearColorScheme:u,showLegend:m,showMetricName:p,showValues:g,steps:h,subdomainGranularity:f,timeFormatter:e=>((e,t)=>{const o=new Date(e),r=60*o.getTimezoneOffset()*1e3;return(0,d.bt)(t)(o.getTime()-r)})(e,b),valueFormatter:x,verboseMap:v}}const m=o.p+"example.537c9da1..jpg";var p=o(375294),g=o(748989),h=o(558842),f=o(320002);const b={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Time"),expanded:!0,description:(0,l.t)("Time related form attributes"),controlSetRows:[["granularity_sqla"],["time_range"]]},{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"domain_granularity",config:{type:"SelectControl",label:(0,l.t)("Domain"),default:"month",choices:[["hour",(0,l.t)("hour")],["day",(0,l.t)("day")],["week",(0,l.t)("week")],["month",(0,l.t)("month")],["year",(0,l.t)("year")]],description:(0,l.t)("The time unit used for the grouping of blocks")}},{name:"subdomain_granularity",config:{type:"SelectControl",label:(0,l.t)("Subdomain"),default:"day",choices:[["min",(0,l.t)("min")],["hour",(0,l.t)("hour")],["day",(0,l.t)("day")],["week",(0,l.t)("week")],["month",(0,l.t)("month")]],description:(0,l.t)("The time unit for each block. Should be a smaller unit than domain_granularity. Should be larger or equal to Time Grain")}}],["metrics"],["adhoc_filters"]]},{label:(0,l.t)("Chart Options"),expanded:!0,tabOverride:"customize",controlSetRows:[["linear_color_scheme"],[{name:"cell_size",config:{type:"TextControl",isInt:!0,default:10,validators:[p.Z],renderTrigger:!0,label:(0,l.t)("Cell Size"),description:(0,l.t)("The size of the square cell, in pixels")}},{name:"cell_padding",config:{type:"TextControl",isInt:!0,validators:[p.Z],renderTrigger:!0,default:2,label:(0,l.t)("Cell Padding"),description:(0,l.t)("The distance between cells, in pixels")}}],[{name:"cell_radius",config:{type:"TextControl",isInt:!0,validators:[p.Z],renderTrigger:!0,default:0,label:(0,l.t)("Cell Radius"),description:(0,l.t)("The pixel radius")}},{name:"steps",config:{type:"TextControl",isInt:!0,validators:[p.Z],renderTrigger:!0,default:10,label:(0,l.t)("Color Steps"),description:(0,l.t)('The number color "steps"')}}],["y_axis_format",{name:"x_axis_time_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Time Format"),renderTrigger:!0,default:"smart_date",choices:h.HC,description:h.YD}}],[{name:"show_legend",config:{type:"CheckboxControl",label:(0,l.t)("Legend"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to display the legend (toggles)")}},{name:"show_values",config:{type:"CheckboxControl",label:(0,l.t)("Show Values"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display the numerical values within the cells")}}],[{name:"show_metric_name",config:{type:"CheckboxControl",label:(0,l.t)("Show Metric Names"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to display the metric name as a title")}},null]]}],controlOverrides:{y_axis_format:{label:(0,l.t)("Number Format")}},formDataOverrides:e=>({...e,metrics:(0,f.u)().popAllMetrics()})};var y=o(573626);const v=new i.Z({category:(0,l.t)("Correlation"),credits:["https://github.com/wa0x6e/cal-heatmap"],description:(0,l.t)("Visualizes how a metric has changed over a time using a color scale and a calendar view. Gray values are used to indicate missing values and the linear color scheme is used to encode the magnitude of each day's value."),exampleGallery:[{url:m}],name:(0,l.t)("Calendar Heatmap"),tags:[(0,l.t)("Business"),(0,l.t)("Comparison"),(0,l.t)("Intensity"),(0,l.t)("Pattern"),(0,l.t)("Report"),(0,l.t)("Trend")],thumbnail:y,useLegacyApi:!0});class x extends s.Z{constructor(){super({loadChart:()=>o.e(87245).then(o.bind(o,87245)),metadata:v,transformProps:u,controlPanel:b})}}function C(e){const{width:t,height:o,formData:r,queriesData:a}=e,{yAxisFormat:n,colorScheme:i,sliceId:l}=r;return{colorScheme:i,data:a[0].data,height:o,numberFormat:n,width:t,sliceId:l}}const w=o.p+"chord.446d549d..jpg";var T=o(942419),_=o(895826),S=o(355786);const A={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["columns"],["metric"],["adhoc_filters"],["row_limit"],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["y_axis_format",null],["color_scheme"]]}],controlOverrides:{y_axis_format:{label:(0,l.t)("Number format"),description:(0,l.t)("Choose a number format")},groupby:{label:(0,l.t)("Source"),multi:!1,validators:[_.Z],description:(0,l.t)("Choose a source")},columns:{label:(0,l.t)("Target"),multi:!1,validators:[_.Z],description:(0,l.t)("Choose a target")}},formDataOverrides:e=>{const t=(0,f.u)().popAllColumns().filter((t=>!(0,S.Z)(e.columns).includes(t)));return{...e,groupby:t,metric:(0,f.u)().shiftMetric()}}},P=new i.Z({category:(0,l.t)("Flow"),credits:["https://github.com/d3/d3-chord"],description:(0,l.t)("Showcases the flow or link between categories using thickness of chords. The value and corresponding thickness can be different for each side."),exampleGallery:[{url:w,caption:(0,l.t)("Relationships between community channels")}],name:(0,l.t)("Chord Diagram"),tags:[(0,l.t)("Aesthetic"),(0,l.t)("Circular"),(0,l.t)("Legacy"),(0,l.t)("Proportional"),(0,l.t)("Relational")],thumbnail:T,useLegacyApi:!0});class k extends s.Z{constructor(){super({loadChart:()=>o.e(15264).then(o.bind(o,15264)),metadata:P,transformProps:C,controlPanel:A})}}var F=o(549970);const R=o.p+"example.1ec31bd3..jpg";var I=o(667294),E=o(775781),L=o(806126),D=o(365634),Z=o(211965);const M={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Time"),expanded:!0,description:(0,l.t)("Time related form attributes"),controlSetRows:[["granularity_sqla"],["time_range"]]},{label:(0,l.t)("Event definition"),controlSetRows:[["entity"],[{name:"all_columns_x",config:{type:"SelectControl",label:(0,l.t)("Event Names"),description:(0,l.t)("Columns to display"),mapStateToProps:e=>({choices:(0,E.Z)(null==e?void 0:e.datasource)}),default:e=>{var t,o;return(null==(t=e.choices)||null==(o=t[0])?void 0:o[0])||null},validators:[_.Z]}}],["row_limit"],[{name:"order_by_entity",config:{type:"CheckboxControl",label:(0,l.t)("Order by entity id"),description:(0,l.t)("Important! Select this if the table is not already sorted by entity id, else there is no guarantee that all events for each entity are returned."),default:!0}}],[{name:"min_leaf_node_event_count",config:{type:"SelectControl",freeForm:!1,label:(0,l.t)("Minimum leaf node event count"),default:1,choices:(0,L.B)(1,10),description:(0,l.t)("Leaf nodes that represent fewer than this number of events will be initially hidden in the visualization")}}]]},{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["adhoc_filters"]]},{label:(0,l.t)("Additional metadata"),controlSetRows:[[{name:"all_columns",config:{type:"SelectControl",multi:!0,label:(0,l.t)("Metadata"),default:[],description:(0,l.t)("Select any columns for metadata inspection"),optionRenderer:e=>(0,Z.tZ)(D.E,{showType:!0,column:e}),valueRenderer:e=>(0,Z.tZ)(D.E,{column:e}),valueKey:"column_name",allowAll:!0,mapStateToProps:e=>{var t;return{options:(null==(t=e.datasource)?void 0:t.columns)||[]}},commaChoosesOption:!1,freeForm:!0}}]]}],controlOverrides:{entity:{label:(0,l.t)("Entity ID"),description:(0,l.t)('e.g., a "user id" column')},row_limit:{label:(0,l.t)("Max Events"),description:(0,l.t)("The maximum number of events to return, equivalent to the number of rows")}}},O=new i.Z({category:(0,l.t)("Flow"),credits:["https://github.com/williaster/data-ui"],description:(0,l.t)("Compares the lengths of time different activities take in a shared timeline view."),exampleGallery:[{url:R}],name:(0,l.t)("Event Flow"),tags:[(0,l.t)("Legacy"),(0,l.t)("Progressive")],thumbnail:F,useLegacyApi:!0});class N extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(9857),o.e(88701)]).then(o.bind(o,388701)),loadTransformProps:()=>Promise.all([o.e(9857),o.e(90349)]).then(o.bind(o,890349)),metadata:O,controlPanel:M})}}function B(e){const{width:t,height:o,formData:r,queriesData:a}=e,{bottomMargin:n,canvasImageRendering:i,allColumnsX:l,allColumnsY:s,linearColorScheme:c,leftMargin:d,metric:u,normalized:m,showLegend:p,showPerc:g,showValues:h,sortXAxis:f,sortYAxis:b,xscaleInterval:y,yscaleInterval:v,yAxisBounds:x,yAxisFormat:C}=r;return{width:t,height:o,data:a[0].data,bottomMargin:n,canvasImageRendering:i,colorScheme:c,columnX:l,columnY:s,leftMargin:d,metric:u,normalized:m,numberFormat:C,showLegend:p,showPercentage:g,showValues:h,sortXAxis:f,sortYAxis:b,xScaleInterval:parseInt(y,10),yScaleInterval:parseInt(v,10),yAxisBounds:x}}const z=o.p+"transportation.75912cf2..jpg",V=o.p+"channels.99e7cde9..jpg",q=o.p+"employment.7b5c16a7..jpg";var $=o(492722),W=o(539650);const H=[["alpha_asc",(0,l.t)("Axis ascending")],["alpha_desc",(0,l.t)("Axis descending")],["value_asc",(0,l.t)("Metric ascending")],["value_desc",(0,l.t)("Metric descending")]],Y={type:"SelectControl",default:null,description:(0,l.t)("Columns to display"),mapStateToProps:e=>({choices:(0,E.Z)(e.datasource)}),validators:[_.Z]},Q={...W.ZP.entity,description:(0,l.t)("Columns to display")},j=(0,n.c)(n.T.ENABLE_EXPLORE_DRAG_AND_DROP)?Q:Y,G={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"all_columns_x",config:{...j,label:(0,l.t)("X Axis")}}],[{name:"all_columns_y",config:{...j,label:(0,l.t)("Y Axis")}}],["metric"],["adhoc_filters"],["row_limit"],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}]]},{label:(0,l.t)("Heatmap Options"),expanded:!0,tabOverride:"customize",controlSetRows:[["linear_color_scheme"],[{name:"xscale_interval",config:{type:"SelectControl",label:(0,l.t)("XScale Interval"),renderTrigger:!0,choices:(0,L.B)(1,50),default:1,clearable:!1,description:(0,l.t)("Number of steps to take between ticks when displaying the X scale")}}],[{name:"yscale_interval",config:{type:"SelectControl",label:(0,l.t)("YScale Interval"),choices:(0,L.B)(1,50),default:1,clearable:!1,renderTrigger:!0,description:(0,l.t)("Number of steps to take between ticks when displaying the Y scale")}}],[{name:"canvas_image_rendering",config:{type:"SelectControl",label:(0,l.t)("Rendering"),renderTrigger:!0,choices:[["pixelated",(0,l.t)("pixelated (Sharp)")],["auto",(0,l.t)("auto (Smooth)")]],default:"pixelated",description:(0,l.t)("image-rendering CSS attribute of the canvas object that defines how the browser scales up the image")}}],[{name:"normalize_across",config:{type:"SelectControl",label:(0,l.t)("Normalize Across"),choices:[["heatmap",(0,l.t)("heatmap")],["x",(0,l.t)("x")],["y",(0,l.t)("y")]],default:"heatmap",description:(0,Z.tZ)(I.Fragment,null,(0,Z.tZ)("div",null,(0,l.t)("Color will be shaded based the normalized (0% to 100%) value of a given cell against the other cells in the selected range: ")),(0,Z.tZ)("ul",null,(0,Z.tZ)("li",null,(0,l.t)("x: values are normalized within each column")),(0,Z.tZ)("li",null,(0,l.t)("y: values are normalized within each row")),(0,Z.tZ)("li",null,(0,l.t)("heatmap: values are normalized across the entire heatmap"))))}}],[{name:"left_margin",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Left Margin"),choices:[["auto",(0,l.t)("auto")],[50,"50"],[75,"75"],[100,"100"],[125,"125"],[150,"150"],[200,"200"]],default:"auto",renderTrigger:!0,description:(0,l.t)("Left margin, in pixels, allowing for more room for axis labels")}}],[{name:"bottom_margin",config:{type:"SelectControl",clearable:!1,freeForm:!0,label:(0,l.t)("Bottom Margin"),choices:[["auto",(0,l.t)("auto")],[50,"50"],[75,"75"],[100,"100"],[125,"125"],[150,"150"],[200,"200"]],default:"auto",renderTrigger:!0,description:(0,l.t)("Bottom margin, in pixels, allowing for more room for axis labels")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Value bounds"),renderTrigger:!0,default:[null,null],description:(0,l.t)("Hard value bounds applied for color coding. Is only relevant and applied when the normalization is applied against the whole heatmap.")}}],["y_axis_format"],[{name:"sort_x_axis",config:{type:"SelectControl",label:(0,l.t)("Sort X Axis"),choices:H,clearable:!1,default:"alpha_asc"}}],[{name:"sort_y_axis",config:{type:"SelectControl",label:(0,l.t)("Sort Y Axis"),choices:H,clearable:!1,default:"alpha_asc"}}],[{name:"show_legend",config:{type:"CheckboxControl",label:(0,l.t)("Legend"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to display the legend (toggles)")}}],[{name:"show_perc",config:{type:"CheckboxControl",label:(0,l.t)("Show percentage"),renderTrigger:!0,description:(0,l.t)("Whether to include the percentage in the tooltip"),default:!0}}],[{name:"show_values",config:{type:"CheckboxControl",label:(0,l.t)("Show Values"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display the numerical values within the cells")}}],[{name:"normalized",config:{type:"CheckboxControl",label:(0,l.t)("Normalized"),renderTrigger:!0,description:(0,l.t)("Whether to apply a normal distribution based on rank on the color scale"),default:!1}}]]}],controlOverrides:{y_axis_format:{label:(0,l.t)("Value Format")}},formDataOverrides:e=>({...e,metric:(0,f.u)().shiftMetric()})},U=new i.Z({category:(0,l.t)("Correlation"),credits:["http://bl.ocks.org/mbostock/3074470"],description:(0,l.t)("Visualize a related metric across pairs of groups. Heatmaps excel at showcasing the correlation or strength between two groups. Color is used to emphasize the strength of the link between each pair of groups."),exampleGallery:[{url:z,caption:(0,l.t)("Sizes of vehicles")},{url:V,caption:(0,l.t)("Relationships between community channels")},{url:q,caption:(0,l.t)("Employment and education")}],name:(0,l.t)("Heatmap"),tags:[(0,l.t)("Business"),(0,l.t)("Intensity"),(0,l.t)("Legacy"),(0,l.t)("Density"),(0,l.t)("Predictive"),(0,l.t)("Single Metric")],thumbnail:$,useLegacyApi:!0});class J extends s.Z{constructor(){super({loadChart:()=>o.e(86357).then(o.bind(o,986357)),metadata:U,transformProps:B,controlPanel:G})}}function K(e){const{width:t,height:o,formData:r,queriesData:a}=e,{colorScheme:n,linkLength:i,normalized:l,cumulative:s,globalOpacity:c,xAxisLabel:d,yAxisLabel:u,showLegend:m,sliceId:p}=r;return{width:t,height:o,data:a[0].data,binCount:parseInt(i,10),colorScheme:n,normalized:l,cumulative:s,opacity:c,xAxisLabel:d,yAxisLabel:u,showLegend:m,sliceId:p}}const X=o.p+"example1.44f08793..jpg",ee=o.p+"example2.19c795b0..jpg",te=o.p+"example3.99ab6fd0..jpg";var oe=o(899880);const re={...W.ZP.columns,label:(0,l.t)("Columns"),description:(0,l.t)("Select the numeric columns to draw the histogram"),mapStateToProps:(e,t)=>({...(null==W.ZP.columns.mapStateToProps?void 0:W.ZP.columns.mapStateToProps(e,t))||{},choices:(0,E.Z)(e.datasource)}),validators:[_.Z]},ae={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"all_columns_x",config:re}],["adhoc_filters"],["row_limit"],["groupby"]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"link_length",config:{type:"SelectControl",renderTrigger:!0,freeForm:!0,label:(0,l.t)("No of Bins"),default:5,choices:(0,L.m)(["10","25","50","75","100","150","200","250"]),description:(0,l.t)("Select the number of bins for the histogram")}}],[{name:"x_axis_label",config:{type:"TextControl",label:(0,l.t)("X Axis Label"),renderTrigger:!0,default:""}}],[{name:"y_axis_label",config:{type:"TextControl",label:(0,l.t)("Y Axis Label"),renderTrigger:!0,default:""}}],[{name:"show_legend",config:{type:"CheckboxControl",label:(0,l.t)("Legend"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to display the legend (toggles)")}}],[{name:"normalized",config:{type:"CheckboxControl",label:(0,l.t)("Normalized"),renderTrigger:!0,description:(0,l.t)("Whether to normalize the histogram"),default:!1}}],[{name:"cumulative",config:{type:"CheckboxControl",label:(0,l.t)("Cumulative"),renderTrigger:!0,description:(0,l.t)("Whether to make the histogram cumulative"),default:!1}}]]}],formDataOverrides:e=>({...e,groupby:(0,f.u)().popAllColumns()})},ne=new i.Z({category:(0,l.t)("Distribution"),description:(0,l.t)('Take your data points, and group them into "bins" to see where the densest areas of information lie'),exampleGallery:[{url:X,caption:(0,l.t)("Population age data")},{url:ee},{url:te}],name:(0,l.t)("Histogram"),tags:[(0,l.t)("Comparison"),(0,l.t)("Legacy"),(0,l.t)("Pattern"),(0,l.t)("Range")],thumbnail:oe,useLegacyApi:!0});class ie extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(80378),o.e(71601)]).then(o.bind(o,371601)),metadata:ne,transformProps:K,controlPanel:ae})}}function le(e){const{height:t,width:o,formData:r,queriesData:a}=e,{horizonColorScale:n,seriesHeight:i}=r;return{colorScale:n,data:a[0].data,height:t,seriesHeight:parseInt(i,10),width:o}}const se=o.p+"Horizon_Chart.7b46c45c..jpg";var ce=o(344439);const de={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Time"),expanded:!0,description:(0,l.t)("Time related form attributes"),controlSetRows:[["granularity_sqla"],["time_range"]]},{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit","timeseries_limit_metric"],["order_desc"],[{name:"contribution",config:{type:"CheckboxControl",label:(0,l.t)("Contribution"),default:!1,description:(0,l.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[[{name:"series_height",config:{type:"SelectControl",renderTrigger:!0,freeForm:!0,label:(0,l.t)("Series Height"),default:"25",choices:(0,L.m)(["10","25","40","50","75","100","150","200"]),description:(0,l.t)("Pixel height of each series")}},{name:"horizon_color_scale",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Value Domain"),choices:[["series",(0,l.t)("series")],["overall",(0,l.t)("overall")],["change",(0,l.t)("change")]],default:"series",description:(0,l.t)("series: Treat each series independently; overall: All series use the same scale; change: Show changes compared to the first data point in each series")}}]]}]},ue=new i.Z({category:(0,l.t)("Distribution"),credits:["http://kmandov.github.io/d3-horizon-chart/"],description:(0,l.t)("Compares how a metric changes over time between different groups. Each group is mapped to a row and change over time is visualized bar lengths and color."),exampleGallery:[{url:se}],name:(0,l.t)("Horizon Chart"),tags:[(0,l.t)("Legacy")],thumbnail:ce,useLegacyApi:!0});class me extends s.Z{constructor(){super({loadChart:()=>o.e(39877).then(o.bind(o,239877)),metadata:ue,transformProps:le,controlPanel:de})}}function pe(e){const{formData:t,queriesData:o}=e,{groupby:r,liftvaluePrecision:a,metrics:n,pvaluePrecision:i,significanceLevel:l}=t;return{alpha:l,data:o[0].data,groups:r,liftValPrec:parseInt(a,10),metrics:n.map((e=>"string"===typeof e?e:e.label)),pValPrec:parseInt(i,10)}}var ge=o(175768);const he={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Time"),expanded:!0,description:(0,l.t)("Time related form attributes"),controlSetRows:[["granularity_sqla"],["time_range"]]},{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],[{name:"groupby",override:{validators:[_.Z]}}],["limit","timeseries_limit_metric"],["order_desc"],[{name:"contribution",config:{type:"CheckboxControl",label:(0,l.t)("Contribution"),default:!1,description:(0,l.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,l.t)("Parameters"),expanded:!1,controlSetRows:[[{name:"significance_level",config:{type:"TextControl",label:(0,l.t)("Significance Level"),default:.05,description:(0,l.t)("Threshold alpha level for determining significance")}}],[{name:"pvalue_precision",config:{type:"TextControl",label:(0,l.t)("p-value precision"),default:6,description:(0,l.t)("Number of decimal places with which to display p-values")}}],[{name:"liftvalue_precision",config:{type:"TextControl",label:(0,l.t)("Lift percent precision"),default:4,description:(0,l.t)("Number of decimal places with which to display lift values")}}]]}]},fe=new i.Z({category:(0,l.t)("Correlation"),description:(0,l.t)("Table that visualizes paired t-tests, which are used to understand statistical differences between groups."),name:(0,l.t)("Paired t-test Table"),tags:[(0,l.t)("Legacy"),(0,l.t)("Statistical"),(0,l.t)("Tabular")],thumbnail:ge,useLegacyApi:!0});class be extends s.Z{constructor(){super({loadChart:()=>o.e(55123).then(o.bind(o,755123)),metadata:fe,transformProps:pe,controlPanel:he})}}function ye(e){const{width:t,height:o,formData:r,queriesData:a}=e,{includeSeries:n,linearColorScheme:i,metrics:l,secondaryMetric:s,series:c,showDatatable:d}=r;return{width:t,height:o,data:a[0].data,includeSeries:n,linearColorScheme:i,metrics:l.map((e=>e.label||e)),colorMetric:s&&s.label?s.label:s,series:c,showDatatable:d}}var ve=o(872377);const xe=o.p+"example1.34be4dd6..jpg",Ce=o.p+"example2.f7e90b3e..jpg",we={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["series"],["metrics"],["secondary_metric"],["adhoc_filters"],["limit","row_limit"],["timeseries_limit_metric"],["order_desc"]]},{label:(0,l.t)("Options"),expanded:!0,controlSetRows:[[{name:"show_datatable",config:{type:"CheckboxControl",label:(0,l.t)("Data Table"),default:!1,renderTrigger:!0,description:(0,l.t)("Whether to display the interactive data table")}},{name:"include_series",config:{type:"CheckboxControl",label:(0,l.t)("Include Series"),renderTrigger:!0,default:!1,description:(0,l.t)("Include series name as an axis")}}],["linear_color_scheme"]]}]},Te=new i.Z({category:(0,l.t)("Ranking"),credits:["https://syntagmatic.github.io/parallel-coordinates"],description:(0,l.t)("Plots the individual metrics for each row in the data vertically and links them together as a line. This chart is useful for comparing multiple metrics across all of the samples or rows in the data."),exampleGallery:[{url:xe},{url:Ce}],name:(0,l.t)("Parallel Coordinates"),tags:[(0,l.t)("Coordinates"),(0,l.t)("Directional"),(0,l.t)("Legacy"),(0,l.t)("Relational")],thumbnail:ve,useLegacyApi:!0});class _e extends s.Z{constructor(){super({loadChart:()=>o.e(87003).then(o.bind(o,987003)),metadata:Te,transformProps:ye,controlPanel:we})}}function Se(e){const{width:t,height:o,datasource:r,formData:a,queriesData:n}=e,{colorScheme:i,dateTimeFormat:l,equalDateSize:s,groupby:c,logScale:d,metrics:u,numberFormat:m,partitionLimit:p,partitionThreshold:g,richTooltip:h,timeSeriesOption:f,sliceId:b}=a,{verboseMap:y}=r;return{width:t,height:o,data:n[0].data,colorScheme:i,dateTimeFormat:l,equalDateSize:s,levels:c.map((e=>y[e]||e)),metrics:u,numberFormat:m,partitionLimit:p&&parseInt(p,10),partitionThreshold:g&&parseInt(g,10),timeSeriesOption:f,useLogScale:d,useRichTooltip:h,sliceId:b}}var Ae=o(209754);const Pe=o.p+"example.f2f6c07c..jpg";var ke=o(45697),Fe=o.n(ke),Re=o(409882);const Ie={option:Fe().object.isRequired};function Ee({option:e}){return(0,Z.tZ)("span",null,(0,Z.tZ)("span",{className:"m-r-5 option-label"},e.label),e.description&&(0,Z.tZ)(Re.V,{className:"m-r-5 text-muted",icon:"question-circle-o",tooltip:e.description,label:`descr-${e.label}`}))}Ee.propTypes=Ie;const Le={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit"],["timeseries_limit_metric"],["order_desc"],[{name:"contribution",config:{type:"CheckboxControl",label:(0,l.t)("Contribution"),default:!1,description:(0,l.t)("Compute the contribution to the total")}}],["row_limit"]]},{label:(0,l.t)("Time Series Options"),expanded:!0,controlSetRows:[[{name:"time_series_option",config:{type:"SelectControl",label:(0,l.t)("Options"),validators:[_.Z],default:"not_time",valueKey:"value",options:[{label:(0,l.t)("Not Time Series"),value:"not_time",description:(0,l.t)("Ignore time")},{label:(0,l.t)("Time Series"),value:"time_series",description:(0,l.t)("Standard time series")},{label:(0,l.t)("Aggregate Mean"),value:"agg_mean",description:(0,l.t)("Mean of values over specified period")},{label:(0,l.t)("Aggregate Sum"),value:"agg_sum",description:(0,l.t)("Sum of values over specified period")},{label:(0,l.t)("Difference"),value:"point_diff",description:(0,l.t)("Metric change in value from `since` to `until`")},{label:(0,l.t)("Percent Change"),value:"point_percent",description:(0,l.t)("Metric percent change in value from `since` to `until`")},{label:(0,l.t)("Factor"),value:"point_factor",description:(0,l.t)("Metric factor change from `since` to `until`")},{label:(0,l.t)("Advanced Analytics"),value:"adv_anal",description:(0,l.t)("Use the Advanced Analytics options below")}],optionRenderer:e=>(0,Z.tZ)(Ee,{option:e}),valueRenderer:e=>(0,Z.tZ)(Ee,{option:e}),description:(0,l.t)("Settings for time series")}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,tabOverride:"customize",controlSetRows:[["color_scheme"],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:"SMART_NUMBER",choices:h.F6,description:h.YD}},{name:"date_time_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date Time Format"),renderTrigger:!0,default:"smart_date",choices:h.HC,description:h.YD}}],[{name:"partition_limit",config:{type:"TextControl",label:(0,l.t)("Partition Limit"),isInt:!0,default:"5",description:(0,l.t)("The maximum number of subdivisions of each group; lower values are pruned first")}},{name:"partition_threshold",config:{type:"TextControl",label:(0,l.t)("Partition Threshold"),isFloat:!0,default:"0.05",description:(0,l.t)("Partitions whose height to parent height proportions are below this value are pruned")}}],[{name:"log_scale",config:{type:"CheckboxControl",label:(0,l.t)("Log Scale"),default:!1,renderTrigger:!0,description:(0,l.t)("Use a log scale")}}],[{name:"equal_date_size",config:{type:"CheckboxControl",label:(0,l.t)("Equal Date Sizes"),default:!0,renderTrigger:!0,description:(0,l.t)("Check to force date partitions to have the same height")}}],[{name:"rich_tooltip",config:{type:"CheckboxControl",label:(0,l.t)("Rich Tooltip"),renderTrigger:!0,default:!0,description:(0,l.t)("The rich tooltip shows a list of all series for that point in time")}}]]},{label:(0,l.t)("Advanced Analytics"),tabOverride:"data",description:(0,l.t)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Rolling Window"))],[{name:"rolling_type",config:{type:"SelectControl",label:(0,l.t)("Rolling Function"),default:"None",choices:[["None",(0,l.t)("None")],["mean",(0,l.t)("mean")],["sum",(0,l.t)("sum")],["std",(0,l.t)("std")],["cumsum",(0,l.t)("cumsum")]],description:(0,l.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}}],[{name:"rolling_periods",config:{type:"TextControl",label:(0,l.t)("Periods"),isInt:!0,description:(0,l.t)("Defines the size of the rolling window function, relative to the time granularity selected")}},{name:"min_periods",config:{type:"TextControl",label:(0,l.t)("Min Periods"),isInt:!0,description:(0,l.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Time Comparison"))],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,l.t)("Time Shift"),choices:[["1 day",(0,l.t)("1 day")],["1 week",(0,l.t)("1 week")],["28 days",(0,l.t)("28 days")],["30 days",(0,l.t)("30 days")],["52 weeks",(0,l.t)("52 weeks")],["1 year",(0,l.t)("1 year")],["104 weeks",(0,l.t)("104 weeks")],["2 years",(0,l.t)("2 years")],["156 weeks",(0,l.t)("156 weeks")],["3 years",(0,l.t)("3 years")]],description:(0,l.t)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example: 24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}},{name:"comparison_type",config:{type:"SelectControl",label:(0,l.t)("Calculation type"),default:"values",choices:[["values",(0,l.t)("Actual Values")],["absolute",(0,l.t)("Difference")],["percentage",(0,l.t)("Percentage change")],["ratio",(0,l.t)("Ratio")]],description:(0,l.t)("How to display time shifts: as individual lines; as the difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Resample"))],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Rule"),default:null,choices:[["1T",(0,l.t)("1T")],["1H",(0,l.t)("1H")],["1D",(0,l.t)("1D")],["7D",(0,l.t)("7D")],["1M",(0,l.t)("1M")],["1AS",(0,l.t)("1AS")]],description:(0,l.t)("Pandas resample rule")}},{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Method"),default:null,choices:[["asfreq",(0,l.t)("asfreq")],["bfill",(0,l.t)("bfill")],["ffill",(0,l.t)("ffill")],["median",(0,l.t)("median")],["mean",(0,l.t)("mean")],["sum",(0,l.t)("sum")]],description:(0,l.t)("Pandas resample method")}}]]}],formDataOverrides:e=>({...e,groupby:(0,f.u)().popAllColumns(),metrics:(0,f.u)().popAllMetrics()})},De=new i.Z({category:(0,l.t)("Part of a Whole"),description:(0,l.t)("Compare the same summarized metric across multiple groups."),exampleGallery:[{url:Pe}],name:(0,l.t)("Partition Chart"),tags:[(0,l.t)("Categorical"),(0,l.t)("Comparison"),(0,l.t)("Legacy"),(0,l.t)("Proportional")],thumbnail:Ae,useLegacyApi:!0});class Ze extends s.Z{constructor(){super({loadChart:()=>o.e(25051).then(o.bind(o,525051)),metadata:De,transformProps:Se,controlPanel:Le})}}var Me=o(705031);function Oe(e){const{height:t,datasource:o,formData:r,queriesData:a,rawFormData:n}=e,{groupby:i,numberFormat:l,dateFormat:s}=r,{columnFormats:c,verboseMap:d}=o,u=(0,Me.Z)(n);return{columnFormats:c,data:a[0].data,dateFormat:s,granularity:u,height:t,numberFormat:l,numGroups:i.length,verboseMap:d}}var Ne=o(923998);const Be=o.p+"example.05665cd0..jpg",ze={controlPanelSections:[g.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["columns"],["row_limit",null],["timeseries_limit_metric"],["order_desc"]]},{label:(0,l.t)("Pivot Options"),controlSetRows:[[{name:"pandas_aggfunc",config:{type:"SelectControl",label:(0,l.t)("Aggregation function"),clearable:!1,choices:[["sum",(0,l.t)("sum")],["mean",(0,l.t)("mean")],["min",(0,l.t)("min")],["max",(0,l.t)("max")],["std",(0,l.t)("std")],["var",(0,l.t)("var")]],default:"sum",description:(0,l.t)("Aggregate function to apply when pivoting and computing the total rows and columns")}},null],[{name:"pivot_margins",config:{type:"CheckboxControl",label:(0,l.t)("Show totals"),default:!0,description:(0,l.t)("Display total row/column")}},{name:"combine_metric",config:{type:"CheckboxControl",label:(0,l.t)("Combine Metrics"),default:!1,description:(0,l.t)("Display metrics side by side within each column, as opposed to each column being displayed side by side for each metric.")}}],[{name:"transpose_pivot",config:{type:"CheckboxControl",label:(0,l.t)("Transpose Pivot"),default:!1,description:(0,l.t)("Swap Groups and Columns")}}]]},{label:(0,l.t)("Options"),expanded:!0,controlSetRows:[[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:"SMART_NUMBER",choices:h.F6,description:h.YD}}],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),renderTrigger:!0,choices:h.HC,default:"smart_date",description:h.YD}}]]}],controlOverrides:{groupby:{includeTime:!0},columns:{includeTime:!0}}},Ve=new i.Z({category:(0,l.t)("Table"),description:(0,l.t)("Used to summarize a set of data by grouping together multiple statistics along two axes. Examples: Sales numbers by region and month, tasks by status and assignee, active users by age and location.\n\n  This chart is being deprecated and we recommend checking out Pivot Table V2 instead!"),exampleGallery:[{url:Be}],name:(0,l.t)("Pivot Table (legacy)"),tags:[(0,l.t)("Legacy"),(0,l.t)("Deprecated")],thumbnail:Ne,useLegacyApi:!0,deprecated:!0});class qe extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(19755),o.e(88650)]).then(o.bind(o,188650)),metadata:Ve,transformProps:Oe,controlPanel:ze})}}function $e(e){const{width:t,height:o,formData:r,queriesData:a}=e,{colorScheme:n,dateTimeFormat:i,numberFormat:l,richTooltip:s,roseAreaProportion:c,sliceId:d}=r;return{width:t,height:o,data:a[0].data,colorScheme:n,dateTimeFormat:i,numberFormat:l,useAreaProportions:c,useRichTooltip:s,sliceId:d}}var We=o(295215);const He=o.p+"example1.198466c2..jpg",Ye=o.p+"example2.5c0aa0f4..jpg",Qe={controlPanelSections:[g.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit","timeseries_limit_metric"],["order_desc"],[{name:"contribution",config:{type:"CheckboxControl",label:(0,l.t)("Contribution"),default:!1,description:(0,l.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:"SMART_NUMBER",choices:h.F6,description:h.YD}},{name:"date_time_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date Time Format"),renderTrigger:!0,default:"smart_date",choices:h.HC,description:h.YD}}],[{name:"rich_tooltip",config:{type:"CheckboxControl",label:(0,l.t)("Rich Tooltip"),renderTrigger:!0,default:!0,description:(0,l.t)("The rich tooltip shows a list of all series for that point in time")}},{name:"rose_area_proportion",config:{type:"CheckboxControl",label:(0,l.t)("Use Area Proportions"),description:(0,l.t)("Check if the Rose Chart should use segment area instead of segment radius for proportioning"),default:!1,renderTrigger:!0}}]]},{label:(0,l.t)("Advanced Analytics"),tabOverride:"data",description:(0,l.t)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Rolling Window"))],[{name:"rolling_type",config:{type:"SelectControl",label:(0,l.t)("Rolling Function"),default:"None",choices:[["None",(0,l.t)("None")],["mean",(0,l.t)("mean")],["sum",(0,l.t)("sum")],["std",(0,l.t)("std")],["cumsum",(0,l.t)("cumsum")]],description:(0,l.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}}],[{name:"rolling_periods",config:{type:"TextControl",label:(0,l.t)("Periods"),isInt:!0,description:(0,l.t)("Defines the size of the rolling window function, relative to the time granularity selected")}},{name:"min_periods",config:{type:"TextControl",label:(0,l.t)("Min Periods"),isInt:!0,description:(0,l.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Time Comparison"))],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,l.t)("Time Shift"),choices:[["1 day",(0,l.t)("1 day")],["1 week",(0,l.t)("1 week")],["28 days",(0,l.t)("28 days")],["30 days",(0,l.t)("30 days")],["52 weeks",(0,l.t)("52 weeks")],["1 year",(0,l.t)("1 year")],["104 weeks",(0,l.t)("104 weeks")],["2 years",(0,l.t)("2 years")],["156 weeks",(0,l.t)("156 weeks")],["3 years",(0,l.t)("3 years")]],description:(0,l.t)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example:  24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}},{name:"comparison_type",config:{type:"SelectControl",label:(0,l.t)("Calculation type"),default:"values",choices:[["values",(0,l.t)("Actual Values")],["absolute",(0,l.t)("Difference")],["percentage",(0,l.t)("Percentage change")],["ratio",(0,l.t)("Ratio")]],description:(0,l.t)("How to display time shifts: as individual lines; as the difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Resample"))],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Rule"),default:null,choices:[["1T",(0,l.t)("1T")],["1H",(0,l.t)("1H")],["1D",(0,l.t)("1D")],["7D",(0,l.t)("7D")],["1M",(0,l.t)("1M")],["1AS",(0,l.t)("1AS")]],description:(0,l.t)("Pandas resample rule")}},{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Method"),default:null,choices:[["asfreq",(0,l.t)("asfreq")],["bfill",(0,l.t)("bfill")],["ffill",(0,l.t)("ffill")],["median",(0,l.t)("median")],["mean",(0,l.t)("mean")],["sum",(0,l.t)("sum")]],description:(0,l.t)("Pandas resample method")}}]]}],formDataOverrides:e=>({...e,groupby:(0,f.u)().popAllColumns(),metrics:(0,f.u)().popAllMetrics()})},je=new i.Z({category:(0,l.t)("Ranking"),description:(0,l.t)("A polar coordinate chart where the circle is broken into wedges of equal angle, and the value represented by any wedge is illustrated by its area, rather than its radius or sweep angle."),exampleGallery:[{url:He},{url:Ye}],name:(0,l.t)("Nightingale Rose Chart"),tags:[(0,l.t)("Legacy"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Circular"),(0,l.t)("Multi-Layers"),(0,l.t)("Pattern"),(0,l.t)("Time"),(0,l.t)("Trend")],thumbnail:We,useLegacyApi:!0});class Ge extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(28041),o.e(23588)]).then(o.bind(o,623588)),metadata:je,transformProps:$e,controlPanel:Qe})}}var Ue=o(351824);function Je(e){const{width:t,height:o,formData:r,queriesData:a}=e,{colorScheme:n,sliceId:i}=r;return{width:t,height:o,data:a[0].data,colorScheme:n,fontSize:(0,Ue.Py)(t),sliceId:i}}var Ke=o(721535);const Xe=o.p+"Sankey.25e6833c..jpg",et=o.p+"Sankey2.4083c192..jpg",tt={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",override:{label:(0,l.t)("Source / Target"),description:(0,l.t)("Choose a source and a target")}}],["metric"],["adhoc_filters"],[{name:"row_limit",override:{description:(0,l.t)("Limiting rows may result in incomplete data and misleading charts. Consider filtering or grouping source/target names instead.")}}],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"]]}],formDataOverrides:e=>({...e,groupby:(0,f.u)().popAllColumns(),metric:(0,f.u)().shiftMetric()})},ot=new i.Z({category:(0,l.t)("Flow"),credits:["https://github.com/d3/d3-sankey"],description:(0,l.t)("Visualizes the flow of different group's values through different stages of a system. New stages in the pipeline are visualized as nodes or layers. The thickness of the bars or edges represent the metric being visualized."),exampleGallery:[{url:Xe,description:(0,l.t)("Demographics")},{url:et,description:(0,l.t)("Survey Responses")}],name:(0,l.t)("Sankey Diagram"),tags:[(0,l.t)("Categorical"),(0,l.t)("Directional"),(0,l.t)("Legacy"),(0,l.t)("Percentages"),(0,l.t)("Proportional"),(0,l.t)("Relational")],thumbnail:Ke,useLegacyApi:!0});class rt extends s.Z{constructor(){super({loadChart:()=>o.e(47984).then(o.bind(o,647984)),metadata:ot,transformProps:Je,controlPanel:tt})}}function at(e){const{width:t,height:o,formData:r,queriesData:a,datasource:n}=e,{colorScheme:i,linearColorScheme:l,metric:s,secondaryMetric:c,sliceId:d}=r,u={width:t,height:o,data:a[0].data,colorScheme:i,linearColorScheme:l,metrics:[s,c],sliceId:d};if(n&&n.metrics){const e=n.metrics.find((({metric_name:e,d3format:t})=>e===r.metric&&t));e&&Object.assign(u,{numberFormat:e.d3format})}return u}var nt=o(511733);const it=o.p+"example.3d91d261..png",lt={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["metric"],["secondary_metric"],["adhoc_filters"],["row_limit"],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],["linear_color_scheme"]]}],controlOverrides:{metric:{label:(0,l.t)("Primary Metric"),description:(0,l.t)("The primary metric is used to define the arc segment sizes")},secondary_metric:{label:(0,l.t)("Secondary Metric"),default:null,description:(0,l.t)("[optional] this secondary metric is used to define the color as a ratio against the primary metric. When omitted, the color is categorical and based on labels")},color_scheme:{description:(0,l.t)("When only a primary metric is provided, a categorical color scale is used."),visibility:({controls:e})=>{var t,o;return Boolean(!(null!=e&&null!=(t=e.secondary_metric)&&t.value)||(null==e||null==(o=e.secondary_metric)?void 0:o.value)===(null==e?void 0:e.metric.value))}},linear_color_scheme:{description:(0,l.t)("When a secondary metric is provided, a linear color scale is used."),visibility:({controls:e})=>{var t,o;return Boolean((null==e||null==(t=e.secondary_metric)?void 0:t.value)&&(null==e||null==(o=e.secondary_metric)?void 0:o.value)!==(null==e?void 0:e.metric.value))}},groupby:{label:(0,l.t)("Hierarchy"),description:(0,l.t)("This defines the level of the hierarchy")}},formDataOverrides:e=>({...e,groupby:(0,f.u)().popAllColumns(),metric:(0,f.u)().shiftMetric(),secondary_metric:(0,f.u)().shiftMetric()})},st=new i.Z({category:(0,l.t)("Part of a Whole"),credits:["https://bl.ocks.org/kerryrodden/7090426"],description:(0,l.t)("Uses circles to visualize the flow of data through different stages of a system. Hover over individual paths in the visualization to understand the stages a value took. Useful for multi-stage, multi-group visualizing funnels and pipelines."),exampleGallery:[{url:it}],name:(0,l.t)("Sunburst Chart"),tags:[(0,l.t)("Aesthetic"),(0,l.t)("Legacy"),(0,l.t)("Multi-Levels"),(0,l.t)("Proportional")],thumbnail:nt,useLegacyApi:!0});class ct extends s.Z{constructor(){super({loadChart:()=>o.e(16579).then(o.bind(o,516579)),metadata:st,transformProps:at,controlPanel:lt})}}var dt=o(616355),ut=o(130845),mt=o(645636),pt=o(642846),gt=o(88889),ht=o(956652),ft=o(778900),bt=o(920620),yt=o(209609),vt=o(201111);const xt=/T(\d{2}:){2}\d{2}$/;class Ct extends Date{constructor(e,{formatter:t=String,forceUTC:o=!0}={}){let r=e;o&&"string"===typeof r&&xt.test(r)&&(r=`${r}Z`),super(r),this.formatter=void 0,this.input=void 0,this.input=e,this.formatter=t,this.toString=()=>this.formatter===String?String(this.input):this.formatter?this.formatter(this):Date.toString.call(this)}}const{PERCENT_3_POINT:wt}=mt.Z,{DATABASE_DATETIME:Tt}=pt.Z;function _t(e,t=[]){return t.every((t=>null===t[e]||void 0===t[e]||"number"===typeof t[e]))}const St=(0,ut.Z)((function(e,t){if(!e||!e[0])return e||[];const o=t.filter((e=>e.dataType===gt.Z.TEMPORAL));return o.length>0?e.map((e=>{const t={...e};return o.forEach((({key:o,formatter:r})=>{t[o]=new Ct(e[o],{formatter:r})})),t})):e})),At=(0,ut.Z)((function(e){const{datasource:{columnFormats:t,verboseMap:o},rawFormData:{table_timestamp_format:r,metrics:a,percent_metrics:n,column_config:i={}},queriesData:l}=e,s=(0,Me.Z)(e.rawFormData),{data:u,colnames:m,coltypes:p}=l[0]||{},g=(null!=a?a:[]).map(ht.Z),h=(null!=n?n:[]).map(ht.Z),f=h.map((e=>`%${e}`)),b=new Set(g),y=new Set(f),v=new Set(h),x=(m||[]).filter((e=>!(v.has(e)&&!b.has(e)))).map(((e,a)=>{const n=(null==o?void 0:o[e])||e,l=p[a],m=i[e]||{},g=b.has(e)&&_t(e,u),h=y.has(e),f=l===gt.Z.TEMPORAL,v=null==t?void 0:t[e],x=m.d3NumberFormat||v;let C;if(f||m.d3TimeFormat){const t=m.d3TimeFormat||v,o=t||r;o===ft.Z.id?C=s?(0,d.uh)(s):t?(0,d.bt)(t):_t(e,u)?(0,d.bt)(Tt):String:o&&(C=(0,d.bt)(o))}else h?C=(0,c.JB)(x||wt):(g||x)&&(C=(0,c.JB)(x));return{key:e,label:n,dataType:l,isNumeric:l===gt.Z.NUMERIC,isMetric:g,isPercentMetric:h,formatter:C,config:m}}));return[g,f,x]}),(function(e,t){var o,r,a,n,i,l,s,c;const d=e[0],u=t[0];return d.datasource.columnFormats===u.datasource.columnFormats&&d.datasource.verboseMap===u.datasource.verboseMap&&d.formData.tableTimestampFormat===u.formData.tableTimestampFormat&&d.formData.timeGrainSqla===u.formData.timeGrainSqla&&JSON.stringify(d.formData.columnConfig||null)===JSON.stringify(u.formData.columnConfig||null)&&(0,vt.Z)(d.formData.metrics,u.formData.metrics)&&(0,vt.Z)(null==(o=d.queriesData)||null==(r=o[0])?void 0:r.colnames,null==(a=u.queriesData)||null==(n=a[0])?void 0:n.colnames)&&(0,vt.Z)(null==(i=d.queriesData)||null==(l=i[0])?void 0:l.coltypes,null==(s=u.queriesData)||null==(c=s[0])?void 0:c.coltypes)&&JSON.stringify(d.formData.extraFilters||null)===JSON.stringify(u.formData.extraFilters||null)&&JSON.stringify(d.formData.extraFormData||null)===JSON.stringify(u.formData.extraFormData||null)})),Pt={},kt=[],Ft=e=>{var t,o,r;const{height:a,width:n,rawFormData:i,queriesData:l=[],filterState:s,ownState:c,hooks:{onAddFilter:d,setDataMask:u=(()=>{}),onContextMenu:m},emitCrossFilters:p}=e,{align_pn:g=!0,color_pn:h=!0,show_cell_bars:f=!0,include_search:b=!1,page_length:y,server_pagination:v=!1,server_page_length:x=10,order_desc:C=!1,query_mode:w,show_totals:T,show_order_number:_=!1,merge_rowtable:S=!1,merge_initcolumn:A="1",conditional_formatting:P,allow_rearrange_columns:k,tableBackground:F,borderColor:R,opacity:I,scrollBarColor:E,columnWidth:L,headBackground:D,headFontSize:Z,headFontColor:M,headLineHeight:O,tbodyFontColor:N,tbodyFontSize:B,tbodyLineHeight:z,meta:V}=i,q=(0,Me.Z)(i),[$,W,H]=At(e);let Y,Q,j,G;var U,J,K,X,ee,te;v?([Y,Q,j]=l,G=null!=(U=null==(J=Q)||null==(K=J.data)||null==(X=K[0])?void 0:X.rowcount)?U:0):([Y,j]=l,G=null!=(ee=null==(te=Y)?void 0:te.rowcount)?ee:0);const oe=St(null==(t=Y)?void 0:t.data,H),re=T&&w===bt.n.aggregate?null==(o=j)?void 0:o.data[0]:void 0,ae=null!=(r=(0,yt.ni)(P,((e,t)=>{var o;return null!=(o=null==e?void 0:e.map((e=>Object.keys(e).reduce(((o,r)=>({...o,[r]:{...t.find((e=>e.key===r)),value:e[r]}})),{}))))?o:[]})(oe,H)))?r:kt;return{height:a,width:n,isRawRecords:w===bt.n.raw,data:oe,totals:re,columns:H,serverPagination:v,metrics:$,percentMetrics:W,serverPaginationData:v?c:Pt,setDataMask:u,alignPositiveNegative:g,colorPositiveNegative:h,showOrderNumber:_,mergeRowtable:S,mergeInitColumn:A,showCellBars:f,sortDesc:C,includeSearch:b,rowCount:G,pageSize:v?x:(ne=y,ie=oe.length,le=H.length,"number"===typeof ne?ne||0:"string"===typeof ne?Number(ne)||0:ie*le>5e3?200:0),filters:s.filters,emitCrossFilters:p,onChangeFilter:d,columnColorFormatters:ae,timeGrain:q,allowRearrangeColumns:k,onContextMenu:m,meta:V,tableStyle:{tableBackground:F,borderColor:R,opacity:I,scrollBarColor:E,columnWidth:L,headBackground:D,headFontSize:Z,headFontColor:M,headLineHeight:O,tbodyFontColor:N,tbodyFontSize:B,tbodyLineHeight:z}};var ne,ie,le};var Rt=o(559812);const It=o.p+"Table.f8a6698c..jpg",Et=o.p+"Table2.c8533c18..jpg",Lt=o.p+"Table3.8997ea72..jpg";var Dt=o(441609),Zt=o.n(Dt),Mt=o(111146),Ot=o(472813),Nt=o(535622),Bt=o(419835),zt=o(4098);function Vt(e){var t,o;const r=null==e||null==(t=e.query_mode)?void 0:t.value;if(r===bt.n.aggregate||r===bt.n.raw)return r;const a=null==e||null==(o=e.all_columns)?void 0:o.value;return a&&a.length>0?bt.n.raw:bt.n.aggregate}function qt(e){return({controls:t})=>Vt(t)===e}const $t=qt(bt.n.aggregate),Wt=qt(bt.n.raw),Ht=(e,t)=>t.every((e=>0===(0,S.Z)(e).length))&&$t({controls:e})?[(0,l.t)("Group By, Metrics or Percentage Metrics must have a value")]:[],Yt={type:"RadioButtonControl",label:(0,l.t)("Query mode"),default:null,options:[[bt.n.aggregate,Nt.cm[bt.n.aggregate]],[bt.n.raw,Nt.cm[bt.n.raw]]],mapStateToProps:({controls:e})=>({value:Vt(e)}),rerender:["all_columns","groupby","metrics","percent_metrics"]},Qt={...W.ZP.groupby,label:(0,l.t)("Columns"),description:(0,l.t)("Columns to display"),multi:!0,freeForm:!0,allowAll:!0,commaChoosesOption:!1,optionRenderer:e=>(0,Z.tZ)(D.E,{showType:!0,column:e}),valueRenderer:e=>(0,Z.tZ)(D.E,{column:e}),valueKey:"column_name",mapStateToProps:({datasource:e,controls:t},o)=>({options:(null==e?void 0:e.columns)||[],queryMode:Vt(t),externalValidationErrors:Wt({controls:t})&&0===(0,S.Z)(null==o?void 0:o.value).length?[(0,l.t)("must have a value")]:[]}),visibility:Wt,resetOnHide:!1},jt={...W.ZP.metrics,label:(0,l.t)("Percentage metrics"),description:(0,l.t)("Metrics for which percentage of total are to be displayed. Calculated from only data within the row limit."),visibility:$t,resetOnHide:!1,mapStateToProps:({datasource:e,controls:t},o)=>{var r,a;return{columns:(null==e?void 0:e.columns)||[],savedMetrics:(0,Bt.R)(e),datasource:e,datasourceType:null==e?void 0:e.type,queryMode:Vt(t),externalValidationErrors:Ht(t,[null==(r=t.groupby)?void 0:r.value,null==(a=t.metrics)?void 0:a.value,null==o?void 0:o.value])}},rerender:["groupby","metrics"],default:[],validators:[]},Gt={controlPanelSections:[g.sections.genericTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"query_mode",config:Yt}],[{name:"groupby",override:{visibility:$t,resetOnHide:!1,mapStateToProps:(e,t)=>{var o,r,a,n;const{controls:i}=e,l=null==W.ZP||null==(o=W.ZP.groupby)?void 0:o.mapStateToProps,s=null!=(r=null==l?void 0:l(e,t))?r:{};return s.externalValidationErrors=Ht(i,[null==(a=i.metrics)?void 0:a.value,null==(n=i.percent_metrics)?void 0:n.value,t.value]),s},rerender:["metrics","percent_metrics"]}}],(0,n.c)(n.T.DASHBOARD_DRILL_DOWN)?[{name:"drillDown",config:{type:"DrillDownControl",label:(0,l.t)("Enable drill down"),default:!1,description:(0,l.t)("Columns as hierarchy."),mapStateToProps:({form_data:e})=>({chartId:(null==e?void 0:e.slice_id)||0,columns:e.groupby})}}]:[],[Mt.O6&&$t?{name:"time_grain_sqla",config:{...W.ZP.time_grain_sqla,visibility:({controls:e})=>{var t;const o=Object.fromEntries((0,S.Z)(null==e||null==(t=e.groupby)?void 0:t.options).map((e=>[e.column_name,e.is_dttm])));return(0,S.Z)(null==e?void 0:e.groupby.value).map((e=>!!(0,Ot.GA)(e)||!!(0,Ot.s9)(e)&&!!o[e])).some(Boolean)}}}:null,Mt.O6&&$t?"temporal_columns_lookup":null],[{name:"metrics",override:{validators:[],visibility:$t,resetOnHide:!1,mapStateToProps:({controls:e,datasource:t,form_data:o},r)=>{var a,n,i,l;return{columns:null!=t&&null!=(a=t.columns[0])&&a.hasOwnProperty("filterable")?null==t||null==(n=t.columns)?void 0:n.filter((e=>e.filterable)):null==t?void 0:t.columns,savedMetrics:(0,Bt.R)(t),selectedMetrics:o.metrics||(o.metric?[o.metric]:[]),datasource:t,externalValidationErrors:Ht(e,[null==(i=e.groupby)?void 0:i.value,null==(l=e.percent_metrics)?void 0:l.value,r.value])}},rerender:["groupby","percent_metrics"]}},{name:"all_columns",config:Qt}],[{name:"percent_metrics",config:jt}],["adhoc_filters"],[{name:"timeseries_limit_metric",override:{visibility:$t,resetOnHide:!1}},{name:"order_by_cols",config:{type:"SelectControl",label:(0,l.t)("Ordering"),description:(0,l.t)("Order results by selected columns"),multi:!0,default:[],mapStateToProps:({datasource:e})=>({choices:null!=e&&e.hasOwnProperty("order_by_choices")?null==e?void 0:e.order_by_choices:(null==e?void 0:e.columns)||[]}),visibility:Wt,resetOnHide:!1}}],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>$t({controls:e})&&Boolean((null==e?void 0:e.timeseries_limit_metric.value)&&!Zt()(null==e?void 0:e.timeseries_limit_metric.value)),resetOnHide:!1}}],(0,n.c)(n.T.DASHBOARD_CROSS_FILTERS)||(0,n.c)(n.T.DASHBOARD_NATIVE_FILTERS)?[{name:"server_pagination",config:{type:"CheckboxControl",label:(0,l.t)("Server pagination"),description:(0,l.t)("Enable server side pagination of results (experimental feature)"),default:!1}}]:[],[{name:"row_limit",override:{default:1e3,visibility:({controls:e})=>{var t;return!(null!=e&&null!=(t=e.server_pagination)&&t.value)}}},{name:"server_page_length",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Server Page Length"),default:10,choices:zt.T,description:(0,l.t)("Rows per page, 0 means no pagination"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.server_pagination)?void 0:t.value)}}}],[{name:"show_totals",config:{type:"CheckboxControl",label:(0,l.t)("Show totals"),default:!1,description:(0,l.t)("Show total aggregations of selected metrics. Note that row limit does not apply to the result."),visibility:$t,resetOnHide:!1}},{name:"show_order_number",config:{type:"CheckboxControl",label:(0,l.t)("Show order number"),description:(0,l.t)("Whether to show the order number in column header"),default:!1}}],[{name:"include_time",config:{type:"CheckboxControl",label:(0,l.t)("Include time"),description:(0,l.t)("Whether to include the time granularity as defined in the time section"),default:!1,visibility:$t,resetOnHide:!1}},{name:"merge_rowtable",config:{type:"CheckboxControl",label:(0,l.t)("Merge Cells"),description:(0,l.t)("Merge cells with same data rows"),default:!1}}],[{name:"merge_initcolumn",config:{type:"TextControl",label:(0,l.t)("Number of merged columns"),description:(0,l.t)("Indicates to which column the table will merge cells into. If a value of 3 is entered, it indicates that the content of the first three columns of the table will be automatically merged with the same content."),default:"1",visibility:e=>{var t,o;return Boolean(null==e||null==(t=e.controls)||null==(o=t.merge_rowtable)?void 0:o.value)}}}]]},{label:(0,l.t)("Options"),expanded:!0,controlSetRows:[[{name:"table_timestamp_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Timestamp format"),default:ft.Z.id,renderTrigger:!0,clearable:!1,choices:h.HC,description:(0,l.t)("D3 time format for datetime columns")}}],[{name:"page_length",config:{type:"SelectControl",freeForm:!0,renderTrigger:!0,label:(0,l.t)("Page length"),default:null,choices:zt.T,description:(0,l.t)("Rows per page, 0 means no pagination"),visibility:({controls:e})=>{var t;return!(null!=e&&null!=(t=e.server_pagination)&&t.value)}}},null],[{name:"include_search",config:{type:"CheckboxControl",label:(0,l.t)("Search box"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to include a client-side search box")}},{name:"show_cell_bars",config:{type:"CheckboxControl",label:(0,l.t)("Cell bars"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to display a bar chart background in table columns")}}],[{name:"align_pn",config:{type:"CheckboxControl",label:(0,l.t)("Align +/-"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to align background charts with both positive and negative values at 0")}},{name:"color_pn",config:{type:"CheckboxControl",label:(0,l.t)("Color +/-"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to colorize numeric values by if they are positive or negative")}}],[{name:"allow_rearrange_columns",config:{type:"CheckboxControl",label:(0,l.t)("Allow columns to be rearranged"),renderTrigger:!0,default:!1,description:(0,l.t)("Allow end user to drag-and-drop column headers to rearrange them. Note their changes won't persist for the next time they open the chart.")}}],[{name:"column_config",config:{type:"ColumnConfigControl",label:(0,l.t)("Customize columns"),description:(0,l.t)("Further customize how to display each column"),renderTrigger:!0,shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n,i;const{colnames:l}=null!=(r=null==o||null==(a=o.queriesResponse)?void 0:a[0])?r:{},{metrics:s,percent_metrics:c}=null!=(n=null==e?void 0:e.form_data)?n:{},d=(null!=s?s:[]).map(ht.Z),u=(null!=c?c:[]).map(ht.Z),m=new Set(d),p=new Set(u),g=(l||[]).filter((e=>!(p.has(e)&&!m.has(e))));return{queryResponse:null==o||null==(i=o.queriesResponse)?void 0:i[0],appliedColumnNames:g}}}}],[{name:"conditional_formatting",config:{type:"ConditionalFormattingControlPro",renderTrigger:!0,label:(0,l.t)("Conditional formatting"),description:(0,l.t)("Apply conditional color formatting to numbers, text, and time columns"),shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n,i,l,s,c;const d=null!=e&&null!=(r=e.datasource)&&r.hasOwnProperty("verbose_map")?null==e||null==(a=e.datasource)?void 0:a.verbose_map:null!=(n=null==e||null==(i=e.datasource)?void 0:i.columns)?n:{},{colnames:u,coltypes:m}=null!=(l=null==o||null==(s=o.queriesResponse)?void 0:s[0])?l:{},{metrics:p,percent_metrics:g}=null!=(c=null==e?void 0:e.form_data)?c:{},h=(null!=p?p:[]).map(ht.Z),f=(null!=g?g:[]).map(ht.Z),b=new Set(h),y=new Set(f);return{columnOptions:Array.isArray(u)&&Array.isArray(m)?u.reduce(((e,t,o)=>{var r;return y.has(t)&&!b.has(t)||![gt.Z.NUMERIC,gt.Z.STRING,gt.Z.TEMPORAL].includes(m[o])?e:[...e,{value:t,label:null!=(r=d[t])?r:t,type:m[o]}]}),[]):[],verboseMap:d}}}}]]},{label:(0,l.t)("Component Style"),expanded:!0,controlSetRows:[[{name:"tableBackground",config:{label:(0,l.t)("Table Background"),type:"ColorPickerControl",description:(0,l.t)("Please set the table background"),default:{r:255,g:255,b:255,a:1},renderTrigger:!0}},{name:"borderColor",config:{label:(0,l.t)("Border color"),type:"ColorPickerControl",description:(0,l.t)("Please set the border color"),default:{r:219,g:219,b:219,a:1},renderTrigger:!0}}],[{name:"opacity",config:{label:(0,l.t)("Opacity"),type:"SliderControl",description:(0,l.t)("Please set the opacity"),default:1,min:0,max:1,step:.01,renderTrigger:!0}}]]},{label:(0,l.t)("Table head style"),expanded:!0,controlSetRows:[[{name:"headBackground",config:{label:(0,l.t)("Table head background"),type:"ColorPickerControl",description:(0,l.t)("Please set the table head background"),default:{r:255,g:255,b:255,a:0},renderTrigger:!0}},{name:"headFontColor",config:{label:(0,l.t)("Font color"),type:"ColorPickerControl",description:(0,l.t)("Please set the font color"),default:{r:0,g:0,b:0,a:1},renderTrigger:!0}}],[{name:"headFontSize",config:{label:(0,l.t)("Font size"),type:"SelectControl",description:(0,l.t)("Please set the font size"),default:12,choices:[[12,12],[14,14],[16,16],[18,18],[20,20],[24,24],[26,26],[28,28],[30,30],[32,32],[36,36]],renderTrigger:!0}}],[{name:"headLineHeight",config:{label:(0,l.t)("Row height"),type:"SliderControl",description:(0,l.t)("Please set the row height"),default:24,min:0,max:100,step:1,renderTrigger:!0}}]]},{label:(0,l.t)("Table content style"),expanded:!0,controlSetRows:[[{name:"tbodyFontColor",config:{label:(0,l.t)("Font color"),type:"ColorPickerControl",description:(0,l.t)("Please set the font color"),default:{r:51,g:51,b:51,a:1},renderTrigger:!0}},{name:"tbodyFontSize",config:{label:(0,l.t)("Font size"),type:"SelectControl",description:(0,l.t)("Please set the font size"),default:12,choices:[[12,12],[14,14],[16,16],[18,18],[20,20],[24,24],[26,26],[28,28],[30,30],[32,32],[36,36]],renderTrigger:!0}}],[{name:"tbodyLineHeight",config:{label:(0,l.t)("Row height"),type:"SliderControl",description:(0,l.t)("Please set the row height"),default:24,min:0,max:100,step:1,renderTrigger:!0}}]]}],formDataOverrides:e=>({...e,metrics:(0,f.u)().popAllMetrics(),groupby:(0,f.u)().popAllColumns()})};var Ut=o(861654),Jt=o(274765),Kt=o(412456);const Xt=(e,t)=>{const{percent_metrics:o,order_desc:r=!1}=e,a=function(e){const{query_mode:t}=e;if(t===bt.n.aggregate||t===bt.n.raw)return t;const o=null==e?void 0:e.all_columns;return o&&o.length>0?bt.n.raw:bt.n.aggregate}(e),n=(0,S.Z)(e.timeseries_limit_metric)[0];let i=e;return a===bt.n.raw&&(i={...e,include_time:!1}),(0,Ut.Z)(i,(l=>{var s,c,d,u,m,p,g,h;let{metrics:f,orderby:b=[],columns:y=[]}=l,v=[];if(a===bt.n.aggregate){var x;if(f=f||[],n?b=[[n,!r]]:(null==(x=f)?void 0:x.length)>0&&(b=[[f[0],!1]]),o&&o.length>0){const e=(0,Jt.Z)(o.map(ht.Z));f=(0,Jt.Z)(f.concat(o),ht.Z),v=[{operation:"contribution",options:{columns:e,rename_columns:e.map((e=>`%${e}`))}}]}y=y.map((t=>{var o;return(0,Ot.s9)(t)&&e.time_grain_sqla&&Mt.O6&&null!=e&&null!=(o=e.temporal_columns_lookup)&&o[t]?{timeGrain:e.time_grain_sqla,columnType:"BASE_AXIS",sqlExpression:t,label:t,expressionType:"SQL"}:t}))}const C={},w=null!=(s=null==t?void 0:t.ownState)?s:{};var T,_,S;i.server_pagination&&(C.row_limit=null!=(T=w.pageSize)?T:i.server_page_length,C.row_offset=(null!=(_=w.currentPage)?_:0)*(null!=(S=w.pageSize)?S:0));let A={...l,columns:y,orderby:b,metrics:f,post_processing:v,...C};var P,k;e.server_pagination&&null!=t&&null!=(c=t.extras)&&null!=(d=c.cachedChanges)&&d[e.slice_id]&&JSON.stringify(null==t||null==(u=t.extras)||null==(m=u.cachedChanges)?void 0:m[e.slice_id])!==JSON.stringify(A.filters)&&(A={...A,row_offset:0},(0,Kt.X)(null==t||null==(P=t.hooks)?void 0:P.setDataMask,0,null!=(k=A.row_limit)?k:0));null==t||null==(p=t.hooks)||p.setCachedChanges({[e.slice_id]:A.filters});const F=[];null!=(g=f)&&g.length&&e.show_totals&&a===bt.n.aggregate&&F.push({...A,columns:[],row_limit:0,row_offset:0,post_processing:[],order_desc:void 0,orderby:void 0});const R=null==(h=e.extra_form_data)?void 0:h.interactive_groupby;return R&&A.columns&&(A.columns=[...new Set([...A.columns,...R])]),e.server_pagination?[{...A},{...A,row_limit:0,row_offset:0,post_processing:[],is_rowcount:!0},...F]:[A,...F]}))},eo=(()=>{let e={};const t=t=>{e={...e,...t}};return(o,r)=>{var a;return Xt({...o},{extras:{cachedChanges:e},ownState:null!=(a=null==r?void 0:r.ownState)?a:{},hooks:{...null==r?void 0:r.hooks,setDataMask:()=>{},setCachedChanges:t}})}})(),to=new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Table"),canBeAnnotationTypes:["EVENT","INTERVAL"],description:(0,l.t)("Classic row-by-column spreadsheet like view of a dataset. Use tables to showcase a view into the underlying data or to show aggregated metrics."),exampleGallery:[{url:It},{url:Et},{url:Lt}],name:(0,l.t)("Table"),tags:[(0,l.t)("Additive"),(0,l.t)("Business"),(0,l.t)("Formattable"),(0,l.t)("Pattern"),(0,l.t)("Popular"),(0,l.t)("Report"),(0,l.t)("Sequential"),(0,l.t)("Tabular"),(0,l.t)("Description")],thumbnail:Rt});class oo extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(79521),o.e(68924),o.e(33126)]).then(o.bind(o,39083)),metadata:to,transformProps:Ft,controlPanel:Gt,buildQuery:eo})}}function ro(e){const{width:t,height:o,formData:r,queriesData:a}=e,{colorScheme:n,treemapRatio:i,sliceId:l}=r;let{numberFormat:s}=r;return!s&&e.datasource&&e.datasource.metrics&&e.datasource.metrics.forEach((t=>{t.metric_name===e.formData.metrics[0]&&t.d3format&&(s=t.d3format)})),{width:t,height:o,data:a[0].data,colorScheme:n,numberFormat:s,treemapRatio:i,sliceId:l}}var ao=o(787832);const no=o.p+"Treemap.ba0fbbec..jpg",io=o.p+"Treemap2.0568794f..jpg",lo=o.p+"Treemap3.ef600a2d..jpg",so=o.p+"Treemap4.6e60b127..jpg",co={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["row_limit"],["timeseries_limit_metric"],["order_desc"]]},{label:(0,l.t)("Chart Options"),expanded:!0,tabOverride:"customize",controlSetRows:[["color_scheme"],[{name:"treemap_ratio",config:{type:"TextControl",label:(0,l.t)("Ratio"),renderTrigger:!0,isFloat:!0,default:.5*(1+Math.sqrt(5)),description:(0,l.t)("Target aspect ratio for treemap tiles.")}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:"SMART_NUMBER",choices:h.F6,description:h.YD}}]]}],controlOverrides:{color_scheme:{renderTrigger:!1}}},uo=new i.Z({category:(0,l.t)("Part of a Whole"),credits:["https://bl.ocks.org/mbostock/911ad09bdead40ec0061"],description:(0,l.t)("Shows the composition of a dataset by segmenting a given rectangle as smaller rectangles with areas proportional to their value or contribution to the whole. Those rectangles may also, in turn, be further segmented hierarchically."),exampleGallery:[{url:no},{url:io},{url:lo},{url:so}],name:(0,l.t)("Treemap (legacy)"),tags:[(0,l.t)("Categorical"),(0,l.t)("Legacy"),(0,l.t)("Multi-Levels"),(0,l.t)("Percentages"),(0,l.t)("Proportional")],thumbnail:ao,useLegacyApi:!0});class mo extends s.Z{constructor(){super({loadChart:()=>o.e(16968).then(o.bind(o,616968)),metadata:uo,transformProps:ro,controlPanel:co})}}function po(e){return"string"===typeof e||"undefined"===typeof e?e:Array.isArray(e)?e.length>0?po(e[0]):void 0:e.label}function go(e){const{width:t,height:o,formData:r,queriesData:a}=e,{colorScheme:n,metric:i,rotation:l,series:s,sizeFrom:c=0,sizeTo:d,sliceId:u}=r,m=po(i),p={color:{field:s,scale:{scheme:n},type:"nominal"},fontSize:"undefined"===typeof m?void 0:{field:m,scale:{range:[c,d],zero:!0},type:"quantitative"},text:{field:s}};return{data:a[0].data,encoding:p,height:o,rotation:l,width:t,sliceId:u}}function ho(e){const{metric:t,sort_by_metric:o}=e;return(0,Ut.Z)(e,(e=>[{...e,...o&&{orderby:[[t,!1]]}}]))}var fo=o(391106);const bo=o.p+"Word_Cloud.3d210efb..jpg",yo=o.p+"Word_Cloud_2.2a94fb99..jpg",vo={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["series"],["metric"],["adhoc_filters"],["row_limit"],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}]]},{label:(0,l.t)("Options"),expanded:!0,controlSetRows:[[{name:"size_from",config:{type:"TextControl",isInt:!0,label:(0,l.t)("Minimum Font Size"),renderTrigger:!0,default:10,description:(0,l.t)("Font size for the smallest value in the list")}},{name:"size_to",config:{type:"TextControl",isInt:!0,label:(0,l.t)("Maximum Font Size"),renderTrigger:!0,default:70,description:(0,l.t)("Font size for the biggest value in the list")}}],[{name:"rotation",config:{type:"SelectControl",label:(0,l.t)("Word Rotation"),choices:[["random",(0,l.t)("random")],["flat",(0,l.t)("flat")],["square",(0,l.t)("square")]],renderTrigger:!0,default:"square",clearable:!1,description:(0,l.t)("Rotation to apply to words in the cloud")}}],["color_scheme"]]}],controlOverrides:{series:{validators:[_.Z],clearable:!1},row_limit:{default:100}},formDataOverrides:e=>({...e,series:(0,f.u)().shiftColumn(),metric:(0,f.u)().shiftMetric()})};var xo=o(844994),Co=o(587101),wo=o(813663),To=o(45511),_o=o(281545),So=o(328062);const Ao=({format:e,formatInLocalTime:t=!1}={})=>{const o=t?(0,xo.addPrefix)(pt.D,null!=e?e:(0,d.ZP)().getDefaultKey()):e;return(0,d.bt)(o)},Po=({name:e,type:t="categorical"}={})=>{if("sequential"===t){const t=(0,To.Z)().get(e);return"undefined"===typeof t?t:{type:"sequential",...t}}if("categorical"===t){const t=(0,_o.Z)().get(e);return"undefined"===typeof t?t:{type:"categorical",...t}}return(0,Co.kt)({name:e,type:t})},ko=({name:e,namespace:t}={})=>So.getScale(e,t);wo.Z.setNumberFormatResolver(c.JB).setTimeFormatResolver(Ao).setColorSchemeResolver(Po).setCategoricalColorScaleResolver(ko);const Fo=new i.Z({category:(0,l.t)("Ranking"),credits:["https://github.com/jasondavies/d3-cloud"],description:(0,l.t)("Visualizes the words in a column that appear the most often. Bigger font corresponds to higher frequency."),exampleGallery:[{url:bo},{url:yo}],name:(0,l.t)("Word Cloud"),tags:[(0,l.t)("Aesthetic"),(0,l.t)("Categorical"),(0,l.t)("Comparison"),(0,l.t)("Description"),(0,l.t)("Density"),(0,l.t)("Single Metric")],thumbnail:fo});class Ro extends s.Z{constructor(){super({buildQuery:ho,loadChart:()=>Promise.all([o.e(36377),o.e(96092)]).then(o.bind(o,542149)),metadata:Fo,transformProps:go,controlPanel:vo})}}var Io=o(383937),Eo=o(300872);function Lo(e){if(null==e||!e.trim())return null;const t=e.split(",");if(t.some((e=>(0,Eo.Z)(e))))throw new Error("All values should be numeric");return t.map((e=>parseFloat(e)))}function Do(e){if(null==e||!e.trim())return null;return e.split(",").map((e=>e.trim()))}var Zo=o(880221);const Mo=()=>{},Oo=(e,t)=>{let o;const{metrics:r=[]}=e||{};return r.forEach((e=>{e.d3format&&e.metric_name===t&&(o=e.d3format)})),o};function No(e){const{width:t,height:o,annotationData:r,datasource:a,formData:n,hooks:i,ownState:l,queriesData:s}=e,{onAddFilter:c=Mo,onError:d=Mo,setDataMask:u}=i,{annotationLayers:m,barStacked:p,bottomMargin:g,colorPicker:h,colorScheme:f,comparisonType:b,contribution:y,donut:v,drillDown:x,enableDrilldown:C,drilldownColumns:w,entity:T,labelsOutside:_,leftMargin:S,lineInterpolation:A,maxBubbleSize:P,metric:k,metric2:F,metrics:R=[],orderBars:I,pieLabelType:E,reduceXTicks:L,richTooltip:D,sendTimeRange:Z,showBarValue:M,showBrush:O,showControls:N,showLabels:B,showLegend:z,showMarkers:V,size:q,stackedStyle:$,vizType:W,x:H,xAxisFormat:Y,xAxisLabel:Q,xAxisShowminmax:j,xLogScale:G,xTicksLayout:U,y:J,yAxisBounds:K,yAxis2Bounds:X,yAxisLabel:ee,yAxisShowminmax:te,yAxis2Showminmax:oe,yLogScale:re,sliceId:ae,groupby:ne}=n;let{markerLabels:ie,markerLines:le,markerLineLabels:se,markers:ce,numberFormat:de,rangeLabels:ue,ranges:me,yAxisFormat:pe,yAxis2Format:ge}=n;const he=s[0].data||[],fe=Array.isArray(he)?he.map((e=>({...e,key:(0,Zo.N4)(e.key,a.verboseMap)}))):he;return"pie"===W?de=de||Oo(a,k):"dual_line"===W?(pe=pe||Oo(a,k),ge=ge||Oo(a,F)):["line","dist_bar","bar","area"].includes(e.formData.vizType)?pe=pe||Oo(a,R.length>0?R[0]:void 0):"bullet"===W&&(me=Lo(me)||[0,1.1*fe.measures],ue=Do(ue),ie=Do(ie),le=Lo(le),se=Do(se),ce=Lo(ce)),{queriesData:s,groupby:ne,width:t,height:o,data:fe,annotationData:r,annotationLayers:m,areaStackedStyle:$,baseColor:h,bottomMargin:g,colorScheme:f,comparisonType:b,contribution:y,drillDown:x,enableDrilldown:C,drilldownColumns:w,entity:T,isBarStacked:p,isDonut:v,isPieLabelOutside:_,leftMargin:S,lineInterpolation:A,markerLabels:ie,markerLines:le,markerLineLabels:se,markers:ce,maxBubbleSize:parseInt(P,10),numberFormat:de,onBrushEnd:(0,Io.Z)(Z)?e=>{c("__time_range",e,!1,!0)}:void 0,onError:d,orderBars:I,ownState:l,pieLabelType:E,rangeLabels:ue,ranges:me,reduceXTicks:L,setDataMask:u,showBarValue:M,showBrush:O,showControls:N,showLabels:B,showLegend:z,showMarkers:V,sizeField:q,useRichTooltip:D,vizType:W,xAxisFormat:Y,xAxisLabel:Q,xAxisShowMinMax:j,xField:H,xIsLogScale:G,xTicksLayout:U,yAxisFormat:pe,yAxis2Format:ge,yAxisBounds:K,yAxis2Bounds:X,yAxisLabel:ee,yAxisShowMinMax:te,yAxis2ShowMinMax:oe,yField:J,yIsLogScale:re,sliceId:ae}}const Bo=o.p+"example1.a58bab57..jpg",zo=o.p+"example2.f881423e..jpg",Vo=o.p+"example3.3738f056..jpg",qo=o.p+"example4.94717fd8..jpg";var $o=o(981008),Wo=o(195963);const Ho={name:"y_axis_2_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Right Axis Format"),default:"SMART_NUMBER",choices:h.F6,description:h.YD}},Yo={name:"show_markers",config:{type:"CheckboxControl",label:(0,l.t)("Show Markers"),renderTrigger:!0,default:!1,description:(0,l.t)("Show data points as circle markers on the lines")}},Qo={name:"left_margin",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Left Margin"),choices:[["auto",(0,l.t)("auto")],[50,"50"],[75,"75"],[100,"100"],[125,"125"],[150,"150"],[200,"200"]],default:"auto",renderTrigger:!0,description:(0,l.t)("Left margin, in pixels, allowing for more room for axis labels")}},jo={name:"y_axis_showminmax",config:{type:"CheckboxControl",label:(0,l.t)("Y bounds"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display the min and max values of the Y-axis")}},Go={name:"y_axis_2_showminmax",config:{type:"CheckboxControl",label:(0,l.t)("Y 2 bounds"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display the min and max values of the Y-axis")}},Uo={name:"line_interpolation",config:{type:"SelectControl",label:(0,l.t)("Line Style"),renderTrigger:!0,choices:[["linear",(0,l.t)("linear")],["basis",(0,l.t)("basis")],["cardinal",(0,l.t)("cardinal")],["monotone",(0,l.t)("monotone")],["step-before",(0,l.t)("step-before")],["step-after",(0,l.t)("step-after")]],default:"linear",description:(0,l.t)("Line interpolation as defined by d3.js")}},Jo={name:"show_brush",config:{type:"SelectControl",label:(0,l.t)("Show Range Filter"),renderTrigger:!0,clearable:!1,default:"auto",choices:[["yes",(0,l.t)("Yes")],["no",(0,l.t)("No")],["auto",(0,l.t)("Auto")]],description:(0,l.t)("Whether to display the time range interactive selector")}},Ko={name:"show_legend",config:{type:"CheckboxControl",label:(0,l.t)("Legend"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to display the legend (toggles)")}},Xo={name:"show_controls",config:{type:"CheckboxControl",label:(0,l.t)("Extra Controls"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to show extra controls or not. Extra controls include things like making mulitBar charts stacked or side by side.")}},er={name:"x_axis_label",config:{type:"TextControl",label:(0,l.t)("X Axis Label"),renderTrigger:!0,default:""}},tr={name:"bottom_margin",config:{type:"SelectControl",clearable:!1,freeForm:!0,label:(0,l.t)("Bottom Margin"),choices:[["auto",(0,l.t)("auto")],[50,"50"],[75,"75"],[100,"100"],[125,"125"],[150,"150"],[200,"200"]],default:"auto",renderTrigger:!0,description:(0,l.t)("Bottom margin, in pixels, allowing for more room for axis labels")}},or={name:"x_ticks_layout",config:{type:"SelectControl",label:(0,l.t)("X Tick Layout"),choices:[["auto",(0,l.t)("auto")],["flat",(0,l.t)("flat")],["45\xb0","45\xb0"],["staggered",(0,l.t)("staggered")]],default:"auto",clearable:!1,renderTrigger:!0,description:(0,l.t)("The way the ticks are laid out on the X-axis")}},rr={name:"x_axis_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("X Axis Format"),renderTrigger:!0,choices:h.HC,default:"smart_date",description:h.YD}},ar={name:"y_log_scale",config:{type:"CheckboxControl",label:(0,l.t)("Y Log Scale"),default:!1,renderTrigger:!0,description:(0,l.t)("Use a log scale for the Y-axis")}},nr={name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis Bounds"),renderTrigger:!0,default:[null,null],description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent.")}},ir={name:"y_axis_2_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis 2 Bounds"),renderTrigger:!0,default:[null,null],description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent.")}},lr={name:"x_axis_showminmax",config:{type:"CheckboxControl",label:(0,l.t)("X bounds"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display the min and max values of the X-axis")}},sr={name:"rich_tooltip",config:{type:"CheckboxControl",label:(0,l.t)("Rich Tooltip"),renderTrigger:!0,default:!0,description:(0,l.t)("The rich tooltip shows a list of all series for that point in time")}},cr={name:"show_bar_value",config:{type:"CheckboxControl",label:(0,l.t)("Bar Values"),default:!1,renderTrigger:!0,description:(0,l.t)("Show the value on top of the bar")}},dr={name:"bar_stacked",config:{type:"CheckboxControl",label:(0,l.t)("Stacked Bars"),renderTrigger:!0,default:!1,description:null}},ur={name:"reduce_x_ticks",config:{type:"CheckboxControl",label:(0,l.t)("Reduce X ticks"),renderTrigger:!0,default:!1,description:(0,l.t)("Reduces the number of X-axis ticks to be rendered. If true, the x-axis will not overflow and labels may be missing. If false, a minimum width will be applied to columns and the width may overflow into an horizontal scroll.")}},mr={name:"y_axis_label",config:{type:"TextControl",label:(0,l.t)("Y Axis Label"),renderTrigger:!0,default:""}},pr=[{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit"],["timeseries_limit_metric"],["order_desc"],[{name:"contribution",config:{type:"CheckboxControl",label:(0,l.t)("Contribution"),default:!1,description:(0,l.t)("Compute the contribution to the total")}}],["row_limit",null]]},{label:(0,l.t)("Advanced Analytics"),tabOverride:"data",description:(0,l.t)("This section contains options that allow for advanced analytical post processing of query results"),controlSetRows:[[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Rolling Window"))],[{name:"rolling_type",config:{type:"SelectControl",label:(0,l.t)("Rolling Function"),default:"None",choices:[["None",(0,l.t)("None")],["mean",(0,l.t)("mean")],["sum",(0,l.t)("sum")],["std",(0,l.t)("std")],["cumsum",(0,l.t)("cumsum")]],description:(0,l.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}}],[{name:"rolling_periods",config:{type:"TextControl",label:(0,l.t)("Periods"),isInt:!0,description:(0,l.t)("Defines the size of the rolling window function, relative to the time granularity selected")}}],[{name:"min_periods",config:{type:"TextControl",label:(0,l.t)("Min Periods"),isInt:!0,description:(0,l.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Time Comparison"))],[{name:"time_compare",config:{type:"SelectControl",multi:!0,freeForm:!0,label:(0,l.t)("Time Shift"),choices:[["1 day",(0,l.t)("1 day")],["1 week",(0,l.t)("1 week")],["28 days",(0,l.t)("28 days")],["30 days",(0,l.t)("30 days")],["52 weeks",(0,l.t)("52 weeks")],["1 year",(0,l.t)("1 year")],["104 weeks",(0,l.t)("104 weeks")],["2 years",(0,l.t)("2 years")],["156 weeks",(0,l.t)("156 weeks")],["3 years",(0,l.t)("3 years")]],description:(0,l.t)("Overlay one or more timeseries from a relative time period. Expects relative time deltas in natural language (example: 24 hours, 7 days, 52 weeks, 365 days). Free text is supported.")}}],[{name:"comparison_type",config:{type:"SelectControl",label:(0,l.t)("Calculation type"),default:"values",choices:[["values",(0,l.t)("Actual Values")],["absolute",(0,l.t)("Difference")],["percentage",(0,l.t)("Percentage change")],["ratio",(0,l.t)("Ratio")]],description:(0,l.t)("How to display time shifts: as individual lines; as the difference between the main time series and each time shift; as the percentage change; or as the ratio between series and time shifts.")}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Resample"))],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Rule"),default:null,choices:[["1T",(0,l.t)("1T")],["1H",(0,l.t)("1H")],["1D",(0,l.t)("1D")],["7D",(0,l.t)("7D")],["1M",(0,l.t)("1M")],["1AS",(0,l.t)("1AS")]],description:(0,l.t)("Pandas resample rule")}}],[{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Method"),default:null,choices:[["asfreq",(0,l.t)("asfreq")],["bfill",(0,l.t)("bfill")],["ffill",(0,l.t)("ffill")],["median",(0,l.t)("median")],["mean",(0,l.t)("mean")],["sum",(0,l.t)("sum")]],description:(0,l.t)("Pandas resample method")}}]]}],gr={controlPanelSections:[g.sections.legacyTimeseriesTime,pr[0],{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[[Jo,Ko],[Uo,{name:"stacked_style",config:{type:"SelectControl",label:(0,l.t)("Stacked Style"),renderTrigger:!0,choices:[["stack",(0,l.t)("stack")],["stream",(0,l.t)("stream")],["expand",(0,l.t)("expand")]],default:"stack",description:""}}],["color_scheme"],[sr,Xo]]},{label:(0,l.t)("X Axis"),tabOverride:"customize",expanded:!0,controlSetRows:[[er,tr],[or,rr],[lr,null]]},{label:(0,l.t)("Y Axis"),tabOverride:"customize",expanded:!0,controlSetRows:[["y_axis_format",nr],[ar,null]]},pr[1],g.sections.annotations]},hr=new i.Z({category:(0,l.t)("Evolution"),credits:["http://nvd3.org"],description:(0,l.t)("A time series chart that visualizes how a related metric from multiple groups vary over time. Each group is visualized using a different color."),exampleGallery:[{url:Bo,caption:(0,l.t)("Stretched style")},{url:zo,caption:(0,l.t)("Stacked style")},{url:Vo,caption:(0,l.t)("Video game consoles")},{url:qo,caption:(0,l.t)("Vehicle Types")}],name:(0,l.t)("Area Chart (legacy)"),supportedAnnotationTypes:[Wo.DT.INTERVAL,Wo.DT.EVENT],tags:[(0,l.t)("Aesthetic"),(0,l.t)("Comparison"),(0,l.t)("Continuous"),(0,l.t)("Legacy"),(0,l.t)("Line"),(0,l.t)("Percentages"),(0,l.t)("Proportional"),(0,l.t)("Stacked"),(0,l.t)("Time"),(0,l.t)("Trend"),(0,l.t)("nvd3"),(0,l.t)("Deprecated")],thumbnail:$o,useLegacyApi:!0});class fr extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(28041),o.e(95843)]).then(o.bind(o,95843)),metadata:hr,transformProps:No,controlPanel:gr})}}var br=o(242598);const yr=o.p+"Time_Series_Bar_Chart.f6bb1a65..jpg",vr=o.p+"Time_Series_Bar_Chart2.9b95dd4f..jpg",xr=o.p+"Time_Series_Bar_Chart3.1605efdf..jpg",Cr={controlOverrides:{limit:{rerender:["timeseries_limit_metric","order_desc"]},timeseries_limit_metric:{label:(0,l.t)("Series Limit Sort By"),description:(0,l.t)("Metric used to order the limit if a series limit is present. If undefined reverts to the first metric (where appropriate)."),visibility:({controls:e})=>Boolean(null==e?void 0:e.limit.value),mapStateToProps:(e,t)=>{var o,r;const a=(null==W.ZP.timeseries_limit_metric.mapStateToProps?void 0:W.ZP.timeseries_limit_metric.mapStateToProps(e,t))||{};return a.value=null!=(o=e.controls)&&null!=(r=o.limit)&&r.value?null==t?void 0:t.value:[],a}},order_desc:{label:(0,l.t)("Series Limit Sort Descending"),default:!1,description:(0,l.t)("Whether to sort descending or ascending if a series limit is present"),visibility:({controls:e})=>Boolean(null==e?void 0:e.limit.value)}},controlPanelSections:[g.sections.legacyTimeseriesTime,pr[0],{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[Jo],[Ko],[cr],[sr],[dr],[Uo],[Xo],[tr]]},{label:(0,l.t)("X Axis"),expanded:!0,controlSetRows:[[er],[tr],[or],[rr],[lr],[ur]]},{label:(0,l.t)("Y Axis"),expanded:!0,controlSetRows:[[mr],[Qo],[jo],[ar],["y_axis_format"],[nr]]},pr[1],g.sections.annotations],formDataOverrides:e=>({...e,metrics:(0,f.u)().popAllMetrics(),groupby:(0,f.u)().popAllColumns()})},wr=new i.Z({category:(0,l.t)("Evolution"),credits:["http://nvd3.org"],description:(0,l.t)("Visualize how a metric changes over time using bars. Add a group by column to visualize group level metrics and how they change over time."),exampleGallery:[{url:yr},{url:vr},{url:xr}],name:(0,l.t)("Time-series Bar Chart (legacy)"),supportedAnnotationTypes:[Wo.DT.INTERVAL,Wo.DT.EVENT],tags:[(0,l.t)("Bar"),(0,l.t)("Time"),(0,l.t)("Trend"),(0,l.t)("Stacked"),(0,l.t)("Vertical"),(0,l.t)("Percentages"),(0,l.t)("Proportional"),(0,l.t)("Advanced-Analytics"),(0,l.t)("nvd3")],thumbnail:br,useLegacyApi:!0});class Tr extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(28041),o.e(95843)]).then(o.bind(o,95843)),metadata:wr,transformProps:No,controlPanel:Cr})}}const _r=o.p+"example.61c54865..jpg";var Sr=o(628942);const Ar={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["series"],["entity"],["x"],["y"],["adhoc_filters"],["size"],[{name:"max_bubble_size",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Max Bubble Size"),default:"25",choices:(0,L.m)(["5","10","15","25","50","75","100"])}}],["limit",null]]},{label:(0,l.t)("Chart Options"),expanded:!0,tabOverride:"customize",controlSetRows:[["color_scheme"],[Ko,null]]},{label:(0,l.t)("X Axis"),expanded:!0,tabOverride:"customize",controlSetRows:[[er,Qo],[{name:rr.name,config:{...rr.config,default:"SMART_NUMBER",choices:h.F6}},or],[{name:"x_log_scale",config:{type:"CheckboxControl",label:(0,l.t)("X Log Scale"),default:!1,renderTrigger:!0,description:(0,l.t)("Use a log scale for the X-axis")}},lr]]},{label:(0,l.t)("Y Axis"),expanded:!0,tabOverride:"customize",controlSetRows:[[mr,tr],["y_axis_format",null],[ar,jo],[nr]]}],controlOverrides:{color_scheme:{renderTrigger:!1}},formDataOverrides:e=>({...e,series:(0,f.u)().shiftColumn(),entity:(0,f.u)().shiftColumn(),x:(0,f.u)().shiftMetric(),y:(0,f.u)().shiftMetric(),size:(0,f.u)().shiftMetric()})},Pr=new i.Z({category:(0,l.t)("Correlation"),credits:["http://nvd3.org"],description:(0,l.t)("Visualizes a metric across three dimensions of data in a single chart (X axis, Y axis, and bubble size). Bubbles from the same group can be showcased using bubble color."),exampleGallery:[{url:_r}],name:(0,l.t)("Bubble Chart"),tags:[(0,l.t)("Multi-Dimensions"),(0,l.t)("Aesthetic"),(0,l.t)("Comparison"),(0,l.t)("Legacy"),(0,l.t)("Scatter"),(0,l.t)("Time"),(0,l.t)("Trend"),(0,l.t)("nvd3")],thumbnail:Sr,useLegacyApi:!0});class kr extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(28041),o.e(95843)]).then(o.bind(o,95843)),metadata:Pr,transformProps:No,controlPanel:Ar})}}const Fr=o.p+"example.2018d670..jpg";var Rr=o(765159);const Ir={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metric"],["adhoc_filters"]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[[{name:"ranges",config:{type:"TextControl",label:(0,l.t)("Ranges"),default:"",description:(0,l.t)("Ranges to highlight with shading")}},{name:"range_labels",config:{type:"TextControl",label:(0,l.t)("Range labels"),default:"",description:(0,l.t)("Labels for the ranges")}}],[{name:"markers",config:{type:"TextControl",label:(0,l.t)("Markers"),default:"",description:(0,l.t)("List of values to mark with triangles")}},{name:"marker_labels",config:{type:"TextControl",label:(0,l.t)("Marker labels"),default:"",description:(0,l.t)("Labels for the markers")}}],[{name:"marker_lines",config:{type:"TextControl",label:(0,l.t)("Marker lines"),default:"",description:(0,l.t)("List of values to mark with lines")}},{name:"marker_line_labels",config:{type:"TextControl",label:(0,l.t)("Marker line labels"),default:"",description:(0,l.t)("Labels for the marker lines")}}]]}]},Er=new i.Z({category:(0,l.t)("KPI"),credits:["http://nvd3.org"],description:(0,l.t)("Showcases the progress of a single metric against a given target. The higher the fill, the closer the metric is to the target."),exampleGallery:[{url:Fr}],name:(0,l.t)("Bullet Chart"),tags:[(0,l.t)("Business"),(0,l.t)("Legacy"),(0,l.t)("Report"),(0,l.t)("nvd3")],thumbnail:Rr,useLegacyApi:!0});class Lr extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(28041),o.e(95843)]).then(o.bind(o,95843)),metadata:Er,transformProps:No,controlPanel:Ir})}}var Dr=o(702739);const Zr=o.p+"example.0df299a4..jpg",Mr={controlPanelSections:[g.sections.legacyTimeseriesTime,pr[0],{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"]]},{label:(0,l.t)("X Axis"),expanded:!0,controlSetRows:[[er,tr],[or,rr],[lr,null]]},{label:(0,l.t)("Y Axis"),expanded:!0,controlSetRows:[[mr,Qo],[jo,ar],["y_axis_format",nr]]},pr[1],g.sections.annotations],formDataOverrides:e=>({...e,groupby:(0,f.u)().popAllColumns(),metrics:(0,f.u)().popAllMetrics()})},Or=new i.Z({category:(0,l.t)("Evolution"),credits:["http://nvd3.org"],description:(0,l.t)("Visualizes many different time-series objects in a single chart. This chart is being deprecated and we recommend using the Time-series Chart instead."),exampleGallery:[{url:Zr}],name:(0,l.t)("Time-series Percent Change"),tags:[(0,l.t)("Legacy"),(0,l.t)("Time"),(0,l.t)("nvd3"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Comparison"),(0,l.t)("Line"),(0,l.t)("Percentages"),(0,l.t)("Predictive"),(0,l.t)("Trend")],thumbnail:Dr,useLegacyApi:!0});class Nr extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(28041),o.e(95843)]).then(o.bind(o,95843)),metadata:Or,transformProps:No,controlPanel:Mr})}}var Br=o(281928),zr=o(828584);const Vr=o.p+"Bar_Chart.897135b4..jpg",qr=o.p+"Bar_Chart_2.2db0caa4..jpg",$r=o.p+"BarChart3.6c1382b7..jpg",Wr={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["columns"],["row_limit"],["timeseries_limit_metric"],["order_desc"],[{name:"contribution",config:{type:"CheckboxControl",label:(0,l.t)("Contribution"),default:!1,description:(0,l.t)("Compute the contribution to the total")}}],(0,n.c)(n.T.DASHBOARD_DRILL_DOWN)?[{name:"drillDown",config:{type:"DrillDownControl",default:!1,label:(0,l.t)("Enable drill down"),description:(0,l.t)("Columns as hierarchy."),mapStateToProps:({form_data:e})=>({chartId:(null==e?void 0:e.slice_id)||0,columns:e.groupby})}}]:[]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[Ko],[cr],[sr],[dr],[{name:"order_bars",config:{type:"CheckboxControl",label:(0,l.t)("Sort Bars"),default:!1,renderTrigger:!0,description:(0,l.t)("Sort bars by x labels.")}}],["y_axis_format"],[mr],[Xo,null],[jo],[nr]]},{label:(0,l.t)("X Axis"),expanded:!0,controlSetRows:[[er],[tr],[or],[ur]]}],controlOverrides:{groupby:{validators:[_.Z],mapStateToProps:(e,t)=>{const o=(null==W.ZP.groupby.mapStateToProps?void 0:W.ZP.groupby.mapStateToProps(e,t))||{};return o.canDropValue=t=>{var o,r;return!(0,S.Z)(null==(o=e.controls)||null==(r=o.columns)?void 0:r.value).includes(t.column_name)},o},rerender:["columns"]},columns:{label:(0,l.t)("Breakdowns"),description:(0,l.t)("Defines how each series is broken down"),mapStateToProps:(e,t)=>{const o=(null==W.ZP.columns.mapStateToProps?void 0:W.ZP.columns.mapStateToProps(e,t))||{};return o.canDropValue=t=>{var o,r;return!(0,S.Z)(null==(o=e.controls)||null==(r=o.groupby)?void 0:r.value).includes(t.column_name)},o},rerender:["groupby"]}},formDataOverrides:e=>{const t=(0,f.u)().controls.columns.filter((t=>!(0,S.Z)(e.groupby).includes(t)));return(0,f.u)().controls.columns=(0,f.u)().controls.columns.filter((e=>!t.includes(e))),{...e,metrics:(0,f.u)().popAllMetrics(),columns:t}}};o(569175);const Hr=new i.Z({category:(0,l.t)("Ranking"),credits:["http://nvd3.org"],description:(0,l.t)("Compares metrics from different categories using bars. Bar lengths are used to indicate the magnitude of each value and color is used to differentiate groups."),exampleGallery:[{url:Vr,caption:"Stacked style"},{url:qr,caption:"Grouped style"},{url:$r}],name:Mt.O6?(0,l.t)("Bar Chart (legacy)"):(0,l.t)("Bar Chart"),tags:[(0,l.t)("Additive"),(0,l.t)("Bar"),(0,l.t)("Categorical"),(0,l.t)("Comparison"),(0,l.t)("Discrete"),(0,l.t)("Legacy"),(0,l.t)("Percentages"),(0,l.t)("Popular"),(0,l.t)("Stacked"),(0,l.t)("Vertical"),(0,l.t)("nvd3")],thumbnail:zr,useLegacyApi:!0});class Yr extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(28041),o.e(95843)]).then(o.bind(o,95843)),metadata:Hr,transformProps:e=>{const t=e,{drillDown:o}=e.formData;return o&&(t.ownState={...!e.ownState.drilldown&&{drilldown:Br.Z.fromHierarchy(e.formData.groupby)},...e.ownState},t.formData.groupby=[Br.Z.getColumn(e.ownState.drilldown,[])]),No(t)},controlPanel:Wr})}}var Qr=o(907661);const jr=o.p+"example.0b3960de..jpg",Gr={controlPanelSections:[g.sections.legacyTimeseriesTime,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[Ko],[rr]]},{label:(0,l.t)("Y Axis 1"),expanded:!0,controlSetRows:[["metric"],["y_axis_format"],[jo],[nr]]},{label:(0,l.t)("Y Axis 2"),expanded:!0,controlSetRows:[["metric_2"],[Ho],[Go],[ir]]},{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["adhoc_filters"]]},g.sections.annotations],controlOverrides:{metric:{label:(0,l.t)("Left Axis Metric"),description:(0,l.t)("Choose a metric for left axis")},y_axis_format:{label:(0,l.t)("Left Axis Format")}}},Ur=new i.Z({category:(0,l.t)("Evolution"),credits:["http://nvd3.org"],description:(0,l.t)("Visualizes 2 metrics as line plots using the same x-axis. This chart is useful for comparing metrics across the same time range."),exampleGallery:[{url:jr}],name:(0,l.t)("Dual Line Chart"),tags:[(0,l.t)("Legacy"),(0,l.t)("nvd3")],thumbnail:Qr,useLegacyApi:!0});class Jr extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(28041),o.e(95843)]).then(o.bind(o,95843)),metadata:Ur,transformProps:No,controlPanel:Gr})}}const Kr=o.p+"LineChart.e0e66ab1..jpg",Xr=o.p+"LineChart2.32576bb2..jpg",ea=o.p+"battery.8fed19b7..jpg";var ta=o(961029);const oa={controlPanelSections:[g.sections.legacyTimeseriesTime,pr[0],{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[Jo],[{name:"send_time_range",config:{type:"CheckboxControl",label:(0,l.t)("Propagate"),renderTrigger:!0,default:!1,description:(0,l.t)("Send range filter events to other charts")}}],[Ko],[sr],[Yo],[Uo]]},{label:(0,l.t)("X Axis"),expanded:!0,controlSetRows:[[er],[tr],[or],[rr],[lr,null]]},{label:(0,l.t)("Y Axis"),expanded:!0,controlSetRows:[[mr],[Qo],[jo],[ar],["y_axis_format"],[nr]]},pr[1],g.sections.annotations],controlOverrides:{row_limit:{default:5e4}},formDataOverrides:e=>({...e,metrics:(0,f.u)().popAllMetrics(),groupby:(0,f.u)().popAllColumns()})},ra=new i.Z({canBeAnnotationTypes:[Wo.DT.TIME_SERIES],category:(0,l.t)("Evolution"),credits:["http://nvd3.org"],description:(0,l.t)("Classic chart that visualizes how metrics change over time."),exampleGallery:[{url:Kr},{url:Xr},{url:ea,caption:(0,l.t)("Battery level over time")}],name:(0,l.t)("Line Chart (legacy)"),supportedAnnotationTypes:[Wo.DT.TIME_SERIES,Wo.DT.INTERVAL,Wo.DT.EVENT,Wo.DT.FORMULA],tags:[(0,l.t)("Aesthetic"),(0,l.t)("Legacy"),(0,l.t)("nvd3"),(0,l.t)("Deprecated")],thumbnail:ta,useLegacyApi:!0});class aa extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(28041),o.e(95843)]).then(o.bind(o,95843)),metadata:ra,transformProps:No,controlPanel:oa})}}var na=o(515678);const ia=o.p+"example.d5c3e7be..jpg",la={controlPanelSections:[{...g.sections.legacyRegularTime,controlSetRows:[["time_range"]]},{label:(0,l.t)("Chart Options"),tabOverride:"customize",expanded:!0,controlSetRows:[["color_scheme"],[{name:"prefix_metric_with_slice_name",config:{type:"CheckboxControl",label:(0,l.t)("Prefix metric name with slice name"),default:!1,renderTrigger:!0}},null],[Ko],[Yo],[Uo,null]]},{label:(0,l.t)("X Axis"),expanded:!0,controlSetRows:[[er],[tr],[or],[rr],[lr,null]]},{label:(0,l.t)("Y Axis Left"),expanded:!0,controlSetRows:[[{name:"line_charts",config:{type:"SelectAsyncControl",multi:!0,label:(0,l.t)("Left Axis chart(s)"),validators:[_.Z],default:[],description:(0,l.t)("Choose one or more charts for left axis"),dataEndpoint:"/sliceasync/api/read?_flt_0_viz_type=line&_flt_7_viz_type=line_multi",placeholder:(0,l.t)("Select charts"),onAsyncErrorMessage:(0,l.t)("Error while fetching charts"),mutator:e=>e&&e.result?e.result.map((e=>({value:e.id,label:e.slice_name}))):[]}}],["y_axis_format"],[jo],[nr]]},{label:(0,l.t)("Y Axis Right"),expanded:!1,controlSetRows:[[{name:"line_charts_2",config:{type:"SelectAsyncControl",multi:!0,label:(0,l.t)("Right Axis chart(s)"),validators:[],default:[],description:(0,l.t)("Choose one or more charts for right axis"),dataEndpoint:"/sliceasync/api/read?_flt_0_viz_type=line&_flt_7_viz_type=line_multi",placeholder:(0,l.t)("Select charts"),onAsyncErrorMessage:(0,l.t)("Error while fetching charts"),mutator:e=>e&&e.result?e.result.map((e=>({value:e.id,label:e.slice_name}))):[]}}],[Ho],[Go],[ir]]},{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["adhoc_filters"]]},g.sections.annotations],controlOverrides:{y_axis_format:{label:(0,l.t)("Left Axis Format")}}},sa=new i.Z({category:(0,l.t)("Evolution"),credits:["http://nvd3.org"],description:(0,l.t)("Visualize two different time series using the same x-axis time range. This chart is being deprecated and we recommend using the Mixed Timeseries Chart instead!"),exampleGallery:[{url:ia}],name:(0,l.t)("Multiple Line Charts"),tags:[(0,l.t)("Multi-Variables"),(0,l.t)("Legacy"),(0,l.t)("nvd3"),(0,l.t)("Comparison"),(0,l.t)("Time"),(0,l.t)("Multi-Layers"),(0,l.t)("Deprecated")],thumbnail:na,useLegacyApi:!0});class ca extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(28041),o.e(95843)]).then(o.bind(o,95843)),metadata:sa,transformProps:No,controlPanel:la})}}var da=o(997373);const ua={controlPanelSections:[g.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metric"],["adhoc_filters"],[{name:"freq",config:{type:"SelectControl",label:(0,l.t)("Frequency"),default:"W-MON",freeForm:!0,clearable:!1,choices:[["AS",(0,l.t)("Year (freq=AS)")],["52W-MON",(0,l.t)("52 weeks starting Monday (freq=52W-MON)")],["W-SUN",(0,l.t)("1 week starting Sunday (freq=W-SUN)")],["W-MON",(0,l.t)("1 week starting Monday (freq=W-MON)")],["D",(0,l.t)("Day (freq=D)")],["4W-MON",(0,l.t)("4 weeks (freq=4W-MON)")]],description:(0,l.t)('The periodicity over which to pivot time. Users can provide\n            "Pandas" offset alias.\n            Click on the info bubble for more details on accepted "freq" expressions.'),tooltipOnClick:()=>{window.open("https://pandas.pydata.org/pandas-docs/stable/timeseries.html#offset-aliases")}}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[[Ko],[Uo],["color_picker",null]]},{label:(0,l.t)("X Axis"),expanded:!0,controlSetRows:[[er],[tr],[lr],[{name:rr.name,config:{...rr.config,default:"SMART_NUMBER",choices:h.F6}}]]},{label:(0,l.t)("Y Axis"),expanded:!0,controlSetRows:[[mr],[Qo],[jo],[ar],["y_axis_format"],[nr]]}],controlOverrides:{metric:{clearable:!1}},formDataOverrides:e=>({...e,metric:(0,f.u)().shiftMetric})},ma=new i.Z({category:(0,l.t)("Evolution"),credits:["http://nvd3.org"],description:"",name:(0,l.t)("Time-series Period Pivot"),tags:[(0,l.t)("Legacy"),(0,l.t)("Time"),(0,l.t)("nvd3")],thumbnail:da,useLegacyApi:!0});class pa extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(28041),o.e(95843)]).then(o.bind(o,95843)),metadata:ma,transformProps:No,controlPanel:ua})}}var ga=o(783389),ha=o(730381),fa=o.n(ha);const ba=e=>{if("string"===typeof e){const t=fa().utc(e,fa().ISO_8601,!0);return t.isValid()?t.valueOf():null}return e},ya=(e,t,o)=>e===ft.Z.id?(0,d.uh)(t):(0,d.bt)(null!=e?e:o),va=(e,t)=>{var o,r;return Boolean(null==e||null==(o=e.controls)||null==(r=o[t])?void 0:r.value)};var xa=o(353236);const Ca=[{label:"8",value:8},{label:"10",value:10},{label:"12",value:12},{label:"16",value:16},{label:"18",value:18},{label:"24",value:24},{label:"30",value:30},{label:"40",value:40},{label:"50",value:50},{label:"60",value:60},{label:"70",value:70},{label:"80",value:80},{label:"90",value:90},{label:"100",value:100},{label:"110",value:110},{label:"130",value:130},{label:"150",value:150},{label:"180",value:180}],wa={name:"header_font_size",config:{type:"SelectControl",label:(0,l.t)("Big Number Font Size"),renderTrigger:!0,clearable:!1,default:160,options:Ca}},Ta={name:"subheader_font_size",config:{type:"SelectControl",label:(0,l.t)("Subheader Font Size"),renderTrigger:!0,clearable:!1,default:60,options:Ca}},_a={name:"qoq_font_size",config:{type:"SelectControl",label:(0,l.t)("Circular font size"),renderTrigger:!0,clearable:!1,default:xa.dB,options:Ca,visibility:e=>va(e,"show_qoq_cal")}},Sa=((0,l.t)("Circular icon size"),xa.dB,{name:"yoy_font_size",config:{type:"SelectControl",label:(0,l.t)("YoY font size"),renderTrigger:!0,clearable:!1,default:xa.dB,options:Ca,visibility:e=>va(e,"show_yoy_cal")}}),Aa=((0,l.t)("Year-on-year icon size"),xa.dB,{controlPanelSections:[g.sections.genericTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[Mt.O6?"x_axis":null],[Mt.O6?"time_grain_sqla":null],["metric"],["adhoc_filters"]]},{label:(0,l.t)("Options"),tabOverride:"data",expanded:!0,controlSetRows:[[{name:"compare_lag",config:{type:"TextControl",label:(0,l.t)("Comparison Period Lag"),isInt:!0,description:(0,l.t)("Based on granularity, number of time periods to compare against")}}],[{name:"compare_suffix",config:{type:"TextControl",label:(0,l.t)("Comparison suffix"),description:(0,l.t)("Suffix to apply after the percentage display")}}],[{name:"show_timestamp",config:{type:"CheckboxControl",label:(0,l.t)("Show Timestamp"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display the timestamp")}}],[{name:"show_trend_line",config:{type:"CheckboxControl",label:(0,l.t)("Show Trend Line"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to display the trend line")}}],[{name:"start_y_axis_at_zero",config:{type:"CheckboxControl",label:(0,l.t)("Start y-axis at 0"),renderTrigger:!0,default:!0,description:(0,l.t)("Start y-axis at zero. Uncheck to start y-axis at minimum value in the data.")}}],[{name:"time_range_fixed",config:{type:"CheckboxControl",label:(0,l.t)("Fix to selected Time Range"),description:(0,l.t)("Fix the trend line to the full time range specified in case filtered results do not include the start or end dates"),renderTrigger:!0,visibility(e){const{time_range:t}=e.form_data;return!!t&&"No filter"!==t}}}],[{name:"show_yoy_cal",config:{type:"CheckboxControl",label:(0,l.t)("Display year-on-year"),default:!1,description:(0,l.t)("Is year-on-year displayed"),visibility:e=>{var t,o;if(null==e||null==(t=e.controls)||null==(o=t.time_grain_sqla)?void 0:o.value){var r,a;return["P3M","P1M","P1W","P1D"].includes(null==e||null==(r=e.controls)||null==(a=r.time_grain_sqla)?void 0:a.value)}return!1}}}],[{name:"yoy_type_choose",config:{label:(0,l.t)("Year-on-year type"),type:"SelectControl",description:(0,l.t)("Select the year-on-year type for calculation"),default:1,clearable:!1,choices:[[1,"\u589e\u957f\u7387"],[2,"\u589e\u957f\u503c"]],validators:[_.Z],visibility:e=>{var t,o;return Boolean(null==e||null==(t=e.controls)||null==(o=t.show_yoy_cal)?void 0:o.value)}}}],[{name:"show_qoq_cal",config:{type:"CheckboxControl",label:(0,l.t)("Display month on month ratio"),default:!1,description:(0,l.t)("Is the month on month ratio displayed"),visibility:e=>{var t,o;if(null==e||null==(t=e.controls)||null==(o=t.time_grain_sqla)?void 0:o.value){var r,a;return["P1Y","P3M","P1M","P1W","P1D"].includes(null==e||null==(r=e.controls)||null==(a=r.time_grain_sqla)?void 0:a.value)}return!1}}}],[{name:"qoq_type_choose",config:{label:(0,l.t)("Type of month on month comparison"),type:"SelectControl",description:(0,l.t)("Select the month on month comparison type for calculation"),default:1,clearable:!1,choices:[[1,"\u589e\u957f\u7387"],[2,"\u589e\u957f\u503c"]],validators:[_.Z],visibility:e=>{var t,o;return Boolean(null==e||null==(t=e.controls)||null==(o=t.show_qoq_cal)?void 0:o.value)}}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_picker",null],[wa],[{name:"header_pre_text",config:{type:"TextControl",label:(0,l.t)("Prefix"),renderTrigger:!0,description:(0,l.t)("Prefix of text")}}],[{name:"header_fix_text",config:{type:"TextControl",label:(0,l.t)("Suffix"),renderTrigger:!0,description:(0,l.t)("The suffix of the text")}}],[Ta],["y_axis_format"],[{name:"time_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),renderTrigger:!0,choices:h.HC,description:h.YD,default:ft.Z.id}}],[{name:"force_timestamp_formatting",config:{type:"CheckboxControl",label:(0,l.t)("Force date format"),renderTrigger:!0,default:!1,description:(0,l.t)("Use date formatting even when metric value is not a timestamp")}}]]},{label:(0,l.t)("Month on month configuration items"),expanded:!0,controlSetRows:[[_a],[{name:"qoq_color_picker",config:{type:"ColorPickerControl",label:(0,l.t)("Font color"),renderTrigger:!0,description:(0,l.t)("Set the ring ratio font color"),default:()=>({r:0,g:0,b:0,a:100}),visibility:e=>va(e,"show_qoq_cal")}}],[{name:"qoq_icon_flag",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Up and down markers"),renderTrigger:!0,description:(0,l.t)("Set month on month up and down markers"),default:1,optionRenderer:e=>{const{state:t={},up_color:o,down_color:r,ep_color:a,up_icon:n,eq_icon:i,down_icon:l}=e||{},{controls:s={}}=t,{qoq_icon_flag_color_invert:c={}}=s,{value:d}=c,u=d?r:o,m=a,p=d?o:r;return(0,Z.tZ)("div",{style:{display:"flex",height:"100%"}},n(u,20),i(m,20),l(p,20))},mapStateToProps:e=>({options:(0,xa.Ts)(e)}),visibility:e=>va(e,"show_qoq_cal")}}],[{name:"qoq_icon_flag_color_invert",config:{type:"CheckboxControl",label:(0,l.t)("Color Flip"),renderTrigger:!0,default:!1,description:(0,l.t)("Color flipping effect of month on month rise and fall markers"),visibility:e=>va(e,"show_qoq_cal")}}],[{name:"qoq_icon_fix_text",config:{type:"TextControl",label:(0,l.t)("Suffix"),renderTrigger:!0,description:(0,l.t)("Suffixes for month on month text"),visibility:e=>va(e,"show_qoq_cal")}}]]},{label:(0,l.t)("Year-on-year configuration item"),expanded:!0,controlSetRows:[[Sa],[{name:"yoy_color_picker",config:{type:"ColorPickerControl",label:(0,l.t)("Font color"),renderTrigger:!0,description:(0,l.t)("Set year-on-year font color"),default:()=>({r:0,g:0,b:0,a:100}),visibility:e=>va(e,"show_yoy_cal")}}],[{name:"yoy_icon_flag",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Up and down markers"),renderTrigger:!0,description:(0,l.t)("Set up year-on-year rise and fall markers"),default:1,optionRenderer:e=>{const{up_color:t,down_color:o,ep_color:r,up_icon:a,eq_icon:n,down_icon:i}=e||{},l=t,s=r,c=o;return(0,Z.tZ)("div",{style:{display:"flex",height:"100%"}},a(l,20),n(s,20),i(c,20))},mapStateToProps:e=>({options:(0,xa.Ts)(e)}),visibility:e=>va(e,"show_yoy_cal")}}],[{name:"yoy_icon_flag_color_invert",config:{type:"CheckboxControl",label:(0,l.t)("Color Flip"),renderTrigger:!0,default:!1,description:(0,l.t)("Color flipping effect of year-on-year rise and fall markers"),visibility:e=>va(e,"show_yoy_cal")}}],[{name:"yoy_icon_fix_text",config:{type:"TextControl",label:(0,l.t)("Suffix"),renderTrigger:!0,description:(0,l.t)("Suffix for year-on-year text"),visibility:e=>va(e,"show_yoy_cal")}}]]},{label:(0,l.t)("Advanced Analytics"),expanded:!1,controlSetRows:[[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Rolling Window"))],[{name:"rolling_type",config:{type:"SelectControl",label:(0,l.t)("Rolling Function"),default:"None",choices:[["None",(0,l.t)("None")],["mean",(0,l.t)("mean")],["sum",(0,l.t)("sum")],["std",(0,l.t)("std")],["cumsum",(0,l.t)("cumsum")]],description:(0,l.t)("Defines a rolling window function to apply, works along with the [Periods] text box")}}],[{name:"rolling_periods",config:{type:"TextControl",label:(0,l.t)("Periods"),isInt:!0,description:(0,l.t)("Defines the size of the rolling window function, relative to the time granularity selected")}}],[{name:"min_periods",config:{type:"TextControl",label:(0,l.t)("Min Periods"),isInt:!0,description:(0,l.t)('The minimum number of rolling periods required to show a value. For instance if you do a cumulative sum on 7 days you may want your "Min Period" to be 7, so that all data points shown are the total of 7 periods. This will hide the "ramp up" taking place over the first 7 periods')}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Resample"))],[{name:"resample_rule",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Rule"),default:null,choices:[["1T",(0,l.t)("1 minutely frequency")],["1H",(0,l.t)("1 hourly frequency")],["1D",(0,l.t)("1 calendar day frequency")],["7D",(0,l.t)("7 calendar day frequency")],["1MS",(0,l.t)("1 month start frequency")],["1M",(0,l.t)("1 month end frequency")],["1AS",(0,l.t)("1 year start frequency")],["1A",(0,l.t)("1 year end frequency")]],description:(0,l.t)("Pandas resample rule")}}],[{name:"resample_method",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Fill method"),default:null,choices:[["asfreq",(0,l.t)("Null imputation")],["zerofill",(0,l.t)("Zero imputation")],["linear",(0,l.t)("Linear interpolation")],["ffill",(0,l.t)("Forward values")],["bfill",(0,l.t)("Backward values")],["median",(0,l.t)("Median values")],["mean",(0,l.t)("Mean values")],["sum",(0,l.t)("Sum values")]],description:(0,l.t)("Pandas resample method")}}]]}],controlOverrides:{y_axis_format:{label:(0,l.t)("Number format")},x_axis:{label:(0,l.t)("TEMPORAL X-AXIS"),...ga.V7}},formDataOverrides:e=>({...e,metric:(0,f.u)().shiftMetric()})});var Pa=o(740962),ka=o(53552),Fa=o(849239);function Ra(e){return{appendToBody:!0,confine:!0,position:(t,o,r,a,n)=>{var i,l;const s=null==(i=e.divRef)||null==(l=i.current)?void 0:l.getBoundingClientRect(),c=t[0]+((null==s?void 0:s.x)||0),d=t[1]+((null==s?void 0:s.y)||0),u=n.contentSize[0],m=n.contentSize[1];let p=c+Fa.wD,g=d-Fa.wD-m;return p+u>=document.documentElement.clientWidth&&(p=c-Fa.wD-u,p<=0&&(p=Fa.Q8)),g<=0&&(g=d+Fa.wD,g+m>=document.documentElement.clientHeight&&(g=Fa.Q8)),[p-((null==s?void 0:s.x)||0),g-((null==s?void 0:s.y)||0)]}}}const Ia=(0,c.JB)();function Ea(e=Pa.Z,t=Ia){return function(o){return`\n      ${e(o[0].data[0])}\n      <br />\n      <strong>\n        ${null===o[0].data[1]?(0,l.t)("N/A"):t(o[0].data[1])}\n      </strong>\n    `}}const La=(0,c.JB)(mt.Z.PERCENT_SIGNED_1_POINT);function Da(e){var t,o,r,a;const{width:n,height:i,queriesData:l,formData:s,rawFormData:d,theme:u,hooks:m,inContextMenu:p}=e,{colorPicker:g,compareLag:h,compareSuffix:f="",timeFormat:b,headerFontSize:y,metric:v="value",showTimestamp:x,showTrendLine:C,startYAxisAtZero:w,subheader:T="",subheaderFontSize:_,headerPreText:S,headerFixText:A,showQoqCal:P,qoqTypeChoose:k,qoqFontSize:F,qoqColorPicker:R,qoqIconSize:I,qoqIconFlagColorInvert:E,qoqIconFlag:L,qoqIconFixText:D,showYoyCal:Z,yoyTypeChoose:M,yoyFontSize:O,yoyColorPicker:N,yoyIconSize:B,yoyIconFlagColorInvert:z,yoyIconFlag:V,yoyIconFixText:q,forceTimestampFormatting:$,yAxisFormat:W,timeRangeFixed:H}=s,Y=(0,Me.Z)(d),{data:Q=[],colnames:j=[],coltypes:G=[],from_dttm:U,to_dttm:J}=l[0],K={},X=(0,ht.Z)(v),ee=Number(h)||0;let te=T;const{r:oe,g:re,b:ae}=g,ne=`rgb(${oe}, ${re}, ${ae})`,ie=(0,Mt.M8)(d);let le,se,ce=0,de=0===Q.length?null:Q[0][X],ue=0===Q.length?null:Q[0][ie];const me=j.findIndex((e=>e===X)),pe=me>-1?G[me]:null;let ge={qoqRate:0,qoqValue:0,yoyRate:0,yoyValue:0};if(Q.length>0){const e=Q.map((e=>[e[ie],ba(e[X])])).sort(((e,t)=>null!==e[0]&&null!==t[0]?t[0]-e[0]:0));de=e[0][1],ue=e[0][0];const t=Q[Q.length-1],o=`QOQ(${X})Rate`,r=t[o]?Number(Number(t[o]).toFixed(2)):0,a=`QOQ(${X})Value`,n=t[a]?Number(Number(t[a]).toFixed(2)):0,i=`YOY(${X})Rate`,l=t[i]?Number(Number(t[i]).toFixed(2)):0,s=`YOY(${X})Value`;if(ge={qoqRate:r,qoqValue:n,yoyRate:l,yoyValue:t[s]?Number(Number(t[s]).toFixed(2)):0},null===de&&(se=e.find((e=>null!==e[1])),de=se?se[1]:null,ue=se?se[0]:null),ee>0){const t=ee;if(t<e.length){const o=e[t][1];null!==de&&null!==o&&(ce=o?(de-o)/Math.abs(o):0,te=`${La(ce)} ${f}`)}}e.reverse(),le=C?e:void 0}let he,fe="";ce>0?fe="positive":ce<0&&(fe="negative"),null!=(t=e.datasource)&&t.metrics&&(he=e.datasource.metrics.find((e=>e.metric_name===v)));const be=ya(b,Y,null==(o=he)?void 0:o.d3format),ye=pe===gt.Z.TEMPORAL||pe===gt.Z.STRING||$?be:(0,c.JB)(null!=(r=null!=W?W:null==(a=he)?void 0:a.d3format)?r:void 0);if(le&&H&&U){const e=null!=J?J:Date.now();(!le[0][0]||le[0][0]>U)&&le.unshift([U,null]),(!le[le.length-1][0]||le[le.length-1][0]<e)&&le.push([e,null])}const ve=le?{series:[{data:le,type:"line",smooth:!0,symbol:"circle",symbolSize:10,showSymbol:!1,color:ne,areaStyle:{color:new ka.Q.o(0,0,0,1,[{offset:0,color:ne},{offset:1,color:u.colors.grayscale.light5}])}}],xAxis:{min:le[0][0],max:le[le.length-1][0],show:!1,type:"value"},yAxis:{scale:!w,show:!1},grid:{left:0,right:0,top:0,bottom:0},tooltip:{...Ra(K),show:!p,trigger:"axis",formatter:Ea(be,ye)},aria:{enabled:!0,label:{description:`Big number visualization ${T}`}}}:{},{onContextMenu:xe}=m;return{width:n,height:i,bigNumber:de,bigNumberFallback:se,className:fe,headerFormatter:ye,formatTime:be,formData:s,headerFontSize:y,subheaderFontSize:_,headerPreText:S,headerFixText:A,showQoqCal:P,qoqTypeChoose:k,qoqFontSize:F,qoqColorPicker:R,qoqIconSize:I,qoqIconFlagColorInvert:E,qoqIconFlag:L,qoqIconFixText:D,showYoyCal:Z,yoyTypeChoose:M,yoyFontSize:O,yoyColorPicker:N,yoyIconSize:B,yoyIconFlagColorInvert:z,yoyIconFlag:V,yoyIconFixText:q,qoqYoy:ge,mainColor:ne,showTimestamp:x,showTrendLine:C,startYAxisAtZero:w,subheader:te,timestamp:ue,trendLineData:le,echartOptions:ve,onContextMenu:xe,xValueFormatter:be,refs:K}}var Za=o(804098),Ma=o(197490),Oa=o(199343),Na=o(663038);function Ba(e){return(0,Ut.Z)(e,(t=>[{...t,columns:[...(0,Mt.SR)(e)?(0,S.Z)((0,Mt.Bw)(e)):[]],...(0,Mt.SR)(e)?{}:{is_timeseries:!0},post_processing:[(0,Za.H)(e,t),(0,Ma.V)(e,t),(0,Oa.X)(e,t),(0,Na.k)(e,t)]}]))}const za=o.p+"Big_Number_Trendline.bccce4c1..jpg";var Va=o(465857);const qa=new i.Z({category:(0,l.t)("KPI"),description:(0,l.t)("Showcases a single number accompanied by a simple line chart, to call attention to an important metric along with its change over time or other dimension."),exampleGallery:[{url:za}],name:(0,l.t)("Big Number with Trendline"),tags:[(0,l.t)("Advanced-Analytics"),(0,l.t)("Formattable"),(0,l.t)("Line"),(0,l.t)("Percentages"),(0,l.t)("Popular"),(0,l.t)("Report"),(0,l.t)("Description"),(0,l.t)("Trend")],thumbnail:Va,behaviors:[dt.cg.DRILL_TO_DETAIL]});class $a extends s.Z{constructor(){super({loadChart:()=>o.e(32229).then(o.bind(o,332229)),metadata:qa,buildQuery:Ba,transformProps:Da,controlPanel:Aa})}}const Wa={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metric"],["adhoc_filters"]]},{label:(0,l.t)("Display settings"),expanded:!0,tabOverride:"data",controlSetRows:[[{name:"subheader",config:{type:"TextControl",label:(0,l.t)("Subheader"),renderTrigger:!0,description:(0,l.t)("Description text that shows up below your Big Number")}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[[{name:"color_picker",config:{type:"ColorPickerControl",label:(0,l.t)("Fixed Color"),renderTrigger:!0,description:(0,l.t)("Use this to define a static color for header"),default:()=>({r:0,g:0,b:0,a:100})}}],[{name:"font_type",config:{type:"SelectControl",label:(0,l.t)("Font Type"),renderTrigger:!0,default:"None",choices:[["monospace",(0,l.t)("\u7b49\u5bbd")],["Fira Code",(0,l.t)("\u4ee3\u7801\u5b57\u4f53")],["Courier New",(0,l.t)("\u96c5\u9ed1")],["Georgia",(0,l.t)("Georgia \u5b57\u4f53")],["Times New Roman",(0,l.t)("Times New Roman")],["serif",(0,l.t)("\u6807\u51c6\u5b8b\u4f53")],["Times",(0,l.t)("(\u5e38\u89c4)\u5b8b\u4f53")],["Inter",(0,l.t)("\u9ed1\u4f53")],["Helvetica",(0,l.t)("\u897f\u6587\u5b57\u4f53")],["Arial",(0,l.t)("\u96c5\u9ed1\u52a0\u7c97")],["Brush Script MT",(0,l.t)("\u827a\u672f\u5b57\u4f53")],["Comic Sans MS",(0,l.t)("\u624b\u5199\u5b57\u4f53")],["Impact",(0,l.t)("\u5e7f\u544a\u5b57\u4f53")]],description:(0,l.t)("select the type of the font that get displayed.")}}],[wa],[Ta],["y_axis_format"],[{name:"time_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),renderTrigger:!0,choices:h.HC,description:h.YD,default:ft.Z.id}}],[{name:"force_timestamp_formatting",config:{type:"CheckboxControl",label:(0,l.t)("Force date format"),renderTrigger:!0,default:!1,description:(0,l.t)("Use date formatting even when metric value is not a timestamp")}}]]},{label:(0,l.t)("Advanced Setting"),expanded:!0,controlSetRows:[[{name:"conditional_formatting",config:{type:"ConditionalFormattingControlPro",renderTrigger:!0,label:(0,l.t)("Conditional formatting"),description:(0,l.t)("Apply conditional color formatting to metrics"),shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n,i,l,s;const c=(0,S.Z)(null==e||null==(r=e.controls)||null==(a=r.metric)?void 0:a.value),d=null!=e&&null!=(n=e.datasource)&&n.hasOwnProperty("verbose_map")?null==e||null==(i=e.datasource)?void 0:i.verbose_map:null!=(l=null==e||null==(s=e.datasource)?void 0:s.columns)?l:{};return{columnOptions:c.map((e=>{var t,o;const r="string"===typeof e?e:null==e?void 0:e.label,a="string"===typeof e?gt.Z.NUMERIC:null==e||null==(t=e.column)?void 0:t.type_generic;return{value:r,label:null!=(o=d[r])?o:r,type:a}})),verboseMap:d}}}}]]}],controlOverrides:{y_axis_format:{label:(0,l.t)("Number format")}},formDataOverrides:e=>({...e,metric:(0,f.u)().shiftMetric()})};function Ha(e){var t,o,r,a;const{width:n,height:i,queriesData:l,formData:s,rawFormData:d,hooks:u}=e,{headerFontSize:m,metric:p="value",subheader:g="",subheaderFontSize:h,forceTimestampFormatting:f,timeFormat:b,yAxisFormat:y,colorPicker:v,vizType:x,fontType:C,conditionalFormatting:w}=s,{data:T=[],coltypes:_=[]}=l[0],S=(0,Me.Z)(d),A=(0,ht.Z)(p),P=g,{r:k,g:F,b:R}=v,I=`rgb(${k}, ${F}, ${R})`,E=0===T.length?null:ba(T[0][A]);let L;null!=(t=e.datasource)&&t.metrics&&(L=e.datasource.metrics.find((e=>e.metric_name===p)));const D=ya(b,S,null==(o=L)?void 0:o.d3format),Z=_[0]===gt.Z.TEMPORAL||_[0]===gt.Z.STRING||f?D:(0,c.JB)(null!=(r=null!=y?y:null==(a=L)?void 0:a.d3format)?r:void 0),{onContextMenu:M}=u;return{width:n,height:i,bigNumber:E,headerFormatter:Z,headerFontSize:m,subheaderFontSize:h,subheader:P,onContextMenu:M,refs:{},mainColor:I,vizType:x,fontType:C,conditionalFormatting:w}}function Ya(e){return(0,Ut.Z)(e,(e=>[e]))}const Qa=o.p+"BigNumber.b33901bf..jpg",ja=o.p+"BigNumber2.3f1427c2..jpg";var Ga=o(920266);const Ua=new i.Z({category:(0,l.t)("KPI"),description:(0,l.t)("Showcases a single metric front-and-center. Big number is best used to call attention to a KPI or the one thing you want your audience to focus on."),exampleGallery:[{url:Qa,caption:(0,l.t)("A Big Number")},{url:ja,caption:(0,l.t)("With a subheader")}],name:(0,l.t)("Big Number"),tags:[(0,l.t)("Additive"),(0,l.t)("Business"),(0,l.t)("Formattable"),(0,l.t)("Legacy"),(0,l.t)("Percentages"),(0,l.t)("Popular"),(0,l.t)("Report"),(0,l.t)("Description")],thumbnail:Ga,behaviors:[dt.cg.DRILL_TO_DETAIL]});class Ja extends s.Z{constructor(){super({loadChart:()=>o.e(32229).then(o.bind(o,332229)),metadata:Ua,buildQuery:Ya,transformProps:Ha,controlPanel:Wa})}}var Ka=o(820884);function Xa(e){return(0,Ut.Z)(e,(t=>[{...t,columns:[...(0===(0,S.Z)(e.columns).length&&e.granularity_sqla?[e.granularity_sqla]:(0,S.Z)(e.columns)).map((t=>{var o;return(0,Ot.s9)(t)&&e.time_grain_sqla&&null!=e&&null!=(o=e.temporal_columns_lookup)&&o[t]?{timeGrain:e.time_grain_sqla,columnType:"BASE_AXIS",sqlExpression:t,label:t,expressionType:"SQL"}:t})),...(0,S.Z)(e.groupby)],series_columns:e.groupby,post_processing:[(0,Ka.F)(e,t)]}]))}var en=o(945211);const tn={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["columns"],[{name:"time_grain_sqla",config:{...W.ZP.time_grain_sqla,visibility:({controls:e})=>{var t;const o=Object.fromEntries((0,S.Z)(null==e||null==(t=e.columns)?void 0:t.options).map((e=>[e.column_name,e.is_dttm])));return(0,S.Z)(null==e?void 0:e.columns.value).map((e=>!!(0,Ot.GA)(e)||!!(0,Ot.s9)(e)&&!!o[e])).some(Boolean)}}},"temporal_columns_lookup"],["groupby"],["metrics"],["adhoc_filters"],["series_limit"],["series_limit_metric"],[{name:"whiskerOptions",config:{clearable:!1,type:"SelectControl",freeForm:!0,label:(0,l.t)("Whisker/outlier options"),default:"Tukey",description:(0,l.t)("Determines how whiskers and outliers are calculated."),choices:[["Tukey",(0,l.t)("Tukey")],["Min/max (no outliers)",(0,l.t)("Min/max (no outliers)")],["2/98 percentiles",(0,l.t)("2/98 percentiles")],["9/91 percentiles",(0,l.t)("9/91 percentiles")]]}}]]},g.sections.titleControls,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"x_ticks_layout",config:{type:"SelectControl",label:(0,l.t)("X Tick Layout"),choices:[["auto",(0,l.t)("auto")],["flat",(0,l.t)("flat")],["45\xb0","45\xb0"],["90\xb0","90\xb0"],["staggered",(0,l.t)("staggered")]],default:"auto",clearable:!1,renderTrigger:!0,description:(0,l.t)("The way the ticks are laid out on the X-axis")}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:"SMART_NUMBER",choices:h.F6,description:`${h.YD} ${h.pj}`}}],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),renderTrigger:!0,choices:h.HC,default:"smart_date",description:h.YD}}]]}],controlOverrides:{groupby:{label:(0,l.t)("Dimensions"),description:(0,l.t)("Categories to group by on the x-axis.")},columns:{label:(0,l.t)("Distribute across"),multi:!0,description:(0,l.t)("Columns to calculate distribution across."),initialValue:(e,t)=>t&&(null==e||!e.value||Array.isArray(null==e?void 0:e.value)&&0===e.value.length)?[(0,en.X)(t.datasource).defaultTemporalColumn]:e.value,validators:[_.Z]}},formDataOverrides:e=>{const t=(0,f.u)().controls.columns.filter((t=>!(0,S.Z)(e.columns).includes(t)));return(0,f.u)().controls.columns=(0,f.u)().controls.columns.filter((e=>!t.includes(e))),{...e,metrics:(0,f.u)().popAllMetrics(),groupby:t}}};var on=o(310581),rn=o(806915);const an=e=>"number"!==typeof e?parseInt(e,10)||0:e;var nn=o(196886),ln=o(534804),sn=o(662720),cn=o(281763),dn=o.n(cn),un=o(5364),mn=o(330080);const pn=new RegExp(`(.+)(${mn.i1.ForecastLower}|${mn.i1.ForecastTrend}|${mn.i1.ForecastUpper})$`),gn=e=>{const t=e,o=pn.exec(t);return o?{name:o[1],type:o[2]}:{name:t,type:mn.i1.Observation}},hn=(e,t=!1)=>{const o={};return e.forEach((e=>{const{marker:r,seriesId:a,value:n}=e,i=gn(a),l=t?n[0]:n[1];if(dn()(l)){i.name in o||(o[i.name]={marker:r||""});const e=o[i.name];i.type===mn.i1.Observation&&(e.observation=l),i.type===mn.i1.ForecastTrend&&(e.forecastTrend=l),i.type===mn.i1.ForecastLower&&(e.forecastLower=l),i.type===mn.i1.ForecastUpper&&(e.forecastUpper=l)}})),o},fn=({seriesName:e,observation:t,forecastTrend:o,forecastLower:r,forecastUpper:a,marker:n,formatter:i})=>{let l=`${n}${(0,rn.Z6)(e)}: `,s=!1;return dn()(t)&&(s=!0,l+=`${i(t)}`),o&&(s&&(l+=", "),l+=`\u0177 = ${i(o)}`),r&&a&&(l=`${l.trim()} (${i(r)}, ${i(r+a)})`),`${l.trim()}`};function bn(e,t={}){const o=e.length?Object.keys(e[0]):[];return e.map((e=>{const r={};return o.forEach((a=>{const n=gn(a),i=a!==un.W3&&t[n.name]?`${t[n.name]}${n.type}`:a,l=`${n.name}${mn.i1.ForecastLower}`;let s=e[a];n.type===mn.i1.ForecastUpper&&o.includes(l)&&null!==s&&null!==e[l]&&(s-=e[l]),r[i]=s})),r}))}var yn=o(760524);function vn(e,t,o,r){const{value:a}=e;return t.map((e=>{let t=e[o];return"time"===r&&(t=new Date(t).getTime()),[t,(0,yn.f)(a,t||0)]}))}function xn(e){switch(e){case ln.TJ.Low:return.2;case ln.TJ.Medium:return.5;case ln.TJ.High:return.8;default:return 1}}const Cn={descriptionColumns:["long_descr"],intervalEndColumn:"end_dttm",timeColumn:"start_dttm",titleColumn:"short_descr"};function wn(e,t){const{name:o}=e,r=t[o];if((0,ln.$c)(r)){const{records:t}=r,{descriptionColumns:o=[],intervalEndColumn:a="",timeColumn:n="",titleColumn:i=""}=(0,ln.mn)(e)?e:Cn;return t.map((e=>({descriptions:o.map((t=>e[t]||"")),intervalEnd:e[a]||"",time:e[n]||"",title:e[i]||""})))}throw new Error("Please rerun the query.")}function Tn(e,t,o=[]){const r=[],a=[],n=o.filter((e=>!!e));return e&&a.push(e),t&&a.push(t),a.length>0&&r.push(a.join(" - ")),n.length>0&&r.push(n.join("\n")),r.join("\n\n")}function _n(e,t){const o=e.filter((e=>e.annotationType===ln.JJ.Formula&&e.show)).map((e=>e.name)),r=e.filter((e=>e.annotationType===ln.JJ.Timeseries&&e.show)).flatMap((e=>{const o=t[e.name];return(0,ln.b4)(o)?o.map((e=>e.key)):[]}));return o.concat(r)}function Sn(e){var t;const o=null==e||null==(t=e.queriesData[0])?void 0:t.annotation_data;return Zt()(o)?{}:o}function An(e,t,o){const{name:r}=e,{area:a,filterState:n,seriesContexts:i={},markerEnabled:l,markerSize:s,areaOpacity:c=1,seriesType:d,barWidth:u,lineType:m,stack:p,yAxisIndex:g=0,showValue:h,onlyTotal:f,formatter:b,totalStackedValues:y=[],showValueIndexes:v=[],thresholdValues:x=[],seriesKey:C,sliceId:w,isHorizontal:T=!1,queryIndex:_=0,lineWidth:S,symbol:A,datalabelColor:P,datalabelSize:k,datalabelPosition:F,baropacity:R,columnColorFormatters:I}=o,E=i[r||""]||[],L=E.includes(mn.i1.ForecastTrend)||E.includes(mn.i1.ForecastLower)||E.includes(mn.i1.ForecastUpper),D=gn(r||""),Z=D.type===mn.i1.ForecastLower||D.type===mn.i1.ForecastUpper,M=(null==n?void 0:n.selectedValues)&&!(null!=n&&n.selectedValues.includes(r))?Fa.ZV.SemiTransparent:Fa.ZV.NonTransparent;if((p||a)&&Z)return;const O=D.type===mn.i1.Observation,N=D.type===mn.i1.ForecastTrend;let B,z;Z?B=D.name:p&&O?B="obs":p&&N&&(B=D.type),z=!Z&&("scatter"===d||L&&O)?"scatter":Z?"line":"bar"===d?"bar":"line";const V=Array.isArray(I)&&I.length>0,q={color:e=>{const{value:o,seriesName:r}=e,a=T?o[0]:o[1];let n;return V&&I.filter((e=>e.column===r)).forEach((e=>{const t=!!a&&e.getColorFromValue(a);t&&(n=t.backgroundColor)})),n||t(C||D.name,w)},opacity:R||M};let $={},W={},H=!1;Z||("scatter"===z||L&&O?H=!0:"line"!==z||l?l&&(H=!0):(H=!0,q.opacity=0,$={itemStyle:{opacity:1}},W={opacity:1}));const Y=Z?{...o.lineStyle,opacity:Fa.ZV.Transparent,width:S,type:m}:{...o.lineStyle,opacity:M,width:S,type:m};return{...e,queryIndex:_,yAxisIndex:g,name:D.name,itemStyle:q,type:z,smooth:"smooth"===d,triggerLineEvent:!0,step:["start","middle","end"].includes(d)?d:void 0,stack:B,stackStrategy:Z?"all":"samesign",lineStyle:Y,barWidth:u,areaStyle:a||D.type===mn.i1.ForecastUpper?{opacity:M*c}:void 0,emphasis:{lineStyle:{width:"bolder"},...$},showSymbol:H,symbolSize:s,label:{show:h,fontSize:k||12,color:P?`rgba(${null==P?void 0:P.r},${null==P?void 0:P.g},${null==P?void 0:P.b},${null==P?void 0:P.a})`:"inherit",position:F||"top",formatter:e=>{const{value:t,dataIndex:o,seriesIndex:r,seriesName:a}=e,n=T?t[0]:t[1],i=rn.aI.legend===a,l=p===Fa.GF.Expand;return b?!p||i?b(n):f?r===v[o]?b(l?1:y[o]):"":n>=(x[o]||Number.MIN_SAFE_INTEGER)?b(n):"":n},...W},symbol:A}}function Pn(e,t,o,r,a,n){const{name:i,color:l,opacity:s,style:c,lineWidth:d}=e;return{name:i,id:i,itemStyle:{color:l||a(i,n)},lineStyle:{opacity:xn(s),type:c,width:d},type:"line",smooth:!0,data:vn(e,t,o,r),symbolSize:0}}function kn(e,t,o,r,a,n){const i=[];return wn(e,o).forEach((t=>{const{name:o,color:l,opacity:s,showLabel:c}=e,{descriptions:d,intervalEnd:u,time:m,title:p}=t,g=Tn(o,p,d),h=[[{name:g,xAxis:m},{xAxis:u}]],f=c?{show:!0,color:a.colors.grayscale.dark2,position:"insideTop",verticalAlign:"top",fontWeight:"bold",emphasis:{position:"insideTop",verticalAlign:"top",backgroundColor:a.colors.grayscale.light5}}:{show:!1,color:a.colors.grayscale.dark2,emphasis:{fontWeight:"bold",show:!0,position:"insideTop",verticalAlign:"top",backgroundColor:a.colors.grayscale.light5}};i.push({id:`Interval - ${g}`,type:"line",animation:!1,markArea:{silent:!1,itemStyle:{color:l||r(o,n),opacity:xn(s||ln.TJ.Medium),emphasis:{opacity:.8}},label:f,data:h}})})),i}function Fn(e,t,o,r,a,n){const i=[];return wn(e,o).forEach((t=>{const{name:o,color:l,opacity:s,style:c,width:d,showLabel:u}=e,{descriptions:m,time:p,title:g}=t,h=Tn(o,g,m),f=[{name:h,xAxis:p}],b={width:d,type:c,color:l||r(o,n),opacity:xn(s),emphasis:{width:d?d+1:d,opacity:1}},y=u?{show:!0,color:a.colors.grayscale.dark2,position:"insideEndTop",fontWeight:"bold",formatter:e=>e.name,emphasis:{backgroundColor:a.colors.grayscale.light5}}:{show:!1,color:a.colors.grayscale.dark2,position:"insideEndTop",emphasis:{formatter:e=>e.name,fontWeight:"bold",show:!0,backgroundColor:a.colors.grayscale.light5}};i.push({id:`Event - ${h}`,type:"line",animation:!1,markLine:{silent:!1,symbol:"none",lineStyle:b,label:y,data:f}})})),i}function Rn(e,t,o,r,a,n){const i=[],{hideLine:l,name:s,opacity:c,showMarkers:d,style:u,width:m,color:p}=e,g=r[s];return(0,ln.b4)(g)&&g.forEach((e=>{const{key:o,values:r}=e;i.push({type:"line",id:o,name:o,data:r.map((e=>[e.x,e.y])),symbolSize:d?t:0,lineStyle:{opacity:xn(c),type:u,width:l?0:m,color:p||a(s,n)}})})),i}function In(e,t,o,r,a,n,i,l,s,c){const d=o?Fa.SM.yAxisLabelTopOffset:0,u=n&&Number(c)||0;return(0,rn.G_)(e,t,a,{top:i&&"end"===i?Fa.SM.gridOffsetTop+(Number(s)||0):Fa.SM.gridOffsetTop+d,bottom:r?Fa.SM.gridOffsetBottomZoomable+("center"==l?u:0):Fa.SM.gridOffsetBottom+("center"==l?u:0),left:"center"===i?Fa.SM.gridOffsetLeft+(Number(s)||0):Fa.SM.gridOffsetLeft,right:e&&t===mn.IY.Right?"end"==l?u:0:Fa.SM.gridOffsetRight+("end"==l?u:0)})}function En(e){return e===ft.Z.id?sn.Z:e?(0,d.bt)(e):String}function Ln(e){if(e!==ft.Z.id&&e)return e?(0,d.bt)(e):String}function Dn(e,t){var o,r,a,n,i,l,s,c,d,u,m,p;switch(e){case"line":return{lineStyle:{color:`rgba(${null==(o=t.axisPtrLsColor)?void 0:o.r},${null==(r=t.axisPtrLsColor)?void 0:r.g},${null==(a=t.axisPtrLsColor)?void 0:a.b},${null==(n=t.axisPtrLsColor)?void 0:n.a})`,width:t.axisPtrLsWidth,type:t.axisPtrLsType}};case"shadow":return{shadowStyle:{color:`rgba(${null==(i=t.axisPtrSsColor)?void 0:i.r},${null==(l=t.axisPtrSsColor)?void 0:l.g},${null==(s=t.axisPtrSsColor)?void 0:s.b},${null==(c=t.axisPtrSsColor)?void 0:c.a})`}};case"cross":return{lineStyle:{color:`rgba(${null==(d=t.axisPtrLsColor)?void 0:d.r},${null==(u=t.axisPtrLsColor)?void 0:u.g},${null==(m=t.axisPtrLsColor)?void 0:m.b},${null==(p=t.axisPtrLsColor)?void 0:p.a})`,width:t.axisPtrLsWidth,type:t.axisPtrLsType}};default:return{}}}function Zn(e){const{width:t,height:o,formData:r,hooks:a,filterState:n,queriesData:i,inContextMenu:l,emitCrossFilters:s}=e,{data:u=[]}=i[0],{setDataMask:m=(()=>{}),onContextMenu:p}=a,g=(0,rn.IW)(i[0]),{colorScheme:h,groupby:f=[],metrics:b=[],numberFormat:y,dateFormat:v,xTicksLayout:x,legendOrientation:C="top",xAxisTitle:w,yAxisTitle:T,xAxisTitleMargin:_,yAxisTitleMargin:S,xAxisTitlePosition:A,yAxisTitlePosition:P,xTitleColor:k,xTitleSize:F,xTitleAlign:R,sliceId:I}=r,E={},L=So.getScale(h),D=(0,c.JB)(y),Z=b.map(ht.Z),M=f.map(on.Z),O=u.map((e=>{const t=(0,rn.iw)({datum:e,groupby:M,coltypeMapping:g,timeFormatter:(0,d.bt)(v)});return Z.map((o=>{const r=1===Z.length?t:`${t}, ${o}`,a=n.selectedValues&&!n.selectedValues.includes(r);return{name:r,value:[e[`${o}__min`],e[`${o}__q1`],e[`${o}__median`],e[`${o}__q3`],e[`${o}__max`],e[`${o}__mean`],e[`${o}__count`],e[`${o}__outliers`]],itemStyle:{color:L(t,I),opacity:a?Fa.ZV.SemiTransparent:.6,borderColor:L(t,I)}}}))})).flatMap((e=>e)),N=u.map((e=>Z.map((t=>{const o=(0,rn.iw)({datum:e,groupby:M,coltypeMapping:g,timeFormatter:(0,d.bt)(v)}),r=1===Z.length?o:`${o}, ${t}`,a=e[`${t}__outliers`]||[],i=n.selectedValues&&!n.selectedValues.includes(r);return{name:"outlier",type:"scatter",data:a.map((e=>[r,e])),tooltip:{...Ra(E),formatter:e=>{const[t,o]=e.data;return`${M.length?`<p><strong>${(0,rn.Z6)(t)}</strong></p>`:""}${D(o)}`}},itemStyle:{color:L(o,I),opacity:i?Fa.ZV.SemiTransparent:Fa.ZV.NonTransparent}}})))).flat(2),B=u.reduce(((e,t)=>{const o=(0,rn.iw)({datum:t,groupby:M,coltypeMapping:g,timeFormatter:(0,d.bt)(v)});return{...e,[o]:M.map((e=>t[e]))}}),{}),z=(n.selectedValues||[]).reduce(((e,t)=>{const o=O.findIndex((({name:e})=>e===t));return{...e,[o]:t}}),{});let V;V="45\xb0"===x?{rotate:-45}:"90\xb0"===x?{rotate:-90}:"flat"===x?{rotate:0}:"staggered"===x?{rotate:-45}:{show:!0};const q=[{name:"boxplot",type:"boxplot",data:O,tooltip:{...Ra(E),formatter:e=>{const{value:t,name:o}=e,r=o?`<p><strong>${(0,rn.Z6)(o)}</strong></p>`:"",a=[`Max: ${D(t[5])}`,`3rd Quartile: ${D(t[4])}`,`Mean: ${D(t[6])}`,`Median: ${D(t[3])}`,`1st Quartile: ${D(t[2])}`,`Min: ${D(t[1])}`,`# Observations: ${D(t[7])}`];return t[8].length>0&&a.push(`# Outliers: ${D(t[8].length)}`),r+a.join("<br/>")}}},...N],$=In(!0,C,!!T,!1,null,!!w,P,A,an(S),an(_));return{formData:r,width:t,height:o,echartOptions:{grid:{...nn.oe,...$},xAxis:{type:"category",data:O.map((e=>e.name)),axisLabel:V,name:w,nameGap:an(_),nameLocation:A,nameRotate:"end"==A?-90:0,nameTextStyle:{color:`rgba(${null==k?void 0:k.r},${null==k?void 0:k.g},${null==k?void 0:k.b},${null==k?void 0:k.a})`,fontSize:F,align:R}},yAxis:{...nn.C0,type:"value",axisLabel:{formatter:D},name:T,nameGap:an(S),nameLocation:P},tooltip:{...Ra(E),show:!l,trigger:"item",axisPointer:{type:"shadow"}},series:q},setDataMask:m,emitCrossFilters:s,labelMap:B,groupby:f,selectedValues:z,onContextMenu:p,refs:E}}const Mn=o.p+"BoxPlot.1833526f..jpg";var On,Nn=o(706416);class Bn extends s.Z{constructor(){super({buildQuery:Xa,controlPanel:tn,loadChart:()=>o.e(33496).then(o.bind(o,33496)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Distribution"),credits:["https://echarts.apache.org"],description:(0,l.t)("Also known as a box and whisker plot, this visualization compares the distributions of a related metric across multiple groups. The box in the middle emphasizes the mean, median, and inner 2 quartiles. The whiskers around each box visualize the min, max, range, and outer 2 quartiles."),exampleGallery:[{url:Mn}],name:(0,l.t)("Box Plot"),tags:[(0,l.t)("ECharts"),(0,l.t)("Range"),(0,l.t)("Statistical")],thumbnail:Nn}),transformProps:Zn})}}function zn(e){const{metric:t,sort_by_metric:o}=e;return(0,Ut.Z)(e,(e=>[{...e,...o&&{orderby:[[t,!1]]}}]))}!function(e){e[e.Key=0]="Key",e[e.Value=1]="Value",e[e.Percent=2]="Percent",e[e.KeyValue=3]="KeyValue",e[e.KeyPercent=4]="KeyPercent",e[e.KeyValuePercent=5]="KeyValuePercent"}(On||(On={}));const Vn={...Fa.xo,groupby:[],labelLine:!1,labelType:On.Key,legendOrientation:mn.IY.Top,legendType:mn.HJ.Scroll,numberFormat:"SMART_NUMBER",showLabels:!0,sort:"descending",orient:"vertical",gap:0};var qn,$n;!function(e){e.vertical="vertical",e.horizontal="horizontal"}(qn||(qn={})),function(e){e.Line="line",e.Scatter="scatter",e.Smooth="smooth",e.Bar="bar",e.Start="start",e.Middle="middle",e.End="end"}($n||($n={}));const Wn={...Fa.xo,...Fa.f6,annotationLayers:g.sections.annotationLayers,area:!1,forecastEnabled:g.sections.FORECAST_DEFAULT_DATA.forecastEnabled,forecastInterval:g.sections.FORECAST_DEFAULT_DATA.forecastInterval,forecastPeriods:g.sections.FORECAST_DEFAULT_DATA.forecastPeriods,forecastSeasonalityDaily:g.sections.FORECAST_DEFAULT_DATA.forecastSeasonalityDaily,forecastSeasonalityWeekly:g.sections.FORECAST_DEFAULT_DATA.forecastSeasonalityWeekly,forecastSeasonalityYearly:g.sections.FORECAST_DEFAULT_DATA.forecastSeasonalityYearly,logAxis:!1,markerEnabled:!1,markerSize:6,minorSplitLine:!1,opacity:.2,orderDesc:!0,rowLimit:1e4,seriesType:$n.Line,stack:!1,tooltipTimeFormat:"smart_date",truncateYAxis:!1,yAxisBounds:[null,null],zoomable:!1,richTooltip:!0,xAxisLabelRotation:0,groupby:[],showValue:!1,onlyTotal:!1,percentageThreshold:0,orientation:qn.vertical,lineWidth:1,symbol:"emptyCircle"},Hn=(0,l.t)("When using other than adaptive formatting, labels may overlap"),{legendMargin:Yn,legendOrientation:Qn,legendType:jn,showLegend:Gn}=Fa.xo,Un={name:"show_legend",config:{type:"CheckboxControl",label:(0,l.t)("Show legend"),renderTrigger:!0,default:Gn,description:(0,l.t)("Whether to display a legend for the chart")}},Jn={name:"legendMargin",config:{type:"TextControl",label:(0,l.t)("Margin"),renderTrigger:!0,isInt:!0,default:Yn,description:(0,l.t)("Additional padding for legend."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_legend)?void 0:t.value)}}},Kn={name:"legendType",config:{type:"SelectControl",freeForm:!1,label:(0,l.t)("Type"),choices:[["scroll",(0,l.t)("Scroll")],["plain",(0,l.t)("Plain")]],default:jn,renderTrigger:!0,description:(0,l.t)("Legend type"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_legend)?void 0:t.value)}}},Xn={name:"legendOrientation",config:{type:"SelectControl",freeForm:!1,label:(0,l.t)("Orientation"),choices:[["top",(0,l.t)("Top")],["bottom",(0,l.t)("Bottom")],["left",(0,l.t)("Left")],["right",(0,l.t)("Right")]],default:Qn,renderTrigger:!0,description:(0,l.t)("Legend Orientation"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_legend)?void 0:t.value)}}},ei=[[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Legend"))],[Un],[Kn],[Xn],[Jn]],ti={name:"show_value",config:{type:"CheckboxControl",label:(0,l.t)("Show Value"),default:!1,renderTrigger:!0,description:(0,l.t)("Show series values on the chart")}},oi={name:"stack",config:{type:"CheckboxControl",label:(0,l.t)("Stack series"),renderTrigger:!0,default:!1,description:(0,l.t)("Stack series on top of each other")}},ri={name:"only_total",config:{type:"CheckboxControl",label:(0,l.t)("Only Total"),default:!0,renderTrigger:!0,description:(0,l.t)("Only show the total value on the stacked chart, and not show on the selected category"),visibility:({controls:e})=>{var t,o;return Boolean(null==e||null==(t=e.show_value)?void 0:t.value)&&Boolean(null==e||null==(o=e.stack)?void 0:o.value)}}},ai=[[ti],[oi],[ri],[{name:"percentage_threshold",config:{type:"TextControl",label:(0,l.t)("Percentage threshold"),renderTrigger:!0,isFloat:!0,default:Wn.percentageThreshold,description:(0,l.t)("Minimum threshold in percentage points for showing labels."),visibility:({controls:e})=>{var t,o,r;return Boolean(null==e||null==(t=e.show_value)?void 0:t.value)&&Boolean(null==e||null==(o=e.stack)?void 0:o.value)&&Boolean(!(null!=e&&null!=(r=e.only_total)&&r.value))}}}]],ni=[[ti],[ri]],ii={name:"rich_tooltip",config:{type:"CheckboxControl",label:(0,l.t)("Rich tooltip"),renderTrigger:!0,default:!0,description:(0,l.t)("Shows a list of all series available at that point in time")}},li={name:"tooltipTimeFormat",config:{...W.ZP.x_axis_time_format,label:(0,l.t)("Tooltip time format"),default:"smart_date",clearable:!1}},si={name:"tooltipSortByMetric",config:{type:"CheckboxControl",label:(0,l.t)("Tooltip sort by metric"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to sort tooltip by the selected metric in descending order."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.rich_tooltip)?void 0:t.value)}}},ci=[[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Tooltip"))],[ii],[si],[li]],{labelType:di,numberFormat:ui,showLabels:mi}=Vn,pi=[...ei];pi.splice(2,1);const gi={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["metric"],["adhoc_filters"],[{name:"row_limit",config:{...W.ZP.row_limit,default:10}}],[{name:"sort_by_metric",config:{default:!0,type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}],[g.sections.enableChartDrilldown],[g.sections.drilldownColumns]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],...pi,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Labels"))],[{name:"label_type",config:{type:"SelectControl",label:(0,l.t)("Label Type"),default:di,renderTrigger:!0,choices:[[On.Key,(0,l.t)("Category Name")],[On.Value,(0,l.t)("Value")],[On.Percent,(0,l.t)("Percentage")],[On.KeyValue,(0,l.t)("Category and Value")],[On.KeyPercent,(0,l.t)("Category and Percentage")],[On.KeyValuePercent,(0,l.t)("Category, Value and Percentage")]],description:(0,l.t)("What should be shown on the label?")}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:ui,choices:h.F6,description:`${h.YD} ${h.pj}`}}],[{name:"show_labels",config:{type:"CheckboxControl",label:(0,l.t)("Show Labels"),renderTrigger:!0,default:mi,description:(0,l.t)("Whether to display the labels.")}}],[{name:"datalabelColor",config:{type:"ColorPickerControl",label:(0,l.t)("Data label color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:1},description:(0,l.t)("Please select a data label color"),visibility:({controls:e})=>{var t;return Boolean(1==(null==e||null==(t=e.show_labels)?void 0:t.value))}}}],[{name:"datalabelSize",config:{label:(0,l.t)("Data label size"),type:"SelectControl",description:(0,l.t)("Please set the font size"),default:14,choices:[[12,12],[14,14],[16,16],[18,18],[20,20],[24,24],[26,26],[28,28],[30,30],[32,32],[36,36]],renderTrigger:!0,visibility:({controls:e})=>{var t;return Boolean(1==(null==e||null==(t=e.show_labels)?void 0:t.value))}}}]]}],onInit:e=>({...e,row_limit:{...e.row_limit,value:e.row_limit.default}}),formDataOverrides:e=>({...e,metric:(0,f.u)().shiftMetric(),groupby:(0,f.u)().popAllColumns()})},hi=(0,c.JB)(mt.Z.PERCENT_2_POINT);function fi({params:e,labelType:t,numberFormatter:o,sanitizeName:r=!1}){const{name:a="",value:n,percent:i}=e,l=r?(0,rn.Z6)(a):a,s=o(n),c=hi(i/100);switch(t){case On.Key:return l;case On.Value:return s;case On.Percent:return c;case On.KeyValue:return`${l}: ${s}`;case On.KeyValuePercent:return`${l}: ${s} (${c})`;case On.KeyPercent:return`${l}: ${c}`;default:return l}}function bi(e){const{formData:t,height:o,hooks:r,filterState:a,queriesData:n,width:i,theme:l,inContextMenu:s,emitCrossFilters:d,ownState:u}=e,m=n[0].data||[],{colorScheme:p,groupby:g,orient:h,sort:f,gap:b,labelLine:y,labelType:v,legendMargin:x,legendOrientation:C,legendType:w,metric:T="",numberFormat:_,showLabels:S,showLegend:A,sliceId:P,datalabelColor:k,enableChartDrilldown:F,drilldownColumns:R=[],datalabelSize:I}={...Fa.xo,...Vn,...t},E={},L=(0,ht.Z)(T);let D=g.map(on.Z);const Z=u.listValueFilter||[];if(F&&Z.length){const e=[...g,...R];D=[e[Z.length]]}const M=m.map((e=>(0,rn.iw)({datum:e,groupby:D,coltypeMapping:{}}))),O=m.reduce(((e,t)=>{const o=(0,rn.iw)({datum:t,groupby:D,coltypeMapping:{}});return{...e,[o]:D.map((e=>t[e]))}}),{}),{setDataMask:N=(()=>{}),onContextMenu:B}=r,z=So.getScale(p),V=(0,c.JB)(_),q=m.map((e=>{const t=(0,rn.iw)({datum:e,groupby:D,coltypeMapping:{}}),o=a.selectedValues&&!a.selectedValues.includes(t);return{value:e[L],name:t,itemStyle:{color:z(t,P),opacity:o?Fa.ZV.SemiTransparent:Fa.ZV.NonTransparent}}})),$=(a.selectedValues||[]).reduce(((e,t)=>{const o=q.findIndex((({name:e})=>e===t));return{...e,[o]:t}}),{}),W={formatter:e=>fi({params:e,numberFormatter:V,labelType:v}),show:S,color:l.colors.grayscale.dark2},H=[{type:"funnel",...(0,rn.G_)(A,C,x),animation:!0,minSize:"0%",maxSize:"100%",sort:f,orient:h,gap:b,funnelAlign:"center",labelLine:{show:!!y},label:{...W,position:y?"outer":"inner",textBorderColor:"transparent",color:`rgba(${null==k?void 0:k.r},${null==k?void 0:k.g},${null==k?void 0:k.b},${null==k?void 0:k.a})`,fontSize:I},emphasis:{label:{show:!0,fontWeight:"bold"}},data:q}];return{formData:t,width:i,height:o,echartOptions:{grid:{...nn.oe},tooltip:{...Ra(E),show:!s,trigger:"item",formatter:e=>fi({params:e,numberFormatter:V,labelType:On.KeyValuePercent})},legend:{...(0,rn.zp)(w,C,A),data:M},series:H},setDataMask:N,emitCrossFilters:d,labelMap:O,groupby:g,selectedValues:$,onContextMenu:B,refs:E}}var yi=o(971503);const vi=o.p+"example.6f0d126b..jpg";class xi extends s.Z{constructor(){super({buildQuery:zn,controlPanel:gi,loadChart:()=>o.e(96693).then(o.bind(o,696693)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("KPI"),credits:["https://echarts.apache.org"],description:(0,l.t)("Showcases how a metric changes as the funnel progresses. This classic chart is useful for visualizing drop-off between stages in a pipeline or lifecycle."),exampleGallery:[{url:vi}],name:(0,l.t)("Funnel Chart"),tags:[(0,l.t)("Business"),(0,l.t)("ECharts"),(0,l.t)("Progressive"),(0,l.t)("Report"),(0,l.t)("Sequential"),(0,l.t)("Trend")],thumbnail:yi}),transformProps:bi})}}function Ci(e){const{metric:t,sort_by_metric:o}=e;return(0,Ut.Z)(e,(e=>[{...e,...o&&{orderby:[[t,!1]]}}]))}var wi;!function(e){e.Key="key",e.Value="value",e.KeyValue="key_value"}(wi||(wi={}));const Ti={groupby:[],labelType:wi.KeyValue,labelPosition:mn.Pl.InsideTopLeft,numberFormat:"SMART_NUMBER",showLabels:!0,showUpperLabels:!0,dateFormat:"smart_date"},{labelType:_i,numberFormat:Si,showLabels:Ai,showUpperLabels:Pi,dateFormat:ki}=Ti,Fi={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["metric"],["row_limit"],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}],["adhoc_filters"],[g.sections.enableChartDrilldown],[g.sections.drilldownColumns]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Labels"))],[{name:"show_labels",config:{type:"CheckboxControl",label:(0,l.t)("Show Labels"),renderTrigger:!0,default:Ai,description:(0,l.t)("Whether to display the labels.")}}],[{name:"show_upper_labels",config:{type:"CheckboxControl",label:(0,l.t)("Show Upper Labels"),renderTrigger:!0,default:Pi,description:(0,l.t)("Show labels when the node has children.")}}],[{name:"label_type",config:{type:"SelectControl",label:(0,l.t)("Label Type"),default:_i,renderTrigger:!0,choices:[["Key",(0,l.t)("Key")],["value",(0,l.t)("Value")],["key_value",(0,l.t)("Category and Value")]],description:(0,l.t)("What should be shown on the label?"),visibility:({controls:e})=>{var t;return Boolean(1==(null==e||null==(t=e.show_labels)?void 0:t.value))}}}],[{name:"datalabelColor",config:{type:"ColorPickerControl",label:(0,l.t)("Data label color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:1},description:(0,l.t)("Please select a data label color"),visibility:({controls:e})=>{var t;return Boolean(1==(null==e||null==(t=e.show_labels)?void 0:t.value))}}}],[{name:"datalabelSize",config:{label:(0,l.t)("Data label size"),type:"SelectControl",description:(0,l.t)("Please set the font size"),default:14,choices:[[12,12],[14,14],[16,16],[18,18],[20,20],[24,24],[26,26],[28,28],[30,30],[32,32],[36,36]],renderTrigger:!0,visibility:({controls:e})=>{var t;return Boolean(1==(null==e||null==(t=e.show_labels)?void 0:t.value))}}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:Si,choices:h.F6,description:`${h.YD} ${h.pj}`}}],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),renderTrigger:!0,choices:h.HC,default:ki,description:h.YD}}]]}],formDataOverrides:e=>({...e,metric:(0,f.u)().shiftMetric(),groupby:(0,f.u)().popAllColumns()})};var Ri=o(92638),Ii=o(768718),Ei=o.n(Ii),Li=o(607739),Di=o.n(Li);function Zi(e,t){return dn()(e[t])?e[t]:0}function Mi(e,t,o,r){const[a,...n]=t,i=Di()(e,a);return Ei()(i,((e,t,l)=>{const s=i[l][0][a];if(n.length){const i=Mi(t,n,o,r),l=i.reduce(((e,t)=>e+t.value),0),c=r?i.reduce(((e,t)=>e+t.secondaryValue),0):l;e.push({name:s,children:i,value:l,secondaryValue:c,groupBy:a})}else(null!=t?t:[]).forEach((t=>{const n=Zi(t,o),i=r?Zi(t,r):n,l={name:s,value:n,secondaryValue:i,groupBy:a};e.push(l)}))}),[])}function Oi(e){const{formData:t,height:o,queriesData:r,width:a,hooks:n,filterState:i,theme:l,inContextMenu:s,emitCrossFilters:u,ownState:m}=e,{data:p=[]}=r[0],{setDataMask:g=(()=>{}),onContextMenu:h}=n,f=(0,rn.IW)(r[0]),{colorScheme:b,groupby:y=[],enableChartDrilldown:v,drilldownColumns:x=[],metric:C="",labelType:w,labelPosition:T,numberFormat:_,dateFormat:S,showLabels:A,showUpperLabels:P,dashboardId:k,sliceId:F,datalabelColor:R,datalabelSize:I}={...Ti,...t},E={},L=So.getScale(b),D=(0,c.JB)(_),Z=e=>function({params:e,labelType:t,numberFormatter:o}){const{name:r="",value:a}=e,n=o(a);switch(t){case wi.Key:return r;case wi.Value:return n;case wi.KeyValue:return`${r}: ${n}`;default:return r}}({params:e,numberFormatter:D,labelType:w}),M=new Map,O=(0,ht.Z)(C);let N=y.map(on.Z);const B=m.listValueFilter||[];if(v&&B.length){N=[[...y,...x][B.length]]}const z=Mi(p,N,O),V=(e,t)=>e.map((e=>{var o;const{name:r,value:a,groupBy:n}=e,l=(0,rn.mj)(r,{numberFormatter:D,timeFormatter:(0,d.bt)(S),...f[n]&&{coltype:f[n]}}),s=t.concat(l);let c={name:l,value:a};if(null!=(o=e.children)&&o.length)c={...c,children:V(e.children,s),colorSaturation:Ri.My,itemStyle:{borderColor:Ri.dS,color:L(l,F),borderWidth:Ri.YF,gapWidth:Ri.Lh}};else{const e=s.join(",");M.set(e,s),i.selectedValues&&!i.selectedValues.includes(e)&&(c={...c,itemStyle:{colorAlpha:Fa.ZV.SemiTransparent},label:{color:`rgba(0, 0, 0, ${Fa.ZV.SemiTransparent})`}})}return c})),q=[{name:O,colorSaturation:Ri.My,itemStyle:{borderColor:Ri.dS,color:L(`${O}`,F),borderWidth:Ri.YF,gapWidth:Ri.Lh},upperLabel:{show:!1},children:V(z,[])}],$=[{type:"treemap",width:"100%",height:"100%",nodeClick:void 0,roam:!k,breadcrumb:{show:!1,emptyItemWidth:25},emphasis:{label:{show:!0}},levels:[{upperLabel:{show:!1},label:{show:!1},itemStyle:{color:l.colors.primary.base}}],label:{show:A,position:T,formatter:Z,color:`rgba(${null==R?void 0:R.r},${null==R?void 0:R.g},${null==R?void 0:R.b},${null==R?void 0:R.a})`,fontSize:I},upperLabel:{show:P,formatter:Z,textBorderColor:"transparent",fontSize:Ri.oO},data:q}],W={tooltip:{...Ra(E),show:!s,trigger:"item",formatter:e=>function({params:e,numberFormatter:t}){const{value:o,treePathInfo:r=[]}=e,a=t(o),{metricLabel:n,treePath:i}=(0,Ri.Im)(r),l=(0,c.JB)(mt.Z.PERCENT_2_POINT);let s="";const d=r[r.length-1],u=r[r.length-2];u&&(s=l(u.value?d.value/u.value:0));return[`<div>${i.join(" \u25b8 ")}</div>`,`${n}: ${a}`,s?` (${s})`:""].join("")}({params:e,numberFormatter:D})},series:$};return{formData:t,width:a,height:o,echartOptions:W,setDataMask:g,emitCrossFilters:u,labelMap:Object.fromEntries(M),groupby:y,selectedValues:i.selectedValues||[],onContextMenu:h,refs:E}}var Ni=o(768144);const Bi=o.p+"treemap_v2_1.f997bb13..png",zi=o.p+"treemap_v2_2.bac597e9..jpg";class Vi extends s.Z{constructor(){super({buildQuery:Ci,controlPanel:Fi,loadChart:()=>o.e(64790).then(o.bind(o,64790)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Part of a Whole"),credits:["https://echarts.apache.org"],description:(0,l.t)("Show hierarchical relationships of data, with the value represented by area, showing proportion and contribution to the whole."),exampleGallery:[{url:Bi},{url:zi}],name:(0,l.t)("Treemap"),tags:[(0,l.t)("Aesthetic"),(0,l.t)("Categorical"),(0,l.t)("Comparison"),(0,l.t)("ECharts"),(0,l.t)("Multi-Levels"),(0,l.t)("Percentages"),(0,l.t)("Proportional")],thumbnail:Ni}),transformProps:Oi})}}const qi={...Fa.xo,groupby:[],rowLimit:10,minVal:null,maxVal:null,fontSize:15,numberFormat:"SMART_NUMBER",animation:!0,showProgress:!0,overlap:!0,roundCap:!1,showAxisTick:!1,showSplitLine:!1,splitNumber:10,startAngle:225,endAngle:-45,showPointer:!0,intervals:"",intervalColorIndices:"",valueFormatter:"{value}"},$i={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...W.ZP.groupby,description:(0,l.t)("Columns to group by")}}],["metric"],["adhoc_filters"],[{name:"row_limit",config:{...W.ZP.row_limit,choices:[...Array(10).keys()].map((e=>e+1)),default:qi.rowLimit}}],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("General"))],[{name:"min_val",config:{type:"TextControl",isInt:!0,default:qi.minVal,renderTrigger:!0,label:(0,l.t)("Min"),description:(0,l.t)("Minimum value on the gauge axis")}},{name:"max_val",config:{type:"TextControl",isInt:!0,default:qi.maxVal,renderTrigger:!0,label:(0,l.t)("Max"),description:(0,l.t)("Maximum value on the gauge axis")}}],[{name:"start_angle",config:{type:"TextControl",label:(0,l.t)("Start angle"),description:(0,l.t)("Angle at which to start progress axis"),renderTrigger:!0,default:qi.startAngle}},{name:"end_angle",config:{type:"TextControl",label:(0,l.t)("End angle"),description:(0,l.t)("Angle at which to end progress axis"),renderTrigger:!0,default:qi.endAngle}}],["color_scheme"],[{name:"font_size",config:{type:"SliderControl",label:(0,l.t)("Font size"),description:(0,l.t)("Font size for axis labels, detail value and other text elements"),renderTrigger:!0,min:10,max:20,default:qi.fontSize}}],[{name:"number_format",config:{type:"SelectControl",label:(0,l.t)("Number format"),description:(0,l.t)("D3 format syntax: https://github.com/d3/d3-format"),freeForm:!0,renderTrigger:!0,default:qi.numberFormat,choices:h.F6}}],[{name:"value_formatter",config:{type:"TextControl",label:(0,l.t)("Value format"),description:(0,l.t)("Additional text to add before or after the value, e.g. unit"),renderTrigger:!0,default:qi.valueFormatter}}],[{name:"show_pointer",config:{type:"CheckboxControl",label:(0,l.t)("Show pointer"),description:(0,l.t)("Whether to show the pointer"),renderTrigger:!0,default:qi.showPointer}}],[{name:"animation",config:{type:"CheckboxControl",label:(0,l.t)("Animation"),description:(0,l.t)("Whether to animate the progress and the value or just display them"),renderTrigger:!0,default:qi.animation}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Axis"))],[{name:"show_axis_tick",config:{type:"CheckboxControl",label:(0,l.t)("Show axis line ticks"),description:(0,l.t)("Whether to show minor ticks on the axis"),renderTrigger:!0,default:qi.showAxisTick}}],[{name:"show_split_line",config:{type:"CheckboxControl",label:(0,l.t)("Show split lines"),description:(0,l.t)("Whether to show the split lines on the axis"),renderTrigger:!0,default:qi.showSplitLine}}],[{name:"split_number",config:{type:"SliderControl",label:(0,l.t)("Split number"),description:(0,l.t)("Number of split segments on the axis"),renderTrigger:!0,min:3,max:30,default:qi.splitNumber}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Progress"))],[{name:"show_progress",config:{type:"CheckboxControl",label:(0,l.t)("Show progress"),description:(0,l.t)("Whether to show the progress of gauge chart"),renderTrigger:!0,default:qi.showProgress}}],[{name:"overlap",config:{type:"CheckboxControl",label:(0,l.t)("Overlap"),description:(0,l.t)("Whether the progress bar overlaps when there are multiple groups of data"),renderTrigger:!0,default:qi.overlap}}],[{name:"round_cap",config:{type:"CheckboxControl",label:(0,l.t)("Round cap"),description:(0,l.t)("Style the ends of the progress bar with a round cap"),renderTrigger:!0,default:qi.roundCap}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Intervals"))],[{name:"intervals",config:{type:"TextControl",label:(0,l.t)("Interval bounds"),description:(0,l.t)("Comma-separated interval bounds, e.g. 2,4,5 for intervals 0-2, 2-4 and 4-5. Last number should match the value provided for MAX."),renderTrigger:!0,default:qi.intervals}}],[{name:"interval_color_indices",config:{type:"TextControl",label:(0,l.t)("Interval colors"),description:(0,l.t)("Comma-separated color picks for the intervals, e.g. 1,2,4. Integers denote colors from the chosen color scheme and are 1-indexed. Length must be matching that of interval bounds."),renderTrigger:!0,default:qi.intervalColorIndices}}]]}],formDataOverrides:e=>({...e,metric:(0,f.u)().shiftMetric(),groupby:(0,f.u)().popAllColumns()})};var Wi=o(396026),Hi=o.n(Wi);function Yi(e){if(void 0!==e&&null!==e&&!Number.isNaN(Number(e)))return Number(e)}function Qi(e,t=";"){return e&&e.trim()?e.split(t).map((e=>{if((0,Eo.Z)(e))throw new Error("All values must be numeric");return Number(e)})):[]}const ji={splitLine:{lineStyle:{color:"auto"}},axisTick:{lineStyle:{color:"auto"}},axisLabel:{color:"auto"},pointer:{itemStyle:{color:"auto"}}},Gi=10,Ui=20,Ji=.25,Ki=1.5,Xi=.35,el=1,tl=.25,ol=2,rl=.9,al=1.2;function nl(e){var t,o,r,a,n,i,l,s;const{width:d,height:u,formData:m,queriesData:p,hooks:g,filterState:h,theme:f,emitCrossFilters:b}=e,y=(e=>({splitLine:{lineStyle:{color:e.colors.primary.base}},axisLine:{lineStyle:{color:[[1,e.colors.primary.light4]]}},axisLabel:{color:e.colors.grayscale.dark1},axisTick:{lineStyle:{width:2,color:e.colors.primary.base}},detail:{color:"auto"}}))(f),{groupby:v,metric:x,minVal:C,maxVal:w,colorScheme:T,fontSize:_,numberFormat:S,animation:A,showProgress:P,overlap:k,roundCap:F,showAxisTick:R,showSplitLine:I,splitNumber:E,startAngle:L,endAngle:D,showPointer:Z,intervals:M,intervalColorIndices:O,valueFormatter:N,sliceId:B}={...qi,...m},z={},V=(null==(t=p[0])?void 0:t.data)||[],q=(0,c.JB)(S),$=So.getScale(T),W=((e,t,o)=>o?t:e.length*t)(V,_,k),H=v.map(on.Z),Y=e=>N.replace("{value}",q(e)),Q=Ji*_,j=el*_,G=ol*_,U=rl*_,J=new Map,K=V.map(((e,t)=>{const o=H.map((t=>`${t}: ${e[t]}`)).join(", ");J.set(o,H.map((t=>e[t])));let r={value:e[(0,ht.Z)(x)],name:o,itemStyle:{color:$(t,B)},title:{offsetCenter:["0%",`${t*G+Ui}%`],fontSize:_},detail:{offsetCenter:["0%",`${t*G+Ui+U}%`],fontSize:al*_}};return h.selectedValues&&!h.selectedValues.includes(o)&&(r={...r,itemStyle:{color:$(t,B),opacity:Fa.ZV.SemiTransparent},detail:{show:!1},title:{show:!1}}),r})),{setDataMask:X=(()=>{}),onContextMenu:ee}=g,te=null!=C?C:(e=>2*Math.min(...e.map((e=>e.value)).concat([0])))(K),oe=null!=w?w:(e=>2*Math.max(...e.map((e=>e.value)).concat([0])))(K),re=Hi()(te,oe,(oe-te)/E),ae=Math.max(...re.map((e=>q(e).length)).concat([1])),ne=((e,t,o,r)=>{let a,n;try{a=Qi(e,","),n=Qi(t,",")}catch(e){a=[],n=[]}const i=a.map((e=>e/r)),l=n.map((e=>o.colors[(e-1)%o.colors.length]));return i.map(((e,t)=>[e,l[t]||o.colors[t]]))})(M,O,$,oe),ie=Ki*_*Xi*ae+(I?j:0)+(R?Q:0)+Gi-W,le=W+Q+Gi,se={show:P,overlap:k,roundCap:F,width:_},ce={show:I,distance:-(W+j+Gi),length:j,lineStyle:{width:tl*_,color:null==(o=y.splitLine)||null==(r=o.lineStyle)?void 0:r.color}},de={roundCap:F,lineStyle:{width:W,color:null==(a=y.axisLine)||null==(n=a.lineStyle)?void 0:n.color}},ue={distance:-ie,fontSize:_,formatter:q,color:null==(i=y.axisLabel)?void 0:i.color},me={show:R,distance:-le,length:Q,lineStyle:null==(l=y.axisTick)?void 0:l.lineStyle},pe={valueAnimation:A,formatter:e=>Y(e),color:null==(s=y.detail)?void 0:s.color},ge={...Ra(z),formatter:e=>{const{name:t,value:o}=e;return`${t} : ${Y(o)}`}};let he;var fe,be,ye,ve,xe,Ce;ne.length?(ce.lineStyle.color=null==(fe=ji.splitLine)||null==(be=fe.lineStyle)?void 0:be.color,me.lineStyle.color=null==ji||null==(ye=ji.axisTick)||null==(ve=ye.lineStyle)?void 0:ve.color,ue.color=null==(xe=ji.axisLabel)?void 0:xe.color,de.lineStyle.color=ne,he={show:Z,showAbove:!1,itemStyle:null==(Ce=ji.pointer)?void 0:Ce.itemStyle}):he={show:Z,showAbove:!1};const we=[{type:"gauge",startAngle:L,endAngle:D,min:te,max:oe,progress:se,animation:A,axisLine:de,splitLine:ce,splitNumber:E,axisLabel:ue,axisTick:me,pointer:he,detail:pe,tooltip:ge,radius:Math.min(d,u)/2-ie-le,center:["50%","55%"],data:K}];return{formData:m,width:d,height:u,echartOptions:{tooltip:{...Ra(z),trigger:"item"},series:we},setDataMask:X,emitCrossFilters:b,labelMap:Object.fromEntries(J),groupby:v,selectedValues:h.selectedValues||[],onContextMenu:ee,refs:z}}var il=o(704350);const ll=o.p+"example1.b8069aef..jpg",sl=o.p+"example2.65d169da..jpg";function cl(e){const{metric:t,sort_by_metric:o}=e;return(0,Ut.Z)(e,(e=>[{...e,...o&&{orderby:[[t,!1]]}}]))}class dl extends s.Z{constructor(){super({buildQuery:cl,controlPanel:$i,loadChart:()=>o.e(90775).then(o.bind(o,490775)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("KPI"),credits:["https://echarts.apache.org"],description:(0,l.t)("Uses a gauge to showcase progress of a metric towards a target. The position of the dial represents the progress and the terminal value in the gauge represents the target value."),exampleGallery:[{url:ll},{url:sl}],name:(0,l.t)("Gauge Chart"),tags:[(0,l.t)("Multi-Variables"),(0,l.t)("Business"),(0,l.t)("Comparison"),(0,l.t)("ECharts"),(0,l.t)("Report")],thumbnail:il}),transformProps:nl})}}const ul={...Fa.xo,source:"",target:"",layout:"force",roam:!0,draggable:!1,selectedMode:"single",showSymbolThreshold:0,repulsion:1e3,gravity:.3,edgeSymbol:"none,arrow",edgeLength:400,baseEdgeWidth:3,baseNodeSize:20,friction:.2,legendOrientation:mn.IY.Top,legendType:mn.HJ.Scroll},ml={...W.ZP.entity,clearable:!1},pl={...W.ZP.entity,clearable:!0,validators:[]},gl={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"source",config:{...ml,label:(0,l.t)("Source"),description:(0,l.t)("Name of the source nodes")}}],[{name:"target",config:{...ml,label:(0,l.t)("Target"),description:(0,l.t)("Name of the target nodes")}}],["metric"],[{name:"source_category",config:{...pl,label:(0,l.t)("Source category"),description:(0,l.t)("The category of source nodes used to assign colors. If a node is associated with more than one category, only the first will be used.")}}],[{name:"target_category",config:{...pl,label:(0,l.t)("Target category"),description:(0,l.t)("Category of target nodes")}}],["adhoc_filters"],["row_limit"]]},{label:(0,l.t)("Chart options"),expanded:!0,controlSetRows:[["color_scheme"],...ei,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Layout"))],[{name:"layout",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,l.t)("Graph layout"),default:ul.layout,options:[["force",(0,l.t)("Force")],["circular",(0,l.t)("Circular")]],description:(0,l.t)("Layout type of graph")}}],[{name:"edgeSymbol",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Edge symbols"),description:(0,l.t)("Symbol of two ends of edge line"),default:ul.edgeSymbol,choices:[["none,none",(0,l.t)("None -> None")],["none,arrow",(0,l.t)("None -> Arrow")],["circle,arrow",(0,l.t)("Circle -> Arrow")],["circle,circle",(0,l.t)("Circle -> Circle")]]}}],[{name:"draggable",config:{type:"CheckboxControl",label:(0,l.t)("Enable node dragging"),renderTrigger:!0,default:ul.draggable,description:(0,l.t)("Whether to enable node dragging in force layout mode."),visibility:({form_data:{layout:e}})=>"force"===e||!e&&"force"===ul.layout}}],[{name:"roam",config:{type:"SelectControl",label:(0,l.t)("Enable graph roaming"),renderTrigger:!0,default:ul.roam,choices:[[!1,(0,l.t)("Disabled")],["scale",(0,l.t)("Scale only")],["move",(0,l.t)("Move only")],[!0,(0,l.t)("Scale and Move")]],description:(0,l.t)("Whether to enable changing graph position and scaling.")}}],[{name:"selectedMode",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Node select mode"),default:ul.selectedMode,choices:[[!1,(0,l.t)("Disabled")],["single",(0,l.t)("Single")],["multiple",(0,l.t)("Multiple")]],description:(0,l.t)("Allow node selections")}}],[{name:"showSymbolThreshold",config:{type:"TextControl",label:(0,l.t)("Label threshold"),renderTrigger:!0,isInt:!0,default:ul.showSymbolThreshold,description:(0,l.t)("Minimum value for label to be displayed on graph.")}}],[{name:"baseNodeSize",config:{type:"TextControl",label:(0,l.t)("Node size"),renderTrigger:!0,isFloat:!0,default:ul.baseNodeSize,description:(0,l.t)("Median node size, the largest node will be 4 times larger than the smallest")}},{name:"baseEdgeWidth",config:{type:"TextControl",label:(0,l.t)("Edge width"),renderTrigger:!0,isFloat:!0,default:ul.baseEdgeWidth,description:(0,l.t)("Median edge width, the thickest edge will be 4 times thicker than the thinnest.")}}],[{name:"edgeLength",config:{type:"SliderControl",label:(0,l.t)("Edge length"),renderTrigger:!0,min:100,max:1e3,step:50,default:ul.edgeLength,description:(0,l.t)("Edge length between nodes"),visibility:({form_data:{layout:e}})=>"force"===e||!e&&"force"===ul.layout}}],[{name:"gravity",config:{type:"SliderControl",label:(0,l.t)("Gravity"),renderTrigger:!0,min:.1,max:1,step:.1,default:ul.gravity,description:(0,l.t)("Strength to pull the graph toward center"),visibility:({form_data:{layout:e}})=>"force"===e||!e&&"force"===ul.layout}}],[{name:"repulsion",config:{type:"SliderControl",label:(0,l.t)("Repulsion"),renderTrigger:!0,min:100,max:3e3,step:50,default:ul.repulsion,description:(0,l.t)("Repulsion strength between nodes"),visibility:({form_data:{layout:e}})=>"force"===e||!e&&"force"===ul.layout}}],[{name:"friction",config:{type:"SliderControl",label:(0,l.t)("Friction"),renderTrigger:!0,min:.1,max:1,step:.1,default:ul.friction,description:(0,l.t)("Friction between nodes"),visibility:({form_data:{layout:e}})=>"force"===e||!e&&"force"===ul.layout}}]]}],formDataOverrides:e=>({...e,metric:(0,f.u)().popAllMetrics()})};var hl=o(611209);const fl={zoom:.7,circular:{rotateLabel:!0},force:{initLayout:"circular",layoutAnimation:!0},label:{show:!0,position:"right",distance:5,rotate:0,offset:[0,0],fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:12,padding:[0,0,0,0],overflow:"truncate",formatter:"{b}"},emphasis:{focus:"adjacency"},animation:!0,animationDuration:500,animationEasing:"cubicOut",lineStyle:{color:"source",curveness:.1},select:{itemStyle:{borderWidth:3,opacity:1},label:{fontWeight:"bolder"}},tooltip:{formatter:"{b}: {c}"}};function bl(e){return"none"===e||"circle"===e||"arrow"===e?e:"none"}function yl(e){const[t,o]=(e||"").split(",");return[bl(t),bl(o)]}function vl(e){return Math.max(5,Math.min(2*e,20))}function xl(e,t){return Object.keys(e).find((o=>e[o]===t))}function Cl(e,t){return!1===t?`${e}: false`:!0===t?`${e}: true`:null==t?"N/A":String(t)}function wl(e){const{width:t,height:o,formData:r,queriesData:a,hooks:n,inContextMenu:i}=e,l=a[0].data||[],{source:s,target:c,sourceCategory:d,targetCategory:u,colorScheme:m,metric:p="",layout:g,roam:h,draggable:f,selectedMode:b,showSymbolThreshold:y,edgeLength:v,gravity:x,repulsion:C,friction:w,legendMargin:T,legendOrientation:_,legendType:S,showLegend:A,baseEdgeWidth:P,baseNodeSize:k,edgeSymbol:F,sliceId:R}={...ul,...r},I={},E=(0,ht.Z)(p),L=So.getScale(m),D={},Z=new Set,M=[],O=[];function N(e,t){e in D||(D[e]=M.length,M.push({id:String(D[e]),name:e,value:0,category:t,select:fl.select,tooltip:{...Ra(I),...fl.tooltip}}));const o=M[D[e]];return t&&(Z.add(t),o.category||(o.category=t)),o}l.forEach((e=>{const t=e[E];if(!t)return;const o=e[s],r=e[c],a=d?Cl(d,e[d]):void 0,n=u?Cl(u,e[u]):void 0,i=N(o,a),l=N(r,n);i.value+=t,l.value+=t,O.push({source:i.id,target:l.id,value:t,lineStyle:{},emphasis:{},select:{}})})),function(e,t,{baseNodeSize:o,baseEdgeWidth:r,showSymbolThreshold:a}){const n=.5*o,i=2*o,l=.5*r,s=2*r,[c,d]=(0,hl.We)(e,(e=>e.value)),u=d-c;e.forEach((e=>{e.symbolSize=((e.value-c)/u*i||0)+n,e.label={...e.label,show:!a||e.value>a}}));const[m,p]=(0,hl.We)(t,(e=>e.value)),g=p-m;t.forEach((e=>{const t=(e.value-m)/g*s||0+l;e.lineStyle.width=t,e.emphasis.lineStyle={...e.emphasis.lineStyle,width:vl(t)},e.select.lineStyle={...e.select.lineStyle,width:vl(.8*t),opacity:1}}))}(M,O,{showSymbolThreshold:y,baseEdgeWidth:P,baseNodeSize:k});const B=[...Z],z=[{zoom:fl.zoom,type:"graph",categories:B.map((e=>({name:e,itemStyle:{color:L(e,R)}}))),layout:g,force:{...fl.force,edgeLength:v,gravity:x,repulsion:C,friction:w},circular:fl.circular,data:M,links:O,roam:h,draggable:f,edgeSymbol:yl(F),edgeSymbolSize:2*P,selectedMode:b,...(0,rn.G_)(A,_,T),animation:fl.animation,label:fl.label,lineStyle:fl.lineStyle,emphasis:fl.emphasis}],V={animationDuration:fl.animationDuration,animationEasing:fl.animationEasing,tooltip:{...Ra(I),show:!i,formatter:e=>function(e,t,o,r){const a=Number(e),n=Number(t);return`${(0,rn.Z6)(xl(r,a))} > ${(0,rn.Z6)(xl(r,n))} : ${o}`}(e.data.source,e.data.target,e.value,D)},legend:{...(0,rn.zp)(S,_,A),data:B},series:z},{onContextMenu:q}=n;return{width:t,height:o,formData:r,echartOptions:V,onContextMenu:q,refs:I}}var Tl=o(903417);const _l=o.p+"example.b2236be9..jpg";function Sl(e){return(0,Ut.Z)(e,{queryFields:{source:"columns",target:"columns",source_category:"columns",target_category:"columns"}})}class Al extends s.Z{constructor(){super({buildQuery:Sl,controlPanel:gl,loadChart:()=>o.e(92435).then(o.bind(o,592435)),metadata:new i.Z({category:(0,l.t)("Flow"),credits:["https://echarts.apache.org"],description:(0,l.t)("Displays connections between entities in a graph structure. Useful for mapping relationships and showing which nodes are important in a network. Graph charts can be configured to be force-directed or circulate. If your data has a geospatial component, try the deck.gl Arc chart."),exampleGallery:[{url:_l}],name:(0,l.t)("Graph Chart"),tags:[(0,l.t)("Aesthetic"),(0,l.t)("Circular"),(0,l.t)("Comparison"),(0,l.t)("Directional"),(0,l.t)("ECharts"),(0,l.t)("Relational"),(0,l.t)("Structural"),(0,l.t)("Transformable")],thumbnail:Tl,behaviors:[dt.cg.DRILL_TO_DETAIL]}),transformProps:wl})}}function Pl(e){const{series_limit_metric:t}=e,o=(0,S.Z)(t)[0];return(0,Ut.Z)(e,(e=>{var t;let{metrics:r,orderby:a=[]}=e;return r=r||[],o?a=[[o,!1]]:(null==(t=r)?void 0:t.length)>0&&(a=[[r[0],!1]]),[{...e,orderby:a}]}))}var kl;!function(e){e.Value="value",e.KeyValue="key_value"}(kl||(kl={}));const Fl={...Fa.xo,groupby:[],labelType:kl.Value,labelPosition:mn.Pl.Top,legendOrientation:mn.IY.Top,legendType:mn.HJ.Scroll,numberFormat:"SMART_NUMBER",showLabels:!0,dateFormat:"smart_date",isCircle:!1},{labelType:Rl,labelPosition:Il,numberFormat:El,showLabels:Ll,isCircle:Dl}=Fl,Zl={name:"radarMetricMaxValue",config:{controlType:"InputNumber",label:(0,l.t)("Max"),description:(0,l.t)("The maximum value of metrics. It is an optional configuration"),width:120,placeholder:(0,l.t)("auto"),debounceDelay:400,validators:[Eo.Z]}},Ml={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["groupby"],["metrics"],["timeseries_limit_metric"],["adhoc_filters"],[{name:"row_limit",config:{...W.ZP.row_limit,default:10}}]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],...ei,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Labels"))],[{name:"show_labels",config:{type:"CheckboxControl",label:(0,l.t)("Show Labels"),renderTrigger:!0,default:Ll,description:(0,l.t)("Whether to display the labels.")}}],[{name:"label_type",config:{type:"SelectControl",label:(0,l.t)("Label Type"),default:Rl,renderTrigger:!0,choices:[["value",(0,l.t)("Value")],["key_value",(0,l.t)("Category and Value")]],description:(0,l.t)("What should be shown on the label?")}}],[{name:"label_position",config:{type:"SelectControl",freeForm:!1,label:(0,l.t)("Label position"),renderTrigger:!0,choices:Fa.N4,default:Il,description:h.YD}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:El,choices:h.F6,description:`${h.YD} ${h.pj}`}}],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),renderTrigger:!0,choices:h.HC,default:"smart_date",description:h.YD}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Radar"))],[{name:"column_config",config:{type:"ColumnConfigControl",label:(0,l.t)("Customize Metrics"),description:(0,l.t)("Further customize how to display each metric"),renderTrigger:!0,configFormLayout:{[gt.Z.NUMERIC]:[[Zl]]},shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n,i;const l=(null!=(r=null==e||null==(a=e.controls)||null==(n=a.metrics)?void 0:n.value)?r:[]).map((e=>"string"===typeof e?e:e.label));return{queryResponse:null==o||null==(i=o.queriesResponse)?void 0:i[0],appliedColumnNames:l}}}}],[{name:"is_circle",config:{type:"CheckboxControl",label:(0,l.t)("Circle radar shape"),renderTrigger:!0,default:Dl,description:(0,l.t)("Radar render type, whether to display 'circle' shape.")}}]]}],formDataOverrides:e=>({...e,metrics:(0,f.u)().popAllMetrics(),groupby:(0,f.u)().popAllColumns()})};var Ol=o(777675);function Nl(e){const{formData:t,height:o,hooks:r,filterState:a,queriesData:n,width:i,theme:l,inContextMenu:s,emitCrossFilters:u}=e,m={},{data:p=[]}=n[0],g=(0,rn.IW)(n[0]),{colorScheme:h,groupby:f,labelType:b,labelPosition:y,legendOrientation:v,legendType:x,legendMargin:C,metrics:w=[],numberFormat:T,dateFormat:_,showLabels:S,showLegend:A,isCircle:P,columnConfig:k,sliceId:F}={...Fa.xo,...Fl,...t},{setDataMask:R=(()=>{}),onContextMenu:I}=r,E=So.getScale(h),L=(0,c.JB)(T),D=e=>function({params:e,labelType:t,numberFormatter:o}){const{name:r="",value:a}=e,n=o(a);switch(t){case kl.Value:return n;case kl.KeyValue:return`${r}: ${n}`;default:return r}}({params:e,numberFormatter:L,labelType:b}),Z=w.map(ht.Z),M=f.map(on.Z),O=new Map,N=new Map,B=[];p.forEach((e=>{const t=(0,rn.iw)({datum:e,groupby:M,coltypeMapping:g,timeFormatter:(0,d.bt)(_)});N.set(t,M.map((t=>e[t])));for(const[t,o]of Object.entries(e))O.has(t)?O.set(t,Math.max(o,(0,Ol.Z)(O.get(t),Number.MIN_SAFE_INTEGER))):O.set(t,o);const o=a.selectedValues&&!a.selectedValues.includes(t);B.push({value:Z.map((t=>e[t])),name:t,itemStyle:{color:E(t,F),opacity:o?Fa.ZV.Transparent:Fa.ZV.NonTransparent},lineStyle:{opacity:o?Fa.ZV.SemiTransparent:Fa.ZV.NonTransparent},label:{show:S,position:y,formatter:D}})}));const z=(a.selectedValues||[]).reduce(((e,t)=>{const o=B.findIndex((({name:e})=>e===t));return{...e,[o]:t}}),{}),V=Z.map((e=>{var t;const o=null==k||null==(t=k[e])?void 0:t.radarMetricMaxValue,r=0===O.get(e)?Number.MAX_SAFE_INTEGER:O.get(e);return{name:e,max:null===o?r:o}})),q=[{type:"radar",...(0,rn.G_)(A,v,C),animation:!1,emphasis:{label:{show:!0,fontWeight:"bold",backgroundColor:l.colors.grayscale.light5}},data:B}];return{formData:t,width:i,height:o,echartOptions:{grid:{...nn.oe},tooltip:{...Ra(m),show:!s,trigger:"item"},legend:{...(0,rn.zp)(x,v,A),data:Array.from(N.keys())},series:q,radar:{shape:P?"circle":"polygon",indicator:V}},emitCrossFilters:u,setDataMask:R,labelMap:Object.fromEntries(N),groupby:f,selectedValues:z,onContextMenu:I,refs:m}}var Bl=o(499834);const zl=o.p+"example1.6c4d3e0c..jpg",Vl=o.p+"example2.ea481d57..jpg";class ql extends s.Z{constructor(){super({buildQuery:Pl,controlPanel:Ml,loadChart:()=>o.e(80616).then(o.bind(o,680616)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Ranking"),credits:["https://echarts.apache.org"],description:(0,l.t)("Visualize a parallel set of metrics across multiple groups. Each group is visualized using its own line of points and each metric is represented as an edge in the chart."),exampleGallery:[{url:zl},{url:Vl}],name:(0,l.t)("Radar Chart"),tags:[(0,l.t)("Business"),(0,l.t)("Comparison"),(0,l.t)("Coordinates"),(0,l.t)("Multi-Variables"),(0,l.t)("Report"),(0,l.t)("Web"),(0,l.t)("ECharts")],thumbnail:Bl}),transformProps:Nl})}}var $l=o(882028),Wl=o(973739),Hl=o(192155),Yl=o(460955),Ql=o(619546);function jl(e){const t={...e},o=((e,t)=>{const o={};return Object.entries(e).forEach((([e,r])=>{e.endsWith(t)||(o[e]=r)})),o})(t,"_b"),r=((e,t)=>{const o={};return Object.entries(e).sort((([e],[o])=>{const r=e.endsWith(t)?1:0;return(o.endsWith(t)?1:0)-r})).forEach((([e,r])=>{e.endsWith(t)&&(o[e.slice(0,-t.length)]=r),e.endsWith(t)||e in o||(o[e]=r)})),o})(t,"_b"),a=[o,r].map((t=>(0,Ut.Z)(t,(o=>{const r={...o,columns:[...(0,Mt.SR)(e)?(0,S.Z)((0,Mt.Bw)(e)):[],...(0,S.Z)(t.groupby)],series_columns:t.groupby,...(0,Mt.SR)(e)?{}:{is_timeseries:!0}},a=(0,Wl.H)(t,r)?(0,Hl.O)(t,r):(0,Za.H)(t,r),n={...r,time_offsets:(0,Wl.H)(t,r)?t.time_compare:[],post_processing:[a,(0,Ma.V)(t,r),(0,Yl.N)(t,r),(0,Oa.X)(t,r),(0,Ql.N)(t,r),(0,Na.k)(t,r)]};return[(0,$l.Z)(n)]}))));return{...a[0],queries:[...a[0].queries,...a[1].queries]}}var Gl=o(150361),Ul=o.n(Gl);const Jl={...Fa.xo,annotationLayers:[],minorSplitLine:Wn.minorSplitLine,truncateYAxis:Wn.truncateYAxis,truncateYAxisSecondary:Wn.truncateYAxis,logAxis:Wn.logAxis,logAxisSecondary:Wn.logAxis,yAxisBounds:Wn.yAxisBounds,yAxisBoundsSecondary:Wn.yAxisBounds,yAxisFormat:Wn.yAxisFormat,yAxisFormatSecondary:Wn.yAxisFormat,yAxisTitleSecondary:Fa.f6.yAxisTitle,tooltipTimeFormat:Wn.tooltipTimeFormat,xAxisTimeFormat:Wn.xAxisTimeFormat,area:Wn.area,areaB:Wn.area,markerEnabled:Wn.markerEnabled,markerEnabledB:Wn.markerEnabled,markerSize:Wn.markerSize,markerSizeB:Wn.markerSize,opacity:Wn.opacity,opacityB:Wn.opacity,orderDesc:Wn.orderDesc,orderDescB:Wn.orderDesc,rowLimit:Wn.rowLimit,rowLimitB:Wn.rowLimit,seriesType:Wn.seriesType,seriesTypeB:Wn.seriesType,showValue:Wn.showValue,showValueB:Wn.showValue,stack:Wn.stack,stackB:Wn.stack,yAxisIndex:0,yAxisIndexB:0,groupby:[],groupbyB:[],zoomable:Wn.zoomable,richTooltip:Wn.richTooltip,xAxisLabelRotation:Wn.xAxisLabelRotation,...Fa.f6,symbol:"emptyCircle"},{area:Kl,logAxis:Xl,markerEnabled:es,markerSize:ts,minorSplitLine:os,opacity:rs,orderDesc:as,rowLimit:ns,seriesType:is,showValue:ls,stack:ss,truncateYAxis:cs,yAxisBounds:ds,zoomable:us,xAxisLabelRotation:ms,yAxisIndex:ps,symbol:gs}=Jl;function hs(e,t){return{label:e,expanded:!0,controlSetRows:[[{name:`metrics${t}`,config:W.ZP.metrics}],[{name:`groupby${t}`,config:W.ZP.groupby}],[{name:`adhoc_filters${t}`,config:W.ZP.adhoc_filters}],[{name:`limit${t}`,config:W.ZP.limit}],[{name:`timeseries_limit_metric${t}`,config:W.ZP.timeseries_limit_metric}],[{name:`order_desc${t}`,config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:as,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean((null==e?void 0:e[`timeseries_limit_metric${t}`].value)&&!Zt()(null==e?void 0:e[`timeseries_limit_metric${t}`].value))}}],[{name:`row_limit${t}`,config:{...W.ZP.row_limit,default:ns}}],[{name:`truncate_metric${t}`,config:{...W.ZP.truncate_metric,default:W.ZP.truncate_metric.default}}]]}}function fs(e,t){return[[(0,Z.tZ)("div",{className:"section-header"},e)],[{name:`seriesType${t}`,config:{type:"SelectControl",label:(0,l.t)("Series type"),renderTrigger:!0,default:is,choices:[[$n.Line,(0,l.t)("Line")],[$n.Scatter,(0,l.t)("Scatter")],[$n.Smooth,(0,l.t)("Smooth Line")],[$n.Bar,(0,l.t)("Bar")],[$n.Start,(0,l.t)("Step - start")],[$n.Middle,(0,l.t)("Step - middle")],[$n.End,(0,l.t)("Step - end")]],description:(0,l.t)("Series chart type (line, bar etc)")}}],[{name:`stack${t}`,config:{type:"CheckboxControl",label:(0,l.t)("Stack series"),renderTrigger:!0,default:ss,description:(0,l.t)("Stack series on top of each other")}}],[{name:`area${t}`,config:{type:"CheckboxControl",label:(0,l.t)("Area chart"),renderTrigger:!0,default:Kl,description:(0,l.t)("Draw area under curves. Only applicable for line types.")}}],[{name:`show_value${t}`,config:{type:"CheckboxControl",label:(0,l.t)("Show Values"),renderTrigger:!0,default:ls,description:(0,l.t)("Whether to display the numerical values within the cells")}}],[{name:`opacity${t}`,config:{type:"SliderControl",label:(0,l.t)("Opacity"),renderTrigger:!0,min:0,max:1,step:.1,default:rs,description:(0,l.t)("Opacity of area chart.")}}],[{name:"bar_width"+t,config:{type:"TextControl",label:(0,l.t)("Graph width"),default:null,renderTrigger:!0,isInt:!0,visibility:({controls:e})=>{var o;return Boolean("bar"==(null==(o=e[`seriesType${t}`])?void 0:o.value))}}}],[{name:"line_type"+t,config:{type:"SelectControl",label:(0,l.t)("Line type"),default:"solid",renderTrigger:!0,choices:[["solid",(0,l.t)("solid")],["dashed",(0,l.t)("dashed")],["dotted",(0,l.t)("dotted")]],visibility:({controls:e})=>{var o,r;return Boolean("bar"!==(null==(o=e[`seriesType${t}`])?void 0:o.value)&&"scatter"!==(null==(r=e[`seriesType${t}`])?void 0:r.value))}}}],[{name:"line_width"+t,config:{type:"TextControl",label:(0,l.t)("Line width"),default:1,renderTrigger:!0,isInt:!0,visibility:({controls:e})=>{var o,r;return Boolean("bar"!==(null==(o=e[`seriesType${t}`])?void 0:o.value)&&"scatter"!==(null==(r=e[`seriesType${t}`])?void 0:r.value))}}}],[{name:`markerEnabled${t}`,config:{type:"CheckboxControl",label:(0,l.t)("Marker"),renderTrigger:!0,default:es,description:(0,l.t)("Draw a marker on data points. Only applicable for line types."),visibility:({controls:e})=>{var o;return Boolean("bar"!==(null==(o=e[`seriesType${t}`])?void 0:o.value))}}}],[{name:"symbolType"+t,config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Symbol type"),default:gs,choices:[["emptyCircle",(0,l.t)("Empty circle")],["circle",(0,l.t)("Circle")],["rect",(0,l.t)("Rectangle")],["triangle",(0,l.t)("Triangle")],["diamond",(0,l.t)("Diamond")],["pin",(0,l.t)("Pin")],["arrow",(0,l.t)("Arrow")],["none",(0,l.t)("None")]],visibility:({controls:e})=>{var o,r;return Boolean((null==(o=e[`markerEnabled${t}`])?void 0:o.value)&&"bar"!==(null==(r=e[`seriesType${t}`])?void 0:r.value))}}}],[{name:`markerSize${t}`,config:{type:"SliderControl",label:(0,l.t)("Marker size"),renderTrigger:!0,min:0,max:100,default:ts,description:(0,l.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var o,r;return Boolean((null==(o=e[`markerEnabled${t}`])?void 0:o.value)&&"bar"!==(null==(r=e[`seriesType${t}`])?void 0:r.value))}}}],[{name:`yAxisIndex${t}`,config:{type:"SelectControl",label:(0,l.t)("Y Axis"),choices:[[0,(0,l.t)("Primary")],[1,(0,l.t)("Secondary")]],default:ps,clearable:!1,renderTrigger:!0,description:(0,l.t)("Primary or secondary y-axis")}}]]}function bs(e,t){const o=Ul()(g.sections.advancedAnalyticsControls);return o.label=e,t?(o.controlSetRows.forEach((e=>e.forEach((e=>{null!=e&&e.name&&(e.name=`${e.name}${t}`)})))),o):o}const ys={controlPanelSections:[g.sections.genericTime,Mt.O6?{label:(0,l.t)("Shared query fields"),expanded:!0,controlSetRows:[["x_axis"],["time_grain_sqla"]]}:null,hs((0,l.t)("Query A"),""),bs((0,l.t)("Advanced analytics Query A"),""),hs((0,l.t)("Query B"),"_b"),bs((0,l.t)("Advanced analytics Query B"),"_b"),g.sections.annotationsAndLayersControls,g.sections.titleControls,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],...fs((0,l.t)("Query A"),""),...fs((0,l.t)("Query B"),"B"),[{name:"zoomable",config:{type:"CheckboxControl",label:(0,l.t)("Data Zoom"),default:us,renderTrigger:!0,description:(0,l.t)("Enable data zooming controls")}}],...ei,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("X Axis"))],["x_axis_time_format"],[{name:"xAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Rotate x axis label"),choices:[[0,"0\xb0"],[45,"45\xb0"]],default:ms,renderTrigger:!0,description:(0,l.t)("Input field supports custom rotation. e.g. 30 for 30\xb0")}}],...ci,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Y Axis"))],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,l.t)("Minor Split Line"),renderTrigger:!0,default:os,description:(0,l.t)("Draw split lines for minor y-axis ticks")}}],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,l.t)("Truncate Y Axis"),default:cs,renderTrigger:!0,description:(0,l.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis Bounds"),renderTrigger:!0,default:ds,description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent.")}}],[{name:"y_axis_format",config:{...W.ZP.y_axis_format,label:(0,l.t)("Primary y-axis format")}}],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic y-axis"),renderTrigger:!0,default:Xl,description:(0,l.t)("Logarithmic scale on primary y-axis")}}],[{name:"y_axis_format_secondary",config:{...W.ZP.y_axis_format,label:(0,l.t)("Secondary y-axis format")}}],[{name:"yAxisTitleSecondary",config:{type:"TextControl",label:(0,l.t)("Secondary y-axis title"),renderTrigger:!0,default:"",description:(0,l.t)("Logarithmic y-axis")}}],[{name:"logAxisSecondary",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic y-axis"),renderTrigger:!0,default:Xl,description:(0,l.t)("Logarithmic scale on secondary y-axis")}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Axis pointer"))],[{name:"axisPointer_type",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Axis pointer type"),default:"line",options:[{label:(0,l.t)("line"),value:"line"},{label:(0,l.t)("shadow"),value:"shadow"},{label:(0,l.t)("cross"),value:"cross"},{label:(0,l.t)("none"),value:"none"}],description:(0,l.t)("Please select the type of axis pointer")}}],[{name:"axisPtr_ls_color",config:{type:"ColorPickerControl",label:(0,l.t)("Color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:.5},description:(0,l.t)("Please select the color of the guide line"),visibility:({controls:e})=>{var t,o;return Boolean("line"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value)||"cross"==(null==e||null==(o=e.axisPointer_type)?void 0:o.value))}}},{name:"axisPtr_ls_width",config:{type:"TextControl",label:(0,l.t)("Width"),default:1,renderTrigger:!0,isInt:!0,description:(0,l.t)("Please select the width of the guide line"),visibility:({controls:e})=>{var t,o;return Boolean("line"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value)||"cross"==(null==e||null==(o=e.axisPointer_type)?void 0:o.value))}}},{name:"axisPtr_ls_type",config:{type:"SelectControl",label:(0,l.t)("Axis pointer style"),renderTrigger:!0,default:"solid",options:[{label:(0,l.t)("solid"),value:"solid"},{label:(0,l.t)("dashed"),value:"dashed"},{label:(0,l.t)("dotted"),value:"dotted"}],description:(0,l.t)("Please select the style of axis pointer"),visibility:({controls:e})=>{var t,o;return Boolean("line"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value)||"cross"==(null==e||null==(o=e.axisPointer_type)?void 0:o.value))}}},{name:"axisPtr_ss_color",config:{type:"ColorPickerControl",label:(0,l.t)("Color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:.2},description:(0,l.t)("Please fill in the area color"),visibility:({controls:e})=>{var t;return Boolean("shadow"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value))}}}]]}],formDataOverrides:e=>{const t=(0,f.u)().controls.columns.filter((t=>!(0,S.Z)(e.groupby_b).includes(t)));(0,f.u)().controls.columns=(0,f.u)().controls.columns.filter((e=>!t.includes(e)));const o=(0,f.u)().controls.metrics.filter((t=>!(0,S.Z)(e.metrics_b).includes(t)));return(0,f.u)().controls.metrics=(0,f.u)().controls.metrics.filter((e=>!o.includes(e))),{...e,metrics:o,groupby:t}}};var vs=o(237731);function xs(e){var t,o;const{width:r,height:a,formData:n,queriesData:i,hooks:l,filterState:s,datasource:d,theme:u,inContextMenu:m,emitCrossFilters:p}=e,{ownState:g}=e,{viewRatioStatus:h}=g,{verboseMap:f={}}=d,{label_map:b}=i[0],{label_map:y}=i[1],v=i[0].data||[],x=i[1].data||[],C=Sn(e),{area:w,areaB:T,annotationLayers:_,colorScheme:S,contributionMode:A,legendOrientation:P,legendType:k,logAxis:F,logAxisSecondary:R,markerEnabled:I,markerEnabledB:E,markerSize:L,markerSizeB:D,opacity:Z,opacityB:M,minorSplitLine:O,seriesType:N,seriesTypeB:B,showLegend:z,showValue:V,showValueB:q,stack:$,stackB:W,truncateYAxis:H,tooltipTimeFormat:Y,yAxisFormat:Q,yAxisFormatSecondary:j,xAxisTimeFormat:G,yAxisBounds:U,yAxisIndex:J,yAxisIndexB:K,yAxisTitleSecondary:X,zoomable:ee,richTooltip:te,tooltipSortByMetric:oe,xAxisLabelRotation:re,groupby:ae,groupbyB:ne,xAxis:ie,xAxisTitle:le,yAxisTitle:se,xAxisTitleMargin:ce,yAxisTitleMargin:de,xAxisTitlePosition:ue,yAxisTitlePosition:me,xTitleColor:pe,yTitleColor:ge,xTitleSize:he,yTitleSize:fe,xTitleAlign:be,yTitleAlign:ye,sliceId:ve,timeGrainSqla:xe,percentageThreshold:Ce,axisPointerType:we,axisPtrLsColor:Te,axisPtrLsWidth:_e,axisPtrLsType:Se,axisPtrSsColor:Ae,xlabelSize:Pe,ylabelSize:ke,barWidth:Fe,barWidthB:Re,lineType:Ie,lineTypeB:Ee,lineWidth:Le,lineWidthB:De,symbolType:Ze,symbolTypeB:Me}={...Jl,...n},Oe={},Ne=So.getScale(S);let Be=(0,Mt.M8)(e.rawFormData);(0,Ot.s9)(null==(t=e.rawFormData)?void 0:t.x_axis)&&(0,vs.Z)(f[Be])&&(Be=f[Be]);const ze=bn(v,f),Ve=(0,rn.Ie)(ze,{fillNeighborValue:$?0:void 0,xAxis:Be}),qe=bn(x,f),$e=(0,rn.Ie)(qe,{fillNeighborValue:W?0:void 0,xAxis:Be}),We=(0,rn.IW)(i[0]),He=null!=(o=null==We?void 0:We[Be])?o:null==We?void 0:We[ie],Ye=(0,rn.P_)(He),Qe=[],je=(0,c.JB)(A?",.0%":Q),Ge=(0,c.JB)(A?",.0%":j),Ue=new Set,Je=new Set,Ke=(e,t)=>{1===t?Je.add(e.id):Ue.add(e.id)};Ve.forEach((e=>Ke(e,J))),$e.forEach((e=>Ke(e,K)));const Xe=(0,rn.kU)(Ve,{stack:$}),et=(0,rn.kU)($e,{stack:$}),{totalStackedValues:tt,thresholdValues:ot}=(0,rn.a6)(ze,{stack:$,percentageThreshold:Ce,xAxisCol:Be}),{totalStackedValues:rt,thresholdValues:at}=(0,rn.a6)(qe,{stack:Boolean(W),percentageThreshold:Ce,xAxisCol:Be});_.filter((e=>e.show)).forEach((e=>{(0,ln.x5)(e)?Qe.push(Pn(e,v,Be,Ye,Ne,ve)):(0,ln.Ry)(e)?Qe.push(...kn(e,0,C,Ne,u,ve)):(0,ln.pD)(e)?Qe.push(...Fn(e,0,C,Ne,u,ve)):(0,ln.nl)(e)&&Qe.push(...Rn(e,L,0,C,Ne,ve))}));let[nt,it]=(U||[]).map(Yi);const lt=(0,rn.oO)({max:it,formatter:je}),st=(0,rn.oO)({max:it,formatter:Ge});Ve.forEach((e=>{const t=An(e,Ne,{area:w,markerEnabled:I,symbol:Ze,markerSize:L,areaOpacity:Z,seriesType:N,barWidth:Fe,lineWidth:Le,lineType:Ie,showValue:V,stack:Boolean($),yAxisIndex:J,filterState:s,seriesKey:e.name,sliceId:ve,queryIndex:0,formatter:N===$n.Bar?lt:je,showValueIndexes:Xe,totalStackedValues:tt,thresholdValues:ot});t&&Qe.push(t)})),$e.forEach((e=>{const t=An(e,Ne,{area:T,markerEnabled:E,symbol:Me,markerSize:D,areaOpacity:M,seriesType:B,barWidth:Re,lineWidth:De,lineType:Ee,showValue:q,stack:Boolean(W),yAxisIndex:K,filterState:s,seriesKey:Ue.has(e.name)?`${e.name} (1)`:e.name,sliceId:ve,queryIndex:1,formatter:B===$n.Bar?st:Ge,showValueIndexes:et,totalStackedValues:rt,thresholdValues:at});t&&Qe.push(t)})),"row"===A&&$&&(void 0===nt&&(nt=0),void 0===it&&(it=1));const ct=He===gt.Z.TEMPORAL?En(Y):String,dt=He===gt.Z.TEMPORAL?Ln(G):String,ut=In(z,P,!(!se&&!X),ee,null,!!le,me,ue,an(de),an(ce)),{setDataMask:mt=(()=>{}),onContextMenu:pt}=l,ht=J!==K,ft={...nn.C0,min:nt,max:it,minorTick:{show:!0},minorSplitLine:{show:O},nameTextStyle:{color:`rgba(${null==ge?void 0:ge.r},${null==ge?void 0:ge.g},${null==ge?void 0:ge.b},${null==ge?void 0:ge.a})`,fontSize:fe,align:ye},axisLabel:{fontSize:ke||14,formatter:je},scale:H,alignTicks:ht},bt=Ve.concat($e).filter((e=>gn(e.name||"").type===mn.i1.Observation)).map((e=>e.name||"")).concat(_n(_,C)),yt={useUTC:!0,grid:{...nn.oe,...ut},xAxis:{type:Ye,name:le,triggerEvent:!0,nameGap:an(ce),nameLocation:ue||"center",nameRotate:"end"==ue?-90:0,nameTextStyle:{color:`rgba(${null==pe?void 0:pe.r},${null==pe?void 0:pe.g},${null==pe?void 0:pe.b},${null==pe?void 0:pe.a})`,fontSize:he,align:be},axisLabel:{fontSize:Pe||14,hideOverlap:!0,formatter:dt,rotate:re},minInterval:"time"===Ye&&xe?Fa.hK[xe]:0},yAxis:[{type:F?"log":"value",...ft,name:se,nameGap:an(de),nameLocation:me||"center",alignTicks:ht},{type:R?"log":"value",...ft,splitLine:{show:!1},axisLabel:{formatter:Ge},scale:H,name:X}],tooltip:{...Ra(Oe),show:!m,trigger:te?"axis":"item",axisPointer:{type:we,...function(e,t){var o,r,a,n,i,l,s,c,d,u,m,p;switch(e){case"line":return{lineStyle:{color:`rgba(${null==(o=t.axisPtrLsColor)?void 0:o.r},${null==(r=t.axisPtrLsColor)?void 0:r.g},${null==(a=t.axisPtrLsColor)?void 0:a.b},${null==(n=t.axisPtrLsColor)?void 0:n.a})`,width:t.axisPtrLsWidth,type:t.axisPtrLsType}};case"shadow":return{shadowStyle:{color:`rgba(${null==(i=t.axisPtrSsColor)?void 0:i.r},${null==(l=t.axisPtrSsColor)?void 0:l.g},${null==(s=t.axisPtrSsColor)?void 0:s.b},${null==(c=t.axisPtrSsColor)?void 0:c.a})`}};case"cross":return{lineStyle:{color:`rgba(${null==(d=t.axisPtrLsColor)?void 0:d.r},${null==(u=t.axisPtrLsColor)?void 0:u.g},${null==(m=t.axisPtrLsColor)?void 0:m.b},${null==(p=t.axisPtrLsColor)?void 0:p.a})`,width:t.axisPtrLsWidth,type:t.axisPtrLsType}};default:return{}}}(we,{axisPtrLsColor:Te,axisPtrLsWidth:_e,axisPtrLsType:Se,axisPtrSsColor:Ae})},formatter:e=>{const t=te?e[0].value[0]:e.value[0],o=te?e:[e];te&&oe&&o.sort(((e,t)=>t.data[1]-e.data[1]));const r=[`${ct(t)}`],a=hn(o);return Object.keys(a).forEach((e=>{const t=a[e],o=fn({...t,seriesName:e,formatter:Ue.has(e)?je:Ge});rn.aI.name===e?r.push(`<span style="font-weight: 700">${o}</span>`):r.push(`<span style="opacity: 0.7">${o}</span>`)})),r.join("<br />")}},legend:{...(0,rn.zp)(k,P,z,ee),data:bt.map((e=>N===$n.Bar?{name:e,itemStyle:{color:Ne(e,ve)}}:e))},series:(0,rn.IE)(Qe),toolbox:{show:ee,top:Fa.SM.toolboxTop,right:Fa.SM.toolboxRight,feature:{dataZoom:{yAxisIndex:!1,title:{zoom:"zoom area",back:"restore zoom"}}}},dataZoom:ee?[{type:"slider",start:Fa.SM.dataZoomStart,end:Fa.SM.dataZoomEnd,bottom:Fa.SM.zoomBottom}]:[]};if(h){const e=Ul()(yt.series);let t=new Array(e.length).fill(0);e.forEach(((e,o)=>{const{data:r}=e;null==r||r.forEach((e=>{const r=null==e?void 0:e[1];Number.isFinite(r)&&(t[o]+=r)}))})),e.forEach(((e,o)=>{const{data:r}=e;null==r||r.forEach((e=>{const r=null==e?void 0:e[1],a=parseFloat((r/t[o]*100).toFixed(2));e[1]=a})),e.id=`${e.id}\u5360\u6bd4(%)`,e.name=`${e.name}\u5360\u6bd4(%)`})),yt.series=e}return{formData:n,width:r,height:a,echartOptions:yt,setDataMask:mt,emitCrossFilters:p,labelMap:b,labelMapB:y,groupby:ae,groupbyB:ne,seriesBreakdown:Ve.length,selectedValues:s.selectedValues||[],onContextMenu:pt,xValueFormatter:ct,xAxis:{label:Be,type:Ye},refs:Oe}}var Cs=o(111807);const ws=o.p+"example.661644db..jpg";class Ts extends s.Z{constructor(){super({buildQuery:jl,controlPanel:ys,loadChart:()=>o.e(704).then(o.bind(o,500704)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:Mt.O6?(0,l.t)("Visualize two different series using the same x-axis. Note that both series can be visualized with a different chart type (e.g. 1 using bars and 1 using a line)."):(0,l.t)("Visualize two different time series using the same x-axis. Note that each time series can be visualized differently (e.g. 1 using bars and 1 using a line)."),supportedAnnotationTypes:[ln.JJ.Event,ln.JJ.Formula,ln.JJ.Interval,ln.JJ.Timeseries],exampleGallery:[{url:ws}],name:Mt.O6?(0,l.t)("Mixed Chart"):(0,l.t)("Mixed Time-Series"),thumbnail:Cs,tags:[(0,l.t)("Advanced-Analytics"),(0,l.t)("Aesthetic"),(0,l.t)("ECharts"),(0,l.t)("Experimental"),(0,l.t)("Line"),(0,l.t)("Multi-Variables"),(0,l.t)("Time"),(0,l.t)("Transformable")],queryObjectCount:2}),transformProps:xs})}}function _s(e,t){const{metric:o,sort_by_metric:r,drillDown:a}=e;return(0,Ut.Z)(e,(n=>{let i={...n,...r&&{orderby:[[o,!1]]}};if(a){const o=e.groupby,r=t.ownState||{drilldown:Br.Z.fromHierarchy(o)};i={...i,...a&&{groupby:[Br.Z.getColumn(r.drilldown,o)],filters:[...n.filters||[],...Br.Z.getFilters(r.drilldown,o)]}}}return[i]}))}var Ss;!function(e){e.Key="key",e.Value="value",e.Percent="percent",e.KeyValue="key_value",e.KeyPercent="key_percent",e.KeyValuePercent="key_value_percent"}(Ss||(Ss={}));const As={...Fa.xo,donut:!1,groupby:[],innerRadius:30,labelLine:!1,labelType:Ss.Key,legendOrientation:mn.IY.Top,legendType:mn.HJ.Scroll,numberFormat:"SMART_NUMBER",outerRadius:70,showLabels:!0,labelsOutside:!0,showLabelsThreshold:5,dateFormat:"smart_date",drillDown:!1,total:!1,quantityUnit:""},{donut:Ps,innerRadius:ks,labelsOutside:Fs,labelType:Rs,labelLine:Is,outerRadius:Es,numberFormat:Ls,showLabels:Ds,drillDown:Zs,total:Ms,quantityUnit:Os}=As,Ns={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["groupby"],(0,n.c)(n.T.DASHBOARD_DRILL_DOWN)?[{name:"drillDown",config:{type:"DrillDownControl",label:(0,l.t)("Enable drill down"),default:Zs,description:(0,l.t)("Columns as hierarchy."),mapStateToProps:({form_data:e})=>({chartId:(null==e?void 0:e.slice_id)||0,columns:e.groupby})}}]:[],["metric"],["adhoc_filters"],["row_limit"],[{name:"sort_by_metric",config:{default:!0,type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}],[g.sections.displayWeights],[g.sections.weightsColumns],[g.sections.enableChartDrilldown],[g.sections.drilldownColumns]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"show_labels_threshold",config:{type:"TextControl",label:(0,l.t)("Percentage threshold"),renderTrigger:!0,isFloat:!0,default:5,description:(0,l.t)("Minimum threshold in percentage points for showing labels.")}}],...ei,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Labels"))],[{name:"label_type",config:{type:"SelectControl",label:(0,l.t)("Label Type"),default:Rs,renderTrigger:!0,choices:[["key",(0,l.t)("Category Name")],["value",(0,l.t)("Value")],["percent",(0,l.t)("Percentage")],["key_value",(0,l.t)("Category and Value")],["key_percent",(0,l.t)("Category and Percentage")],["key_value_percent",(0,l.t)("Category, Value and Percentage")]],description:(0,l.t)("What should be shown on the label?")}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:Ls,choices:h.F6,description:`${h.YD} ${h.pj}`,tokenSeparators:["\n","\t",";"]}}],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),renderTrigger:!0,choices:h.HC,default:"smart_date",description:h.YD}}],[{name:"show_labels",config:{type:"CheckboxControl",label:(0,l.t)("Show Labels"),renderTrigger:!0,default:Ds,description:(0,l.t)("Whether to display the labels.")}}],[{name:"labels_outside",config:{type:"CheckboxControl",label:(0,l.t)("Put labels outside"),default:Fs,renderTrigger:!0,description:(0,l.t)("Put the labels outside of the pie?"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_labels)?void 0:t.value)}}}],[{name:"label_line",config:{type:"CheckboxControl",label:(0,l.t)("Label Line"),default:Is,renderTrigger:!0,description:(0,l.t)("Draw line from Pie to label when labels outside?"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_labels)?void 0:t.value)}}}],[{name:"show_total",config:{type:"CheckboxControl",label:(0,l.t)("Show Total"),default:Ms,renderTrigger:!0,description:(0,l.t)("Whether to display the aggregate count")}}],[{name:"quantityUnit",config:{type:"TextControl",label:(0,l.t)("Unit"),renderTrigger:!0,default:Os,description:(0,l.t)("Add quantity unit"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.show_total)?void 0:t.value)}}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Pie shape"))],[{name:"outerRadius",config:{type:"SliderControl",label:(0,l.t)("Outer Radius"),renderTrigger:!0,min:10,max:100,step:1,default:Es,description:(0,l.t)("Outer edge of Pie chart")}}],[{name:"donut",config:{type:"CheckboxControl",label:(0,l.t)("Donut"),default:Ps,renderTrigger:!0,description:(0,l.t)("Do you want a donut or a pie?")}}],[{name:"innerRadius",config:{type:"SliderControl",label:(0,l.t)("Inner Radius"),renderTrigger:!0,min:0,max:100,step:1,default:ks,description:(0,l.t)("Inner radius of donut hole"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.donut)?void 0:t.value)}}}],[{name:"datalabelColor",config:{type:"ColorPickerControl",label:(0,l.t)("Data label color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:1},description:(0,l.t)("Please select the color of the data label")}}],[{name:"datalabelSize",config:{label:(0,l.t)("Font size of data labels"),type:"SelectControl",description:(0,l.t)("Please set the font size"),default:14,choices:[[12,12],[14,14],[16,16],[18,18],[20,20],[24,24],[26,26],[28,28],[30,30],[32,32],[36,36]],renderTrigger:!0}}]]}],controlOverrides:{series:{validators:[_.Z],clearable:!1},row_limit:{default:100}},formDataOverrides:e=>({...e,metric:(0,f.u)().shiftMetric(),groupby:(0,f.u)().popAllColumns(),row_limit:(0,Ol.Z)(e.row_limit,100)>=100?100:e.row_limit})};var Bs=o(753506);const zs=(0,c.JB)(mt.Z.PERCENT_2_POINT);function Vs({params:e,labelType:t,numberFormatter:o,sanitizeName:r=!1}){const{name:a="",value:n,percent:i}=e,l=r?(0,rn.Z6)(a):a,s=o(n),c=zs(i/100);switch(t){case Ss.Key:return l;case Ss.Value:return s;case Ss.Percent:return c;case Ss.KeyValue:return`${l}: ${s}`;case Ss.KeyValuePercent:return`${l}: ${s} (${c})`;case Ss.KeyPercent:return`${l}: ${c}`;default:return l}}function qs({chartPadding:e,donut:t,width:o,height:r}){const a={top:t?"middle":"0",left:"center"};return e.top&&(a.top=t?50+(e.top-15)/r/2*100+"%":(e.top+15)/r*100+"%"),e.bottom&&(a.top=t?50-(e.bottom+15)/r/2*100+"%":"0"),e.left&&(a.left=50+(e.left-215)/o/2*100+"%"),e.right&&(a.left=50-(e.right+215)/o/2*100+"%"),a}function $s(e){const{formData:t,height:o,hooks:r,filterState:a,queriesData:n,width:i,theme:s,inContextMenu:u,emitCrossFilters:m}=e,{data:p=[]}=n[0],g=(0,rn.IW)(n[0]),{colorScheme:h,donut:f,groupby:b,innerRadius:y,labelsOutside:v,labelLine:x,labelType:C,legendMargin:w,legendOrientation:T,legendType:_,metric:S="",numberFormat:A,dateFormat:P,outerRadius:k,showLabels:F,showLegend:R,showLabelsThreshold:I,sliceId:E,drillDown:L,showTotal:D,quantityUnit:Z,datalabelColor:M,datalabelSize:O,enableChartDrilldown:N,drilldownColumns:B,vizType:z}={...Fa.xo,...As,...t},V=e=>e.map(on.Z),q={...e.ownState.drilldown?{}:{drilldown:Br.Z.fromHierarchy(V(b))},...e.ownState},$={},W=(0,ht.Z)(S),H=3.6*(I||0),Y=L&&null!=q&&q.drilldown?[Br.Z.getColumn(q.drilldown,[])]:b;let Q=V(Y);const j=(null==q?void 0:q.listValueFilter)||[];if(N&&j.length&&(0,Bs.Z)(z)){const e=[...Y,...B];Q=[e[j.length]]}const G=p.map((e=>(0,rn.iw)({datum:e,groupby:Q,coltypeMapping:g,timeFormatter:(0,d.bt)(P)}))),U=p.reduce(((e,t)=>{const o=(0,rn.iw)({datum:t,groupby:Q,coltypeMapping:g,timeFormatter:(0,d.bt)(P)});return{...e,[o]:Q.map((e=>t[e]))}}),{}),{setDataMask:J=(()=>{}),onContextMenu:K}=r,X=So.getScale(h),ee=(0,c.JB)(A);let te=0;const oe=p.map((e=>{const t=(0,rn.iw)({datum:e,groupby:Q,coltypeMapping:g,timeFormatter:(0,d.bt)(P)}),o=a.selectedValues&&!a.selectedValues.includes(t),r=e[W];return"number"!==typeof r&&"string"!==typeof r||(te+=an(r)),{value:r,name:t,itemStyle:{color:X(t,E),opacity:o?Fa.ZV.SemiTransparent:Fa.ZV.NonTransparent}}})),re=(a.selectedValues||[]).reduce(((e,t)=>{const o=oe.findIndex((({name:e})=>e===t));return{...e,[o]:t}}),{}),ae={formatter:e=>Vs({params:e,numberFormatter:ee,labelType:C}),show:F,color:s.colors.grayscale.dark2},ne=(0,rn.G_)(R,T,w),ie=[{type:"pie",...ne,animation:!1,radius:[`${f?y:0}%`,`${k}%`],center:["50%","50%"],avoidLabelOverlap:!0,labelLine:v&&x?{show:!0}:{show:!1},minShowLabelAngle:H,label:v?{...ae,position:"outer",alignTo:"none",bleedMargin:5,fontSize:O,color:`rgba(${null==M?void 0:M.r},${null==M?void 0:M.g},${null==M?void 0:M.b},${null==M?void 0:M.a})`}:{...ae,position:"inner",fontSize:O,color:`rgba(${null==M?void 0:M.r},${null==M?void 0:M.g},${null==M?void 0:M.b},${null==M?void 0:M.a})`},emphasis:{label:{show:!0,fontWeight:"bold",backgroundColor:s.colors.grayscale.light5}},data:oe}];return{formData:t,width:i,height:o,echartOptions:{grid:{...nn.oe},tooltip:{...Ra($),show:!u,trigger:"item",formatter:e=>Vs({params:e,numberFormatter:ee,labelType:Ss.KeyValuePercent,sanitizeName:!0})},legend:{...(0,rn.zp)(_,T,R),data:G},graphic:D?{type:"text",...qs({chartPadding:ne,donut:f,width:i,height:o}),style:{text:[(0,l.t)("Total: %s",ee(te)),Z].filter(Boolean).join(" "),fontSize:16,fontWeight:"bold"},z:10}:null,series:ie},setDataMask:J,ownState:q,labelMap:U,groupby:Y,selectedValues:re,onContextMenu:K,refs:$,emitCrossFilters:m}}var Ws=o(398257);const Hs=o.p+"Pie1.2cbe969f..jpg",Ys=o.p+"Pie2.42fece24..jpg",Qs=o.p+"Pie3.2e1f1152..jpg",js=o.p+"Pie4.a5e101ac..jpg";class Gs extends s.Z{constructor(){super({buildQuery:_s,controlPanel:Ns,loadChart:()=>o.e(33711).then(o.bind(o,33711)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Part of a Whole"),credits:["https://echarts.apache.org"],description:(0,l.t)("The classic. Great for showing how much of a company each investor gets, what demographics follow your blog, or what portion of the budget goes to the military industrial complex.\n\n        Pie charts can be difficult to interpret precisely. If clarity of relative proportion is important, consider using a bar or other chart type instead."),exampleGallery:[{url:Hs},{url:Ys},{url:Qs},{url:js}],name:(0,l.t)("Pie Chart"),tags:[(0,l.t)("Aesthetic"),(0,l.t)("Categorical"),(0,l.t)("Circular"),(0,l.t)("Comparison"),(0,l.t)("Percentages"),(0,l.t)("Popular"),(0,l.t)("Proportional"),(0,l.t)("ECharts")],thumbnail:Ws}),transformProps:$s})}}function Us(e){const{cols:t}=e;return(0,Ut.Z)(e,(e=>[{...e,groupby:t}]))}const Js={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"xRow",config:{...W.ZP.groupby,multi:!1,label:(0,l.t)("X-axis"),validators:[_.Z],description:(0,l.t)("X-axis display coordinate dimension")}}],[{name:"yRow",config:{...W.ZP.groupby,multi:!1,label:(0,l.t)("Y-axis"),validators:[_.Z],description:(0,l.t)("Y-axis display coordinate dimension")}}],[{name:"xCrossRow",config:{...W.ZP.groupby,multi:!1,label:(0,l.t)("Intersection X-axis"),validators:[_.Z],description:(0,l.t)("The X-axis value of the intersection of four quadrants")}}],[{name:"yCrossRow",config:{...W.ZP.groupby,multi:!1,label:(0,l.t)("Intersection Y-axis"),validators:[_.Z],description:(0,l.t)("The Y-axis value of the intersection of four quadrants")}}],[{name:"indicatorName",config:{...W.ZP.groupby,multi:!1,label:(0,l.t)("Indicator Name"),validators:[_.Z],description:(0,l.t)("Indicator display name")}}],[{name:"indicatorMarkers",config:{...W.ZP.groupby,multi:!1,label:"\u5bf9\u5e94\u6027\u6807\u8bb0",description:"\u6307\u5b9a\u6807\u8bb0"}}],[{name:"i_text",config:{type:"TextControl",default:"",renderTrigger:!1,label:"\u5bf9\u5e94\u6027\u6807\u8bb0\u503c",description:"\u624b\u52a8\u586b\u5199\u91cd\u7f6e\u4e0a\u9762",visibility:e=>{var t;return Boolean(null==e||null==(t=e.controls)?void 0:t.indicatorMarkers.value)}}}],[{name:"show_base_point",config:{type:"CheckboxControl",label:(0,l.t)("Display intersection coordinates"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to display intersection coordinates")}}],[{name:"show_corner_text",config:{type:"CheckboxControl",label:(0,l.t)("Show quadrant text"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to display quadrant text")}}],[{name:"show_arrow",config:{type:"CheckboxControl",label:(0,l.t)("Show arrow"),renderTrigger:!0,default:!0,description:(0,l.t)("Whether to display abscissa and ordinate indicators")}}],[{name:"x_text",config:{type:"TextControl",default:"",renderTrigger:!1,label:(0,l.t)("X-axis name"),description:(0,l.t)("Manually fill in the X-axis name above to reset it"),visibility:e=>{var t,o;return Boolean(null==e||null==(t=e.controls)||null==(o=t.show_arrow)?void 0:o.value)}}}],[{name:"y_text",config:{type:"TextControl",default:"",renderTrigger:!1,label:(0,l.t)("Y-axis name"),description:(0,l.t)("Manually fill in the reset Y-axis name above"),visibility:e=>{var t,o;return Boolean(null==e||null==(t=e.controls)||null==(o=t.show_arrow)?void 0:o.value)}}}],[{name:"show_tooltipstype",config:{label:(0,l.t)("prompt type"),type:"SelectControl",description:(0,l.t)("prompt type"),default:1,validators:[_.Z],choices:[[1,"\u56fe\u6807"],[2,"\u56fe\u6807+\u6307\u6807\u540d\u5b57"],[3,"\u56fe\u6807+\u6307\u6807\u540d\u5b57+\u5750\u6807\u503c"]],renderTrigger:!0}}],["adhoc_filters"]]}]};var Ks=o(748086),Xs=o(119673);const ec=e=>"number"===typeof e&&!Number.isNaN(e);function tc(e){const{formData:t,height:o,queriesData:r,width:a}=e,{data:n=[]}=(null==r?void 0:r[0])||{},{showArrow:i,xRow:l,yRow:s,xCrossRow:c,yCrossRow:d,indicatorName:u,showTooltipstype:m,showBasePoint:p}=t,g={},h={},f=[];n.forEach(((e={},t)=>{if(ec(Number(e[l]))&&ec(Number(e[s]))&&ec(Number(e[c]))&&ec(Number(e[d]))){const o=[Number(e[l])-Number(e[c]),Number(e[s])-Number(e[d]),t];f.push(o),g[Number(e[c])]=Number(e[c]),h[Number(e[d])]=Number(e[d])}else Ks.ZP.warn("\u5df2\u8fc7\u6ee4\u975e\u6570\u5b57\u5217")})),(Object.values(g).length>1||Object.values(h).length>1)&&Ks.ZP.warn("\u68c0\u67e5\u5230\u591a\u4e2a\u56db\u8c61\u9650\u4ea4\u53c9\u70b9\uff0c\u8bf7\u68c0\u67e5\u6570\u636e\u6216\u8fc7\u6ee4\u6761\u4ef6\u3002");const b=["#37a354","#37a354","#37a354","#37a354"],y=[];for(let e=0;e<4;e++)y.push({value:e,label:"cluster "+e,color:b[e]});return{formData:t,width:a,height:o,echartOptions:{dataset:[{source:f},{transform:{type:"ecStat:clustering",config:{clusterCount:4,outputType:"single",outputClusterIndexDimension:2}}}],tooltip:{show:!0,position:"top",confine:!0,formatter:e=>{const t=null==e?void 0:e.data,o=(null==e?void 0:e.marker)||"";if(Array.isArray(t)){const t=null==e?void 0:e.dataIndex,r=null==n?void 0:n[t],a=null==r?void 0:r[u],i=null==r?void 0:r[l],c=null==r?void 0:r[s];let d=`${o}`;return 2===m?d=`${o}${a}`:3===m&&(d=`${o}${a}(${i},${c})`),d=`${o}${a}(${i},${c})`,d}return o}},visualMap:{type:"piecewise",top:"middle",min:0,max:4,splitNumber:4,dimension:2,pieces:y,show:!1},grid:{left:i?Xs.nh:Xs.F2,right:Xs.F2,top:Xs.F2,bottom:i?Xs.nh:Xs.F2},xAxis:{axisLabel:{show:!1},axisTick:{show:!1}},yAxis:{axisLabel:{show:!1},axisTick:{show:!1}},series:{type:"scatter",encode:{tooltip:[0,1,2]},symbolSize:15,itemStyle:{borderColor:"#37a354"},datasetIndex:1}},lineScatterColor:Xs.$k,reconertData:f,refs:{},data:n,showTooltipstype:m,showBasePoint:p}}var oc=o(89531);class rc extends s.Z{constructor(){super({buildQuery:Us,controlPanel:Js,loadChart:()=>Promise.all([o.e(78448),o.e(5830)]).then(o.bind(o,705830)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART],category:(0,l.t)("Part of a Whole"),credits:["https://echarts.apache.org"],description:(0,l.t)("Scatter plot data aggregation"),name:(0,l.t)("Quadrant diagram"),tags:[(0,l.t)("ECharts")],thumbnail:oc}),transformProps:tc})}}function ac(e){const{cols:t}=e;return(0,Ut.Z)(e,(e=>[{...e,groupby:t}]))}const nc=e=>!!(Array.isArray(e)&&e.length>0)||"string"===typeof e,ic={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"provinceColumn",config:{...W.ZP.groupby,multi:!1,label:(0,l.t)("Province/Municipality"),validators:[_.Z],description:(0,l.t)("Province/Municipality")}}],[{name:"cityColumn",config:{...W.ZP.groupby,multi:!1,label:(0,l.t)("City"),description:(0,l.t)("City"),visibility:e=>{var t,o;const r=null==e||null==(t=e.controls)||null==(o=t.provinceColumn)?void 0:o.value;return nc(r)}}}],[{name:"regionColumn",config:{...W.ZP.groupby,multi:!1,label:(0,l.t)("Region"),description:(0,l.t)("Region"),visibility:e=>{var t,o,r,a;const n=null==e||null==(t=e.controls)||null==(o=t.provinceColumn)?void 0:o.value,i=null==e||null==(r=e.controls)||null==(a=r.cityColumn)?void 0:a.value;return nc(n)&&nc(i)}}}],[{name:"townshipColumn",config:{...W.ZP.groupby,multi:!1,label:(0,l.t)("Township"),description:(0,l.t)("Township"),visibility:e=>{var t,o,r,a,n,i;const l=null==e||null==(t=e.controls)||null==(o=t.provinceColumn)?void 0:o.value,s=null==e||null==(r=e.controls)||null==(a=r.cityColumn)?void 0:a.value,c=null==e||null==(n=e.controls)||null==(i=n.regionColumn)?void 0:i.value;return nc(l)&&nc(s)&&nc(c)}}}],["metric"],["adhoc_filters"]]},{label:(0,l.t)("Settings"),tabOverride:"customize",expanded:!0,controlSetRows:[["color_scheme"],[{name:"opacityColor",config:{label:(0,l.t)("Opacity"),type:"SliderControl",description:(0,l.t)("Please set the opacity"),default:1,min:0,max:1,step:.01,renderTrigger:!0}}],["place_name_mapping"],[{name:"show_datalabel",config:{label:(0,l.t)("Data Label Show"),type:"SelectControl",description:(0,l.t)("Data Label Show"),default:1,validators:[_.Z],choices:[[1,(0,l.t)("Do Not Display")],[2,(0,l.t)("Geographic Dimension")],[3,(0,l.t)("Data Indicators")],[4,(0,l.t)("Geographic Dimension And Data Indicators")]],renderTrigger:!0}}],[{name:"show_area_first",config:{default:!1,type:"CheckboxControl",label:(0,l.t)("Show Area"),description:(0,l.t)("Show Area"),renderTrigger:!0}}]]}]};function lc(e){const{formData:t,height:o,queriesData:r,hooks:{setDataMask:a=(()=>{})},rawFormData:n,width:i,datasource:l}=e,{data:s=[]}=(null==r?void 0:r[0])||{},{slice_id:c=0}=n;return{formData:t,width:i,height:o,data:s,echartOptions:{},slice_id:c,refs:{},setDataMask:a,datasource:l}}var sc=o(248392);class cc extends s.Z{constructor(){super({buildQuery:ac,controlPanel:ic,loadChart:()=>o.e(41528).then(o.bind(o,841528)),metadata:new i.Z({description:(0,l.t)("Map"),name:(0,l.t)("Map"),thumbnail:sc}),transformProps:lc})}}var dc=o(769862),uc=o(244928),mc=o(37701);function pc(e){const{groupby:t}=e;return(0,Ut.Z)(e,(o=>{const r=(0,Wl.H)(e,o)?(0,Hl.O)(e,o):(0,Za.H)(e,o);return[{...o,columns:[...(0,Mt.SR)(e)?(0,S.Z)((0,Mt.Bw)(e)):[],...(0,S.Z)(t)],series_columns:t,...(0,Mt.SR)(e)?{}:{is_timeseries:!0},orderby:(0,$l.Z)(o).orderby,time_offsets:(0,Wl.H)(e,o)?e.time_compare:[],post_processing:[r,(0,Ma.V)(e,o),(0,Yl.N)(e,o),(0,Oa.X)(e,o),(0,Ql.N)(e,o),(0,dc.I)(e,o),(0,uc.C)(e,o),(0,Na.k)(e,o),(0,mc.D)(e,o)]}]}))}const{logAxis:gc,markerEnabled:hc,markerSize:fc,minorSplitLine:bc,opacity:yc,rowLimit:vc,seriesType:xc,truncateYAxis:Cc,yAxisBounds:wc,zoomable:Tc,xAxisLabelRotation:_c,lineWidth:Sc,symbol:Ac,symbolSize:Pc}=Wn,kc={controlPanelSections:[g.sections.genericTime,g.sections.echartsTimeSeriesQuery,g.sections.advancedAnalyticsControls,g.sections.annotationsAndLayersControls,g.sections.forecastIntervalControls,g.sections.titleControls,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"seriesType",config:{type:"SelectControl",label:(0,l.t)("Series Style"),renderTrigger:!0,default:xc,choices:[[$n.Line,(0,l.t)("Line")],[$n.Smooth,(0,l.t)("Smooth Line")],[$n.Start,(0,l.t)("Step - start")],[$n.Middle,(0,l.t)("Step - middle")],[$n.End,(0,l.t)("Step - end")]],description:(0,l.t)("Series chart type (line, bar etc)")}}],[{name:"opacity",config:{type:"SliderControl",label:(0,l.t)("Area chart opacity"),renderTrigger:!0,min:0,max:1,step:.1,default:yc,description:(0,l.t)("Opacity of Area Chart. Also applies to confidence band.")}}],[ti],[{name:"stack",config:{type:"SelectControl",label:(0,l.t)("Stacked Style"),renderTrigger:!0,choices:Fa.O0,default:null,description:(0,l.t)("Stack series on top of each other")}}],[ri],[{name:"show_extra_controls",config:{type:"CheckboxControl",label:(0,l.t)("Extra Controls"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to show extra controls or not. Extra controls include things like making mulitBar charts stacked or side by side.")}}],[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,l.t)("Marker"),renderTrigger:!0,default:hc,description:(0,l.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,l.t)("Marker Size"),renderTrigger:!0,min:0,max:20,default:fc,description:(0,l.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],[{name:"zoomable",config:{type:"CheckboxControl",label:(0,l.t)("Data Zoom"),default:Tc,renderTrigger:!0,description:(0,l.t)("Enable data zooming controls")}}],...ei,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("X Axis"))],[{name:"x_axis_time_format",config:{...W.ZP.x_axis_time_format,default:"smart_date",description:`${h.oq}. ${Hn}`}}],[{name:"xAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Rotate x axis label"),choices:[[0,"0\xb0"],[45,"45\xb0"]],default:_c,renderTrigger:!0,description:(0,l.t)("Input field supports custom rotation. e.g. 30 for 30\xb0")}}],...ci,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Y Axis"))],["y_axis_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic y-axis"),renderTrigger:!0,default:gc,description:(0,l.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,l.t)("Minor Split Line"),renderTrigger:!0,default:bc,description:(0,l.t)("Draw split lines for minor y-axis ticks")}}],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,l.t)("Truncate Y Axis"),default:Cc,renderTrigger:!0,description:(0,l.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis Bounds"),renderTrigger:!0,default:wc,description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}],[{name:"lineWidth",config:{type:"TextControl",label:(0,l.t)("Line width"),description:(0,l.t)("Please enter the line width"),default:Sc,renderTrigger:!0,isInt:!0}}],[{name:"symbol",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Symbol"),default:Ac,options:[{label:(0,l.t)("Empty circle"),value:"emptyCircle"},{label:(0,l.t)("Circle"),value:"circle"},{label:(0,l.t)("Rectangle"),value:"rect"},{label:(0,l.t)("Triangle"),value:"triangle"},{label:(0,l.t)("Diamond"),value:"diamond"},{label:(0,l.t)("Pin"),value:"pin"},{label:(0,l.t)("Arrow"),value:"arrow"},{label:(0,l.t)("None"),value:"none"}],description:(0,l.t)("Layout type of tree")}}],[{name:"symbolSize",config:{type:"SliderControl",label:(0,l.t)("Symbol size"),renderTrigger:!0,min:5,max:30,step:2,default:Pc,description:(0,l.t)("Size of edge symbols")}}],[{name:"datalabelColor",config:{type:"ColorPickerControl",label:(0,l.t)("Data label color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:1},description:(0,l.t)("Please select a data label color")}}],[{name:"datalabelSize",config:{label:(0,l.t)("Data label size"),type:"SelectControl",description:(0,l.t)("Please set the font size"),default:14,choices:[[12,12],[14,14],[16,16],[18,18],[20,20],[24,24],[26,26],[28,28],[30,30],[32,32],[36,36]],renderTrigger:!0}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Axis pointer"))],[{name:"axisPointer_type",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Axis pointer type"),default:"line",options:[{label:(0,l.t)("line"),value:"line"},{label:(0,l.t)("shadow"),value:"shadow"},{label:(0,l.t)("cross"),value:"cross"},{label:(0,l.t)("none"),value:"none"}],description:(0,l.t)("Please select the type of axis pointer")}}],[{name:"axisPtr_ls_color",config:{type:"ColorPickerControl",label:(0,l.t)("Color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:.5},description:(0,l.t)("Please select the color of the guide line"),visibility:({controls:e})=>{var t,o;return Boolean("line"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value)||"cross"==(null==e||null==(o=e.axisPointer_type)?void 0:o.value))}}},{name:"axisPtr_ls_width",config:{type:"TextControl",label:(0,l.t)("Width"),default:1,renderTrigger:!0,isInt:!0,description:(0,l.t)("Please select the width of the guide line"),visibility:({controls:e})=>{var t,o;return Boolean("line"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value)||"cross"==(null==e||null==(o=e.axisPointer_type)?void 0:o.value))}}},{name:"axisPtr_ls_type",config:{type:"SelectControl",label:(0,l.t)("Axis pointer type"),renderTrigger:!0,default:"solid",options:[{label:(0,l.t)("solid"),value:"solid"},{label:(0,l.t)("dashed"),value:"dashed"},{label:(0,l.t)("dotted"),value:"dotted"}],description:(0,l.t)("Please select the type of axis pointer"),visibility:({controls:e})=>{var t,o;return Boolean("line"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value)||"cross"==(null==e||null==(o=e.axisPointer_type)?void 0:o.value))}}},{name:"axisPtr_ss_color",config:{type:"ColorPickerControl",label:(0,l.t)("Color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:.2},description:(0,l.t)("Please fill in the area color"),visibility:({controls:e})=>{var t;return Boolean("shadow"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value))}}}]]}],controlOverrides:{row_limit:{default:vc}},formDataOverrides:e=>({...e,metrics:(0,f.u)().popAllMetrics(),groupby:(0,f.u)().popAllColumns()})};var Fc=o(27751);const Rc=[];function Ic(e){var t,o,r;const{width:a,height:n,filterState:i,formData:s,hooks:d,queriesData:u,datasource:m,theme:p,inContextMenu:g,emitCrossFilters:h,ownState:f}=e,{verboseMap:b={}}=m,[y]=u,{data:v=[],label_map:x,colnames:C,coltypes:w}=y,T=(0,rn.IW)(y),_=Sn(e),{viewRatioStatus:S}=f,{area:A,annotationLayers:P,colorScheme:k,contributionMode:F,forecastEnabled:R,legendOrientation:I,legendType:E,legendMargin:L,logAxis:D,markerEnabled:Z,markerSize:M,opacity:O,minorSplitLine:N,seriesType:B,showLegend:z,stack:V,truncateYAxis:q,yAxisFormat:$,xAxisTimeFormat:W,yAxisBounds:H,tooltipTimeFormat:Y,tooltipSortByMetric:Q,zoomable:j,richTooltip:G,xAxis:U,xAxisLabelRotation:J,groupby:K,showValue:X,onlyTotal:ee,percentageThreshold:te,xAxisTitle:oe,yAxisTitle:re,xAxisTitleMargin:ae,yAxisTitleMargin:ne,xAxisTitlePosition:ie,yAxisTitlePosition:le,xTitleColor:se,yTitleColor:ce,xTitleSize:de,yTitleSize:ue,xTitleAlign:me,yTitleAlign:pe,sliceId:ge,timeGrainSqla:he,orientation:fe,lineWidth:be,symbol:ye,datalabelColor:ve,datalabelSize:xe,datalabelPosition:Ce,baropacity:we,axisPointerType:Te,axisPtrLsColor:_e,axisPtrLsWidth:Se,axisPtrLsType:Ae,axisPtrSsColor:Pe,xlabelSize:ke,ylabelSize:Fe,vizType:Re,conditionalFormatting:Ie=[],enableChartDrilldown:Ee,drilldownColumns:Le=[]}={...Wn,...s},De={},Ze=So.getScale(k),Me=bn(v,b);let Oe=(0,Mt.M8)(e.rawFormData);(0,Ot.s9)(null==(t=e.rawFormData)?void 0:t.x_axis)&&(0,vs.Z)(b[Oe])&&(Oe=b[Oe]);const Ne=f.listValueFilter||[];if(Ee&&Ne.length&&(0,Bs.Z)(Re)){const e=[U,...K,...Le];Oe=e[Ne.length]}const Be=fe===qn.horizontal,{totalStackedValues:ze,thresholdValues:Ve}=(0,rn.a6)(Me,{stack:V,percentageThreshold:te,xAxisCol:Oe}),qe=(0,rn.Ie)(Me,{fillNeighborValue:V&&!R?0:void 0,xAxis:Oe,removeNulls:B===$n.Scatter,stack:V,totalStackedValues:ze,isHorizontal:Be}),$e=(0,rn.kU)(qe,{stack:V,onlyTotal:ee,isHorizontal:Be}),We=(He=Object.values(qe).map((e=>e.name)),He.reduce(((e,t)=>{const o=gn(t),r=e[o.name]||[];return r.push(o.type),{...e,[o.name]:r}}),{}));var He;const Ye=V===Fa.GF.Expand,Qe=null!=(o=null==T?void 0:T[Oe])?o:null==T?void 0:T[U],je=(0,rn.P_)(Qe),Ge=[],Ue=(0,c.JB)(F||Ye?",.0%":$),Je=(C||[]).map(((e,t)=>({key:e,label:(null==b?void 0:b[e])||e,dataType:w[t],formatter:Ue}))),Ke=null!=(r=(0,yt.ni)(Ie.map((e=>({...e,isGradient:!1}))),((e,t)=>{var o;return null!=(o=null==e?void 0:e.map((e=>Object.keys(e).reduce(((o,r)=>({...o,[r]:{...t.find((e=>e.key===r)),value:e[r]}})),{}))))?o:[]})(v,Je)))?r:Rc;qe.forEach((t=>{const o=(0,Fc.m)(t,e.rawFormData)?{type:"dashed"}:{},r=An(t,Ze,{area:A,filterState:i,seriesContexts:We,markerEnabled:Z,markerSize:M,areaOpacity:O,seriesType:B,stack:V,formatter:Ue,showValue:X,onlyTotal:ee,totalStackedValues:ze,showValueIndexes:$e,thresholdValues:Ve,sliceId:ge,isHorizontal:Be,lineStyle:o,lineWidth:be,symbol:ye,datalabelColor:ve,datalabelSize:xe,datalabelPosition:Ce,baropacity:we,columnColorFormatters:Ke});r&&Ge.push(r)}));const Xe=(i.selectedValues||[]).reduce(((e,t)=>{const o=Ge.findIndex((({name:e})=>e===t));return{...e,[o]:t}}),{});P.filter((e=>e.show)).forEach((e=>{(0,ln.x5)(e)?Ge.push(Pn(e,v,Oe,je,Ze,ge)):(0,ln.Ry)(e)?Ge.push(...kn(e,0,_,Ze,p,ge)):(0,ln.pD)(e)?Ge.push(...Fn(e,0,_,Ze,p,ge)):(0,ln.nl)(e)&&Ge.push(...Rn(e,M,0,_,Ze,ge))}));let[et,tt]=(H||[]).map(Yi);("row"===F||Ye)&&V&&(void 0===et&&(et=0),void 0===tt&&(tt=1));const ot=Qe===gt.Z.TEMPORAL?En(Y):String,rt=Qe===gt.Z.TEMPORAL?Ln(W):String,{setDataMask:at=(()=>{}),setControlValue:nt=(()=>{}),onContextMenu:it}=d,lt=In(z,I,!!re,j,L,!!oe,le,ie,an(ne),an(ae)),st=qe.filter((e=>gn(e.name||"").type===mn.i1.Observation)).map((e=>e.name||"")).concat(_n(P,_));let ct={type:je,name:oe,nameGap:an(ae),nameLocation:ie,nameRotate:"end"==ie?-90:0,nameTextStyle:{color:`rgba(${null==se?void 0:se.r},${null==se?void 0:se.g},${null==se?void 0:se.b},${null==se?void 0:se.a})`,fontSize:de,align:me},axisLabel:{fontSize:ke||14,hideOverlap:!0,formatter:rt,rotate:J},boundaryGap:B!==$n.Line,minInterval:je===dt.we.time&&he?Fa.hK[he]:0};je===dt.we.time&&(ct.axisLabel.showMaxLabel=null);let ut={...nn.C0,type:D?dt.we.log:dt.we.value,min:et,max:tt,minorTick:{show:!0},minorSplitLine:{show:N},nameTextStyle:{color:`rgba(${null==ce?void 0:ce.r},${null==ce?void 0:ce.g},${null==ce?void 0:ce.b},${null==ce?void 0:ce.a})`,fontSize:ue,align:pe},axisLabel:{fontSize:Fe||14,formatter:Ue},scale:q,name:re,nameGap:an(ne),nameLocation:le};Be&&([ct,ut]=[ut,ct],[lt.bottom,lt.left]=[lt.left,lt.bottom]);const mt={useUTC:!0,grid:{...nn.oe,...lt},xAxis:ct,yAxis:ut,tooltip:{...Ra(De),show:!g,trigger:G?"axis":"item",axisPointer:{type:Te,...Dn(Te,{axisPtrLsColor:_e,axisPtrLsWidth:Se,axisPtrLsType:Ae,axisPtrSsColor:Pe})},formatter:e=>{const[t,o]=Be?[1,0]:[0,1],r=G?e[0].value[t]:e.value[t],a=G?e:[e];G&&Q&&a.sort(((e,t)=>t.data[o]-e.data[o]));const n=[`${ot(r)}`],i=hn(a,Be);return Object.keys(i).forEach((e=>{const t=i[e],o=fn({...t,seriesName:e,formatter:Ue});rn.aI.name===e?n.push(`<span style="font-weight: 700">${o}</span>`):n.push(`<span style="opacity: 0.7">${o}</span>`)})),n.join("<br />")}},legend:{...(0,rn.zp)(E,I,z,j),data:st.map((e=>B===$n.Bar?{name:e,itemStyle:{color:Ze(e,ge),opacity:we||O}}:e))},series:(0,rn.IE)(Ge),toolbox:{show:j,top:Fa.SM.toolboxTop,right:Fa.SM.toolboxRight,feature:{dataZoom:{yAxisIndex:!1,title:{zoom:(0,l.t)("zoom area"),back:(0,l.t)("restore zoom")}}}},dataZoom:j?[{type:"slider",start:Fa.SM.dataZoomStart,end:Fa.SM.dataZoomEnd,bottom:Fa.SM.zoomBottom}]:[]};if(S){const e=Ul()(mt.series);if("echarts_timeseries_bar"===Re){let t=0;e.forEach((e=>{const{data:o}=e;null==o||o.forEach((e=>{const o=null==e?void 0:e[1];Number.isFinite(o)&&(t+=o)}))})),e.forEach((e=>{const{data:o}=e;null==o||o.forEach((e=>{const o=null==e?void 0:e[1],r=parseFloat((o/t*100).toFixed(2));e[1]=r})),e.id=`${e.id}\u5360\u6bd4(%)`,e.name=`${e.name}\u5360\u6bd4(%)`})),mt.series=e}if("echarts_timeseries_line"===Re){let t=new Array(e.length).fill(0);e.forEach(((e,o)=>{const{data:r}=e;null==r||r.forEach((e=>{const r=null==e?void 0:e[1];Number.isFinite(r)&&(t[o]+=r)}))})),e.forEach(((e,o)=>{const{data:r}=e;null==r||r.forEach((e=>{const r=null==e?void 0:e[1],a=parseFloat((r/t[o]*100).toFixed(2));e[1]=a})),e.id=`${e.id}\u5360\u6bd4(%)`,e.name=`${e.name}\u5360\u6bd4(%)`})),mt.series=e}}const pt=(ht=null==s?void 0:s.forecastPeriodExternal,!Number.isNaN(parseFloat(ht))&&Number.isFinite(ht));var ht;if(["P1Y","P3M","P1M","P1W","P1D"].includes(null==s?void 0:s.timeGrainSqla)&&null!=s&&s.forecastDisplayExternal&&pt&&"2"===`${null==s?void 0:s.forecastTodoMethod}`){if(["echarts_timeseries_line","echarts_area","echarts_timeseries_bar","echarts_timeseries_scatter","echarts_timeseries","echarts_timeseries_smooth","echarts_timeseries_step"].includes(Re)){var ft;const e=[];null==mt||null==(ft=mt.series)||null==ft.forEach||ft.forEach(((t,o)=>{var r,a;const n=(null==t?void 0:t.data)||[],i=null==n||null==(r=n[n.length-1-(null==s?void 0:s.forecastPeriodExternal)])?void 0:r[0],l=null==s?void 0:s.forecastColorExternal,c=null==t||null==(a=t.itemStyle)?void 0:a.color,d={show:!1,dimension:0,seriesIndex:o,pieces:[{lte:i,color:c},{gt:i+1,color:l?`rgba(${l.r},${l.g},${l.b},${l.a})`:c}]};e.push(d)})),mt.visualMap=e,mt.xAxis.data=[]}}return{echartOptions:mt,emitCrossFilters:h,formData:s,groupby:K,height:n,labelMap:x,selectedValues:Xe,setDataMask:at,setControlValue:nt,width:a,legendData:st,onContextMenu:it,xValueFormatter:ot,xAxis:{label:Oe,type:je},refs:De}}var Ec=o(506999);const Lc=o.p+"Area1.b13966ae..png",Dc=e=>Ic({...e,formData:{...e.formData,area:!0}});class Zc extends s.Z{constructor(){super({buildQuery:pc,controlPanel:kc,loadChart:()=>o.e(88551).then(o.bind(o,788551)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:Mt.O6?(0,l.t)("Area charts are similar to line charts in that they represent variables with the same scale, but area charts stack the metrics on top of each other."):(0,l.t)("Time-series Area chart are similar to line chart in that they represent variables with the same scale, but area charts stack the metrics on top of each other. An area chart in Superset can be stream, stack, or expand."),exampleGallery:[{url:Lc}],supportedAnnotationTypes:[ln.JJ.Event,ln.JJ.Formula,ln.JJ.Interval,ln.JJ.Timeseries],name:Mt.O6?(0,l.t)("Area Chart"):(0,l.t)("Time-series Area Chart"),tags:[(0,l.t)("ECharts"),(0,l.t)("Predictive"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Aesthetic"),(0,l.t)("Time"),(0,l.t)("Line"),(0,l.t)("Transformable"),(0,l.t)("Stacked"),(0,l.t)("Popular")],thumbnail:Ec}),transformProps:Dc})}}const{area:Mc,logAxis:Oc,markerEnabled:Nc,markerSize:Bc,minorSplitLine:zc,opacity:Vc,rowLimit:qc,seriesType:$c,truncateYAxis:Wc,yAxisBounds:Hc,zoomable:Yc,xAxisLabelRotation:Qc,lineWidth:jc,symbol:Gc}=Wn,Uc={controlPanelSections:[g.sections.genericTime,g.sections.echartsTimeSeriesQuery,g.sections.advancedAnalyticsControls,g.sections.annotationsAndLayersControls,g.sections.forecastIntervalControls,g.sections.titleControls,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"seriesType",config:{type:"SelectControl",label:(0,l.t)("Series Style"),renderTrigger:!0,default:$c,choices:[[$n.Line,(0,l.t)("Line")],[$n.Scatter,(0,l.t)("Scatter")],[$n.Smooth,(0,l.t)("Smooth Line")],[$n.Bar,(0,l.t)("Bar")],[$n.Start,(0,l.t)("Step - start")],[$n.Middle,(0,l.t)("Step - middle")],[$n.End,(0,l.t)("Step - end")]],description:(0,l.t)("Series chart type (line, bar etc)")}}],...ai,[{name:"area",config:{type:"CheckboxControl",label:(0,l.t)("Area Chart"),renderTrigger:!0,default:Mc,description:(0,l.t)("Draw area under curves. Only applicable for line types.")}}],[{name:"opacity",config:{type:"SliderControl",label:(0,l.t)("Area chart opacity"),renderTrigger:!0,min:0,max:1,step:.1,default:Vc,description:(0,l.t)("Opacity of Area Chart. Also applies to confidence band."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.area)?void 0:t.value)}}}],[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,l.t)("Marker"),renderTrigger:!0,default:Nc,description:(0,l.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"symbol",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Symbol"),default:Gc,options:[{label:(0,l.t)("Empty circle"),value:"emptyCircle"},{label:(0,l.t)("Circle"),value:"circle"},{label:(0,l.t)("Rectangle"),value:"rect"},{label:(0,l.t)("Triangle"),value:"triangle"},{label:(0,l.t)("Diamond"),value:"diamond"},{label:(0,l.t)("Pin"),value:"pin"},{label:(0,l.t)("Arrow"),value:"arrow"},{label:(0,l.t)("None"),value:"none"}],description:(0,l.t)("Layout type of tree"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,l.t)("Marker Size"),renderTrigger:!0,min:0,max:20,default:Bc,description:(0,l.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],[{name:"zoomable",config:{type:"CheckboxControl",label:(0,l.t)("Data Zoom"),default:Yc,renderTrigger:!0,description:(0,l.t)("Enable data zooming controls")}}],...ei,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("X Axis"))],[{name:"x_axis_time_format",config:{...W.ZP.x_axis_time_format,default:"smart_date",description:`${h.oq}. ${Hn}`}}],[{name:"xAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Rotate x axis label"),choices:[[0,"0\xb0"],[45,"45\xb0"]],default:Qc,renderTrigger:!0,description:(0,l.t)("Input field supports custom rotation. e.g. 30 for 30\xb0")}}],...ci,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Y Axis"))],["y_axis_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic y-axis"),renderTrigger:!0,default:Oc,description:(0,l.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,l.t)("Minor Split Line"),renderTrigger:!0,default:zc,description:(0,l.t)("Draw split lines for minor y-axis ticks")}}],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,l.t)("Truncate Y Axis"),default:Wc,renderTrigger:!0,description:(0,l.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis Bounds"),renderTrigger:!0,default:Hc,description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}],[{name:"lineWidth",config:{type:"TextControl",label:(0,l.t)("line width of polyline"),description:(0,l.t)("Please enter the line width of the polyline"),default:jc,renderTrigger:!0,isInt:!0}}],[{name:"datalabelColor",config:{type:"ColorPickerControl",label:(0,l.t)("Data label color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:1},description:(0,l.t)("Please select a data label color")}}],[{name:"datalabelSize",config:{label:(0,l.t)("Data label size"),type:"SelectControl",description:(0,l.t)("Please set the font size"),default:14,choices:[[12,12],[14,14],[16,16],[18,18],[20,20],[24,24],[26,26],[28,28],[30,30],[32,32],[36,36]],renderTrigger:!0}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Axis pointer"))],[{name:"axisPointer_type",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Axis pointer type"),default:"line",options:[{label:(0,l.t)("line"),value:"line"},{label:(0,l.t)("shadow"),value:"shadow"},{label:(0,l.t)("cross"),value:"cross"},{label:(0,l.t)("none"),value:"none"}],description:(0,l.t)("Please select the type of axis pointer")}}],[{name:"axisPtr_ls_color",config:{type:"ColorPickerControl",label:(0,l.t)("Color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:.5},description:(0,l.t)("Please select the color of the guide line"),visibility:({controls:e})=>{var t,o;return Boolean("line"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value)||"cross"==(null==e||null==(o=e.axisPointer_type)?void 0:o.value))}}},{name:"axisPtr_ls_width",config:{type:"TextControl",label:(0,l.t)("Width"),default:1,renderTrigger:!0,isInt:!0,description:(0,l.t)("Please select the width of the guide line"),visibility:({controls:e})=>{var t,o;return Boolean("line"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value)||"cross"==(null==e||null==(o=e.axisPointer_type)?void 0:o.value))}}},{name:"axisPtr_ls_type",config:{type:"SelectControl",label:(0,l.t)("Axis pointer type"),renderTrigger:!0,default:"solid",options:[{label:(0,l.t)("solid"),value:"solid"},{label:(0,l.t)("dashed"),value:"dashed"},{label:(0,l.t)("dotted"),value:"dotted"}],description:(0,l.t)("Please select the type of axis pointer"),visibility:({controls:e})=>{var t,o;return Boolean("line"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value)||"cross"==(null==e||null==(o=e.axisPointer_type)?void 0:o.value))}}},{name:"axisPtr_ss_color",config:{type:"ColorPickerControl",label:(0,l.t)("Color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:.2},description:(0,l.t)("Please fill in the area color"),visibility:({controls:e})=>{var t;return Boolean("shadow"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value))}}}]]}],controlOverrides:{row_limit:{default:qc}},formDataOverrides:e=>({...e,metrics:(0,f.u)().popAllMetrics(),groupby:(0,f.u)().popAllColumns()})};var Jc=o(671425);const Kc=o.p+"Time-series_Chart.8ff488d2..jpg";class Xc extends s.Z{constructor(){super({buildQuery:pc,controlPanel:Uc,loadChart:()=>o.e(88551).then(o.bind(o,788551)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:Mt.O6?(0,l.t)("Swiss army knife for visualizing data. Choose between step, line, scatter, and bar charts. This viz type has many customization options as well."):(0,l.t)("Swiss army knife for visualizing time series data. Choose between step, line, scatter, and bar charts. This viz type has many customization options as well."),exampleGallery:[{url:Kc}],supportedAnnotationTypes:[ln.JJ.Event,ln.JJ.Formula,ln.JJ.Interval,ln.JJ.Timeseries],name:Mt.O6?(0,l.t)("Generic Chart"):(0,l.t)("Time-series Chart"),tags:[(0,l.t)("Advanced-Analytics"),(0,l.t)("Aesthetic"),(0,l.t)("Line"),(0,l.t)("Predictive"),(0,l.t)("Time"),(0,l.t)("Transformable")],thumbnail:Jc}),transformProps:Ic})}}var ed=o(246666);const{logAxis:td,minorSplitLine:od,truncateYAxis:rd,yAxisBounds:ad,zoomable:nd,xAxisLabelRotation:id,orientation:ld}=Wn;function sd(e){return[[(0,Z.tZ)(ed.U,null,(0,l.t)(e.toUpperCase()+" Axis"))],[{name:e+"_axis_title",config:{type:"TextControl",label:(0,l.t)("Axis Title"),renderTrigger:!0,default:"",description:(0,l.t)("Changing this control takes effect instantly")}}],[{name:e+"_axis_title_margin",config:{type:"SelectControl",freeForm:!0,clearable:!0,label:(0,l.t)("AXIS TITLE MARGIN"),renderTrigger:!0,default:g.sections.TITLE_MARGIN_OPTIONS[0],choices:(0,L.m)(g.sections.TITLE_MARGIN_OPTIONS),description:(0,l.t)("Changing this control takes effect instantly")}}],[{name:e+"_axis_title_position",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Axis Title Position"),renderTrigger:!0,default:g.sections.TITLE_POSITION_OPTIONS[0][0],choices:g.sections.TITLE_POSITION_OPTIONS,description:(0,l.t)("Changing this control takes effect instantly")}}],[{name:e+"TitleSize",config:{label:(0,l.t)("Axis Title Font size"),type:"SelectControl",description:(0,l.t)("Please set the font size"),default:14,choices:[[12,12],[14,14],[16,16],[18,18],[20,20],[24,24],[26,26],[28,28],[30,30],[32,32],[36,36]],renderTrigger:!0}}],[{name:e+"TitleColor",config:{type:"ColorPickerControl",label:(0,l.t)("Axis Title Color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:1},description:(0,l.t)("Please select a data label color")}}],[{name:e+"TitleAlign",config:{label:(0,l.t)("Axis Title Align"),type:"SelectControl",description:(0,l.t)("Please set the Align"),default:"center",choices:[["left",(0,l.t)("left")],["center",(0,l.t)("Center")],["right",(0,l.t)("right")]],renderTrigger:!0}}]]}function cd(e){const t="x"===e,o=e=>Boolean((null==e?void 0:e.orientation.value)===qn.vertical),r=e=>Boolean((null==e?void 0:e.orientation.value)===qn.horizontal);return[[{name:"x_axis_time_format",config:{...W.ZP.x_axis_time_format,default:"smart_date",description:`${h.oq}. ${Hn}`,visibility:({controls:e})=>t?o(e):r(e)}}],[{name:"xAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Rotate axis label"),choices:[[0,"0\xb0"],[45,"45\xb0"]],default:id,renderTrigger:!0,description:(0,l.t)("Input field supports custom rotation. e.g. 30 for 30\xb0"),visibility:({controls:e})=>t?o(e):r(e)}}],[{name:"y_axis_format",config:{...W.ZP.y_axis_format,label:(0,l.t)("Axis Format"),visibility:({controls:e})=>t?r(e):o(e)}}],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic axis"),renderTrigger:!0,default:td,description:(0,l.t)("Logarithmic axis"),visibility:({controls:e})=>t?r(e):o(e)}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,l.t)("Minor Split Line"),renderTrigger:!0,default:od,description:(0,l.t)("Draw split lines for minor axis ticks"),visibility:({controls:e})=>t?r(e):o(e)}}],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,l.t)("Truncate Axis"),default:rd,renderTrigger:!0,description:(0,l.t)("It\u2019s not recommended to truncate axis in Bar chart."),visibility:({controls:e})=>t?r(e):o(e)}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Axis Bounds"),renderTrigger:!0,default:ad,description:(0,l.t)("Bounds for the axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var a;return Boolean(null==e||null==(a=e.truncateYAxis)?void 0:a.value)&&(t?r(e):o(e))}}}]]}const dd={controlPanelSections:[g.sections.genericTime,g.sections.echartsTimeSeriesQueryWithXAxisSort,g.sections.advancedAnalyticsControls,g.sections.annotationsAndLayersControls,g.sections.forecastIntervalControls,{label:(0,l.t)("Chart Orientation"),expanded:!0,controlSetRows:[[{name:"orientation",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,l.t)("Bar orientation"),default:ld,options:[[qn.vertical,(0,l.t)("Vertical")],[qn.horizontal,(0,l.t)("Horizontal")]],description:(0,l.t)("Orientation of bar chart")}}]]},{label:(0,l.t)("Chart Title"),tabOverride:"customize",expanded:!0,controlSetRows:[...sd("x"),...sd("y")]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],...ai,[{name:"zoomable",config:{type:"CheckboxControl",label:(0,l.t)("Data Zoom"),default:nd,renderTrigger:!0,description:(0,l.t)("Enable data zooming controls")}}],...ei,[(0,Z.tZ)(ed.U,null,(0,l.t)("X Axis"))],...cd("x"),...ci,[(0,Z.tZ)(ed.U,null,(0,l.t)("Y Axis"))],...cd("y"),[(0,Z.tZ)(ed.U,null,(0,l.t)("Data label"))],[{name:"datalabelColor",config:{type:"ColorPickerControl",label:(0,l.t)("Data label color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:1},description:(0,l.t)("Please select a data label color")}}],[{name:"datalabelSize",config:{label:(0,l.t)("Data label size"),type:"SelectControl",description:(0,l.t)("Please set the font size"),default:14,choices:[[12,12],[14,14],[16,16],[18,18],[20,20],[24,24],[26,26],[28,28],[30,30],[32,32],[36,36]],renderTrigger:!0}}],[{name:"datalabelPosition",config:{label:(0,l.t)("Data label position"),type:"SelectControl",description:(0,l.t)("Please select a data label position"),default:"top",choices:[["top","top"],["inside","inside"],["bottom","bottom"]],renderTrigger:!0}}],[{name:"baropacity",config:{label:(0,l.t)("Opacity"),type:"SliderControl",description:(0,l.t)("Please set the opacity"),default:1,min:0,max:1,step:.01,renderTrigger:!0}}],[(0,Z.tZ)(ed.U,null,(0,l.t)("Axis pointer"))],[{name:"axisPointer_type",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Axis pointer type"),default:"line",options:[{label:(0,l.t)("line"),value:"line"},{label:(0,l.t)("shadow"),value:"shadow"},{label:(0,l.t)("cross"),value:"cross"},{label:(0,l.t)("none"),value:"none"}],description:(0,l.t)("Please select the type of axis pointer")}}],[{name:"axisPtr_ls_color",config:{type:"ColorPickerControl",label:(0,l.t)("Color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:.5},description:(0,l.t)("Please select the color of the guide line"),visibility:({controls:e})=>{var t,o;return Boolean("line"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value)||"cross"==(null==e||null==(o=e.axisPointer_type)?void 0:o.value))}}},{name:"axisPtr_ls_width",config:{type:"TextControl",label:(0,l.t)("Width"),default:1,renderTrigger:!0,isInt:!0,description:(0,l.t)("Please select the width of the guide line"),visibility:({controls:e})=>{var t,o;return Boolean("line"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value)||"cross"==(null==e||null==(o=e.axisPointer_type)?void 0:o.value))}}},{name:"axisPtr_ls_type",config:{type:"SelectControl",label:(0,l.t)("Type"),renderTrigger:!0,default:"dashed",options:[{label:(0,l.t)("solid"),value:"solid"},{label:(0,l.t)("dashed"),value:"dashed"},{label:(0,l.t)("dotted"),value:"dotted"}],description:(0,l.t)("Please select the type of axis pointer"),visibility:({controls:e})=>{var t,o;return Boolean("line"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value)||"cross"==(null==e||null==(o=e.axisPointer_type)?void 0:o.value))}}},{name:"axisPtr_ss_color",config:{type:"ColorPickerControl",label:(0,l.t)("Color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:.2},description:(0,l.t)("Please fill in the area color"),visibility:({controls:e})=>{var t;return Boolean("shadow"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value))}}}]]},{label:(0,l.t)("Advanced Setting"),expanded:!0,controlSetRows:[[{name:"conditional_formatting",config:{type:"ConditionalFormattingControl",renderTrigger:!0,label:(0,l.t)("Conditional formatting"),description:(0,l.t)("Apply conditional color formatting to metrics"),shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n,i,l,s,c;const d=null!=(r=null==e||null==(a=e.controls)||null==(n=a.metrics)?void 0:n.value)?r:[],u=null!=e&&null!=(i=e.datasource)&&i.hasOwnProperty("verbose_map")?null==e||null==(l=e.datasource)?void 0:l.verbose_map:null!=(s=null==e||null==(c=e.datasource)?void 0:c.columns)?s:{};return{removeIrrelevantConditions:"success"===(null==o?void 0:o.chartStatus),columnOptions:d.map((e=>{var t;return"string"===typeof e?{value:e,label:null!=(t=u[e])?t:e}:{value:e.label,label:e.label}})),verboseMap:u}}}}]]}],formDataOverrides:e=>({...e,metrics:(0,f.u)().popAllMetrics(),groupby:(0,f.u)().popAllColumns()})};var ud=o(675553);const md=o.p+"Bar1.05db33fe..png",pd=o.p+"Bar2.c41826d8..png",gd=o.p+"Bar3.0ace6ce6..png",hd=e=>Ic({...e,formData:{...e.formData,seriesType:$n.Bar}});class fd extends s.Z{constructor(){super({buildQuery:pc,controlPanel:dd,loadChart:()=>o.e(88551).then(o.bind(o,788551)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:Mt.O6?(0,l.t)("Bar Charts are used to show metrics as a series of bars."):(0,l.t)("Time-series Bar Charts are used to show the changes in a metric over time as a series of bars."),exampleGallery:[{url:md},{url:pd},{url:gd}],supportedAnnotationTypes:[ln.JJ.Event,ln.JJ.Formula,ln.JJ.Interval,ln.JJ.Timeseries],name:Mt.O6?(0,l.t)("Bar Chart"):(0,l.t)("Time-series Bar Chart"),tags:[(0,l.t)("ECharts"),(0,l.t)("Predictive"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Aesthetic"),(0,l.t)("Time"),(0,l.t)("Transformable"),(0,l.t)("Stacked"),(0,l.t)("Vertical"),(0,l.t)("Bar"),(0,l.t)("Popular")],thumbnail:ud}),transformProps:hd})}}var bd=o(727371);const yd=o.p+"Line1.7282d4c8..png",vd=o.p+"Line2.c13c8aae..png",xd=e=>Ic({...e,formData:{...e.formData,seriesType:$n.Line}});class Cd extends s.Z{constructor(){super({buildQuery:pc,controlPanel:Uc,loadChart:()=>o.e(88551).then(o.bind(o,788551)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:Mt.O6?(0,l.t)("Line chart is used to visualize measurements taken over a given category. Line chart is a type of chart which displays information as a series of data points connected by straight line segments. It is a basic type of chart common in many fields."):(0,l.t)("Time-series line chart is used to visualize repeated measurements taken over regular time intervals. Line chart is a type of chart which displays information as a series of data points connected by straight line segments. It is a basic type of chart common in many fields."),exampleGallery:[{url:yd},{url:vd}],supportedAnnotationTypes:[ln.JJ.Event,ln.JJ.Formula,ln.JJ.Interval,ln.JJ.Timeseries],name:Mt.O6?(0,l.t)("Line Chart"):(0,l.t)("Time-series Line Chart"),tags:[(0,l.t)("ECharts"),(0,l.t)("Predictive"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Aesthetic"),(0,l.t)("Line"),(0,l.t)("Popular")],thumbnail:bd}),transformProps:xd})}}const{logAxis:wd,markerEnabled:Td,markerSize:_d,minorSplitLine:Sd,rowLimit:Ad,truncateYAxis:Pd,yAxisBounds:kd,zoomable:Fd,xAxisLabelRotation:Rd}=Wn,Id={controlPanelSections:[g.sections.genericTime,g.sections.echartsTimeSeriesQuery,g.sections.advancedAnalyticsControls,g.sections.annotationsAndLayersControls,g.sections.forecastIntervalControls,g.sections.titleControls,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],...ni,[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,l.t)("Marker"),renderTrigger:!0,default:Td,description:(0,l.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,l.t)("Marker Size"),renderTrigger:!0,min:0,max:20,default:_d,description:(0,l.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],[{name:"zoomable",config:{type:"CheckboxControl",label:(0,l.t)("Data Zoom"),default:Fd,renderTrigger:!0,description:(0,l.t)("Enable data zooming controls")}}],...ei,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("X Axis"))],[{name:"x_axis_time_format",config:{...W.ZP.x_axis_time_format,default:"smart_date",description:`${h.oq}. ${Hn}`}}],[{name:"xAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Rotate x axis label"),choices:[[0,"0\xb0"],[45,"45\xb0"]],default:Rd,renderTrigger:!0,description:(0,l.t)("Input field supports custom rotation. e.g. 30 for 30\xb0")}}],...ci,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Y Axis"))],["y_axis_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic y-axis"),renderTrigger:!0,default:wd,description:(0,l.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,l.t)("Minor Split Line"),renderTrigger:!0,default:Sd,description:(0,l.t)("Draw split lines for minor y-axis ticks")}}],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,l.t)("Truncate Y Axis"),default:Pd,renderTrigger:!0,description:(0,l.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis Bounds"),renderTrigger:!0,default:kd,description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}]]}],controlOverrides:{row_limit:{default:Ad}},formDataOverrides:e=>({...e,metrics:(0,f.u)().popAllMetrics(),groupby:(0,f.u)().popAllColumns()})};var Ed=o(946568);const Ld=o.p+"SmoothLine1.97fed005..png",Dd=e=>Ic({...e,formData:{...e.formData,seriesType:$n.Smooth}});class Zd extends s.Z{constructor(){super({buildQuery:pc,controlPanel:Id,loadChart:()=>o.e(88551).then(o.bind(o,788551)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:Mt.O6?(0,l.t)("Smooth-line is a variation of the line chart. Without angles and hard edges, Smooth-line sometimes looks smarter and more professional."):(0,l.t)("Time-series Smooth-line is a variation of the line chart. Without angles and hard edges, Smooth-line sometimes looks smarter and more professional."),exampleGallery:[{url:Ld}],supportedAnnotationTypes:[ln.JJ.Event,ln.JJ.Formula,ln.JJ.Interval,ln.JJ.Timeseries],name:Mt.O6?(0,l.t)("Smooth Line"):(0,l.t)("Time-series Smooth Line"),tags:[(0,l.t)("ECharts"),(0,l.t)("Predictive"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Aesthetic"),(0,l.t)("Time"),(0,l.t)("Line"),(0,l.t)("Transformable")],thumbnail:Ed}),transformProps:Dd})}}const{logAxis:Md,markerEnabled:Od,markerSize:Nd,minorSplitLine:Bd,rowLimit:zd,truncateYAxis:Vd,yAxisBounds:qd,zoomable:$d,xAxisLabelRotation:Wd,symbol:Hd,symbolSize:Yd}=Wn,Qd={controlPanelSections:[g.sections.genericTime,g.sections.echartsTimeSeriesQuery,g.sections.advancedAnalyticsControls,g.sections.annotationsAndLayersControls,g.sections.forecastIntervalControls,g.sections.titleControls,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],...ai,[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,l.t)("Marker"),renderTrigger:!0,default:Od,description:(0,l.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,l.t)("Marker Size"),renderTrigger:!0,min:0,max:100,default:Nd,description:(0,l.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],[{name:"zoomable",config:{type:"CheckboxControl",label:(0,l.t)("Data Zoom"),default:$d,renderTrigger:!0,description:(0,l.t)("Enable data zooming controls")}}],...ei,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("X Axis"))],[{name:"x_axis_time_format",config:{...W.ZP.x_axis_time_format,default:"smart_date",description:`${h.oq}. ${Hn}`}}],[{name:"xAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Rotate x axis label"),choices:[[0,"0\xb0"],[45,"45\xb0"]],default:Wd,renderTrigger:!0,description:(0,l.t)("Input field supports custom rotation. e.g. 30 for 30\xb0")}}],[{name:"xlabelSize",config:{label:(0,l.t)("Font size of x axis labels"),type:"SelectControl",description:(0,l.t)("Please set the font size"),default:14,choices:[[12,12],[14,14],[16,16],[18,18],[20,20],[24,24],[26,26],[28,28],[30,30],[32,32],[36,36]],renderTrigger:!0}}],...ci,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Y Axis"))],["y_axis_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic y-axis"),renderTrigger:!0,default:Md,description:(0,l.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,l.t)("Minor Split Line"),renderTrigger:!0,default:Bd,description:(0,l.t)("Draw split lines for minor y-axis ticks")}}],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,l.t)("Truncate Y Axis"),default:Vd,renderTrigger:!0,description:(0,l.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis Bounds"),renderTrigger:!0,default:qd,description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}],[{name:"ylabelSize",config:{label:(0,l.t)("Font size of y axis labels"),type:"SelectControl",description:(0,l.t)("Please set the font size"),default:14,choices:[[12,12],[14,14],[16,16],[18,18],[20,20],[24,24],[26,26],[28,28],[30,30],[32,32],[36,36]],renderTrigger:!0}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Bubble Style"))],[{name:"symbol",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Symbol"),default:Hd,options:[{label:(0,l.t)("Empty circle"),value:"emptyCircle"},{label:(0,l.t)("Circle"),value:"circle"},{label:(0,l.t)("Rectangle"),value:"rect"},{label:(0,l.t)("Triangle"),value:"triangle"},{label:(0,l.t)("Diamond"),value:"diamond"},{label:(0,l.t)("Pin"),value:"pin"},{label:(0,l.t)("Arrow"),value:"arrow"},{label:(0,l.t)("None"),value:"none"}],description:(0,l.t)("Please select a bubble type")}}],[{name:"symbolSize",config:{type:"SliderControl",label:(0,l.t)("Symbol size"),renderTrigger:!0,min:5,max:30,step:2,default:Yd,description:(0,l.t)("Size of edge symbols")}}],[{name:"datalabelColor",config:{type:"ColorPickerControl",label:(0,l.t)("Data label color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:1},description:(0,l.t)("Please select a data label color")}}],[{name:"datalabelSize",config:{label:(0,l.t)("Data label size"),type:"SelectControl",description:(0,l.t)("Please set the font size"),default:14,choices:[[12,12],[14,14],[16,16],[18,18],[20,20],[24,24],[26,26],[28,28],[30,30],[32,32],[36,36]],renderTrigger:!0}}],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Axis pointer"))],[{name:"axisPointer_type",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Axis pointer type"),default:"line",options:[{label:(0,l.t)("line"),value:"line"},{label:(0,l.t)("shadow"),value:"shadow"},{label:(0,l.t)("cross"),value:"cross"},{label:(0,l.t)("none"),value:"none"}],description:(0,l.t)("Please select the type of axis pointer")}}],[{name:"axisPtr_ls_color",config:{type:"ColorPickerControl",label:(0,l.t)("Color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:.5},description:(0,l.t)("Please select the color of the guide line"),visibility:({controls:e})=>{var t,o;return Boolean("line"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value)||"cross"==(null==e||null==(o=e.axisPointer_type)?void 0:o.value))}}},{name:"axisPtr_ls_width",config:{type:"TextControl",label:(0,l.t)("Width"),default:1,renderTrigger:!0,isInt:!0,description:(0,l.t)("Please select the width of the guide line"),visibility:({controls:e})=>{var t,o;return Boolean("line"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value)||"cross"==(null==e||null==(o=e.axisPointer_type)?void 0:o.value))}}},{name:"axisPtr_ls_type",config:{type:"SelectControl",label:(0,l.t)("Type"),renderTrigger:!0,default:"solid",options:[{label:(0,l.t)("solid"),value:"solid"},{label:(0,l.t)("dashed"),value:"dashed"},{label:(0,l.t)("dotted"),value:"dotted"}],description:(0,l.t)("Please select the type of axis pointer"),visibility:({controls:e})=>{var t,o;return Boolean("line"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value)||"cross"==(null==e||null==(o=e.axisPointer_type)?void 0:o.value))}}},{name:"axisPtr_ss_color",config:{type:"ColorPickerControl",label:(0,l.t)("Color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:.2},description:(0,l.t)("Please fill in the area color"),visibility:({controls:e})=>{var t;return Boolean("shadow"==(null==e||null==(t=e.axisPointer_type)?void 0:t.value))}}}]]}],controlOverrides:{row_limit:{default:zd}},formDataOverrides:e=>({...e,metrics:(0,f.u)().popAllMetrics(),groupby:(0,f.u)().popAllColumns()})};var jd=o(426619);const Gd=o.p+"Scatter1.665fe2f7..png",Ud=e=>Ic({...e,formData:{...e.formData,seriesType:$n.Scatter}});class Jd extends s.Z{constructor(){super({buildQuery:pc,controlPanel:Qd,loadChart:()=>o.e(88551).then(o.bind(o,788551)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:Mt.O6?(0,l.t)("Scatter Plot has the horizontal axis in linear units, and the points are connected in order. It shows a statistical relationship between two variables."):(0,l.t)("Time-series Scatter Plot has time on the horizontal axis in linear units, and the points are connected in order. It shows a statistical relationship between two variables."),exampleGallery:[{url:Gd}],supportedAnnotationTypes:[ln.JJ.Event,ln.JJ.Formula,ln.JJ.Interval,ln.JJ.Timeseries],name:Mt.O6?(0,l.t)("Scatter Plot"):(0,l.t)("Time-series Scatter Plot"),tags:[(0,l.t)("ECharts"),(0,l.t)("Predictive"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Aesthetic"),(0,l.t)("Time"),(0,l.t)("Transformable"),(0,l.t)("Scatter"),(0,l.t)("Popular")],thumbnail:jd}),transformProps:Ud})}}const{area:Kd,logAxis:Xd,markerEnabled:eu,markerSize:tu,minorSplitLine:ou,opacity:ru,rowLimit:au,truncateYAxis:nu,yAxisBounds:iu,zoomable:lu,xAxisLabelRotation:su}=Wn,cu={controlPanelSections:[g.sections.genericTime,g.sections.echartsTimeSeriesQuery,g.sections.advancedAnalyticsControls,g.sections.annotationsAndLayersControls,g.sections.forecastIntervalControls,g.sections.titleControls,{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],[{name:"seriesType",config:{type:"SelectControl",label:(0,l.t)("Step type"),renderTrigger:!0,default:$n.Start,choices:[[$n.Start,(0,l.t)("Start")],[$n.Middle,(0,l.t)("Middle")],[$n.End,(0,l.t)("End")]],description:(0,l.t)("Defines whether the step should appear at the beginning, middle or end between two data points")}}],...ai,[{name:"area",config:{type:"CheckboxControl",label:(0,l.t)("Area Chart"),renderTrigger:!0,default:Kd,description:(0,l.t)("Draw area under curves. Only applicable for line types.")}}],[{name:"opacity",config:{type:"SliderControl",label:(0,l.t)("Area chart opacity"),renderTrigger:!0,min:0,max:1,step:.1,default:ru,description:(0,l.t)("Opacity of Area Chart. Also applies to confidence band."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.area)?void 0:t.value)}}}],[{name:"markerEnabled",config:{type:"CheckboxControl",label:(0,l.t)("Marker"),renderTrigger:!0,default:eu,description:(0,l.t)("Draw a marker on data points. Only applicable for line types.")}}],[{name:"markerSize",config:{type:"SliderControl",label:(0,l.t)("Marker Size"),renderTrigger:!0,min:0,max:20,default:tu,description:(0,l.t)("Size of marker. Also applies to forecast observations."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.markerEnabled)?void 0:t.value)}}}],[{name:"zoomable",config:{type:"CheckboxControl",label:(0,l.t)("Data Zoom"),default:lu,renderTrigger:!0,description:(0,l.t)("Enable data zooming controls")}}],...ei,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("X Axis"))],[{name:"x_axis_time_format",config:{...W.ZP.x_axis_time_format,default:"smart_date",description:`${h.oq}. ${Hn}`}}],[{name:"xAxisLabelRotation",config:{type:"SelectControl",freeForm:!0,clearable:!1,label:(0,l.t)("Rotate x axis label"),choices:[[0,"0\xb0"],[45,"45\xb0"]],default:su,renderTrigger:!0,description:(0,l.t)("Input field supports custom rotation. e.g. 30 for 30\xb0")}}],...ci,[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Y Axis"))],["y_axis_format"],[{name:"logAxis",config:{type:"CheckboxControl",label:(0,l.t)("Logarithmic y-axis"),renderTrigger:!0,default:Xd,description:(0,l.t)("Logarithmic y-axis")}}],[{name:"minorSplitLine",config:{type:"CheckboxControl",label:(0,l.t)("Minor Split Line"),renderTrigger:!0,default:ou,description:(0,l.t)("Draw split lines for minor y-axis ticks")}}],[{name:"truncateYAxis",config:{type:"CheckboxControl",label:(0,l.t)("Truncate Y Axis"),default:nu,renderTrigger:!0,description:(0,l.t)("Truncate Y Axis. Can be overridden by specifying a min or max bound.")}}],[{name:"y_axis_bounds",config:{type:"BoundsControl",label:(0,l.t)("Y Axis Bounds"),renderTrigger:!0,default:iu,description:(0,l.t)("Bounds for the Y-axis. When left empty, the bounds are dynamically defined based on the min/max of the data. Note that this feature will only expand the axis range. It won't narrow the data's extent."),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.truncateYAxis)?void 0:t.value)}}}]]}],controlOverrides:{row_limit:{default:au}},formDataOverrides:e=>({...e,metrics:(0,f.u)().popAllMetrics(),groupby:(0,f.u)().popAllColumns()})};var du=o(694843);const uu=o.p+"Step1.297e1ce0..png",mu=o.p+"Step2.10e90fb7..png";class pu extends s.Z{constructor(){super({buildQuery:pc,controlPanel:cu,loadChart:()=>o.e(88551).then(o.bind(o,788551)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Evolution"),credits:["https://echarts.apache.org"],description:Mt.O6?(0,l.t)("Stepped-line graph (also called step chart) is a variation of line chart but with the line forming a series of steps between data points. A step chart can be useful when you want to show the changes that occur at irregular intervals."):(0,l.t)("Time-series Stepped-line graph (also called step chart) is a variation of line chart but with the line forming a series of steps between data points. A step chart can be useful when you want to show the changes that occur at irregular intervals."),exampleGallery:[{url:uu},{url:mu}],supportedAnnotationTypes:[ln.JJ.Event,ln.JJ.Formula,ln.JJ.Interval,ln.JJ.Timeseries],name:Mt.O6?(0,l.t)("Stepped Line"):(0,l.t)("Time-series Stepped Line"),tags:[(0,l.t)("ECharts"),(0,l.t)("Predictive"),(0,l.t)("Advanced-Analytics"),(0,l.t)("Aesthetic"),(0,l.t)("Time"),(0,l.t)("Transformable"),(0,l.t)("Stacked")],thumbnail:du}),transformProps:Ic})}}function gu(e){const{x_axis:t,granularity_sqla:o,groupby:r}=e,a=[...(0,S.Z)(t||o),...(0,S.Z)(r)];return(0,Ut.Z)(e,(e=>[{...e,columns:a,orderby:null==a?void 0:a.map((e=>[e,!0]))}]))}const hu={controlPanelSections:[g.sections.genericTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[Mt.O6?"x_axis":null],[Mt.O6?"time_grain_sqla":null],["groupby"],["metric"],["adhoc_filters"],["row_limit"]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[[ti],[{name:"show_legend",config:{type:"CheckboxControl",label:(0,l.t)("Show legend"),renderTrigger:!0,default:!1,description:(0,l.t)("Whether to display a legend for the chart")}}],[(0,Z.tZ)(ed.U,null,(0,l.t)("Series colors"))],[{name:"increase_color",config:{label:(0,l.t)("Increase"),type:"ColorPickerControl",default:{r:90,g:193,b:137,a:1},renderTrigger:!0}},{name:"decrease_color",config:{label:(0,l.t)("Decrease"),type:"ColorPickerControl",default:{r:224,g:67,b:85,a:1},renderTrigger:!0}},{name:"total_color",config:{label:(0,l.t)("Total"),type:"ColorPickerControl",default:{r:102,g:102,b:102,a:1},renderTrigger:!0}}],[(0,Z.tZ)(ed.U,null,(0,l.t)("X Axis"))],[{name:"x_axis_label",config:{type:"TextControl",label:(0,l.t)("X Axis Label"),renderTrigger:!0,default:""}}],[{name:"x_axis_time_format",config:{...W.ZP.x_axis_time_format,default:h._r,description:`${h.oq}.`}}],[{name:"x_ticks_layout",config:{type:"SelectControl",label:(0,l.t)("X Tick Layout"),choices:(0,L.m)(["auto","flat","45\xb0","90\xb0","staggered"]),default:"auto",clearable:!1,renderTrigger:!0,description:(0,l.t)("The way the ticks are laid out on the X-axis")}}],[(0,Z.tZ)(ed.U,null,(0,l.t)("Y Axis"))],[{name:"y_axis_label",config:{type:"TextControl",label:(0,l.t)("Y Axis Label"),renderTrigger:!0,default:""}}],["y_axis_format"]]}],controlOverrides:{groupby:{label:(0,l.t)("Breakdowns"),description:(0,l.t)("Breaks down the series by the category specified in this control.\n      This can help viewers understand how each category affects the overall value."),multi:!1}}};var fu=o(537208),bu=o(25130);const yu=(0,l.t)("Total"),vu=(0,l.t)("Assist"),xu={INCREASE:(0,l.t)("Increase"),DECREASE:(0,l.t)("Decrease"),TOTAL:(0,l.t)("Total")},Cu="-";function wu(e){const{width:t,height:o,formData:r,queriesData:a,hooks:n,theme:i,inContextMenu:l}=e,s={},{data:u=[]}=a[0],m=(0,rn.IW)(a[0]),{setDataMask:p=(()=>{}),onContextMenu:g}=n,{currencyFormat:h,granularitySqla:f="",groupby:b,increaseColor:y,decreaseColor:v,totalColor:x,metric:C="",xAxis:w,xTicksLayout:T,xAxisTimeFormat:_,showLegend:A,yAxisLabel:P,xAxisLabel:k,yAxisFormat:F,showValue:R,legendType:I,legendOrientation:E}=r,L=null!=h&&h.symbol?new fu.Z({d3Format:F,currency:h}):(0,c.JB)(F),D=e=>{const{data:t}=e,{originalValue:o}=t;return L(o)},Z=(0,S.Z)(b),M=Z.length?Z[0]:void 0,O=(0,Ot.GA)(M)?M.label:M,N=w||f,B=(0,Ot.GA)(N)?N.label:N,z=(0,ht.Z)(C),V=function({data:e,xAxis:t,metric:o,breakdown:r}){const a=e.reduce(((e,o)=>{const r=o[t],a=e.get(r)||[];return a.push(o),e.set(r,a),e}),new Map),n=[];if(r)a.forEach(((e,a)=>{const i=e,l=i.reduce(((e,t)=>{var r;return e+(null!=(r=t[o])?r:0)}),0);i.push({[t]:a,[r]:yu,[o]:l}),n.push(...i)}));else{let e=0;a.forEach(((r,a)=>{const i=r.reduce(((e,t)=>{var r;return e+(null!=(r=t[o])?r:0)}),0);n.push({[t]:a,[o]:i}),e+=i})),n.push({[t]:yu,[o]:e})}return n}({data:u,breakdown:O,xAxis:B,metric:z}),q=[],$=[],W=[],H=[];let Y=0;V.forEach(((e,t,o)=>{const r=o.slice(0,t+1).reduce(((e,t,o)=>{var r;if(O){if(t[O]!==yu||0===o)return e+(null!=(r=t[z])?r:0)}else if(t[B]!==yu){var a;return e+(null!=(a=t[z])?a:0)}return e}),0),a=O&&e[O]===yu||e[B]===yu,n=e[z];let i=n;const l=Math.sign(Y)!==Math.sign(r);l&&(i=Math.sign(i)*(Math.abs(i)-Math.abs(Y))),a?($.push({value:Cu}),W.push({value:Cu}),H.push({value:r,originalValue:r,totalSum:r})):i<0?($.push({value:Cu}),W.push({value:r<0?i:-i,originalValue:n,totalSum:r}),H.push({value:Cu})):($.push({value:r>0?i:-i,originalValue:n,totalSum:r}),W.push({value:Cu}),H.push({value:Cu}));const s=l?i>0?(0,bu.vq)(y.r,y.g,y.b):(0,bu.vq)(v.r,v.g,v.b):"transparent";a?q.push({value:Cu}):0===t?q.push({value:0}):l||Math.abs(r)>Math.abs(Y)?q.push({value:Y,itemStyle:{color:s,opacity:1}}):q.push({value:r,itemStyle:{color:s,opacity:1}}),Y=r}));const Q=[],j=V.map((e=>{let t=B,o=e[B];return O&&e[O]!==yu&&(t=O,o=e[O]),o||(o=Fa.li),"string"!==typeof o&&"number"!==typeof o&&(o=String(o)),Q.push(t),o})),G=(e,t)=>e===yu?yu:m[Q[t]]===gt.Z.TEMPORAL?"string"===typeof e?(0,d.bt)(_)(Number.parseInt(e,10)):(0,d.bt)(_)(e):String(e);let U;U="45\xb0"===T?{rotate:-45}:"90\xb0"===T?{rotate:-90}:"flat"===T?{rotate:0}:"staggered"===T?{rotate:-45}:{show:!0},U.formatter=G,U.hideOverlap=!1;const J={type:"bar",stack:"stack",emphasis:{disabled:!0}},K=[{...J,name:vu,data:q},{...J,name:xu.INCREASE,label:{show:R,position:"top",formatter:D},itemStyle:{color:(0,bu.vq)(y.r,y.g,y.b)},data:$},{...J,name:xu.DECREASE,label:{show:R,position:"bottom",formatter:D},itemStyle:{color:(0,bu.vq)(v.r,v.g,v.b)},data:W},{...J,name:xu.TOTAL,label:{show:R,position:"top",formatter:D},itemStyle:{color:(0,bu.vq)(x.r,x.g,x.b)},data:H}],X={grid:{...nn.oe,top:7*i.gridUnit,bottom:7*i.gridUnit,left:5*i.gridUnit,right:7*i.gridUnit},legend:{...(0,rn.zp)(I,E,A),data:[xu.INCREASE,xu.DECREASE,xu.TOTAL]},xAxis:{data:j,type:"category",name:k,nameTextStyle:{padding:[4*i.gridUnit,0,0,0]},nameLocation:"middle",axisLabel:U},yAxis:{...nn.C0,type:"value",nameTextStyle:{padding:[0,0,5*i.gridUnit,0]},nameLocation:"middle",name:P,axisLabel:{formatter:L}},tooltip:{...Ra(s),appendToBody:!0,trigger:"axis",show:!l,formatter:e=>function({theme:e,params:t,breakdownName:o,defaultFormatter:r,xAxisFormatter:a}){const n=t.find((e=>e.seriesName!==vu&&e.data.value!==Cu));if(!n)return"";const i=(null==n?void 0:n.seriesName)===xu.TOTAL;if(!n)return Fa.li;const l=(t,o)=>`\n    <div>\n      <span style="\n        font-size:${e.typography.sizes.m}px;\n        color:${e.colors.grayscale.base};\n        font-weight:${e.typography.weights.normal};\n        margin-left:${.5*e.gridUnit}px;"\n      >\n        ${t}:\n      </span>\n      <span style="\n        float:right;\n        margin-left:${5*e.gridUnit}px;\n        font-size:${e.typography.sizes.m}px;\n        color:${e.colors.grayscale.base};\n        font-weight:${e.typography.weights.bold}"\n      >\n        ${o}\n      </span>\n    </div>\n  `;let s="";return i&&!o||(s=a(n.name,n.dataIndex)),i||(s+=l(n.seriesName,r(n.data.originalValue))),s+=l(yu,r(n.data.totalSum)),s}({theme:i,params:e,breakdownName:O,defaultFormatter:L,xAxisFormatter:G})},series:K};return{refs:s,formData:r,width:t,height:o,echartOptions:X,onContextMenu:g}}var Tu=o(166300);const _u=o.p+"example1.56ea6b14..png",Su=o.p+"example2.15d8bad2..png",Au=o.p+"example3.89a5d8fd..png";class Pu extends s.Z{constructor(){super({buildQuery:gu,controlPanel:hu,loadChart:()=>o.e(62580).then(o.bind(o,62580)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART],credits:["https://echarts.apache.org"],category:(0,l.t)("Evolution"),description:(0,l.t)("A waterfall chart is a form of data visualization that helps in understanding\n          the cumulative effect of sequentially introduced positive or negative values.\n          These intermediate values can either be time based or category based."),exampleGallery:[{url:_u},{url:Su},{url:Au}],name:(0,l.t)("Waterfall Chart"),tags:[(0,l.t)("Categorical"),(0,l.t)("Comparison"),(0,l.t)("ECharts"),(0,l.t)("Popular")],thumbnail:Tu}),transformProps:wu})}}const ku={label:{position:"left",fontSize:15},animation:!0,animationDuration:500,animationEasing:"cubicOut",lineStyle:{color:"source",width:1.5}},Fu={id:"",parent:"",name:"",rootNodeId:"",layout:"orthogonal",orient:"LR",symbol:"emptyCircle",symbolSize:7,roam:!0,nodeLabelPosition:"left",childLabelPosition:"bottom",emphasis:"descendant"},Ru={...W.ZP.entity,clearable:!1},Iu={...W.ZP.entity,clearable:!0,validators:[]},Eu={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"id",config:{...Ru,label:(0,l.t)("Id"),description:(0,l.t)("Name of the id column")}}],[{name:"parent",config:{...Ru,label:(0,l.t)("Parent"),description:(0,l.t)("Name of the column containing the id of the parent node")}}],[{name:"name",config:{...Iu,label:(0,l.t)("Name"),description:(0,l.t)("Optional name of the data column.")}}],[{name:"root_node_id",config:{...Iu,renderTrigger:!0,type:"TextControl",label:(0,l.t)("Root node id"),description:(0,l.t)("Id of root node of the tree.")}}],[{name:"metric",config:{...Iu,type:(0,n.c)(n.T.ENABLE_EXPLORE_DRAG_AND_DROP)?"DndMetricSelect":"MetricsControl",label:(0,l.t)("Metric"),description:(0,l.t)("Metric for node values")}}],["adhoc_filters"],["row_limit"]]},{label:(0,l.t)("Chart options"),expanded:!0,controlSetRows:[[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Layout"))],[{name:"layout",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,l.t)("Tree layout"),default:Fu.layout,options:[["orthogonal",(0,l.t)("Orthogonal")],["radial",(0,l.t)("Radial")]],description:(0,l.t)("Layout type of tree")}}],[{name:"orient",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,l.t)("Tree orientation"),default:Fu.orient,options:[["LR",(0,l.t)("Left to Right")],["RL",(0,l.t)("Right to Left")],["TB",(0,l.t)("Top to Bottom")],["BT",(0,l.t)("Bottom to Top")]],description:(0,l.t)("Orientation of tree"),visibility:({form_data:{layout:e}})=>"orthogonal"===(e||Fu.layout)}}],[{name:"node_label_position",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,l.t)("Node label position"),default:Fu.nodeLabelPosition,options:[["left",(0,l.t)("left")],["top",(0,l.t)("top")],["right",(0,l.t)("right")],["bottom",(0,l.t)("bottom")]],description:(0,l.t)("Position of intermediate node label on tree")}}],[{name:"child_label_position",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,l.t)("Child label position"),default:Fu.childLabelPosition,options:[["left",(0,l.t)("left")],["top",(0,l.t)("top")],["right",(0,l.t)("right")],["bottom",(0,l.t)("bottom")]],description:(0,l.t)("Position of child node label on tree")}}],[{name:"emphasis",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,l.t)("Emphasis"),default:Fu.emphasis,options:[["ancestor",(0,l.t)("ancestor")],["descendant",(0,l.t)("descendant")]],description:(0,l.t)("Which relatives to highlight on hover"),visibility:({form_data:{layout:e}})=>"orthogonal"===(e||Fu.layout)}}],[{name:"symbol",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Symbol"),default:Fu.symbol,options:[{label:(0,l.t)("Empty circle"),value:"emptyCircle"},{label:(0,l.t)("Circle"),value:"circle"},{label:(0,l.t)("Rectangle"),value:"rect"},{label:(0,l.t)("Triangle"),value:"triangle"},{label:(0,l.t)("Diamond"),value:"diamond"},{label:(0,l.t)("Pin"),value:"pin"},{label:(0,l.t)("Arrow"),value:"arrow"},{label:(0,l.t)("None"),value:"none"}],description:(0,l.t)("Layout type of tree")}}],[{name:"symbolSize",config:{type:"SliderControl",label:(0,l.t)("Symbol size"),renderTrigger:!0,min:5,max:30,step:2,default:Fu.symbolSize,description:(0,l.t)("Size of edge symbols")}}],[{name:"roam",config:{type:"SelectControl",label:(0,l.t)("Enable graph roaming"),renderTrigger:!0,default:Fu.roam,choices:[[!1,(0,l.t)("Disabled")],["scale",(0,l.t)("Scale only")],["move",(0,l.t)("Move only")],[!0,(0,l.t)("Scale and Move")]],description:(0,l.t)("Whether to enable changing graph position and scaling.")}}]]}],formDataOverrides:e=>({...e,metric:(0,f.u)().shiftMetric()})};function Lu(e){const{width:t,height:o,formData:r,queriesData:a}=e,n={},i=a[0].data||[],{id:l,parent:s,name:c,metric:d="",rootNodeId:u,layout:m,orient:p,symbol:g,symbolSize:h,roam:f,nodeLabelPosition:b,childLabelPosition:y,emphasis:v}={...Fu,...r},x=(0,ht.Z)(d),C=c||l;function w(e){const t=function(e){let t="";return i.some((o=>o[l].toString()===e&&(t=o[C],!0))),t}(e),o={name:t,children:[]},r=[],a={};if(!t)return o;for(let e=0;e<i.length;e+=1){a[i[e][l]]=e,r[e]=[]}for(let t=0;t<i.length;t+=1){var n;const l=i[t];if((null==(n=l[s])?void 0:n.toString())===e){var c;null==(c=o.children)||c.push({name:l[C],children:r[t],value:l[x]})}else{const e=l[s];if(i[a[e]]){r[a[e]].push({name:l[C],children:r[t],value:l[x]})}}}return o}let T={};if(u)T=w(u);else{const e={};i.forEach((t=>{const o=t[s];o in e?e[o].push({id:t[l]}):e[o]=[{id:t[l]}]}));let t=0;Object.keys(e).forEach((o=>{if(1===e[o].length){const r=w(e[o][0].id),a=function(e){let t=0;return function e(o){o.children.forEach((t=>{e(t)})),t+=1}(e),t}(r);a>t&&(t=a,T=r)}}))}const _=[{type:"tree",data:[T],label:{...ku.label,position:b},emphasis:{focus:v},animation:ku.animation,layout:m,orient:p,symbol:g,roam:f,symbolSize:h,lineStyle:ku.lineStyle,select:ku.select,leaves:{label:{position:y}}}],S={animationDuration:ku.animationDuration,animationEasing:ku.animationEasing,series:_,tooltip:{...Ra(n),trigger:"item",triggerOn:"mousemove",formatter:e=>function({params:e,metricLabel:t}){const{value:o,treeAncestors:r}=e;return[`<div>${(null!=r?r:[]).map((e=>(null==e?void 0:e.name)||"")).filter((e=>""!==e)).join(" \u25b8 ")}</div>`,o?`${t}: ${o}`:""].join("")}({params:e,metricLabel:x})}};return{formData:r,width:t,height:o,echartOptions:S,refs:n}}var Du=o(290370);const Zu=o.p+"tree.4b27c6bb..png";function Mu(e){return(0,Ut.Z)(e,{queryFields:{id:"columns",parent:"columns",name:"columns"}})}class Ou extends s.Z{constructor(){super({buildQuery:Mu,controlPanel:Eu,loadChart:()=>o.e(81130).then(o.bind(o,281130)),metadata:new i.Z({category:(0,l.t)("Part of a Whole"),credits:["https://echarts.apache.org"],description:(0,l.t)("Visualize multiple levels of hierarchy using a familiar tree-like structure."),exampleGallery:[{url:Zu}],name:(0,l.t)("Tree Chart"),tags:[(0,l.t)("Categorical"),(0,l.t)("ECharts"),(0,l.t)("Multi-Levels"),(0,l.t)("Relational"),(0,l.t)("Structural")],thumbnail:Du}),transformProps:Lu})}}var Nu;!function(e){e.Key="key",e.Value="value",e.KeyValue="key_value"}(Nu||(Nu={}));const Bu={groupby:[],numberFormat:"SMART_NUMBER",labelType:Nu.Key,showLabels:!1,dateFormat:"smart_date"};function zu(e){const{formData:t,height:o,hooks:r,filterState:a,queriesData:n,width:i,theme:s,inContextMenu:u,emitCrossFilters:m,ownState:p}=e,{data:g=[]}=n[0],h=(0,rn.IW)(n[0]),{groupby:f=[],columns:b=[],metric:y="",secondaryMetric:v="",colorScheme:x,linearColorScheme:C,labelType:w,numberFormat:T,dateFormat:_,showLabels:S,showLabelsThreshold:A,showTotal:P,sliceId:k,enableChartDrilldown:F,drilldownColumns:R=[]}=t,I={},E=(0,c.JB)(T),L=3.6*(A||0),D={top:3*s.gridUnit,right:s.gridUnit,bottom:3*s.gridUnit,left:s.gridUnit},Z=i-D.left-D.right,M=o-D.top-D.bottom,O=Math.min(Z,M)/2,{setDataMask:N=(()=>{}),onContextMenu:B}=r,z=new Map,V=(0,ht.Z)(y),q=v?(0,ht.Z)(v):void 0;let $=b.map(on.Z);const W=p.listValueFilter||[];if(F&&W.length){$=[[...b,...R][W.length]]}const H=Mi(g,$,V,q),Y=H.reduce(((e,t)=>e+t.value),0),Q=H.reduce(((e,t)=>e+t.secondaryValue),0),j=So.getScale(x);let G,U=!0;if(v&&y!==v){var J,K;const e=function(e,t){let o=0,r=0,a=null;return function e(n){n.forEach((n=>{var i;null!=(i=n.children)&&i.length&&e(n.children),a=t(n),null!==a&&(o>a&&(o=a),r<a&&(r=a))}))}(e),[o,r]}(H,(e=>e.secondaryValue/e.value));U=!1,G=null==(J=(0,To.Z)())||null==(K=J.get(C))?void 0:K.createLinearScale(e)}U?j(V,k):G(Q/Y);const X=(e,t,o)=>e.map((e=>{var r,n,i;const{name:l,value:s,secondaryValue:c,groupBy:u}=e,m=[...o||[],l];let p=(0,rn.mj)(l,{numberFormatter:E,timeFormatter:(0,d.bt)(_),...h[u]&&{coltype:h[u]}});const g=t.concat(p);let f={records:m,name:p,value:s,secondaryValue:c,itemStyle:{color:U?j(p,k):G(c/s)}};return null!=(r=e.children)&&r.length?f.children=X(e.children,g,m):p=g.join(","),z.set(p,g),!1===(null==(n=a.selectedValues)||null==(i=n[0])?void 0:i.includes(p))&&(f={...f,itemStyle:{...f.itemStyle,opacity:Fa.ZV.SemiTransparent},label:{color:`rgba(0, 0, 0, ${Fa.ZV.SemiTransparent})`}}),f})),ee={grid:{...nn.oe},tooltip:{...Ra(I),show:!u,trigger:"item",formatter:e=>function({params:e,numberFormatter:t,colorByCategory:o,totalValue:r,metricLabel:a,secondaryMetricLabel:n,theme:i}){const{data:l,treePathInfo:s=[]}=e,d=l,u=t(d.value),m=t(d.secondaryValue),p=(0,c.JB)(mt.Z.PERCENT_2_POINT),g=p(d.secondaryValue/d.value),h=p(d.value/r),f=s.length>2?s[s.length-2]:void 0,b=[`<div style="\n      font-size: ${i.typography.sizes.m}px;\n      color: ${i.colors.grayscale.base}"\n     >`,`<div style="font-weight: ${i.typography.weights.bold}">\n      ${d.name}\n     </div>`,`<div">\n      ${h} of total\n     </div>`];if(f){const e=p(d.value/f.value);b.push(`\n    <div>\n      ${e} of ${f.name}\n    </div>`)}return b.push(`<div>\n    ${a}: ${u}${o?"":`, ${n}: ${m}`}\n     </div>`,o?"":`<div>${a}/${n}: ${g}</div>`),b.push("</div>"),b.join("\n")}({params:e,numberFormatter:E,colorByCategory:U,totalValue:Y,metricLabel:V,secondaryMetricLabel:q,theme:s})},series:[{type:"sunburst",...D,nodeClick:!1,emphasis:{focus:"ancestor",label:{show:S}},label:{width:.6*O/(b.length||1),show:S,formatter:e=>function({params:e,labelType:t,numberFormatter:o}){const{name:r="",value:a}=e,n=o(a);switch(t){case Nu.Key:return r;case Nu.Value:return n;case Nu.KeyValue:return`${r}: ${n}`;default:return r}}({params:e,numberFormatter:E,labelType:w}),color:s.colors.grayscale.dark2,minAngle:L,overflow:"breakAll"},radius:[.3*O,O],data:X(H,[])}],graphic:P?{type:"text",top:"center",left:"center",style:{text:(0,l.t)("Total: %s",E(Y)),fontSize:16,fontWeight:"bold"},z:10}:null};return{formData:t,width:i,height:o,echartOptions:ee,setDataMask:N,emitCrossFilters:m,labelMap:Object.fromEntries(z),groupby:f,selectedValues:a.selectedValues||[],onContextMenu:B,refs:I}}var Vu=o(222134);const{labelType:qu,numberFormat:$u,showLabels:Wu}=Bu,Hu={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["columns"],["metric"],["secondary_metric"],["adhoc_filters"],["row_limit"],[{name:"sort_by_metric",config:{type:"CheckboxControl",label:(0,l.t)("Sort by metric"),description:(0,l.t)("Whether to sort results by the selected metric in descending order.")}}],[g.sections.enableChartDrilldown],[g.sections.drilldownColumns]]},{label:(0,l.t)("Chart Options"),expanded:!0,controlSetRows:[["color_scheme"],["linear_color_scheme"],[(0,Z.tZ)("div",{className:"section-header"},(0,l.t)("Labels"))],[{name:"show_labels",config:{type:"CheckboxControl",label:(0,l.t)("Show Labels"),renderTrigger:!0,default:Wu,description:(0,l.t)("Whether to display the labels.")}}],[{name:"show_labels_threshold",config:{type:"TextControl",label:(0,l.t)("Percentage threshold"),renderTrigger:!0,isFloat:!0,default:5,description:(0,l.t)("Minimum threshold in percentage points for showing labels.")}}],[{name:"show_total",config:{type:"CheckboxControl",label:(0,l.t)("Show Total"),default:!1,renderTrigger:!0,description:(0,l.t)("Whether to display the aggregate count")}}],[{name:"label_type",config:{type:"SelectControl",label:(0,l.t)("Label Type"),default:qu,renderTrigger:!0,choices:[["key",(0,l.t)("Category Name")],["value",(0,l.t)("Value")],["key_value",(0,l.t)("Category and Value")]],description:(0,l.t)("What should be shown on the label?")}}],[{name:"number_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:$u,choices:h.F6,description:`${h.YD} ${h.pj}`}}],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),renderTrigger:!0,choices:h.HC,default:"smart_date",description:h.YD}}]]}],controlOverrides:{metric:{label:(0,l.t)("Primary Metric"),description:(0,l.t)("The primary metric is used to define the arc segment sizes")},secondary_metric:{label:(0,l.t)("Secondary Metric"),default:null,description:(0,l.t)("[optional] this secondary metric is used to define the color as a ratio against the primary metric. When omitted, the color is categorical and based on labels")},color_scheme:{description:(0,l.t)("When only a primary metric is provided, a categorical color scale is used."),visibility:({controls:e})=>{var t,o;return Boolean(!(null!=e&&null!=(t=e.secondary_metric)&&t.value)||(null==e||null==(o=e.secondary_metric)?void 0:o.value)===(null==e?void 0:e.metric.value))}},linear_color_scheme:{description:(0,l.t)("When a secondary metric is provided, a linear color scale is used."),visibility:({controls:e})=>{var t,o;return Boolean((null==e||null==(t=e.secondary_metric)?void 0:t.value)&&(null==e||null==(o=e.secondary_metric)?void 0:o.value)!==(null==e?void 0:e.metric.value))}},columns:{label:(0,l.t)("Hierarchy"),description:(0,l.t)("Sets the hierarchy levels of the chart. Each level is\n        represented by one ring with the innermost circle as the top of the hierarchy.")}},formDataOverrides:e=>({...e,groupby:(0,f.u)().popAllColumns(),metric:(0,f.u)().shiftMetric(),secondary_metric:(0,f.u)().shiftMetric()})};function Yu(e){const{metric:t,sort_by_metric:o}=e;return(0,Ut.Z)(e,(e=>[{...e,...o&&{orderby:[[t,!1]]}}]))}const Qu=o.p+"Sunburst1.241865fc..png",ju=o.p+"Sunburst2.3421fc35..png";class Gu extends s.Z{constructor(){super({buildQuery:Yu,controlPanel:Hu,loadChart:()=>o.e(72197).then(o.bind(o,572197)),metadata:new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Part of a Whole"),credits:["https://echarts.apache.org"],description:(0,l.t)("Uses circles to visualize the flow of data through different stages of a system. Hover over individual paths in the visualization to understand the stages a value took. Useful for multi-stage, multi-group visualizing funnels and pipelines."),exampleGallery:[{url:Qu},{url:ju}],name:(0,l.t)("Sunburst Chart v2"),tags:[(0,l.t)("ECharts"),(0,l.t)("Aesthetic"),(0,l.t)("Multi-Levels"),(0,l.t)("Proportional")],thumbnail:Vu}),transformProps:zu})}}var Uu=o(131567);const Ju=(e,t)=>{const{search:o,coltypeMap:r}=(null==t?void 0:t.ownState)||{},{sortAscending:a,sortMetric:n}={...Uu.E,...e};return(0,Ut.Z)(e,(e=>{const{columns:t=[],filters:i=[]}=e,l=[];o&&t.filter(Ot.s9).forEach((e=>{const t=(0,on.Z)(e);r[t]===gt.Z.STRING?l.push({col:e,op:"ILIKE",val:`%${o}%`}):r[t]!==gt.Z.NUMERIC||Number.isNaN(Number(o))||l.push({col:e,op:">=",val:Number(o)})}));const s=n?[n]:t;return[{...e,columns:t,metrics:n?[n]:[],filters:i.concat(l),orderby:n||void 0!==a?s.map((e=>[e,!!a])):[]}]}))},{enableEmptyFilter:Ku,inverseSelection:Xu,multiSelect:em,defaultToFirstItem:tm,searchAllOptions:om,sortAscending:rm}=Uu.E,am={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...W.ZP.groupby,label:(0,l.t)("Column"),required:!0}}]]},{label:(0,l.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"sortAscending",config:{type:"CheckboxControl",renderTrigger:!0,label:(0,l.t)("Sort ascending"),default:rm,description:(0,l.t)("Check for sorting ascending")}}],[{name:"multiSelect",config:{type:"CheckboxControl",label:(0,l.t)("Can select multiple values"),default:em,resetConfig:!0,affectsDataMask:!0,renderTrigger:!0}}],[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,l.t)("Filter value is required"),default:Ku,renderTrigger:!0,description:(0,l.t)("User must select a value before applying the filter")}}],[{name:"defaultToFirstItem",config:{type:"CheckboxControl",label:(0,l.t)("Select first filter value by default"),default:tm,resetConfig:!0,affectsDataMask:!0,renderTrigger:!0,requiredFirst:!0,description:(0,l.t)("When using this option, default value can\u2019t be set")}}],[{name:"inverseSelection",config:{type:"CheckboxControl",renderTrigger:!0,affectsDataMask:!0,label:(0,l.t)("Inverse selection"),default:Xu,description:(0,l.t)("Exclude selected values")}}],[{name:"searchAllOptions",config:{type:"CheckboxControl",renderTrigger:!0,affectsDataMask:!0,label:(0,l.t)("Dynamically search all filter values"),default:om,description:(0,l.t)("By default, each filter loads at most 1000 choices at the initial page load. Check this box if you have more than 1000 filter values and want to enable dynamically searching that loads filter values as users type (may add stress to your database).")}}]]}],controlOverrides:{groupby:{multi:!1,validators:[_.Z]}}};var nm=o(454076);function im(e){const{formData:t,height:o,hooks:r,queriesData:a,width:n,displaySettings:i,behaviors:l,appSection:s,filterState:c,isRefreshing:d,inputRef:u}=e,m={...Uu.E,...t},{setDataMask:p=nm.EI,setHoveredFilter:g=nm.EI,unsetHoveredFilter:h=nm.EI,setFocusedFilter:f=nm.EI,unsetFocusedFilter:b=nm.EI,setFilterActive:y=nm.EI}=r,[v]=a,{colnames:x=[],coltypes:C=[],data:w=[]}=v||{};return{filterState:c,coltypeMap:x.reduce(((e,t,o)=>({...e,[t]:C[o]})),{}),appSection:s,width:n,behaviors:l,height:o,data:w,formData:m,isRefreshing:d,setDataMask:p,setHoveredFilter:g,unsetHoveredFilter:h,setFocusedFilter:f,unsetFocusedFilter:b,setFilterActive:y,inputRef:u,filterBarOrientation:null==i?void 0:i.filterBarOrientation,isOverflowingFilterBar:null==i?void 0:i.isOverflowingFilterBar}}var lm=o(580757);class sm extends s.Z{constructor(){const e=new i.Z({name:(0,l.t)("Select filter"),description:(0,l.t)("Select filter plugin using AntD"),behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.NATIVE_FILTER],enableNoResults:!1,tags:[(0,l.t)("Experimental")],thumbnail:lm});super({buildQuery:Ju,controlPanel:am,loadChart:()=>o.e(28594).then(o.bind(o,828594)),metadata:e,transformProps:im})}}function cm(e){const{groupby:t}=e,[o=""]=t||[];return(0,Ut.Z)(e,(e=>[{...e,columns:[],metrics:[{aggregate:"MIN",column:{column_name:o,id:1,type_generic:gt.Z.NUMERIC},expressionType:"SIMPLE",hasCustomLabel:!0,label:"min"},{aggregate:"MAX",column:{column_name:o,id:2,type_generic:gt.Z.NUMERIC},expressionType:"SIMPLE",hasCustomLabel:!0,label:"max"}]}]))}var dm=o(578676);const um={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...W.ZP.groupby,label:(0,l.t)("Column"),required:!0}}]]},{label:(0,l.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,l.t)("Filter value is required"),default:!1,renderTrigger:!0,description:(0,l.t)("User must select a value before applying the filter")}},{name:"enableSingleValue",config:{type:"CheckboxControl",label:(0,l.t)("Single value"),default:dm.c.Exact,renderTrigger:!0,description:(0,l.t)("Use only a single value.")}}]]}]};function mm(e){const{formData:t,height:o,hooks:r,queriesData:a,width:n,behaviors:i,filterState:l,inputRef:s,displaySettings:c}=e,{setDataMask:d=nm.EI,setFocusedFilter:u=nm.EI,unsetFocusedFilter:m=nm.EI,setHoveredFilter:p=nm.EI,unsetHoveredFilter:g=nm.EI,setFilterActive:h=nm.EI}=r,{data:f}=a[0];return{data:f,formData:t,behaviors:i,height:o,setDataMask:d,filterState:l,width:n,setHoveredFilter:p,unsetHoveredFilter:g,setFocusedFilter:u,unsetFocusedFilter:m,setFilterActive:h,inputRef:s,isOverflowingFilterBar:null==c?void 0:c.isOverflowingFilterBar,filterBarOrientation:null==c?void 0:c.filterBarOrientation}}var pm=o(829872);class gm extends s.Z{constructor(){const e=new i.Z({name:(0,l.t)("Range filter"),description:(0,l.t)("Range filter plugin using AntD"),behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.NATIVE_FILTER],tags:[(0,l.t)("Experimental")],thumbnail:pm});super({buildQuery:cm,controlPanel:um,loadChart:()=>o.e(19048).then(o.bind(o,419048)),metadata:e,transformProps:mm})}}const hm={controlPanelSections:[{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...W.ZP.groupby,label:(0,l.t)("Column"),required:!0}}]]},{label:(0,l.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,l.t)("Filter value is required"),default:!1,renderTrigger:!0,description:(0,l.t)("User must select a value before applying the filter")}}]]}]},fm={defaultValue:null};function bm(e){const{formData:t,height:o,hooks:r,queriesData:a,width:n,behaviors:i,filterState:l,inputRef:s,displaySettings:c}=e,{setDataMask:d=nm.EI,setHoveredFilter:u=nm.EI,unsetHoveredFilter:m=nm.EI,setFocusedFilter:p=nm.EI,unsetFocusedFilter:g=nm.EI,setFilterActive:h=nm.EI}=r,{data:f}=a[0];return{data:f,filterState:l,formData:{...fm,...t},height:o,behaviors:i,setDataMask:d,setHoveredFilter:u,unsetHoveredFilter:m,setFocusedFilter:p,unsetFocusedFilter:g,setFilterActive:h,width:n,inputRef:s,filterBarOrientation:null==c?void 0:c.filterBarOrientation,isOverflowingFilterBar:null==c?void 0:c.isOverflowingFilterBar}}var ym=o(129884);class vm extends s.Z{constructor(){const e=new i.Z({name:(0,l.t)("Time filter"),description:(0,l.t)("Custom time filter plugin"),behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.NATIVE_FILTER],thumbnail:ym,tags:[(0,l.t)("Experimental")]});super({controlPanel:hm,loadChart:()=>o.e(89483).then(o.bind(o,89483)),metadata:e,transformProps:bm})}}function xm(e){return(0,Ut.Z)(e,(()=>[{result_type:"columns",columns:[],metrics:[],orderby:[]}]))}const Cm={controlPanelSections:[{label:(0,l.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,l.t)("Filter value is required"),default:!1,renderTrigger:!0,description:(0,l.t)("User must select a value before applying the filter")}}]]}]},wm={defaultValue:null};function Tm(e){const{behaviors:t,formData:o,height:r,hooks:a,queriesData:n,width:i,filterState:l,inputRef:s}=e,{setDataMask:c=nm.EI,setHoveredFilter:d=nm.EI,unsetHoveredFilter:u=nm.EI,setFocusedFilter:m=nm.EI,unsetFocusedFilter:p=nm.EI,setFilterActive:g=nm.EI}=a,{data:h}=n[0];return{filterState:l,behaviors:t,width:i,height:r,data:h,formData:{...wm,...o},setDataMask:c,setHoveredFilter:d,unsetHoveredFilter:u,setFocusedFilter:m,unsetFocusedFilter:p,setFilterActive:g,inputRef:s}}var _m=o(253041);class Sm extends s.Z{constructor(){const e=new i.Z({name:(0,l.t)("Time column"),description:(0,l.t)("Time column filter plugin"),behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.NATIVE_FILTER],tags:[(0,l.t)("Experimental")],thumbnail:_m});super({buildQuery:xm,controlPanel:Cm,loadChart:()=>o.e(22775).then(o.bind(o,722775)),metadata:e,transformProps:Tm})}}function Am(e){return(0,Ut.Z)(e,(e=>[{...e,result_type:"columns",columns:[],metrics:[],orderby:[]}]))}const Pm={defaultValue:null,multiSelect:!1},{multiSelect:km}=Pm,Fm={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...W.ZP.groupby,label:(0,l.t)("Columns to show"),multiple:!0,required:!1}}]]},{label:(0,l.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"multiSelect",config:{type:"CheckboxControl",label:(0,l.t)("Can select multiple values"),default:km,affectsDataMask:!0,resetConfig:!0,renderTrigger:!0}}],[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,l.t)("Filter value is required"),default:!1,renderTrigger:!0,description:(0,l.t)("User must select a value before applying the filter")}}]]}]};function Rm(e){const{behaviors:t,formData:o,height:r,hooks:a,queriesData:n,width:i,filterState:l,inputRef:s}=e,{setDataMask:c=nm.EI,setHoveredFilter:d=nm.EI,unsetHoveredFilter:u=nm.EI,setFocusedFilter:m=nm.EI,unsetFocusedFilter:p=nm.EI,setFilterActive:g=nm.EI}=a,{data:h}=n[0];return{filterState:l,behaviors:t,width:i,height:r,data:h,formData:{...Pm,...o},setDataMask:c,setHoveredFilter:d,unsetHoveredFilter:u,setFocusedFilter:m,unsetFocusedFilter:p,setFilterActive:g,inputRef:s}}var Im=o(643225);class Em extends s.Z{constructor(){const e=new i.Z({name:(0,l.t)("Group by"),description:(0,l.t)("Group By filter plugin"),behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.NATIVE_FILTER],tags:[(0,l.t)("Experimental")],thumbnail:Im});super({buildQuery:Am,controlPanel:Fm,loadChart:()=>o.e(8464).then(o.bind(o,708464)),metadata:e,transformProps:Rm})}}function Lm(e){return(0,Ut.Z)(e,(()=>[{result_type:"timegrains",columns:[],metrics:[],orderby:[]}]))}const Dm={controlPanelSections:[{label:(0,l.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,l.t)("Filter value is required"),default:!1,renderTrigger:!0,description:(0,l.t)("User must select a value before applying the filter")}}]]}]},Zm={defaultValue:null};function Mm(e){const{formData:t,height:o,hooks:r,queriesData:a,width:n,filterState:i,inputRef:l}=e,{setDataMask:s=nm.EI,setHoveredFilter:c=nm.EI,unsetHoveredFilter:d=nm.EI,setFocusedFilter:u=nm.EI,unsetFocusedFilter:m=nm.EI,setFilterActive:p=nm.EI}=r,{data:g}=a[0];return{filterState:i,width:n,height:o,data:g,formData:{...Zm,...t},setDataMask:s,setHoveredFilter:c,unsetHoveredFilter:d,setFocusedFilter:u,unsetFocusedFilter:m,setFilterActive:p,inputRef:l}}var Om=o(978292);class Nm extends s.Z{constructor(){const e=new i.Z({name:(0,l.t)("Time grain"),description:(0,l.t)("Time grain filter plugin"),behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.NATIVE_FILTER],tags:[(0,l.t)("Experimental")],thumbnail:Om});super({buildQuery:Lm,controlPanel:Dm,loadChart:()=>o.e(45681).then(o.bind(o,745681)),metadata:e,transformProps:Mm})}}const Bm=(e,t)=>{const{search:o,coltypeMap:r}=(null==t?void 0:t.ownState)||{};return(0,Ut.Z)(e,(e=>{const{columns:t=[],filters:a=[]}=e,n=[];o&&t.filter(Ot.s9).forEach((e=>{const t=(0,on.Z)(e);r[t]===gt.Z.STRING?n.push({col:e,op:"ILIKE",val:`%${o}%`}):r[t]!==gt.Z.NUMERIC||Number.isNaN(Number(o))||n.push({col:e,op:">=",val:Number(o)})}));return[{...e,columns:t,filters:a.concat(n)}]}))},zm={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...W.ZP.groupby,label:(0,l.t)("Column"),required:!0}}]]}],controlOverrides:{groupby:{multi:!1,validators:[_.Z]}}},Vm={defaultValue:""};function qm(e){const{formData:t,height:o,hooks:r,queriesData:a,width:n,displaySettings:i,behaviors:l,appSection:s,filterState:c,isRefreshing:d,inputRef:u}=e,m={...Vm,...t},{setDataMask:p=nm.EI,setHoveredFilter:g=nm.EI,unsetHoveredFilter:h=nm.EI,setFocusedFilter:f=nm.EI,unsetFocusedFilter:b=nm.EI,setFilterActive:y=nm.EI}=r,[v]=a,{colnames:x=[],coltypes:C=[],data:w=[]}=v||{};return{filterState:c,coltypeMap:x.reduce(((e,t,o)=>({...e,[t]:C[o]})),{}),appSection:s,width:n,behaviors:l,height:o,data:w,formData:m,isRefreshing:d,setDataMask:p,setHoveredFilter:g,unsetHoveredFilter:h,setFocusedFilter:f,unsetFocusedFilter:b,setFilterActive:y,inputRef:u,filterBarOrientation:null==i?void 0:i.filterBarOrientation,isOverflowingFilterBar:null==i?void 0:i.isOverflowingFilterBar}}var $m=o(328111);class Wm extends s.Z{constructor(){const e=new i.Z({category:(0,l.t)("Tools"),name:(0,l.t)("TextInput filter"),description:(0,l.t)("TextInput filter plugin using AntD"),behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.NATIVE_FILTER],enableNoResults:!1,thumbnail:$m});super({buildQuery:Bm,controlPanel:zm,loadChart:()=>o.e(74908).then(o.bind(o,274908)),metadata:e,transformProps:qm})}}class Hm extends s.Z{constructor(){const e=new i.Z({name:(0,l.t)("Tab filter"),description:(0,l.t)("Tab filter plugin using AntD"),behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.NATIVE_FILTER],enableNoResults:!1,tags:[(0,l.t)("Experimental")],thumbnail:lm});super({buildQuery:Ju,controlPanel:am,loadChart:()=>o.e(28594).then(o.bind(o,828594)),metadata:e,transformProps:im})}}const Ym={defaultValue:null,enableEmptyFilter:!1,inverseSelection:!1,defaultToFirstItem:!1,multiSelect:!0,searchAllOptions:!1,sortAscending:!0},Qm=(e,t)=>{const{search:o,coltypeMap:r}=(null==t?void 0:t.ownState)||{},{sortAscending:a,sortMetric:n}={...Ym,...e};return(0,Ut.Z)(e,(e=>{const{columns:t=[],filters:i=[]}=e,l=[];o&&t.filter(Ot.s9).forEach((e=>{const t=(0,on.Z)(e);r[t]===gt.Z.STRING?l.push({col:e,op:"ILIKE",val:`%${o}%`}):r[t]!==gt.Z.NUMERIC||Number.isNaN(Number(o))||l.push({col:e,op:">=",val:Number(o)})}));const s=n?[n]:t;return[{...e,columns:t,metrics:n?[n]:[],filters:i.concat(l),orderby:n||void 0!==a?s.map((e=>[e,!!a])):[]}]}))},{enableEmptyFilter:jm,inverseSelection:Gm,multiSelect:Um,defaultToFirstItem:Jm,searchAllOptions:Km,sortAscending:Xm}=Ym,ep={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...W.ZP.groupby,label:(0,l.t)("Column"),required:!0}}]]},{label:(0,l.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"sortAscending",config:{type:"CheckboxControl",renderTrigger:!0,label:(0,l.t)("Sort ascending"),default:Xm,description:(0,l.t)("Check for sorting ascending")}}],[{name:"multiSelect",config:{type:"CheckboxControl",label:(0,l.t)("Can select multiple values"),default:Um,resetConfig:!0,affectsDataMask:!0,renderTrigger:!0}}],[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,l.t)("Filter value is required"),default:jm,renderTrigger:!0,description:(0,l.t)("User must select a value before applying the filter")}}],[{name:"defaultToFirstItem",config:{type:"CheckboxControl",label:(0,l.t)("Select first filter value by default"),default:Jm,resetConfig:!0,affectsDataMask:!0,renderTrigger:!0,requiredFirst:!0,description:(0,l.t)("When using this option, default value can\u2019t be set")}}],[{name:"inverseSelection",config:{type:"CheckboxControl",renderTrigger:!0,affectsDataMask:!0,label:(0,l.t)("Inverse selection"),default:Gm,description:(0,l.t)("Exclude selected values")}}],[{name:"searchAllOptions",config:{type:"CheckboxControl",renderTrigger:!0,affectsDataMask:!0,label:(0,l.t)("Dynamically search all filter values"),default:Km,description:(0,l.t)("By default, each filter loads at most 1000 choices at the initial page load. Check this box if you have more than 1000 filter values and want to enable dynamically searching that loads filter values as users type (may add stress to your database).")}}]]}],controlOverrides:{groupby:{multi:!1,validators:[_.Z]}}};function tp(e){const{formData:t,height:o,hooks:r,queriesData:a,width:n,displaySettings:i,behaviors:l,appSection:s,filterState:c,isRefreshing:d,inputRef:u}=e,m={...Ym,...t},{setDataMask:p=nm.EI,setHoveredFilter:g=nm.EI,unsetHoveredFilter:h=nm.EI,setFocusedFilter:f=nm.EI,unsetFocusedFilter:b=nm.EI,setFilterActive:y=nm.EI}=r,[v]=a,{colnames:x=[],coltypes:C=[],data:w=[]}=v||{};return{filterState:c,coltypeMap:x.reduce(((e,t,o)=>({...e,[t]:C[o]})),{}),appSection:s,width:n,behaviors:l,height:o,data:w,formData:m,isRefreshing:d,setDataMask:p,setHoveredFilter:g,unsetHoveredFilter:h,setFocusedFilter:f,unsetFocusedFilter:b,setFilterActive:y,inputRef:u,filterBarOrientation:null==i?void 0:i.filterBarOrientation,isOverflowingFilterBar:null==i?void 0:i.isOverflowingFilterBar}}var op=o(631205);class rp extends s.Z{constructor(){const e=new i.Z({name:(0,l.t)("TextList Select filter"),description:(0,l.t)("TextList Select filter plugin using AntD"),behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.NATIVE_FILTER],enableNoResults:!1,tags:[(0,l.t)("Experimental")],thumbnail:op});super({buildQuery:Qm,controlPanel:ep,loadChart:()=>o.e(25737).then(o.bind(o,825737)),metadata:e,transformProps:tp})}}const ap={defaultValue:null,enableEmptyFilter:!1,inverseSelection:!1,defaultToFirstItem:!1,multiSelect:!0,searchAllOptions:!1,sortAscending:!0},np=(e,t)=>{const{sortAscending:o,sortMetric:r}={...ap,...e};return(0,Ut.Z)(e,(e=>{var t;const{filters:a=[]}=e,n=(null==(t=e.columns)?void 0:t[0])||[],i=r?[r]:n;return[{...e,columns:n,metrics:r?[r]:[],filters:a.concat([]),orderby:r||void 0!==o?i.map((e=>[e,!!o])):[]}]}))},{enableEmptyFilter:ip,inverseSelection:lp,multiSelect:sp,defaultToFirstItem:cp,searchAllOptions:dp,sortAscending:up}=ap,mp={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...W.ZP.groupby,label:(0,l.t)("Column"),required:!0}}]]},{label:(0,l.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"sortAscending",config:{type:"CheckboxControl",renderTrigger:!0,label:(0,l.t)("Sort ascending"),default:up,description:(0,l.t)("Check for sorting ascending")}}],[{name:"multiSelect",config:{type:"CheckboxControl",label:(0,l.t)("Can select multiple values"),default:sp,resetConfig:!0,affectsDataMask:!0,renderTrigger:!0}}],[{name:"enableEmptyFilter",config:{type:"CheckboxControl",label:(0,l.t)("Filter value is required"),default:ip,renderTrigger:!0,description:(0,l.t)("User must select a value before applying the filter")}}],[{name:"defaultToFirstItem",config:{type:"CheckboxControl",label:(0,l.t)("Select first filter value by default"),default:cp,resetConfig:!0,affectsDataMask:!0,renderTrigger:!0,requiredFirst:!0,description:(0,l.t)("When using this option, default value can\u2019t be set")}}],[{name:"inverseSelection",config:{type:"CheckboxControl",renderTrigger:!0,affectsDataMask:!0,label:(0,l.t)("Inverse selection"),default:lp,description:(0,l.t)("Exclude selected values")}}],[{name:"searchAllOptions",config:{type:"CheckboxControl",renderTrigger:!0,affectsDataMask:!0,label:(0,l.t)("Dynamically search all filter values"),default:dp,description:(0,l.t)("By default, each filter loads at most 1000 choices at the initial page load. Check this box if you have more than 1000 filter values and want to enable dynamically searching that loads filter values as users type (may add stress to your database).")}}]]}],controlOverrides:{groupby:{multi:!1,validators:[_.Z]}}};function pp(e){const{formData:t,height:o,hooks:r,queriesData:a,width:n,displaySettings:i,behaviors:l,appSection:s,filterState:c,isRefreshing:d,inputRef:u}=e,m={...ap,...t},{setDataMask:p=nm.EI,setHoveredFilter:g=nm.EI,unsetHoveredFilter:h=nm.EI,setFocusedFilter:f=nm.EI,unsetFocusedFilter:b=nm.EI,setFilterActive:y=nm.EI}=r,[v]=a,{colnames:x=[],data:C=[]}=v||{};return{filterState:c,colnames:x,appSection:s,width:n,behaviors:l,height:o,data:C,formData:m,isRefreshing:d,setDataMask:p,setHoveredFilter:g,unsetHoveredFilter:h,setFocusedFilter:f,unsetFocusedFilter:b,setFilterActive:y,inputRef:u,filterBarOrientation:null==i?void 0:i.filterBarOrientation,isOverflowingFilterBar:null==i?void 0:i.isOverflowingFilterBar}}var gp=o(831061);class hp extends s.Z{constructor(){const e=new i.Z({name:(0,l.t)("Select tree"),description:(0,l.t)("Select tree filter plugin using AntD"),behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.NATIVE_FILTER],enableNoResults:!1,tags:[(0,l.t)("Experimental")],thumbnail:gp});super({buildQuery:np,controlPanel:mp,loadChart:()=>o.e(72178).then(o.bind(o,72178)),metadata:e,transformProps:pp})}}const fp=(e,t)=>{const{search:o,coltypeMap:r}=(null==t?void 0:t.ownState)||{};return(0,Ut.Z)(e,(e=>{const{columns:t=[],filters:a=[]}=e,n=[];o&&t.filter(Ot.s9).forEach((e=>{const t=(0,on.Z)(e);r[t]===gt.Z.STRING?n.push({col:e,op:"ILIKE",val:`%${o}%`}):r[t]!==gt.Z.NUMERIC||Number.isNaN(Number(o))||n.push({col:e,op:">=",val:Number(o)})}));return[{...e,columns:t,filters:a.concat(n)}]}))},bp={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",config:{...W.ZP.groupby,label:(0,l.t)("Column"),required:!0}}]]},{label:(0,l.t)("UI Configuration"),expanded:!0,controlSetRows:[[{name:"sortAscending",config:{type:"CheckboxControl",renderTrigger:!0,label:(0,l.t)("Sort ascending"),default:!1,description:(0,l.t)("Check for sorting ascending")}}],[{name:"multiSelect",config:{type:"CheckboxControl",label:(0,l.t)("Can select multiple values"),default:!1,resetConfig:!0,affectsDataMask:!0,renderTrigger:!0}}]]}],controlOverrides:{groupby:{multi:!1,validators:[_.Z]}}},yp={defaultValue:[]};function vp(e){const{formData:t,height:o,hooks:r,queriesData:a,width:n,displaySettings:i,behaviors:l,appSection:s,filterState:c,isRefreshing:d,inputRef:u}=e,m={...yp,...t},{setDataMask:p=nm.EI,setHoveredFilter:g=nm.EI,unsetHoveredFilter:h=nm.EI,setFocusedFilter:f=nm.EI,unsetFocusedFilter:b=nm.EI,setFilterActive:y=nm.EI}=r,[v]=a,{colnames:x=[],coltypes:C=[],data:w=[]}=v||{};return{filterState:c,coltypeMap:x.reduce(((e,t,o)=>({...e,[t]:C[o]})),{}),appSection:s,width:n,behaviors:l,height:o,data:w,formData:m,isRefreshing:d,setDataMask:p,setHoveredFilter:g,unsetHoveredFilter:h,setFocusedFilter:f,unsetFocusedFilter:b,setFilterActive:y,inputRef:u,filterBarOrientation:null==i?void 0:i.filterBarOrientation,isOverflowingFilterBar:null==i?void 0:i.isOverflowingFilterBar}}var xp=o(913565);class Cp extends s.Z{constructor(){const e=new i.Z({category:(0,l.t)("Tools"),name:(0,l.t)("TextInput filter"),description:(0,l.t)("TextInput filter plugin using AntD"),behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.NATIVE_FILTER],enableNoResults:!1,thumbnail:xp});super({buildQuery:fp,controlPanel:bp,loadChart:()=>o.e(7273).then(o.bind(o,807273)),metadata:e,transformProps:vp})}}var wp=o(957557),Tp=o.n(wp);function _p(e,t){const o=(null==t?void 0:t.ownState)||{},r=o.columnsFilter||[],a=o.opFilter||[],n=(o.chooseCrossValueList||[]).map((e=>e.value))||[],i=o.statisticalDimension||{};null!=i&&i.third_cate_name&&n.push(null==i?void 0:i.third_cate_name);const{groupbyColumns:l=[],groupbyRows:s=[]}=e,{enableCrossVariable:c}=e;let d=Array.from(new Set([...(0,S.Z)(l),...(0,S.Z)(s),...(0,S.Z)(r)]));c&&n.length&&(d=Array.from(new Set(n)));const u=d.map((t=>{var o;return(0,Ot.s9)(t)&&e.time_grain_sqla&&Mt.O6&&null!=e&&null!=(o=e.temporal_columns_lookup)&&o[t]?{timeGrain:e.time_grain_sqla,columnType:"BASE_AXIS",sqlExpression:t,label:t,expressionType:"SQL"}:t}));return(0,Ut.Z)(e,(e=>{const{series_limit_metric:t,metrics:o,order_desc:r,filters:n}=e;let i;return t?i=[[t,!r]]:Array.isArray(o)&&o[0]&&(i=[[o[0],!r]]),[{...Mt.O6?Tp()(e,["extras.time_grain_sqla"]):e,orderby:i,columns:u,filters:null==n?void 0:n.concat(a)}]}))}var Sp=o(386769);const Ap={controlPanelSections:[{...g.sections.genericTime,expanded:!1},{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupbyColumns",config:{...W.ZP.groupby,label:(0,l.t)("Columns"),description:(0,l.t)("Columns to group by on the columns")}}],[{name:"groupbyRows",config:{...W.ZP.groupby,label:(0,l.t)("Rows"),description:(0,l.t)("Columns to group by on the rows")}}],[Mt.O6?{name:"time_grain_sqla",config:{...W.ZP.time_grain_sqla,visibility:({controls:e})=>{var t;const o=Object.fromEntries((0,S.Z)(null==e||null==(t=e.groupbyColumns)?void 0:t.options).map((e=>[e.column_name,e.is_dttm])));return[...(0,S.Z)(null==e?void 0:e.groupbyColumns.value),...(0,S.Z)(null==e?void 0:e.groupbyRows.value)].map((e=>!!(0,Ot.GA)(e)||!!(0,Ot.s9)(e)&&!!o[e])).some(Boolean)}}}:null,Mt.O6?"temporal_columns_lookup":null],[{name:"metrics",config:{...W.ZP.metrics,validators:[_.Z],rerender:["conditional_formatting"]}}],[{name:"metricsLayout",config:{type:"RadioButtonControl",renderTrigger:!0,label:(0,l.t)("Apply metrics on"),default:Sp.Q.COLUMNS,options:[[Sp.Q.COLUMNS,(0,l.t)("Columns")],[Sp.Q.ROWS,(0,l.t)("Rows")]],description:(0,l.t)("Use metrics as a top level group for columns or for rows")}}],["adhoc_filters"],[{name:"filter_object",config:{...W.ZP.groupby,label:(0,l.t)("Quick filter"),description:(0,l.t)("Filter objects can only allow one value"),visibility:e=>{var t,o;return!0===(null==(t=e.exploreState.datasource.categories[0])?void 0:t.is_fast_filter)||!(!1===(null==(o=e.exploreState.datasource.categories[0])?void 0:o.is_fast_filter)||!e.exploreState.datasource.categories[0])}}}],[{name:"filter_price",config:{...W.ZP.groupby,label:"",visibility:e=>{var t,o;return!0===(null==(t=e.exploreState.datasource.categories[0])?void 0:t.is_fast_filter)||!(!1===(null==(o=e.exploreState.datasource.categories[0])?void 0:o.is_fast_filter)||!e.exploreState.datasource.categories[0])}}}],["series_limit"],[{name:"row_limit",config:{...W.ZP.row_limit,label:(0,l.t)("Cell limit"),description:(0,l.t)("Limits the number of cells that get retrieved.")}}],[{name:"series_limit_metric",config:{...W.ZP.series_limit_metric,description:(0,l.t)("Metric used to define how the top series are sorted if a series or cell limit is present. If undefined reverts to the first metric (where appropriate).")}}],[{name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort Descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>Boolean((null==e?void 0:e.series_limit_metric.value)&&!Zt()(null==e?void 0:e.series_limit_metric.value))}}]]},{label:(0,l.t)("Options"),expanded:!0,tabOverride:"data",controlSetRows:[[{name:"aggregateFunction",config:{type:"SelectControl",label:(0,l.t)("Aggregation function"),clearable:!1,choices:[["Count",(0,l.t)("Count")],["Count Unique Values",(0,l.t)("Count Unique Values")],["List Unique Values",(0,l.t)("List Unique Values")],["Sum",(0,l.t)("Sum")],["Average",(0,l.t)("Average")],["Median",(0,l.t)("Median")],["Sample Variance",(0,l.t)("Sample Variance")],["Sample Standard Deviation",(0,l.t)("Sample Standard Deviation")],["Minimum",(0,l.t)("Minimum")],["Maximum",(0,l.t)("Maximum")],["First",(0,l.t)("First")],["Last",(0,l.t)("Last")],["Sum as Fraction of Total",(0,l.t)("Sum as Fraction of Total")],["Sum as Fraction of Rows",(0,l.t)("Sum as Fraction of Rows")],["Sum as Fraction of Columns",(0,l.t)("Sum as Fraction of Columns")],["Count as Fraction of Total",(0,l.t)("Count as Fraction of Total")],["Count as Fraction of Rows",(0,l.t)("Count as Fraction of Rows")],["Count as Fraction of Columns",(0,l.t)("Count as Fraction of Columns")]],default:"Sum",description:(0,l.t)("Aggregate function to apply when pivoting and computing the total rows and columns"),renderTrigger:!0}}],[{name:"rowTotals",config:{type:"CheckboxControl",label:(0,l.t)("Show rows total"),default:!1,renderTrigger:!0,description:(0,l.t)("Display row level total")}}],[{name:"colTotals",config:{type:"CheckboxControl",label:(0,l.t)("Show columns total"),default:!1,renderTrigger:!0,description:(0,l.t)("Display column level total")}}],[{name:"ratioTotals",config:{type:"CheckboxControl",label:(0,l.t)("Show ratio total"),default:!1,renderTrigger:!0,description:(0,l.t)("Display ratio total")}}],[{name:"transposePivot",config:{type:"CheckboxControl",label:(0,l.t)("Transpose pivot"),default:!1,description:(0,l.t)("Swap rows and columns"),renderTrigger:!0}}],[{name:"combineMetric",config:{type:"CheckboxControl",label:(0,l.t)("Combine metrics"),default:!1,description:(0,l.t)("Display metrics side by side within each column, as opposed to each column being displayed side by side for each metric."),renderTrigger:!0}}]]},{label:(0,l.t)("Drilldown"),expanded:!0,controlSetRows:[[{name:"enableDrilldown",config:{type:"CheckboxControl",label:(0,l.t)("Enable Drilldown"),default:!1,renderTrigger:!0,description:(0,l.t)("Enable drilldown functionality")}}],[{name:"drilldownColumns",config:{...W.ZP.groupby,label:(0,l.t)("Drilldown Columns"),description:(0,l.t)("Columns to drilldown on"),visibility:({controls:e})=>{var t;return!0===(null==e||null==(t=e.enableDrilldown)?void 0:t.value)}}}]]},{label:(0,l.t)("CrossVariable"),expanded:!0,controlSetRows:[[{name:"enableCrossVariable",config:{type:"CheckboxControl",label:(0,l.t)("Enable Use CrossVariable"),default:!1,renderTrigger:!0,description:(0,l.t)("Enable Use CrossVariable functionality")}}]]},{label:(0,l.t)("Options"),expanded:!0,controlSetRows:[[{name:"valueFormat",config:{...W.ZP.y_axis_format,label:(0,l.t)("Value format")}}],[{name:"date_format",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Date format"),default:ft.Z.id,renderTrigger:!0,choices:h.HC,description:(0,l.t)("D3 time format for datetime columns")}}],[{name:"rowOrder",config:{type:"SelectControl",label:(0,l.t)("Sort rows by"),default:"key_a_to_z",choices:[["raw",(0,l.t)("raw")],["key_a_to_z",(0,l.t)("key a-z")],["key_z_to_a",(0,l.t)("key z-a")],["value_a_to_z",(0,l.t)("value ascending")],["value_z_to_a",(0,l.t)("value descending")]],renderTrigger:!0,description:(0,Z.tZ)(I.Fragment,null,(0,Z.tZ)("div",null,(0,l.t)("Change order of rows.")),(0,Z.tZ)("div",null,(0,l.t)("Available sorting modes:")),(0,Z.tZ)("ul",null,(0,Z.tZ)("li",null,(0,l.t)("By raw: do not use any sort mode")),(0,Z.tZ)("li",null,(0,l.t)("By key: use row names as sorting key")),(0,Z.tZ)("li",null,(0,l.t)("By value: use metric values as sorting key"))))}}],[{name:"colOrder",config:{type:"SelectControl",label:(0,l.t)("Sort columns by"),default:"key_a_to_z",choices:[["raw",(0,l.t)("raw")],["key_a_to_z",(0,l.t)("key a-z")],["key_z_to_a",(0,l.t)("key z-a")],["value_a_to_z",(0,l.t)("value ascending")],["value_z_to_a",(0,l.t)("value descending")]],renderTrigger:!0,description:(0,Z.tZ)(I.Fragment,null,(0,Z.tZ)("div",null,(0,l.t)("Change order of columns.")),(0,Z.tZ)("div",null,(0,l.t)("Available sorting modes:")),(0,Z.tZ)("ul",null,(0,Z.tZ)("li",null,(0,l.t)("By raw: do not use any sort mode")),(0,Z.tZ)("li",null,(0,l.t)("By key: use column names as sorting key")),(0,Z.tZ)("li",null,(0,l.t)("By value: use metric values as sorting key"))))}}],[{name:"rowSubtotalPosition",config:{type:"SelectControl",label:(0,l.t)("Rows subtotal position"),default:!1,choices:[[!0,(0,l.t)("Top")],[!1,(0,l.t)("Bottom")]],renderTrigger:!0,description:(0,l.t)("Position of row level subtotal")}}],[{name:"colSubtotalPosition",config:{type:"SelectControl",label:(0,l.t)("Columns subtotal position"),default:!1,choices:[[!0,(0,l.t)("Left")],[!1,(0,l.t)("Right")]],renderTrigger:!0,description:(0,l.t)("Position of column level subtotal")}}],[{name:"column_config",config:{type:"ColumnConfigControl",label:(0,l.t)("Customize Metrics"),description:(0,l.t)("Further customize how to display each metric"),renderTrigger:!0,configFormLayout:{[gt.Z.STRING]:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"left"}}],["truncateLongCells"]],[gt.Z.NUMERIC]:[["columnWidth",{name:"horizontalAlign",override:{defaultValue:"right"}}],["d3NumberFormat"],["d3SmallNumberFormat"],["truncateLongCells"]]},shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n,i;const l=(null!=(r=null==e||null==(a=e.controls)||null==(n=a.metrics)?void 0:n.value)?r:[]).map((e=>"string"===typeof e?e:e.label));return{queryResponse:null==o||null==(i=o.queriesResponse)?void 0:i[0],appliedColumnNames:l}}}}],[{name:"conditional_formatting",config:{type:"ConditionalFormattingControlPro",renderTrigger:!0,label:(0,l.t)("Conditional formatting"),description:(0,l.t)("Apply conditional color formatting to metrics"),shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n,i,l,s,c,d,u;const m=null!=(r=null==e||null==(a=e.controls)||null==(n=a.metrics)?void 0:n.value)?r:[],p=null!=e&&null!=(i=e.datasource)&&i.hasOwnProperty("verbose_map")?null==e||null==(l=e.datasource)?void 0:l.verbose_map:null!=(s=null==e||null==(c=e.datasource)?void 0:c.columns)?s:{},g=m.map((e=>"string"===typeof e?e:e.label)),{colnames:h,coltypes:f}=null!=(d=null==o||null==(u=o.queriesResponse)?void 0:u[0])?d:{};return{columnOptions:Array.isArray(h)&&Array.isArray(f)?h.reduce(((e,t,o)=>{var r;return g.includes(t)?[...e,{value:t,label:null!=(r=p[t])?r:t,type:f[o]}]:e}),[]):[],verboseMap:p}}}}]]},{label:(0,l.t)("Component Style"),expanded:!0,controlSetRows:[[{name:"tableBackground",config:{label:(0,l.t)("Table Background"),type:"ColorPickerControl",description:(0,l.t)("Please set the table background"),default:{r:255,g:255,b:255,a:1},renderTrigger:!0}},{name:"borderColor",config:{label:(0,l.t)("Border color"),type:"ColorPickerControl",description:(0,l.t)("Please set the border color"),default:{r:214,g:214,b:214,a:1},renderTrigger:!0}}],[{name:"opacity",config:{label:(0,l.t)("Opacity"),type:"SliderControl",description:(0,l.t)("Please set the opacity"),default:1,min:0,max:1,step:.01,renderTrigger:!0}}]]},{label:(0,l.t)("Table head style"),expanded:!0,controlSetRows:[[{name:"headBackground",config:{label:(0,l.t)("Table head background"),type:"ColorPickerControl",description:(0,l.t)("Please set the table head background"),default:{r:250,g:250,b:250,a:0},renderTrigger:!0}},{name:"headFontColor",config:{label:(0,l.t)("Font color"),type:"ColorPickerControl",description:(0,l.t)("Please set the font color"),default:{r:0,g:0,b:0,a:.88},renderTrigger:!0}}],[{name:"headFontSize",config:{label:(0,l.t)("Font size"),type:"SelectControl",description:(0,l.t)("Please set the font size"),default:12,choices:[[12,12],[14,14],[16,16],[18,18],[20,20],[24,24],[26,26],[28,28],[30,30],[32,32],[36,36]],renderTrigger:!0}}],[{name:"headTextAlignment",config:{label:(0,l.t)("Text alignment"),type:"SelectControl",description:(0,l.t)("Please set the alignment method"),default:"left",choices:[["left","left"],["center","center"],["right","right"]],renderTrigger:!0}}],[{name:"headLineHeight",config:{label:(0,l.t)("Row height"),type:"SliderControl",description:(0,l.t)("Please set the row height"),default:24,min:0,max:100,step:1,renderTrigger:!0}}]]},{label:(0,l.t)("Table content style"),expanded:!0,controlSetRows:[[{name:"tbodyFontColor",config:{label:(0,l.t)("Font color"),type:"ColorPickerControl",description:(0,l.t)("Please set the font color"),default:{r:0,g:0,b:0,a:.88},renderTrigger:!0}},{name:"tbodyFontSize",config:{label:(0,l.t)("Font size"),type:"SelectControl",description:(0,l.t)("Please set the font size"),default:12,choices:[[12,12],[14,14],[16,16],[18,18],[20,20],[24,24],[26,26],[28,28],[30,30],[32,32],[36,36]],renderTrigger:!0}}],[{name:"tbodyTextAlignment",config:{label:(0,l.t)("Text alignment"),type:"SelectControl",description:(0,l.t)("Please set the alignment method"),default:"left",choices:[["left","left"],["center","center"],["right","right"]],renderTrigger:!0}}],[{name:"tbodyLineHeight",config:{label:(0,l.t)("Row height"),type:"SliderControl",description:(0,l.t)("Please set the row height"),default:24,min:0,max:100,step:1,renderTrigger:!0}}]]}],formDataOverrides:e=>{const t=(0,f.u)().controls.columns.filter((t=>!(0,S.Z)(e.groupbyRows).includes(t)));return(0,f.u)().controls.columns=(0,f.u)().controls.columns.filter((e=>!t.includes(e))),{...e,metrics:(0,f.u)().popAllMetrics(),groupbyColumns:t}}},{DATABASE_DATETIME:Pp}=pt.Z;function kp(e,t=[]){return t.every((t=>null===t[e]||void 0===t[e]||"number"===typeof t[e]))}function Fp(e){const{width:t,height:o,queriesData:r,formData:a,rawFormData:n,hooks:{setDataMask:i=(()=>{}),onContextMenu:l,setControlValue:s},filterState:u,datasource:{verboseMap:m={},columnFormats:p={}},emitCrossFilters:g,ownState:h}=e,{data:f,colnames:b,coltypes:y}=r[0],{groupbyRows:v,groupbyColumns:x,metrics:C,tableRenderer:w,colOrder:T,rowOrder:_,aggregateFunction:S,transposePivot:A,combineMetric:P,rowSubtotalPosition:k,colSubtotalPosition:F,colTotals:R,rowTotals:I,valueFormat:E,dateFormat:L,metricsLayout:D,conditionalFormatting:Z,timeGrainSqla:M,drilldownColumns:O,enableDrilldown:N,enableCrossVariable:B,ratioTotals:z,tableBackground:V,borderColor:q,opacity:$,headBackground:W,headFontSize:H,headFontColor:Y,headTextAlignment:Q,headLineHeight:j,tbodyFontColor:G,tbodyFontSize:U,tbodyTextAlignment:J,tbodyLineHeight:K}=a,{selectedFilters:X}=u,{slice_id:ee}=n,te=(0,Me.Z)(n),oe=b.filter(((e,t)=>y[t]===gt.Z.TEMPORAL)).reduce(((e,t)=>{let o;return L===ft.Z.id?o=te?(0,d.uh)(te):kp(t,f)?(0,d.bt)(Pp):String:L&&(o=(0,d.bt)(L)),o&&(e[t]=o),e}),{}),re=(null!=C?C:[]).map(ht.Z),ae=new Set(re),ne=n.column_config,ie=(b||[]).map(((e,t)=>{const o=(null==m?void 0:m[e])||e,r=y[t],a=(null==ne?void 0:ne[e])||{},n=ae.has(e)&&kp(e,f),i=null==p?void 0:p[e],l=a.d3NumberFormat||i;let s;return n||l?s=(0,c.JB)(l):e.indexOf("\u5360\u6bd4(")>-1&&(s=e=>e?e.toFixed(2):e),{key:e,label:o,dataType:r,isNumeric:r===gt.Z.NUMERIC,formatter:s,config:a}})),le=(0,yt.ni)(Z,((e,t)=>{var o;return null!=(o=null==e?void 0:e.map((e=>Object.keys(e).reduce(((o,r)=>({...o,[r]:{...t.find((e=>e.key===r)),value:e[r]}})),{}))))?o:[]})(f,ie));return{width:t,height:o,data:f,groupbyRows:v,groupbyColumns:x,metrics:C,tableRenderer:w,colOrder:T,rowOrder:_,aggregateFunction:S,transposePivot:A,combineMetric:P,rowSubtotalPosition:k,colSubtotalPosition:F,colTotals:R,rowTotals:I,valueFormat:E,emitCrossFilters:g,setDataMask:i,selectedFilters:X,verboseMap:m,columnFormats:p,metricsLayout:D,metricColorFormatters:le,metricColumns:ie,dateFormatters:oe,onContextMenu:l,timeGrainSqla:M,setControlValue:s,drilldownColumns:O,enableDrilldown:N,ownState:h,enableCrossVariable:B,ratioTotals:z,sliceChartId:ee,tableStyle:{borderColor:q,opacity:$,tableBackground:V,headBackground:W,headFontColor:Y,headFontSize:H,headTextAlignment:Q,headLineHeight:j,tbodyFontColor:G,tbodyFontSize:U,tbodyTextAlignment:J,tbodyLineHeight:K}}}var Rp=o(431609);const Ip=o.p+"example.b4ba0c5a..jpg";class Ep extends s.Z{constructor(){const e=new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Table"),description:(0,l.t)("Used to summarize a set of data by grouping together multiple statistics along two axes. Examples: Sales numbers by region and month, tasks by status and assignee, active users by age and location. Not the most visually stunning visualization, but highly informative and versatile."),exampleGallery:[{url:Ip}],name:(0,l.t)("Pivot Table"),tags:[(0,l.t)("Additive"),(0,l.t)("Report"),(0,l.t)("Tabular"),(0,l.t)("Popular")],thumbnail:Rp});super({buildQuery:_p,controlPanel:Ap,loadChart:()=>Promise.all([o.e(68924),o.e(90667)]).then(o.bind(o,190667)),metadata:e,transformProps:Fp})}}var Lp=o(231363);const Dp=o.p+"example1.297446aa..jpg",Zp=o.p+"example2.ef2d1091..jpg";function Mp(e){return(0,Ut.Z)(e,(e=>[{...e,orderby:(0,$l.Z)(e).orderby}]))}function Op(e){var t,o;const r=null==e||null==(t=e.query_mode)?void 0:t.value;if(r===bt.n.aggregate||r===bt.n.raw)return r;const a=null==e||null==(o=e.all_columns)?void 0:o.value;return a&&a.length>0?bt.n.raw:bt.n.aggregate}function Np(e){return({controls:t})=>Op(t)===e}const Bp=Np(bt.n.aggregate),zp=Np(bt.n.raw),Vp=(e,t)=>t.every((e=>0===(0,S.Z)(e).length))&&Bp({controls:e})?[(0,l.t)("Group By, Metrics or Percentage Metrics must have a value")]:[],qp={type:"SelectControl",label:(0,l.t)("Columns"),description:(0,l.t)("Columns to display"),multi:!0,freeForm:!0,allowAll:!0,commaChoosesOption:!1,default:[],optionRenderer:e=>(0,Z.tZ)(D.E,{showType:!0,column:e}),valueRenderer:e=>(0,Z.tZ)(D.E,{column:e}),valueKey:"column_name",mapStateToProps:({datasource:e,controls:t},o)=>({options:(null==e?void 0:e.columns)||[],queryMode:Op(t),externalValidationErrors:zp({controls:t})&&0===(0,S.Z)(null==o?void 0:o.value).length?[(0,l.t)("must have a value")]:[]}),visibility:zp,resetOnHide:!1},$p={type:"DndColumnSelect",label:(0,l.t)("Columns"),description:(0,l.t)("Columns to display"),default:[],mapStateToProps({datasource:e,controls:t},o){const r={};var a;if(e)if(null!=e&&null!=(a=e.columns[0])&&a.hasOwnProperty("filterable")){const t=e.columns;r.options=Object.fromEntries(t.map((e=>[e.column_name,e])))}else r.options=e.columns;return r.queryMode=Op(t),r.externalValidationErrors=zp({controls:t})&&0===(0,S.Z)(null==o?void 0:o.value).length?[(0,l.t)("must have a value")]:[],r},visibility:zp,resetOnHide:!1},Wp={name:"all_columns",config:(0,n.c)(n.T.ENABLE_EXPLORE_DRAG_AND_DROP)?$p:qp},Hp={name:"groupby",override:{visibility:Bp,resetOnHide:!1,mapStateToProps:(e,t)=>{var o,r,a,n;const{controls:i}=e,l=null==W.ZP||null==(o=W.ZP.groupby)?void 0:o.mapStateToProps,s=null!=(r=null==l?void 0:l(e,t))?r:{};return s.externalValidationErrors=Vp(i,[null==(a=i.metrics)?void 0:a.value,null==(n=i.percent_metrics)?void 0:n.value,t.value]),s},rerender:["metrics","percent_metrics"]}};var Yp=o(205872),Qp=o.n(Yp),jp=o(874981);o(231754),o(437336),o(624203),o(142270);const Gp=({mode:e,theme:t,name:o,width:r,height:a,value:n,...i})=>{const l=o||Math.random().toString(36).substring(7),s="light"===t?"github":"monokai",c=e||"handlebars",d=a||"300px",u=r||"100%";return(0,Z.tZ)("div",{className:"code-editor",style:{minHeight:a,width:u}},(0,Z.tZ)(jp.default,Qp()({mode:c,theme:s,name:l,height:d,width:u,fontSize:14,showPrintMargin:!0,focus:!0,editorProps:{$blockScrolling:!0},wrapEnabled:!0,highlightActiveLine:!0,value:n,setOptions:{enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:2,showGutter:!0}},i)))},Up=({children:e})=>(0,Z.tZ)("div",{className:"ControlHeader"},(0,Z.tZ)("div",{className:"pull-left"},e));var Jp=o(23279),Kp=o.n(Jp),Xp=o(668122);const eg=(0,L.m)([[0,(0,l.t)("page_size.all")],1,2,3,4,5,10,20,50,100,200]),tg=Kp()(((e,t)=>e(t)),Xp.M),og={name:"handlebarsTemplate",config:{...W.ZP.entity,type:e=>{const t=String(null!=e&&e.value?null==e?void 0:e.value:null!=e&&e.default?null==e?void 0:e.default:"");return(0,Z.tZ)("div",null,(0,Z.tZ)(Up,null,e.label),(0,Z.tZ)(Gp,{theme:"dark",value:t,onChange:t=>{tg(e.onChange,t||"")}}))},label:(0,l.t)("Handlebars Template"),description:(0,l.t)("A handlebars template that is applied to the data"),default:'<ul class="data-list">\n  {{#each data}}\n    <li>{{stringify this}}</li>\n  {{/each}}\n</ul>',isInt:!1,renderTrigger:!0,validators:[_.Z],mapStateToProps:({controls:e})=>{var t;return{value:null==e||null==(t=e.handlebars_template)?void 0:t.value}}}},rg={name:"include_time",config:{type:"CheckboxControl",label:(0,l.t)("Include time"),description:(0,l.t)("Whether to include the time granularity as defined in the time section"),default:!1,visibility:Bp,resetOnHide:!1}},ag={name:"timeseries_limit_metric",override:{visibility:Bp,resetOnHide:!1}},ng={type:"MetricsControl",label:(0,l.t)("Percentage metrics"),description:(0,l.t)("Metrics for which percentage of total are to be displayed. Calculated from only data within the row limit."),multi:!0,visibility:Bp,resetOnHide:!1,mapStateToProps:({datasource:e,controls:t},o)=>{var r,a;return{columns:(null==e?void 0:e.columns)||[],savedMetrics:(0,Bt.R)(e),datasource:e,datasourceType:null==e?void 0:e.type,queryMode:Op(t),externalValidationErrors:Vp(t,[null==(r=t.groupby)?void 0:r.value,null==(a=t.metrics)?void 0:a.value,null==o?void 0:o.value])}},rerender:["groupby","metrics"],default:[],validators:[]},ig={...ng,type:"DndMetricSelect"},lg={name:"percent_metrics",config:{...(0,n.c)(n.T.ENABLE_EXPLORE_DRAG_AND_DROP)?ig:ng}},sg={name:"metrics",override:{validators:[],visibility:Bp,mapStateToProps:({controls:e,datasource:t,form_data:o},r)=>{var a,n,i,l;return{columns:null!=t&&null!=(a=t.columns[0])&&a.hasOwnProperty("filterable")?null==t||null==(n=t.columns)?void 0:n.filter((e=>e.filterable)):null==t?void 0:t.columns,savedMetrics:(0,Bt.R)(t),selectedMetrics:o.metrics||(o.metric?[o.metric]:[]),datasource:t,externalValidationErrors:Vp(e,[null==(i=e.groupby)?void 0:i.value,null==(l=e.percent_metrics)?void 0:l.value,r.value])}},rerender:["groupby","percent_metrics"],resetOnHide:!1}},cg={name:"show_totals",config:{type:"CheckboxControl",label:(0,l.t)("Show totals"),default:!1,description:(0,l.t)("Show total aggregations of selected metrics. Note that row limit does not apply to the result."),visibility:Bp,resetOnHide:!1}},dg={name:"order_by_cols",config:{type:"SelectControl",label:(0,l.t)("Ordering"),description:(0,l.t)("Order results by selected columns"),multi:!0,default:[],mapStateToProps:({datasource:e})=>({choices:null!=e&&e.hasOwnProperty("order_by_choices")?null==e?void 0:e.order_by_choices:(null==e?void 0:e.columns)||[]}),visibility:zp,resetOnHide:!1}},ug={name:"order_desc",config:{type:"CheckboxControl",label:(0,l.t)("Sort descending"),default:!0,description:(0,l.t)("Whether to sort descending or ascending"),visibility:({controls:e})=>!(!Bp({controls:e})||null==e||!e.timeseries_limit_metric.value||Zt()(null==e?void 0:e.timeseries_limit_metric.value)),resetOnHide:!1}},mg=(0,n.c)(n.T.DASHBOARD_CROSS_FILTERS)||(0,n.c)(n.T.DASHBOARD_NATIVE_FILTERS)?[{name:"server_pagination",config:{type:"CheckboxControl",label:(0,l.t)("Server pagination"),description:(0,l.t)("Enable server side pagination of results (experimental feature)"),default:!1}}]:[],pg={name:"server_page_length",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Server Page Length"),default:10,choices:eg,description:(0,l.t)("Rows per page, 0 means no pagination"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.server_pagination)?void 0:t.value)}}},gg={name:"query_mode",config:{type:"RadioButtonControl",label:(0,l.t)("Query mode"),default:null,options:[[bt.n.aggregate,Nt.cm[bt.n.aggregate]],[bt.n.raw,Nt.cm[bt.n.raw]]],mapStateToProps:({controls:e})=>({value:Op(e)}),rerender:["all_columns","groupby","metrics","percent_metrics"]}};var hg=o(751995);const fg={name:"styleTemplate",config:{...W.ZP.entity,type:e=>{const t=(0,hg.Fg)(),o=null!=e&&e.value?void 0:"/*\n  .data-list {\n    background-color: yellow;\n  }\n*/";return(0,Z.tZ)("div",null,(0,Z.tZ)(Up,null,(0,Z.tZ)("div",null,e.label,(0,Z.tZ)(Re.V,{iconsStyle:{marginLeft:t.gridUnit},tooltip:(0,l.t)("You need to configure HTML sanitization to use CSS")}))),(0,Z.tZ)(Gp,{theme:"dark",mode:"css",value:e.value,defaultValue:o,onChange:t=>{tg(e.onChange,t||"")}}))},label:(0,l.t)("CSS Styles"),description:(0,l.t)("CSS applied to the chart"),isInt:!1,renderTrigger:!0,validators:[],mapStateToProps:({controls:e})=>{var t;return{value:null==e||null==(t=e.handlebars_template)?void 0:t.value}}}},bg={controlPanelSections:[g.sections.genericTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[gg],[Hp],[sg,Wp],[lg],[ag,dg],[ug],mg,[{name:"row_limit",override:{visibility:({controls:e})=>{var t;return!(null!=e&&null!=(t=e.server_pagination)&&t.value)}}},pg],[rg],[cg],["adhoc_filters"]]},{label:(0,l.t)("Options"),expanded:!0,controlSetRows:[[og],[fg]]}],formDataOverrides:e=>({...e,groupby:(0,f.u)().popAllColumns(),metrics:(0,f.u)().popAllMetrics()})};function yg(e){const{width:t,height:o,formData:r,queriesData:a}=e;return{width:t,height:o,data:a[0].data,formData:r}}class vg extends s.Z{constructor(){const e=new i.Z({description:(0,l.t)("Write a handlebars template to render the data"),name:(0,l.t)("Handlebars"),thumbnail:Lp,exampleGallery:[{url:Dp},{url:Zp}]});super({buildQuery:Mp,controlPanel:bg,loadChart:()=>o.e(79101).then(o.bind(o,79101)),metadata:e,transformProps:yg})}}function xg(e){const{cols:t}=e;return(0,Ut.Z)(e,(e=>[{...e,groupby:t}]))}const Cg={r:255,g:0,b:0,a:1},wg={r:0,g:255,b:0,a:1},Tg={controlPanelSections:[{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"metrics",config:{...W.ZP.metrics,validators:[_.Z,e=>!!(Array.isArray(e)&&e.length>3)&&(0,l.t)("select length must less 3")]}}],["adhoc_filters"]]},{label:(0,l.t)("Controls"),expanded:!0,controlSetRows:[[{name:"main_inst_start",config:{type:"TextControl",renderTrigger:!0,label:(0,l.t)("Main indicator prefix"),description:(0,l.t)("You can enter the main indicator prefix")}}],[{name:"main_inst_end",config:{type:"TextControl",default:"",renderTrigger:!0,label:(0,l.t)("Main indicator suffix"),description:(0,l.t)("You can enter the main indicator suffix")}}],[{name:"secondary_inst_start",config:{type:"TextControl",default:"",renderTrigger:!0,label:(0,l.t)("Secondary indicator prefix"),description:(0,l.t)("Secondary indicator prefix can be entered")}}],[{name:"secondary_inst_end",config:{type:"TextControl",default:"",renderTrigger:!0,label:(0,l.t)("Secondary indicator suffix"),description:(0,l.t)("Secondary indicator suffix can be entered")}}],[{name:"end_inst_start",config:{type:"TextControl",default:"",renderTrigger:!0,label:(0,l.t)("End indicator prefix"),description:(0,l.t)("You can enter the final indicator prefix")}}],[{name:"end_inst_end",config:{type:"TextControl",default:"",renderTrigger:!0,label:(0,l.t)("End indicator suffix"),description:(0,l.t)("You can enter the final indicator suffix")}}],[{name:"main_inst_threshold",config:{type:"TextControl",default:"",renderTrigger:!0,label:(0,l.t)("Main indicator threshold"),description:(0,l.t)("Main indicator thresholds can be entered")}}],[{name:"secondary_inst_threshold",config:{type:"TextControl",default:"",renderTrigger:!0,label:(0,l.t)("Secondary metric threshold"),description:(0,l.t)("Secondary metric thresholds can be entered")}}],[{name:"thirdary_inst_threshold",config:{type:"TextControl",default:"",renderTrigger:!0,label:(0,l.t)("end metric threshold"),description:(0,l.t)("End indicator threshold can be entered")}}],[{name:"main_inst_color_up",config:{type:"ColorPickerControl",default:Cg,renderTrigger:!0,label:(0,l.t)("Main indicator rising color"),description:(0,l.t)("Main indicator rising color")}}],[{name:"main_inst_color_down",config:{type:"ColorPickerControl",default:wg,renderTrigger:!0,label:(0,l.t)("Main indicator decline color"),description:(0,l.t)("Main indicator decline color")}}],[{name:"secondary_inst_color_up",config:{type:"ColorPickerControl",default:Cg,renderTrigger:!0,label:(0,l.t)("Secondary indicator rising color"),description:(0,l.t)("Secondary indicator rising color")}}],[{name:"secondary_inst_color_down",config:{type:"ColorPickerControl",default:wg,renderTrigger:!0,label:(0,l.t)("Secondary indicator drop color"),description:(0,l.t)("Secondary indicator drop color")}}],[{name:"end_inst_color_up",config:{type:"ColorPickerControl",default:Cg,renderTrigger:!0,label:(0,l.t)("End indicator rising color"),description:(0,l.t)("End indicator rising color")}}],[{name:"end_inst_color_down",config:{type:"ColorPickerControl",default:wg,renderTrigger:!0,label:(0,l.t)("End indicator drop color"),description:(0,l.t)("End indicator drop color")}}]]}]};function _g(e){var t,o,r;const{width:a,height:n,formData:i,queriesData:l}=e,{boldText:s,headerFontSize:c,mainInstStart:d,mainInstEnd:u,secondaryInstStart:m,secondaryInstEnd:p,endInstStart:g,endInstEnd:h,mainInstThreshold:f,secondaryInstThreshold:b,thirdaryInstThreshold:y,mainInstColorUp:v,mainInstColorDown:x,secondaryInstColorUp:C,secondaryInstColorDown:w,endInstColorUp:T,endInstColorDown:_}=i,S=l[0].data,A=l[0].colnames;return{width:a,height:n,data:S,top1:(null==S||null==(t=S[0])?void 0:t[null==A?void 0:A[0]])||"",top2:(null==S||null==(o=S[0])?void 0:o[null==A?void 0:A[1]])||"",top3:(null==S||null==(r=S[0])?void 0:r[null==A?void 0:A[2]])||"",boldText:s,headerFontSize:c,mainInstStart:d,mainInstEnd:u,secondaryInstStart:m,secondaryInstEnd:p,endInstStart:g,endInstEnd:h,mainInstThreshold:f,secondaryInstThreshold:b,thirdaryInstThreshold:y,mainInstColorUp:v,mainInstColorDown:x,secondaryInstColorUp:C,secondaryInstColorDown:w,endInstColorUp:T,endInstColorDown:_}}var Sg=o(555253);class Ag extends s.Z{constructor(){const e=new i.Z({description:(0,l.t)("Plugin Chart Number Component"),name:(0,l.t)("Plugin Chart Number Component"),thumbnail:Sg});super({buildQuery:xg,controlPanel:Tg,loadChart:()=>o.e(15622).then(o.bind(o,415622)),metadata:e,transformProps:_g})}}function Pg(e){const{cols:t}=e;return(0,Ut.Z)(e,(e=>[{...e,groupby:t}]))}const kg={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"cols",config:{...W.ZP.groupby,label:(0,l.t)("Dimensions"),description:(0,l.t)("Dimensions to group by")}}],[{name:"metrics",config:{...W.ZP.metrics,validators:[_.Z]}}]]}]};function Fg(e){const{theme:t,queriesData:o,rawFormData:r,height:a,width:n}=e,i=o[0].data,{slice_id:l}=r;return{data:i,slice_id:l,theme:t,height:a,width:n}}var Rg=o(402031);class Ig extends s.Z{constructor(){const e=new i.Z({description:(0,l.t)("Rich Text Chart"),name:(0,l.t)("Rich Text"),thumbnail:Rg});super({buildQuery:Pg,controlPanel:kg,loadChart:()=>Promise.all([o.e(7734),o.e(63651)]).then(o.bind(o,466400)),metadata:e,transformProps:Fg})}}function Eg(e){const{cols:t}=e;return(0,Ut.Z)(e,(e=>[{...e,groupby:t}]))}const Lg={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"rowDimension",config:{...W.ZP.groupby,multi:!1,label:(0,l.t)("Row dimension"),validators:[_.Z],description:(0,l.t)("Row dimension")}}],[{name:"columnDimensionAndcorrelation",config:{...W.ZP.groupby,multi:!1,label:(0,l.t)("Column dimensions and correlations"),validators:[_.Z],description:(0,l.t)("Column dimensions and correlations")}}],[{name:"correlationValue",config:{...W.ZP.groupby,multi:!1,label:(0,l.t)("numerical value"),validators:[_.Z],description:(0,l.t)("numerical value")}}],["adhoc_filters"]]}]};function Dg(e){const{formData:t,height:o,queriesData:r,width:a}=e,{data:n=[]}=(null==r?void 0:r[0])||{};return{formData:t,width:a,height:o,data:n}}var Zg=o(770417);class Mg extends s.Z{constructor(){super({buildQuery:Eg,controlPanel:Lg,loadChart:()=>o.e(36209).then(o.bind(o,936209)),metadata:new i.Z({description:(0,l.t)("Correlation analysis"),name:(0,l.t)("Correlation analysis chart"),thumbnail:Zg}),transformProps:Dg})}}var Og=o(81526);function Ng(e){const{target_config:t}=e;return(0,Ut.Z)(e,(e=>{var o;return[{...e,metrics:(0,Jt.Z)([...null!=(o=null==e?void 0:e.metrics)?o:[],...t?Object.values(t).reduce(((e,t)=>{var o,r;return t.targetType===Og.Pf.DYNAMIC?[...e,null!=(o=null==(r=t.targetValue)?void 0:r.metric_name)?o:t.targetValue]:e}),[]):[]],ht.Z)}]}))}var Bg=o(579793),zg=o(645683);const Vg={type:"RadioButtonControl",label:(0,l.t)("Visualization chart switch"),description:(0,l.t)("Change visualization chart display type"),default:"BarChart",options:zg.Z.map((({key:e,name:t})=>[e,t])),renderTrigger:!0},qg={controlPanelSections:[g.sections.legacyRegularTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"metrics",config:{...W.ZP.metrics,validators:[_.Z]}}],["adhoc_filters"]]},{label:(0,l.t)("Progress chart"),expanded:!0,controlSetRows:[[{name:"chart_type",config:Vg}],[{name:"row_display_numbers",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Number of displays per row"),description:(0,l.t)("Maximum number of displays per row"),isInt:!0,default:1,choices:[[1,1],[2,2],[3,3],[4,4]]}},{name:"chart_width",config:{type:"TextControl",label:(0,l.t)("Progress chart width"),renderTrigger:!0,isInt:!0,default:Bg.SD,description:(0,l.t)("Progress chart width")}}],[{name:"color_scheme",config:{...W.ZP.color_scheme}}]]},{label:(0,l.t)("Progress metric content"),expanded:!0,controlSetRows:[[(0,Z.tZ)(ed.U,null,(0,l.t)("Progress metric name"))],[{name:"name_color",config:{type:"ColorPickerControl",label:(0,l.t)("Font color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:1},description:(0,l.t)("Please select a data label color")}},{name:"name_font_size",config:{type:"TextControl",label:(0,l.t)("Font size"),renderTrigger:!0,isInt:!0,default:14,description:(0,l.t)("Font size")}},{name:"name_font_weight",config:{type:"SelectControl",label:(0,l.t)("Font weight"),renderTrigger:!0,description:(0,l.t)("Font weight"),default:hg.K6.typography.weights.normal,choices:[...Object.entries(hg.K6.typography.weights).map((e=>e.reverse()))]}}],[{name:"name_position",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Display position"),description:(0,l.t)("Display position"),default:"TL",choices:[...Object.entries(Bg.ht)],visibility:({controls:e})=>{var t;return"BarChart"===(null==e||null==(t=e.chart_type)?void 0:t.value)}}}],[(0,Z.tZ)(ed.U,null,(0,l.t)("Percentage value"))],[{name:"value_color",config:{type:"ColorPickerControl",label:(0,l.t)("Font color"),renderTrigger:!0,default:{r:0,g:0,b:0,a:1},description:(0,l.t)("Please select a data label color")}},{name:"value_font_size",config:{type:"TextControl",label:(0,l.t)("Font size"),renderTrigger:!0,isInt:!0,default:24,description:(0,l.t)("Font size")}},{name:"value_font_weight",config:{type:"SelectControl",label:(0,l.t)("Font weight"),renderTrigger:!0,description:(0,l.t)("description"),default:hg.K6.typography.weights.normal,choices:[...Object.entries(hg.K6.typography.weights).map((e=>e.reverse()))]}}],[{name:"value_position",config:{type:"SelectControl",renderTrigger:!0,label:(0,l.t)("Display position"),description:(0,l.t)("Display position"),default:"R",choices:[...Object.entries(Bg.ht)],visibility:({controls:e})=>{var t;return"BarChart"===(null==e||null==(t=e.chart_type)?void 0:t.value)}}}],[{name:"digits_after_decimal",config:{type:"SelectControl",freeForm:!0,label:(0,l.t)("Number format"),renderTrigger:!0,default:mt.Z.PERCENT_1_POINT,choices:Bg.Rv,description:h.YD}}]]},{label:(0,l.t)("Current value / Target value"),expanded:!0,controlSetRows:[[{name:"is_show_value_desc",config:{type:"CheckboxControl",label:(0,l.t)("Show C & T value"),default:!1,description:(0,l.t)("Is Show C & T value")}}],[{name:"current_name",config:{type:"TextControl",label:(0,l.t)("Current value display name"),renderTrigger:!0,default:"\u5b9e\u9645",description:(0,l.t)("Current value display name"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.is_show_value_desc)?void 0:t.value)}}},{name:"target_name",config:{type:"TextControl",label:(0,l.t)("Target value display name"),renderTrigger:!0,default:"\u76ee\u6807",description:(0,l.t)("Target value display name"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.is_show_value_desc)?void 0:t.value)}}}],[{name:"target_config",config:{type:"MetricCompareControl",label:(0,l.t)("Set target value config"),description:(0,l.t)("Further customize how to display each target value"),visibility:({controls:e})=>{var t;return Boolean(null==e||null==(t=e.is_show_value_desc)?void 0:t.value)},shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n,i,l;const s=null!=(r=null==e||null==(a=e.controls)||null==(n=a.metrics)?void 0:n.value)?r:[];return{queryResponse:null==o||null==(i=o.queriesResponse)?void 0:i[0],controlMetricValues:s,columns:(null==e||null==(l=e.datasource)?void 0:l.columns)||[],savedMetrics:(0,Bt.R)(null==e?void 0:e.datasource)}}}}]]},{label:(0,l.t)("Advanced Setting"),expanded:!0,controlSetRows:[[{name:"conditional_formatting",config:{type:"ConditionalFormattingControl",renderTrigger:!0,label:(0,l.t)("Conditional formatting"),description:(0,l.t)("Apply conditional color formatting to metrics"),shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n,i,l,s,c;const d=null!=(r=null==e||null==(a=e.controls)||null==(n=a.metrics)?void 0:n.value)?r:[],u=null!=e&&null!=(i=e.datasource)&&i.hasOwnProperty("verbose_map")?null==e||null==(l=e.datasource)?void 0:l.verbose_map:null!=(s=null==e||null==(c=e.datasource)?void 0:c.columns)?s:{};return{removeIrrelevantConditions:"success"===(null==o?void 0:o.chartStatus),columnOptions:d.map((e=>{var t;return"string"===typeof e?{value:e,label:null!=(t=u[e])?t:e}:{value:e.label,label:e.label}})),verboseMap:u}}}}]]}]};var $g=o(156496);const Wg=[];function Hg(e){var t,o;const{width:r,height:a,datasource:n,formData:i,queriesData:l}=e,{verboseMap:s={}}=n,{metrics:c,targetConfig:d,conditionalFormatting:u=[]}=i,{data:m=[],colnames:p,coltypes:g}=l[0],h=(0,Bt.R)(n),f=(0,S.Z)(c).map((e=>"string"===typeof e?h.find((t=>t.metric_name===e)):e)),b=f.map($g.uJ),y=Object.entries(m[0]).reduce(((e,[t,o])=>{if(b.includes(t)){var r;const{targetType:n,targetValue:i}=null!=(r=null==d?void 0:d[t])?r:{},l={type:Og.Hm.CURRENT,label:t,value:o,config:(a=t,f.find((e=>(null==e?void 0:e.metric_name)===a||(null==e?void 0:e.label)===a)))},s={...l,type:Og.Hm.TARGET};if(n===Og.Pf.FIXED)s.value=i,delete s.label,delete s.config;else if(n===Og.Pf.DYNAMIC){const e=(0,$g.uJ)(i);t!==e&&(s.label=e,s.value=m[0][e],s.config=i)}return[...e,[l,s]]}var a;return e}),[]),v=(p||[]).map(((e,t)=>({key:e,label:(null==s?void 0:s[e])||e,dataType:g[t]}))),x=null!=(t=(0,yt.ni)(null!=(o=null==u?void 0:u.map((e=>({...e,isGradient:!1}))))?o:[],((e,t)=>{var o;return null!=(o=null==e?void 0:e.map((e=>Object.keys(e).reduce(((o,r)=>({...o,[r]:{...t.find((e=>e.key===r)),value:e[r]}})),{}))))?o:[]})(m,v)))?t:Wg;return{width:r,height:a,formData:i,transformedData:y,columnColorFormatters:x}}class Yg extends s.Z{constructor(){const e=new i.Z({description:(0,l.t)("Antv G2Plot Progress Bar"),name:(0,l.t)("Progress Bar"),thumbnail:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAAE+5JREFUeF7tnXmcHMV1x3+vZoURMcfHAQMBAhFxAhjMYbCxcThiAtZujwQYESc+IjS9i5wYYychiTEBx3yc+CZACLDTKzDEDkbggKZHCkcC2DIYAQbMaYPFfTgQLslItmbqJdUzo8/sbPdOT8+0WFW9/m+n33td7/vqt31UdTVBNiEgBBIJkLARAkIgmYAIRHqHEJiGgAhEuocQEIFIHxAC2QjIGSQbN/FyhIAIxJFCS5rZCIhAsnETL0cIiEAcKbSkmY2ACCQbN/FyhIAIxJFCS5rZCIhAsnETL0cIiEAcKbSkmY2ACCQbN/FyhIAIxJFCS5rZCIhAsnETL0cIiEAcKbSkmY2ACCQbN/FyhIAIxJFCS5rZCIhAsnETL0cIiEAcKbSkmY2ACCQbN/FyhIAIxJFCS5rZCIhAsnETL0cIiEAcKbSkmY2ACCQbN/FyhIAIxJFCS5rZCIhAsnETL0cIiEAcKbSkmY2ACCQbN/FyhIAIxJFCS5rZCIhAsnETL0cIiEAcKbSkmY2ACCQbN/FyhIAIxJFCS5rZCIhAsnETL0cIiEAcKbSkmY2ACCQbN/FyhIAIxJFCS5rZCIhAsnETL0cIiEAcKbSkmY2ACCQbN/FyhIAIxJFCS5rZCIhAsnETL0cIiEAcKbSkmY2ACCQbN/FyhIAIxJFCS5rZCIhAsnETL0cIiEAcKbSkmY2ACCQbN/FyhIAIxJFCS5rZCIhAsnETL0cIiEAcKbSkmY2AswI5bjHvUathj2zYGl6ksKoyTm/0GmPkZJ6DIexUqON/X9d48pbLaH2vMdrt5/n8Lg28zfzGwJpqQHdniTe8iA9WCm81vkNDeOLai+mJLHFs8nFWIJ5f/wJAZ/dTTFK0d2WcHukWY3gh70Sz9CeJ6UMA3hNj/yIYPyVFZ1bKdGu3eK39c33etQBeCuDQDp/V0HRCuITuSxurOMZ7seaHW/YKtP+ygH6S1t9WOxFIH5Vl0D7VgDZ2qrhQnl//IkB/n/YwBB5fU1OndTurzCvxgZr4BgDbJ8R+jYgOq5TpwTTH9nxthHZi49TIV4TlwifS+NluIwLpo8LdBOL5ugpgOMMh7q2voyNWfJtej/M95uP8G1u8hR8C8NuNyyq+CqT+I+rbmk8E4cORH2NlOKH+oNvxvTE+CJo3XpZppj2WT9CT3fxc2C8C6aPKhTq987pLyXTUKVvRr5/LoM9kDk+4ISyrY2Njl/izTPzNSAPMl1UnCie323mj9cvB9PHoN03HhkvInGkStxFf30DAH0XxiM+tlgt/mbndljmKQPooaNIZZF6Jf1cTP9pH6IYr09HhBP1XZxzP18sAFJsCeH+4hG5vtxku8eGKOLqXYeJLquXC4qS2jCzio0jxfzf3r+FZtHv1Inql77ZbEkAE0kchkwRS9OtfYtAZfYRuuvLlYVD4sxiB/BjAgeb3ep3evuJSerHdZp7PO2rwC83ffhAG6vCkthR9fScDBzf20+fCgL7cf7vtiSACmVJLWhAGdHU/JfZK+kcgvDchxt0AfU3XcOvyy+iF4VE+QDGbM8CWMfaPhYF6R+fvI6P6QWLsE3VpRTtUxumldpu5J/MOhQL/T/O3B8NA7RvXlqLP8xl8bRQHeH5NjeZ0ezjQD5fN0VcEkodAfP08gJ1iOsRLa2u0W2cnLPr18xl0alwHCgM1pUaDEkh7HDCNhhMUbI6dOM82i0DyEQgnFK0SBmrelEumRXwMFF8f51MH7bYioGfa9w1CIJ7PnwD4W824D4eBis5Isk0mIALZpALh74ZB4SOdh2yM6vPjcZ0z7j7H8/UdrQFHrehdy8fp/kmXWGO8Z0HzY81Lp7sqgTpkiih9bR7jRo+Jien4ygRFl1qyiUAiAskj6QO4B/F17BnEjFdUg8Ifd3bCjnuGSbvjBVK/EqAoDoP+uhrQN9qdiiU+hYkvjjo/oVopK699v1fiT4H4gug3xh3hhOociRedNAnIGSTmDKIY92qKLj/e39z9GhNfWdPqjOsn6OVuvcdLEAgQfwYpjvH2rHnSk6jWMeKms7TfXAN4Tmnaa9kSWmN85p/M+9QLfCOA34piEH0mLNN5rXgLPsuz162JzlY7mt8U0weWTdAPu+Xk6n4RSEflzcAbEZkxht/s7BTmSQ9Ah1UCir0catknCWRQZ5DGGVA/BWC35jGfBrAajC07np6tHarRbtdeRq+22jbi8xkE/lLz7LEsnFDzXe38afIWgaShNNnmZa3p2OVL6K4k12nOIEvDoHBSp9/xi/ntG2r8i7h4SaP1zekhZsBwl4R2vKQVecvHydyvRNuxJX7bLMWPg7GN+Xu6mQC9Y7HTQwSSra4PhIHaL4NAYm/Se73Eah336DHedkutzwfoBKAxTR3AK2C+ekNBnX39OJnHzRu3Yqn+ZSb6W/MDgyeqQcHPlr47XiKQjLVmovnVMpn/4FO2TXGJ1XnQ6N5jC2wIL6HYKS7HjvHOszSvbg1IKk27LFtCz2VM3xk3EUjmUvOlYVBY1ItAAB7YJVavzR4ZrV9MTKcYP2L+SmWi8He9xnDRXgSSXPUfoPGW3jvjTJjwULWsYve9GWeQ6Trv3LZxEQCvrle0x03j9JqLHb7XnEUgMcS0okNbN7cds10nWcdNAzEGM00gI379OwT6k8a9x9Rxk147jUv2zgqkOMoLmXlhZ7EJ/EQlKEz6PfHdjiHaNbyYnu2MMZMEMlLifYm4NdL+TBio1qNhl/p55lydFUgvxIZL/CFFvKLTRxP9/vIy/WwmC6Q4qkNmjERnD6aF1Qlqzb/a2Ox5i3hrJv15VvQeMFT0Ggn4fh5SX4n7B9ALu83dVgSSooKez0cCfHOnadL7IDPlDDKvxIdp4pXNdsc+mi6Osqc1X0AUu8LLKyAqhWWKXud1cROBpKj65iqQEV+vJOAwkyIRDVfKNOks6JX4gyC+qQ2BWcLILEKxN4CtWr9znfasXkrmEbFzmwgkRck3R4F4Pg8DbBaNMGtl/bAaqA/EXAqa9+mNGIzV18Kg8DctG69U/waIonfTk6bIpEC32ZuIQFKUMEkgidNAkicrbrJxEM/X5sY8epNQazqkc2qMdwq/A3Vu3T+tDgO1Z4yAzFnjd8zvStM2rQmRKZBZYyICSVHKgQmEcG1YVsd3HrI5yh07qp1lvtTIKH+EmP+9cWLANeGEaqx31bYVR3kuMy9vnj2CMCiMThVIvQxQNB2FQO+rBPSjFLisMnFSIJM7x+R6xo1teCUugnjKtJKka/PkyYqIvVHuuJme3KAC/V7S9JGknuj5+ucA5kRnj4QnbcVR/jAzN9+95wvDoPCpGIH8C0B/0RTIcZWArrOq96dIxkmBeIt4fyi+N5aPpgM6l+z0SvV/BtFpnfbrFW0XNyLt+dosojBlunzkHzN20n6933mMuEUZpqtr+8tSAF8cBoVPxtmPlHgBEV/VPIPECmSkVL+QiP68YdP/i2Qp+uOMM3FSIKYKnq/NOxLbdlaEib9eLRdOb/1e9PkPGTxlbSoAT4eBil5ZnfqfVz+QNEWl82a4ub7uPUlLiCaN1scd98iFvOXWQ7yagZ0BrNM1mmNWThGBZNedswIp+voaBsw08c7tl0w8TkwHgbAdGPvH4+XY63Zj2z4xMKE0q0wHJjNvsLGYddySP8b1tjBQ0WPaNJvn8+kAf7V5VjgnDApnJfmNjPI8Ym5cMiWsxTvi1wMClSITkFxipSmCLTbeKI+CeTxrPprowOVlir1MixlfyHQYJv5itVxItQL93I/yNoXZ0au0ZoLlS0rTnOmeOjU+dcB3NhsWu/6W52tzZjvA2DDo8GpAZgKnU5uzZ5Dp3uLr1gMIfFElKDSvzeOti76+lYHEFQ27HcPs7+WdDa9UPwdEZ0admejT1TI1FmWYZvPa1u8yrxlXyhS2zEdKPELEG/+evQVtvfRfaW23mLbtd1YgppBeqT4OoimPN6ctMmPl7G3omKXn0rrp7IwAazW+jYEp4wtpOhGB/7ESFD6fxrYpdvOxm9nMeKI6oaKxi25bscRnMfE/NO1eJHCZoX5C4JOa4m5+WoG/HQaFj3WLZ+N+pwXSvCy5LfmGekrJ76yvo6OTPkvQaW3WyGXwZQyYD+ek3sw3QipBIXq5Kc3WvjIjgf60ElBjDKTLdtxC3q42FA0W7jCN6Sua6UBXP4fgtEBMpzDvdc/W+hxuvC+R9DGaChNdWC1T7OqH3TriiM8fI/DXW0vtJNmb//5Q9Llqma7sFrO1f7jEuyvi1qfS7gkDdVBaX2M3PMbvVTq6WY+WAerYHiaiBWk/wtPLcTcXW+cF0l6o4THejxhHEutoDIOhnlPAjd2W+Ulb7OIoH8GsjwLoCCBa3Po1MJ4k4lXM6sZwgippY7XsvMW8C2poLHCtsDocJ7McUE+bWSvrjTWYS8B+0dAiK82Eu8KAmiPtPYWzylgEYlU5JZlBExCBDJqoxLOKgAjEqnJKMoMmIAIZNFGJZxUBEYhV5ZRkBk1ABDJoohLPKgIiEKvKKckMmoAIZNBEJZ5VBEQgVpVTkhk0ARHIoIlKPKsIiECsKqckM2gCIpBBE5V4VhEQgVhVTklm0AREIIMmKvGsIiACsaqcksygCYhABk1U4llFQARiVTklmUETEIEMmqjEs4rAJhfIR0/lbV5bp82CBIcAyiwWsN3/L3a28VsUVtGNS4ZoHTHWMvMvAX6GlLoXjF9Zn3evCbImKPUrYrxeR+1F5qGn3oyFIzaZQLxS/TQoVQLzfr2ycsD+KQIeArjn98kdYLMxRQbWgPgerhVu31Qf9MldIPN9PrEOPhfAri4VM2OuL4Cxiohj19PNGNNKNyZ1T50RrgjomTwTzFUgns9LAZ7ybYo8E7IhNgF3AfxjG3LJOwfW+ppwyawb8jpOLgJZsIAL67ZlsyCbWZhZtmwEHiHw97O5OubFvLIyMXRFHlnnIpD2RY/zaLQzMRmPEk39uq4z+feUKK+qBEMTPbmkMB64QIo+r2Rw6iX7U7TRbRPCfcR8h9sQ0mWvmW+uTgylXpUyTdSBCsQbrV8EpsVpDiw26QkQ8H2AH0nv4a4lK3VFOE6tb8P3DWJgAom+lET8OBhDfbdKAnQSWA/m7xChJmi6Eli/Tqmz4j6N19UzxmBgAvF8bdaV9bI0QnxSEVhFSPiuYip3l4z4lkowlGqF+25UBiKQE8Z4519rjv2McbcGyP7UBNYT+PLU1o4b1mar01dcQK/3i2EgAvF8810883082fIkQMB/ymh7OsKK1NLrynRTOutkqwEJRD8EYO9+GyP+XQn8jMC3dLUSAzDhp2G58M1+UfQtkOIYb8XaTLyTbRMQkMus9JDr3b4jmSZU3wI5zv/1u2sYuivNwcRmAASIlxDL06w0JGcp9YXvjdPzaWyTbPoWyEiJFxDxVf00QnzTEyBErF9N7+GuparXzrvu0reYy//MW98CGfbrn1ag8zK3QBx7IkCEKpif7cnJUWNW6pJwnPqa9Nm3QEZG66cS0/mO1uDNSHs5gXOd4v1mJJXHMWeEQOYvqh1fV+p7eSQoMWMJXE3gl4VNdwIz4hLr+BLvu4H4/u7NFYtBECDwtwB5RTcNyxlxk24a6vl6HYAt0zRabPoi8AaB/62vCO44z4zHvE2BmMe873aH/ZuWqbxElRL9jBkoNO2dN8rnaOYzU7ZdzLITuJ7AT2Z3d8dzZk01Wcy7oMZPADLVPa8uyMAGIr5CBgnTEZ5RkxVNk4t+/bsMOild88UqA4HbCfIwJB23GTbd3TT6g/7aHbfCVo8x8NZ0SYhVDwTWEti8Sqp78HHVdGa+MNW4Wa+fDtBXXa1MXnkTEALyvk0avjP2ldtW4z1fLwUga2GlqWY6m9sI/EA6U7etZvyiDa3yFH19JwMHu12ugWQvj3VTY9xMlv0x+Zx9Nqu7n2Xzjvpw6vzEsJ0AE+NukKyumKpbbG4Lx2283FpU/ydS9FcMzEqVqBgZAuvBuJmInxYc3QlslkuPtqc1PMb7Kc3m1cejABS6p+ymRTTOAdwP8H0EbHCTQvqsrVi8uj1db9GG90Gp0wA6EsCO6VFYbsl4AYTHAX6UzNlDtkQCVn7+IC7bos+HgvQxYLUXg3cHsL0L/YIAZuBlMH5B4OdIqZ8zY60Lufeco2sf0OkZkDgIgRlAoO83CmdADtIEIZAbARFIbmglsA0ERCA2VFFyyI2ACCQ3tBLYBgIiEBuqKDnkRkAEkhtaCWwDARGIDVWUHHIjIALJDa0EtoGACMSGKkoOuREQgeSGVgLbQEAEYkMVJYfcCIhAckMrgW0gIAKxoYqSQ24ERCC5oZXANhAQgdhQRckhNwIikNzQSmAbCIhAbKii5JAbARFIbmglsA0ERCA2VFFyyI2ACCQ3tBLYBgIiEBuqKDnkRkAEkhtaCWwDARGIDVWUHHIjIALJDa0EtoGACMSGKkoOuREQgeSGVgLbQEAEYkMVJYfcCIhAckMrgW0gIAKxoYqSQ24ERCC5oZXANhAQgdhQRckhNwIikNzQSmAbCIhAbKii5JAbARFIbmglsA0ERCA2VFFyyI2ACCQ3tBLYBgIiEBuqKDnkRkAEkhtaCWwDARGIDVWUHHIjIALJDa0EtoGACMSGKkoOuREQgeSGVgLbQEAEYkMVJYfcCIhAckMrgW0gIAKxoYqSQ24ERCC5oZXANhAQgdhQRckhNwIikNzQSmAbCIhAbKii5JAbARFIbmglsA0ERCA2VFFyyI2ACCQ3tBLYBgIiEBuqKDnkRkAEkhtaCWwDARGIDVWUHHIjIALJDa0EtoGACMSGKkoOuRH4P1uhKDL6QYGSAAAAAElFTkSuQmCC"});super({buildQuery:Ng,controlPanel:qg,loadChart:()=>o.e(63202).then(o.bind(o,363202)),metadata:e,transformProps:Hg})}}const Qg=/T(\d{2}:){2}\d{2}$/;class jg extends Date{constructor(e,{formatter:t=String,forceUTC:o=!0}={}){let r=e;o&&"string"===typeof r&&Qg.test(r)&&(r=`${r}Z`),super(r),this.formatter=void 0,this.input=void 0,this.input=e,this.formatter=t,this.toString=()=>this.formatter===String?String(this.input):this.formatter?this.formatter(this):Date.toString.call(this)}}const{PERCENT_3_POINT:Gg}=mt.Z,{DATABASE_DATETIME:Ug}=pt.Z,Jg=[];function Kg(e,t=[]){return t.every((t=>null===t[e]||void 0===t[e]||"number"===typeof t[e]))}const Xg=(0,ut.Z)((function(e,t){if(!e||!e[0])return e||[];const o=t.filter((e=>e.dataType===gt.Z.TEMPORAL));return o.length>0?e.map((e=>{const t={...e};return o.forEach((({key:o,formatter:r})=>{t[o]=new jg(e[o],{formatter:r})})),t})):e})),eh=(0,ut.Z)((function(e){const{datasource:{columnFormats:t,verboseMap:o},rawFormData:{table_timestamp_format:r,metrics:a,percent_metrics:n,column_config:i={}},queriesData:l}=e,s=(0,Me.Z)(e.rawFormData),{data:u,colnames:m,coltypes:p}=l[0]||{},g=(null!=a?a:[]).map(ht.Z),h=(null!=n?n:[]).map(ht.Z),f=h.map((e=>`%${e}`)),b=new Set(g),y=new Set(f),v=new Set(h),x=(m||[]).filter((e=>!(v.has(e)&&!b.has(e)))).map(((e,a)=>{const n=(null==o?void 0:o[e])||e,l=p[a],m=i[e]||{},g=b.has(e)&&Kg(e,u),h=y.has(e),f=l===gt.Z.TEMPORAL,v=null==t?void 0:t[e],x=m.d3NumberFormat||v;let C;if(f||m.d3TimeFormat){const t=m.d3TimeFormat||v,o=t||r;o===ft.Z.id?C=s?(0,d.uh)(s):t?(0,d.bt)(t):Kg(e,u)?(0,d.bt)(Ug):String:o&&(C=(0,d.bt)(o))}else h?C=(0,c.JB)(x||Gg):(g||x)&&(C=(0,c.JB)(x));return{key:e,label:n,dataType:l,isNumeric:l===gt.Z.NUMERIC,isMetric:g,isPercentMetric:h,formatter:C,config:m}}));return[g,f,x]}),(function(e,t){var o,r,a,n,i,l,s,c;const d=e[0],u=t[0];return d.datasource.columnFormats===u.datasource.columnFormats&&d.datasource.verboseMap===u.datasource.verboseMap&&d.formData.tableTimestampFormat===u.formData.tableTimestampFormat&&d.formData.timeGrainSqla===u.formData.timeGrainSqla&&JSON.stringify(d.formData.columnConfig||null)===JSON.stringify(u.formData.columnConfig||null)&&(0,vt.Z)(d.formData.metrics,u.formData.metrics)&&(0,vt.Z)(null==(o=d.queriesData)||null==(r=o[0])?void 0:r.colnames,null==(a=u.queriesData)||null==(n=a[0])?void 0:n.colnames)&&(0,vt.Z)(null==(i=d.queriesData)||null==(l=i[0])?void 0:l.coltypes,null==(s=u.queriesData)||null==(c=s[0])?void 0:c.coltypes)&&JSON.stringify(d.formData.extraFilters||null)===JSON.stringify(u.formData.extraFilters||null)&&JSON.stringify(d.formData.extraFormData||null)===JSON.stringify(u.formData.extraFormData||null)})),th=e=>{var t,o;const{height:r,width:a,rawFormData:n,queriesData:i=[]}=e,{server_pagination:l=!1,excel_spreadsheet:s,conditional_formatting:c}=n,d=(0,Me.Z)(n),[u,m,p]=eh(e);let g,h,f;var b,y,v,x,C,w;l?([g,h]=i,f=null!=(b=null==(y=h)||null==(v=y.data)||null==(x=v[0])?void 0:x.rowcount)?b:0):([g]=i,f=null!=(C=null==(w=g)?void 0:w.rowcount)?C:0);const T=Xg(null==(t=g)?void 0:t.data,p),_=null!=(o=(0,yt.ni)(c,((e,t)=>{var o;return null!=(o=null==e?void 0:e.map((e=>Object.keys(e).reduce(((o,r)=>({...o,[r]:{...t.find((e=>e.key===r)),value:e[r]}})),{}))))?o:[]})(T,p)))?o:Jg;return{height:r,width:a,data:T,columns:p,metrics:u,percentMetrics:m,rowCount:f,timeGrain:d,excelSpreadsheet:s,columnColorFormatters:_}};var oh=o(387093);const rh=o.p+"Table.f8a6698c..jpg",ah=o.p+"Table2.c8533c18..jpg",nh=o.p+"Table3.8997ea72..jpg";function ih(e){var t,o;const r=null==e||null==(t=e.query_mode)?void 0:t.value;if(r===bt.n.aggregate||r===bt.n.raw)return r;const a=null==e||null==(o=e.all_columns)?void 0:o.value;return a&&a.length>0?bt.n.raw:bt.n.aggregate}function lh(e){return({controls:t})=>ih(t)===e}const sh=lh(bt.n.aggregate),ch=lh(bt.n.raw),dh=(e,t)=>t.every((e=>0===(0,S.Z)(e).length))&&sh({controls:e})?[(0,l.t)("Group By, Metrics or Percentage Metrics must have a value")]:[],uh={...W.ZP.groupby,label:(0,l.t)("Columns"),description:(0,l.t)("Columns to display"),multi:!0,freeForm:!0,allowAll:!0,commaChoosesOption:!1,optionRenderer:e=>(0,Z.tZ)(D.E,{showType:!0,column:e}),valueRenderer:e=>(0,Z.tZ)(D.E,{column:e}),valueKey:"column_name",mapStateToProps:({datasource:e,controls:t},o)=>({options:(null==e?void 0:e.columns)||[],queryMode:ih(t),externalValidationErrors:ch({controls:t})&&0===(0,S.Z)(null==o?void 0:o.value).length?[(0,l.t)("must have a value")]:[]}),visibility:ch,resetOnHide:!1},mh={...W.ZP.metrics,label:(0,l.t)("Percentage metrics"),description:(0,l.t)("Metrics for which percentage of total are to be displayed. Calculated from only data within the row limit."),visibility:sh,resetOnHide:!1,mapStateToProps:({datasource:e,controls:t},o)=>{var r,a;return{columns:(null==e?void 0:e.columns)||[],savedMetrics:(0,Bt.R)(e),datasource:e,datasourceType:null==e?void 0:e.type,queryMode:ih(t),externalValidationErrors:dh(t,[null==(r=t.groupby)?void 0:r.value,null==(a=t.metrics)?void 0:a.value,null==o?void 0:o.value])}},rerender:["groupby","metrics"],default:[],validators:[]},ph={controlPanelSections:[g.sections.genericTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[[{name:"groupby",override:{visibility:sh,resetOnHide:!1,mapStateToProps:(e,t)=>{var o,r,a,n;const{controls:i}=e,l=null==W.ZP||null==(o=W.ZP.groupby)?void 0:o.mapStateToProps,s=null!=(r=null==l?void 0:l(e,t))?r:{};return s.externalValidationErrors=dh(i,[null==(a=i.metrics)?void 0:a.value,null==(n=i.percent_metrics)?void 0:n.value,t.value]),s},rerender:["metrics","percent_metrics"]}}],[Mt.O6?{name:"time_grain_sqla",config:{...W.ZP.time_grain_sqla,visibility:({controls:e})=>{var t;const o=Object.fromEntries((0,S.Z)(null==e||null==(t=e.groupby)?void 0:t.options).map((e=>[e.column_name,e.is_dttm])));return(0,S.Z)(null==e?void 0:e.groupby.value).map((e=>!!(0,Ot.GA)(e)||!!(0,Ot.s9)(e)&&!!o[e])).some(Boolean)}}}:null,Mt.O6?"temporal_columns_lookup":null],[{name:"metrics",override:{validators:[],visibility:sh,resetOnHide:!1,mapStateToProps:({controls:e,datasource:t,form_data:o},r)=>{var a,n,i,l;return{columns:null!=t&&null!=(a=t.columns[0])&&a.hasOwnProperty("filterable")?null==t||null==(n=t.columns)?void 0:n.filter((e=>e.filterable)):null==t?void 0:t.columns,savedMetrics:(0,Bt.R)(t),selectedMetrics:o.metrics||(o.metric?[o.metric]:[]),datasource:t,externalValidationErrors:dh(e,[null==(i=e.groupby)?void 0:i.value,null==(l=e.percent_metrics)?void 0:l.value,r.value])}},rerender:["groupby","percent_metrics"]}},{name:"all_columns",config:uh}],[{name:"percent_metrics",config:mh}],["adhoc_filters"],[{name:"timeseries_limit_metric",override:{visibility:sh,resetOnHide:!1}},{name:"order_by_cols",config:{type:"SelectControl",label:(0,l.t)("Ordering"),description:(0,l.t)("Order results by selected columns"),multi:!0,default:[],mapStateToProps:({datasource:e})=>({choices:null!=e&&e.hasOwnProperty("order_by_choices")?null==e?void 0:e.order_by_choices:(null==e?void 0:e.columns)||[]}),visibility:ch,resetOnHide:!1}}],[{name:"row_limit",override:{default:1e3}}]]},{label:(0,l.t)("Options"),expanded:!0,controlSetRows:[[{name:"column_config",config:{type:"ColumnConfigControl",label:(0,l.t)("Customize columns"),description:(0,l.t)("Further customize how to display each column"),renderTrigger:!0,shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n,i;const{colnames:l}=null!=(r=null==o||null==(a=o.queriesResponse)?void 0:a[0])?r:{},{metrics:s,percent_metrics:c}=null!=(n=null==e?void 0:e.form_data)?n:{},d=(null!=s?s:[]).map(ht.Z),u=(null!=c?c:[]).map(ht.Z),m=new Set(d),p=new Set(u),g=(l||[]).filter((e=>!(p.has(e)&&!m.has(e))));return{queryResponse:null==o||null==(i=o.queriesResponse)?void 0:i[0],appliedColumnNames:g}}}}],[{name:"conditional_formatting",config:{type:"ConditionalFormattingControlPro",renderTrigger:!0,label:(0,l.t)("Conditional formatting"),description:(0,l.t)("Apply conditional color formatting to numbers, text, and time columns"),shouldMapStateToProps:()=>!0,mapStateToProps(e,t,o){var r,a,n,i,l,s,c;const d=null!=e&&null!=(r=e.datasource)&&r.hasOwnProperty("verbose_map")?null==e||null==(a=e.datasource)?void 0:a.verbose_map:null!=(n=null==e||null==(i=e.datasource)?void 0:i.columns)?n:{},{colnames:u,coltypes:m}=null!=(l=null==o||null==(s=o.queriesResponse)?void 0:s[0])?l:{},{metrics:p,percent_metrics:g}=null!=(c=null==e?void 0:e.form_data)?c:{},h=(null!=p?p:[]).map(ht.Z),f=(null!=g?g:[]).map(ht.Z),b=new Set(h),y=new Set(f);return{columnOptions:Array.isArray(u)&&Array.isArray(m)?u.reduce(((e,t,o)=>{var r;return y.has(t)&&!b.has(t)||![gt.Z.NUMERIC,gt.Z.STRING,gt.Z.TEMPORAL].includes(m[o])?e:[...e,{value:t,label:null!=(r=d[t])?r:t,type:m[o]}]}),[]):[],verboseMap:d}}}}],[{name:"excel_spreadsheet",config:{type:"HiddenControl",hidden:!0,default:[],renderTrigger:!0}}]]}],formDataOverrides:e=>({...e,metrics:(0,f.u)().popAllMetrics(),groupby:(0,f.u)().popAllColumns()})};const gh=(e,t)=>{const{percent_metrics:o,order_desc:r=!1}=e,a=function(e){const{query_mode:t}=e;if(t===bt.n.aggregate||t===bt.n.raw)return t;const o=null==e?void 0:e.all_columns;return o&&o.length>0?bt.n.raw:bt.n.aggregate}(e),n=(0,S.Z)(e.timeseries_limit_metric)[0];let i=e;return a===bt.n.raw&&(i={...e,include_time:!1}),(0,Ut.Z)(i,(l=>{var s,c,d,u,m,p,g,h;let{metrics:f,orderby:b=[],columns:y=[]}=l,v=[];if(a===bt.n.aggregate){var x;if(f=f||[],n?b=[[n,!r]]:(null==(x=f)?void 0:x.length)>0&&(b=[[f[0],!1]]),o&&o.length>0){const e=(0,Jt.Z)(o.map(ht.Z));f=(0,Jt.Z)(f.concat(o),ht.Z),v=[{operation:"contribution",options:{columns:e,rename_columns:e.map((e=>`%${e}`))}}]}y=y.map((t=>{var o;return(0,Ot.s9)(t)&&e.time_grain_sqla&&Mt.O6&&null!=e&&null!=(o=e.temporal_columns_lookup)&&o[t]?{timeGrain:e.time_grain_sqla,columnType:"BASE_AXIS",sqlExpression:t,label:t,expressionType:"SQL"}:t}))}const C={},w=null!=(s=null==t?void 0:t.ownState)?s:{};var T,_,S;i.server_pagination&&(C.row_limit=null!=(T=w.pageSize)?T:i.server_page_length,C.row_offset=(null!=(_=w.currentPage)?_:0)*(null!=(S=w.pageSize)?S:0));let A={...l,columns:y,orderby:b,metrics:f,post_processing:v,...C};var P,k;e.server_pagination&&null!=t&&null!=(c=t.extras)&&null!=(d=c.cachedChanges)&&d[e.slice_id]&&JSON.stringify(null==t||null==(u=t.extras)||null==(m=u.cachedChanges)?void 0:m[e.slice_id])!==JSON.stringify(A.filters)&&(A={...A,row_offset:0},((e=(()=>{}),t,o)=>{e({ownState:{currentPage:t,pageSize:o}})})(null==t||null==(P=t.hooks)?void 0:P.setDataMask,0,null!=(k=A.row_limit)?k:0));null==t||null==(p=t.hooks)||p.setCachedChanges({[e.slice_id]:A.filters});const F=[];null!=(g=f)&&g.length&&e.show_totals&&a===bt.n.aggregate&&F.push({...A,columns:[],row_limit:0,row_offset:0,post_processing:[],order_desc:void 0,orderby:void 0});const R=null==(h=e.extra_form_data)?void 0:h.interactive_groupby;return R&&A.columns&&(A.columns=[...new Set([...A.columns,...R])]),e.server_pagination?[{...A},{...A,row_limit:0,row_offset:0,post_processing:[],is_rowcount:!0},...F]:[A,...F]}))},hh=(()=>{let e={};const t=t=>{e={...e,...t}};return(o,r)=>{var a;return gh({...o},{extras:{cachedChanges:e},ownState:null!=(a=null==r?void 0:r.ownState)?a:{},hooks:{...null==r?void 0:r.hooks,setDataMask:()=>{},setCachedChanges:t}})}})(),fh=new i.Z({behaviors:[dt.cg.INTERACTIVE_CHART,dt.cg.DRILL_TO_DETAIL],category:(0,l.t)("Table"),canBeAnnotationTypes:["EVENT","INTERVAL"],description:(0,l.t)("Classic row-by-column spreadsheet like view of a dataset. Use tables to showcase a view into the underlying data or to show aggregated metrics."),exampleGallery:[{url:rh},{url:ah},{url:nh}],name:(0,l.t)("Excel-Table"),tags:[(0,l.t)("Additive"),(0,l.t)("Business"),(0,l.t)("Formattable"),(0,l.t)("Pattern"),(0,l.t)("Popular"),(0,l.t)("Report"),(0,l.t)("Sequential"),(0,l.t)("Tabular"),(0,l.t)("Description")],thumbnail:oh,deprecated:!1});class bh extends s.Z{constructor(){super({loadChart:()=>Promise.all([o.e(68924),o.e(11795)]).then(o.bind(o,311795)),metadata:fh,transformProps:th,controlPanel:ph,buildQuery:hh})}}const yh=()=>{};function vh(e){const{datasource:t,formData:o,hooks:r,initialValues:a,queriesData:n,rawDatasource:i={},rawFormData:l,width:s,height:c}=e,{onAddFilter:d=yh,onFilterMenuOpen:u=yh,onFilterMenuClose:m=yh}=r,{sliceId:p,dateFilter:g,instantFiltering:h,showDruidTimeGranularity:f,showDruidTimeOrigin:b,showSqlaTimeColumn:y,showSqlaTimeGranularity:v}=o,{verboseMap:x={}}=t,C=(o.filterConfigs||[]).map((e=>({...e,columnValue:e.column,label:e.label||x[e.column]||e.column})));return{chartId:p,width:s,height:c,datasource:i,filtersChoices:n[0].data,filtersFields:C,instantFiltering:h,onChange:d,onFilterMenuOpen:u,onFilterMenuClose:m,origSelectedValues:a||{},showDateFilter:g,showDruidTimeGrain:f,showDruidTimeOrigin:b,showSqlaTimeColumn:y,showSqlaTimeGrain:v,rawFormData:l}}var xh=o(734168);const Ch=o.p+"example1.022400bc..jpg",wh=o.p+"example2.b5dfc507..jpg",Th={controlPanelSections:[g.sections.legacyTimeseriesTime,{label:(0,l.t)("Filters configuration"),expanded:!0,controlSetRows:[[{name:"filter_configs",config:{type:"CollectionControl",label:(0,l.t)("Filters"),description:(0,l.t)("Cascade relationship can be configured between filters by dragging. When the relationship between filters is cascade, the input of the parent filter will be used as the filter condition for the value of the child filter (drop-down menu) option"),validators:[],controlName:"FilterBoxItemControl",mapStateToProps:e=>{const{datasource:t,form_data:o}=e;return{datasource:t,form_data:o}}}}],[(0,Z.tZ)("hr",null)],[{name:"date_filter",config:{type:"CheckboxControl",label:(0,l.t)("Date filter"),default:!0,description:(0,l.t)("Whether to include a time filter")}}],[{name:"instant_filtering",config:{type:"CheckboxControl",label:(0,l.t)("Instant filtering"),renderTrigger:!0,default:!1,description:(0,l.t)("Check to apply filters instantly as they change instead of displaying [Apply] button")}}],[{name:"show_sqla_time_granularity",config:{type:"CheckboxControl",label:(0,l.t)("Show time grain dropdown"),default:!1,description:(0,l.t)("Check to include time grain dropdown")}}],[{name:"show_sqla_time_column",config:{type:"CheckboxControl",label:(0,l.t)("Show time column"),default:!1,description:(0,l.t)("Check to include time column dropdown")}}],["adhoc_filters"]]}],controlOverrides:{adhoc_filters:{label:(0,l.t)("Limit selector values"),description:(0,l.t)("These filters apply to the values available in the dropdowns")}}},_h=new i.Z({category:(0,l.t)("Tools"),name:(0,l.t)("Filter box"),description:(0,l.t)("Chart component that lets you add a custom filter UI in your dashboard. When added to dashboard, a filter box lets users specify specific values or ranges to filter charts by. The charts that each filter box is applied to can be fine tuned as well in the dashboard view.\n\n    Note that this plugin is being replaced with the new Filters feature that lives in the dashboard view itself. It's easier to use and has more capabilities!"),exampleGallery:[{url:Ch},{url:wh}],thumbnail:xh,useLegacyApi:!0});class Sh extends s.Z{constructor(){super({controlPanel:Th,metadata:_h,transformProps:vh,loadChart:()=>Promise.resolve().then(o.bind(o,492496))})}}function Ah(e){const{height:t,datasource:o,formData:r,queriesData:a}=e,{columnCollection:n=[],groupby:i,metrics:l,url:s}=r,{records:c,columns:d}=a[0].data,u=(null==i?void 0:i.length)>0;let m;if(u)m=d.map((e=>"object"===typeof e?e:{label:e}));else{const e=o.metrics.reduce(((e,t)=>{const o=e;return o[t.metric_name]=t,o}),{});m=l.map((t=>"object"===typeof t?t:e[t]))}return n.forEach((e=>{const t=e;"string"===typeof t.timeLag&&t.timeLag&&(t.timeLag=parseInt(t.timeLag,10))})),{height:t,data:c,columnConfigs:n,rows:m,rowType:u?"column":"metric",url:s}}var Ph=o(24432);const kh=o.p+"example.74513bdf..jpg",Fh={controlPanelSections:[g.sections.legacyTimeseriesTime,{label:(0,l.t)("Query"),expanded:!0,controlSetRows:[["metrics"],["adhoc_filters"],["groupby"],["limit"],[{name:"column_collection",config:{type:"CollectionControl",label:(0,l.t)("Time series columns"),renderTrigger:!0,validators:[_.Z],controlName:"TimeSeriesColumnControl"}}],["row_limit"],[{name:"url",config:{type:"TextControl",label:(0,l.t)("URL"),description:(0,l.t)("Templated link, it's possible to include {{ metric }} or other values coming from the controls."),default:""}}]]}],controlOverrides:{groupby:{multiple:!1}},formDataOverrides:e=>({...e,groupby:(0,f.u)().popAllColumns(),metrics:(0,f.u)().popAllMetrics()})},Rh=new i.Z({category:(0,l.t)("Table"),name:(0,l.t)("Time-series Table"),description:(0,l.t)("Compare multiple time series charts (as sparklines) and related metrics quickly."),exampleGallery:[{url:kh}],tags:[(0,l.t)("Multi-Variables"),(0,l.t)("Comparison"),(0,l.t)("Legacy"),(0,l.t)("Percentages"),(0,l.t)("Tabular"),(0,l.t)("Text"),(0,l.t)("Trend")],thumbnail:Ph,useLegacyApi:!0});class Ih extends s.Z{constructor(){super({metadata:Rh,transformProps:Ah,loadChart:()=>Promise.all([o.e(79521),o.e(80378),o.e(76962),o.e(39835)]).then(o.bind(o,230498)),controlPanel:Fh})}}class Eh extends a.Z{constructor(){const e=(0,n.c)(n.T.DASHBOARD_FILTERS_EXPERIMENTAL)?[(new Em).configure({key:"filter_groupby"})]:[];super({name:"Legacy charts",plugins:[(new fr).configure({key:"area"}),(new Tr).configure({key:"bar"}),(new $a).configure({key:"big_number"}),(new Ja).configure({key:"big_number_total"}),(new Bn).configure({key:"box_plot"}),(new kr).configure({key:"bubble"}),(new Lr).configure({key:"bullet"}),(new x).configure({key:"cal_heatmap"}),(new k).configure({key:"chord"}),(new Nr).configure({key:"compare"}),(new Yr).configure({key:"dist_bar"}),(new Jr).configure({key:"dual_line"}),(new N).configure({key:"event_flow"}),(new Sh).configure({key:"filter_box"}),(new xi).configure({key:"funnel"}),(new Vi).configure({key:"treemap_v2"}),(new dl).configure({key:"gauge_chart"}),(new Al).configure({key:"graph_chart"}),(new ql).configure({key:"radar"}),(new Ts).configure({key:"mixed_timeseries"}),(new J).configure({key:"heatmap"}),(new ie).configure({key:"histogram"}),(new me).configure({key:"horizon"}),(new aa).configure({key:"line"}),(new ca).configure({key:"line_multi"}),(new be).configure({key:"paired_ttest"}),(new _e).configure({key:"para"}),(new Ze).configure({key:"partition"}),(new Gs).configure({key:"pie"}),(new rc).configure({key:"scatter_clustering"}),(new qe).configure({key:"pivot_table"}),(new Ep).configure({key:"pivot_table_v2"}),(new Ge).configure({key:"rose"}),(new rt).configure({key:"sankey"}),(new ct).configure({key:"sunburst"}),(new oo).configure({key:"table"}),(new pa).configure({key:"time_pivot"}),(new Ih).configure({key:"time_table"}),(new mo).configure({key:"treemap"}),(new bh).configure({key:"excel_table"}),(new Ro).configure({key:"word_cloud"}),(new cc).configure({key:"lastest_world_map"}),(new Zc).configure({key:"echarts_area"}),(new Xc).configure({key:"echarts_timeseries"}),(new fd).configure({key:"echarts_timeseries_bar"}),(new Cd).configure({key:"echarts_timeseries_line"}),(new Zd).configure({key:"echarts_timeseries_smooth"}),(new Jd).configure({key:"echarts_timeseries_scatter"}),(new pu).configure({key:"echarts_timeseries_step"}),(new Pu).configure({key:"waterfall"}),(new sm).configure({key:"filter_select"}),(new rp).configure({key:"filter_text_list_select"}),(new Hm).configure({key:"filter_tab"}),(new hp).configure({key:"select_tree"}),(new Wm).configure({key:"filter_textinput"}),(new gm).configure({key:"filter_range"}),(new vm).configure({key:"filter_time"}),(new Sm).configure({key:"filter_timecolumn"}),(new Nm).configure({key:"filter_timegrain"}),(new Ou).configure({key:"tree_chart"}),(new Gu).configure({key:"sunburst_v2"}),(new vg).configure({key:"handlebars"}),(new Ag).configure({key:"number_component"}),(new Ig).configure({key:"rich_text"}),(new Mg).configure({key:"correlation_analysis"}),(new Cp).configure({key:"dynamic_column"}),(new Yg).configure({key:"antv_g2_plot_progress"}),...e]})}}var Lh=o(112515);const Dh={controlPanelSections:[{label:(0,l.t)("Code"),controlSetRows:[[{name:"markup_type",config:{type:"SelectControl",label:(0,l.t)("Markup type"),clearable:!1,choices:(0,Lh.mG)(["markdown","html"]),default:"markdown",validators:[_.Z],description:(0,l.t)("Pick your favorite markup language")}}],[{name:"code",config:{type:"TextAreaControl",label:(0,l.t)("Code"),description:(0,l.t)("Put your code here"),mapStateToProps:e=>({language:e.controls&&e.controls.markup_type?e.controls.markup_type.value:"markdown"}),default:""}}]]}],controlOverrides:{code:{default:"####Section Title\nA paragraph describing the section of the dashboard, right before the separator line \n\n---------------"}},sectionOverrides:{druidTimeSeries:{controlSetRows:[]},sqlaTimeSeries:{controlSetRows:[]}}};function Zh(){(new Eh).register(),(0,r.Z)().registerValue("separator",Dh)}}}]);