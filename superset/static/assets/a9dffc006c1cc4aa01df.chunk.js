"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[74908],{274908:(e,t,a)=>{a.r(t),a.d(t,{default:()=>O});var l=a(23279),r=a.n(l),i=a(667294),n=a(828216),o=a(890057),u=a(355786),s=a(310581),d=a(662720),v=a(616355),f=a(49937),c=a(867e3),p=a(432787),m=a(708509),h=a(555453),S=a(401498),g=a(246789),Z=a(542170),x=a(226618),b=a(211965);const y=({filterState:e})=>e.value||"",C=e=>{const{onClose:t=(()=>{}),onOpen:a=(()=>{}),visible:l,id:r,name:o,onDetermine:u,filterState:s,onRese:d}=e,v=(0,n.v9)((e=>e.dashboardState.mobileFilterType)),f=(0,n.v9)((e=>e.dashboardState.mobileFilterStatus)),C=(0,n.v9)((e=>e.dashboardState.drawerStatus)),[k,F]=(0,i.useState)((()=>y({filterState:s}))),w={backgroundColor:k?x.Fu:x.hR,color:k?x.zP:x.k2,border:"none",fontSize:"14px",height:"40px",background:"#f0f2f5",marginBottom:"12px",marginTop:"6px",borderRadius:"30px",padding:"0 12px",textAlign:"center",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},M=()=>{k!==s.value&&(u(k),t())},O=()=>{d(),F("")},D=e=>{var t;const a=null==e||null==(t=e.target)?void 0:t.value;F(a)};(0,i.useEffect)((()=>{null!=s&&s.value?F(s.value):F("")}),[null==s?void 0:s.value]),(0,Z.Z)((()=>{C||F(y({filterState:s}))}),[C]),(0,Z.Z)((()=>{f.confirm&&!f.reset&&M(),!f.confirm&&f.reset&&O()}),[JSON.stringify(f),k]);return(0,b.tZ)(i.Fragment,null,(0,b.tZ)(c.Z,{type:v,id:r,name:o,onClick:a,defaultActiveKey:[r]},(0,b.tZ)(p.Z,{placeholder:"\u8f93\u5165\u5173\u952e\u5b57\u8fc7\u6ee4",value:k,onChange:D,style:{...w}})),(0,b.tZ)(m.Z,{visible:l,onMaskClick:()=>{t(),F(y({filterState:s}))}},(0,b.tZ)(h.Z,null,(0,b.tZ)(S.Z,{text:o}),(0,b.tZ)("div",{style:{display:"flex",flexDirection:"column",flex:1,width:"100%",padding:"8px 0px 0px 4px"}},(0,b.tZ)(p.Z,{placeholder:"\u8f93\u5165\u5173\u952e\u5b57\u8fc7\u6ee4",value:k,onChange:D})),(0,b.tZ)(g.Z,{onRest:O,onConfirm:M}))))};var k=a(174448),F=a(356080),w=a(52004);function M(e,t){return"filterTextInputState"===t.type?(e.extraFormData=t.extraFormData,e.__cache=t.__cache,e.filterState={...e.filterState,...t.filterState},e):e}function O(e){const{coltypeMap:t,data:a,filterState:l,formData:c,height:p,width:m,setDataMask:h,appSection:S}=e,[g,Z]=(0,i.useState)(""),{enableEmptyFilter:x,inverseSelection:y,defaultToFirstItem:O}=c,D=(0,i.useMemo)((()=>(0,u.Z)(c.groupby).map(s.Z)),[c.groupby]),[T]=D,[_,I]=(0,o.C)(M,{extraFormData:{},filterState:l}),E=t[T],N=(0,i.useMemo)((()=>(0,F.EG)({timeFormatter:d.Z})),[]),R=(0,i.useCallback)((e=>{const t=!e;I({type:"filterTextInputState",__cache:l,extraFormData:(0,F.r6)(T,e,t,y),filterState:{...l,value:S===v.Tr.FILTER_CONFIG_MODAL&&O?"":e}})}),[S,T,E,O,I,x,y,JSON.stringify(l),N]),A=S===v.Tr.FILTER_CONFIG_MODAL&&O,L=(0,i.useCallback)((e=>{var t;const a=(null==e||null==(t=e.target)?void 0:t.value)||"";Z(a),J(a)}),[R]),J=(0,i.useCallback)(r()((e=>{R(e)}),500),[]),K=(0,i.useMemo)((()=>{if(l.validateMessage)return(0,b.tZ)(k.Am,{status:l.validateStatus},l.validateMessage)}),[l.validateMessage,l.validateStatus]);(0,i.useEffect)((()=>{R(l.value)}),[T,A,O,x,y,R,a,JSON.stringify(l.value)]),(0,i.useEffect)((()=>{h(_)}),[JSON.stringify(_)]),(0,i.useEffect)((()=>{Z(l.value)}),[l.value]);const[B,G]=(0,i.useState)(!1);return(0,n.v9)((e=>{var t,a;return null==(t=e.dashboardInfo)||null==(a=t.metadata)?void 0:a.layout_mode}))===w.kB.MOBILE?(0,b.tZ)(C,{id:null==c?void 0:c.ftId,name:null==c?void 0:c.ftName,data:e,filterState:l,visible:B,onClose:()=>G(!1),onOpen:()=>G(!0),onDetermine:e=>{L({target:{value:e}}),G(!1)},onRese:()=>{L(""),G(!1)}}):(0,b.tZ)(k.un,{height:p,width:m},(0,b.tZ)(k.jp,{validateStatus:l.validateStatus,extra:K},(0,b.tZ)(f.oc,{placeholder:"\u8f93\u5165\u641c\u7d22\u6587\u5b57",value:g||l.value||"",onChange:L})))}},174448:(e,t,a)=>{a.d(t,{Am:()=>o,jp:()=>n,un:()=>i});var l=a(751995),r=a(804591);const i=l.iK.div`
  min-height: ${({height:e})=>e}px;
  width: ${({width:e})=>e}px;
`,n=(0,l.iK)(r.Z)`
  &.ant-row.ant-form-item {
    margin: 0;
  }
`,o=l.iK.div`
  color: ${({theme:e,status:t="error"})=>{var a;return null==(a=e.colors[t])?void 0:a.base}};
`}}]);