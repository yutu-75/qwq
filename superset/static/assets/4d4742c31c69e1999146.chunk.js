"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[92435],{592435:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var r=n(667294),i=n(263475),a=n(757016),o=n(751995),s=n(683862),c=n(211965);const u=o.iK.div`
  ${({position:e})=>`\n    position: ${e.position};\n    left: ${e.left||0};\n    top: ${e.top||0};\n    zIndex: 9999,\n    border: 1px #eee solid;\n\n\n    .ant-menu-submenu-active {\n      background: #5d9cec;\n    }\n\n    .ant-menu-submenu-active .ant-menu-submenu-title {\n      color: #ffffff;\n    }\n    .ant-menu-submenu{\n      color:#000000 !important\n    }\n  `}
`,l=({position:e,formData:t,setShowDiv:n,clickProps:i,handleDrillingIn:o})=>{const[l,d]=(0,r.useState)(!1),[f,h]=(0,r.useState)(""),[p,m]=(0,r.useState)(0),{meta:{sliceJumpSetData:g}}=t,{seriesName:v,seriesIndex:w}=i,y=(e,t,i)=>(0,c.tZ)(r.Fragment,null,i?(0,c.tZ)(s.v2.SubMenu,{title:e},i.map(((e,t)=>y(e.name,`jump_${t}`)))):(0,c.tZ)(s.v2.Item,{key:t,onClick:e=>{(e=>{if(e.key.includes("jump")){const t=e.key.split("_"),r=g[t[1]];if(1===r.type&&window.open(`${window.location.origin}/dashboard/list/?target_id=${r.config.treeValue}`),2===r.type&&r.config&&r.config.jumpUrl){if("2"===r.config.openType)return h(r.config.jumpUrl),void d(!1);{const e=r.config.jumpUrl.map((e=>e.children.map((e=>e.character?e.character:e.text)).join(""))).join("");window.open(e),d(!1)}n(!1)}}else o&&o(v,w);n(!1)})(e)}},e));return(0,r.useEffect)((()=>{g&&Array.isArray(g)?m(g.length):m(0)}),[g]),(0,c.tZ)(r.Fragment,null,(0,c.tZ)(u,{position:e},(0,c.tZ)(s.v2,{"data-test":"menu-item-menu"},y("\u4e0b\u94bb","drilling_in"),p>0&&(0,c.tZ)(r.Fragment,null,p>1?y("\u8df3\u8f6c\u5230","jump",g):y(`\u8df3\u8f6c\u5230${g[0].name}`,"jump_0")))),(0,c.tZ)(a.Z,{title:"Basic Modal",visible:l,onCancel:()=>d(!1)},(0,c.tZ)("iframe",{src:f,title:"myIframe",width:"800",height:"600",frameborder:"0",scrolling:"yes",name:"myIframe",id:"myIframe",sandbox:"allow-scripts allow-same-origin"})))};function d({height:e,width:t,echartOptions:n,formData:a,onContextMenu:o,refs:s}){const{sliceJumpSetData:u}=(null==a?void 0:a.meta)||{},[d,f]=(0,r.useState)(!1),[h,p]=(0,r.useState)({}),[m,g]=(0,r.useState)({}),v={click:e=>{const{componentType:t}=e;var n,r;"series"===t&&(u&&Array.isArray(u)&&u.length>0&&(p({position:"absolute",left:`${null==(n=e.event)?void 0:n.offsetX}px`,top:`${null==(r=e.event)?void 0:r.offsetY}px`}),g(e),f(!0)))},contextmenu:e=>{if(o){var t,r;e.event.stop();const i=e.event.event,s=n.series[0].data,c=null==(t=s.find((t=>t.id===e.data.source)))?void 0:t.name,u=null==(r=s.find((t=>t.id===e.data.target)))?void 0:r.name;if(c&&u){const e=[{col:a.source,op:"==",val:c,formattedVal:c},{col:a.target,op:"==",val:u,formattedVal:u}];o(i.clientX,i.clientY,e)}}}};return(0,c.tZ)(r.Fragment,null,(0,c.tZ)(i.Z,{refs:s,height:e,width:t,echartOptions:n,eventHandlers:v}),d?(0,c.tZ)(l,{position:h,formData:a,setShowDiv:f,clickProps:m,handleDrillingIn:null}):null)}},263475:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(667294),i=n(751995),a=n(53552),o=n(211965);const s=i.iK.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function c({width:e,height:t,echartOptions:n,eventHandlers:i,zrEventHandlers:c,selectedValues:u={},refs:l},d){const f=(0,r.useRef)(null);l&&(l.divRef=f);const h=(0,r.useRef)(),p=(0,r.useMemo)((()=>Object.keys(u)||[]),[u]),m=(0,r.useRef)([]);(0,r.useImperativeHandle)(d,(()=>({getEchartInstance:()=>h.current}))),(0,r.useEffect)((()=>{f.current&&(h.current||(h.current=(0,a.S1)(f.current)),Object.entries(i||{}).forEach((([e,t])=>{var n,r;null==(n=h.current)||n.off(e),null==(r=h.current)||r.on(e,t)})),Object.entries(c||{}).forEach((([e,t])=>{var n,r;null==(n=h.current)||n.getZr().off(e),null==(r=h.current)||r.getZr().on(e,t)})),h.current.setOption(n,!0))}),[n,i,c]),(0,r.useEffect)((()=>{h.current&&(h.current.dispatchAction({type:"downplay",dataIndex:m.current.filter((e=>!p.includes(e)))}),p.length&&h.current.dispatchAction({type:"highlight",dataIndex:p}),h.current.dispatchAction({type:"hideTip"}),m.current=p)}),[p]);const g=(0,r.useCallback)((({width:e,height:t})=>{h.current&&h.current.resize({width:e,height:t})}),[]);return(0,r.useEffect)((()=>{if(!h.current)return;const e=()=>{h.current&&h.current.dispatchAction({type:"hideTip"})};return window.addEventListener("message",(t=>{"share-page-scroll"===t.data.type&&e()})),()=>{window.removeEventListener("message",e)}}),[h.current]),(0,r.useEffect)((()=>(g({width:e,height:t}),()=>{var e;return null==(e=h.current)?void 0:e.dispose()})),[]),(0,r.useLayoutEffect)((()=>{g({width:e,height:t})}),[e,t,g]),(0,o.tZ)(s,{ref:f,height:t,width:e})}const u=(0,r.forwardRef)(c)}}]);