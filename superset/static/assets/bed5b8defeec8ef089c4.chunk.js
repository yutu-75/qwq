"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[72197],{941842:(e,t,n)=>{n.d(t,{Z:()=>s});n(667294);var r=n(925550),l=n(455867),i=n(211965);function s(e){const{listValueFilter:t,bcItemClick:n=(()=>{}),clearFilter:s=(()=>{}),styleCums:c={}}=e,a={position:"absolute",zIndex:1,...c};return(0,i.tZ)("div",{style:a},t.length>0&&(0,i.tZ)(r.Z,null,(0,i.tZ)(r.g,{onClick:()=>{s()}},(0,l.t)("Back to all")),t.map(((e,t)=>(0,i.tZ)(r.g,{onClick:()=>{n(e,t)}},e)))))}},925550:(e,t,n)=>{n.d(t,{Z:()=>c,g:()=>a});var r=n(205872),l=n.n(r),i=(n(667294),n(435247)),s=n(211965);const c=e=>(0,s.tZ)(i.Z,l()({},e,{css:e=>({".ant-breadcrumb-link":{cursor:"pointer"}})})),a=i.Z.Item},572197:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f,extractTreePathInfo:()=>d});var r=n(150361),l=n.n(r),i=n(667294),s=n(455867),c=n(263475),a=n(828216),u=n(748086),o=n(941842),h=n(211965);const d=e=>(null!=e?e:[]).map((e=>(null==e?void 0:e.name)||"")).filter((e=>""!==e));function f(e){const{height:t,width:n,echartOptions:r,setDataMask:f,labelMap:p,selectedValues:g,formData:v,onContextMenu:m,refs:w,emitCrossFilters:Z}=e,{columns:b=[],enableChartDrilldown:k,drilldownColumns:I=[],sliceId:y=0}=v,C=(0,a.v9)((e=>e)),{dataMask:E={}}=C,O=(null==E?void 0:E[y])||{},{ownState:S={}}=O,{listValueFilter:F=[]}=S;(0,i.useEffect)((()=>{f({ownState:{}})}),[JSON.stringify(v.metrics),JSON.stringify(b),JSON.stringify(v.adhocFilters),k,JSON.stringify(I)]);const V=(0,i.useCallback)((e=>{if(!Z)return;const t=e.map((e=>p[e]));f({extraFormData:{filters:0!==e.length&&b?b.map(((e,n)=>{const r=t.map((e=>e[n]));return null===r||void 0===r?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:r}})):[]},filterState:{value:t.length?t:null,selectedValues:e.length?e:null}})}),[Z,f,b,p]),x={click:e=>{const{treePathInfo:t}=e,n=d(t);if(e.name&&k){const e=[...b,...I];if(F.length>=e.length-1)return void u.ZP.warning((0,s.t)("It has reached the deepest level"));const t=l()(F);return t.push(...n),void f({ownState:{listValueFilter:t}})}const r=n.join(","),i=Object.values(g);i.includes(r)?V(i.filter((e=>e!==r))):V([r])},contextmenu:e=>{if(m){e.event.stop();const{data:t}=e,{records:n}=t,r=d(e.treePathInfo),l=e.event.event,i=[];null!=b&&b.length&&r.forEach(((e,t)=>i.push({col:b[t],op:"==",val:n[t],formattedVal:e}))),m(l.clientX,l.clientY,i)}}};return(0,h.tZ)(i.Fragment,null,(0,h.tZ)(o.Z,{listValueFilter:F,bcItemClick:(e,t)=>{const n=F.filter(((e,n)=>n<=t));f({ownState:{listValueFilter:n}})},clearFilter:()=>{f({ownState:{}})}}),(0,h.tZ)(c.Z,{refs:w,height:t,width:n,echartOptions:r,eventHandlers:x,selectedValues:g}))}},263475:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(667294),l=n(751995),i=n(53552),s=n(211965);const c=l.iK.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function a({width:e,height:t,echartOptions:n,eventHandlers:l,zrEventHandlers:a,selectedValues:u={},refs:o},h){const d=(0,r.useRef)(null);o&&(o.divRef=d);const f=(0,r.useRef)(),p=(0,r.useMemo)((()=>Object.keys(u)||[]),[u]),g=(0,r.useRef)([]);(0,r.useImperativeHandle)(h,(()=>({getEchartInstance:()=>f.current}))),(0,r.useEffect)((()=>{d.current&&(f.current||(f.current=(0,i.S1)(d.current)),Object.entries(l||{}).forEach((([e,t])=>{var n,r;null==(n=f.current)||n.off(e),null==(r=f.current)||r.on(e,t)})),Object.entries(a||{}).forEach((([e,t])=>{var n,r;null==(n=f.current)||n.getZr().off(e),null==(r=f.current)||r.getZr().on(e,t)})),f.current.setOption(n,!0))}),[n,l,a]),(0,r.useEffect)((()=>{f.current&&(f.current.dispatchAction({type:"downplay",dataIndex:g.current.filter((e=>!p.includes(e)))}),p.length&&f.current.dispatchAction({type:"highlight",dataIndex:p}),f.current.dispatchAction({type:"hideTip"}),g.current=p)}),[p]);const v=(0,r.useCallback)((({width:e,height:t})=>{f.current&&f.current.resize({width:e,height:t})}),[]);return(0,r.useEffect)((()=>{if(!f.current)return;const e=()=>{f.current&&f.current.dispatchAction({type:"hideTip"})};return window.addEventListener("message",(t=>{"share-page-scroll"===t.data.type&&e()})),()=>{window.removeEventListener("message",e)}}),[f.current]),(0,r.useEffect)((()=>(v({width:e,height:t}),()=>{var e;return null==(e=f.current)?void 0:e.dispose()})),[]),(0,r.useLayoutEffect)((()=>{v({width:e,height:t})}),[e,t,v]),(0,s.tZ)(c,{ref:d,height:t,width:e})}const u=(0,r.forwardRef)(a)}}]);