"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[19048],{419048:(e,n,t)=>{t.r(n),t.d(n,{default:()=>I});var a=t(667294),l=t(828216),r=t(349484),o=t(751995),i=t(767190),u=t(645636),s=t(355786),d=t(310581),m=t(455867),v=t(49937),c=t(52004),f=t(867e3),p=t(231955),g=t(981945),h=t(708509),b=t(555453),x=t(401498),Z=t(246789),S=t(542170),$=t(211965);const k=({min:e,max:n,filterState:t})=>{var a;if(null!=t&&null!=(a=t.value)&&a.length){const e=t.value;return[e[0],e[1]]}return[e,n]},y=e=>{const{onClose:n=(()=>{}),onOpen:t=(()=>{}),visible:r,data:o,id:i,name:u,onDetermine:s,filterState:d,onRese:v}=e,c=(0,l.v9)((e=>e.dashboardState.mobileFilterType)),y=(0,l.v9)((e=>e.dashboardState.mobileFilterStatus)),C=(0,l.v9)((e=>e.dashboardState.drawerStatus)),{min:w,max:F}=null==o?void 0:o.data[0],[N,O]=(0,a.useState)((()=>k({min:w,max:F,filterState:d}))),M=()=>{var e;(null!=N?N:[]).join("")!==(null!=(e=null==d?void 0:d.value)?e:[]).join("")&&(s(N),n())},A=()=>{O([w,F]),v([w,F])};(0,a.useEffect)((()=>{var e;null!=d&&null!=(e=d.value)&&e.length&&O([d.value[0],d.value[1]])}),[JSON.stringify(null==d?void 0:d.value)]),(0,a.useEffect)((()=>{C||O(k({min:w,max:F,filterState:d}))}),[C]),(0,S.Z)((()=>{y.confirm&&!y.reset&&M(),!y.confirm&&y.reset&&A()}),[JSON.stringify(y)]);return(0,$.tZ)(a.Fragment,null,(0,$.tZ)(f.Z,{type:c,id:i,name:u,onClick:t,defaultActiveKey:[i]},"number"!==typeof o.data[0].max||"number"!==typeof o.data[0].min?(0,$.tZ)("h4",null,(0,m.t)("Chosen non-numeric column")):(0,$.tZ)(g.iR,{style:{marginTop:-6,marginBottom:12},range:!0,min:w,max:F,value:N,onAfterChange:e=>{let n="";n="number"===typeof e?`${e}`:`[${e.join(",")}]`,g.FN.show(`\u9009\u4e2d\u503c\uff1a${n}`)},onChange:O})),(0,$.tZ)(h.Z,{visible:r,onMaskClick:()=>{n(),O(k({min:w,max:F,filterState:d}))}},(0,$.tZ)(b.Z,null,(0,$.tZ)(x.Z,{text:u}),(0,$.tZ)("div",{style:{display:"flex",flexDirection:"column",flex:1,width:"100%",padding:"8px 0px 0px 4px"}},"number"!==typeof o.data[0].max||"number"!==typeof o.data[0].min?(0,$.tZ)("h4",null,(0,m.t)("Chosen non-numeric column")):(0,$.tZ)(p.Z,{range:!0,marks:{[w]:w,[N[0]]:N[0],[N[1]]:N[1],[F]:F},min:w,max:F,value:N,onChange:O})),(0,$.tZ)(Z.Z,{onRest:A,onConfirm:M}))))};var C=t(174448),w=t(356080),F=t(578676);const N="#e1e1e1",O=(0,o.iK)(v.rb)`
  ${({theme:e,validateStatus:n})=>{var t,a;return`\n  .ant-slider-rail {\n    background-color: ${n?null==(t=e.colors[n])?void 0:t.light1:"#99e7f0"};\n  }\n\n  .ant-slider-track {\n    background-color: ${N};\n  }\n\n  &:hover {\n    .ant-slider-rail {\n      background-color: ${n?null==(a=e.colors[n])?void 0:a.base:"#6dd3e3"};\n    }\n\n    .ant-slider-track {\n      background-color: ${N};\n    }\n  }\n  `}}
`,M=o.iK.div`
  ${({theme:e,validateStatus:n,orientation:t,isOverflowing:a})=>{var l,o,i,u,s,d,m;return`\n    border: 1px solid transparent;\n    &:focus {\n      border: 1px solid\n        ${null==(l=e.colors[n||"primary"])?void 0:l.base};\n      outline: 0;\n      box-shadow: 0 0 0 3px\n        ${(0,r.rgba)(null==(o=e.colors[n||"primary"])?void 0:o.base,.2)};\n    }\n    & .ant-slider {\n      margin-top: ${t===c.Bp.HORIZONTAL?0:e.gridUnit}px;\n      margin-bottom: ${t===c.Bp.HORIZONTAL?0:5*e.gridUnit}px;\n\n      ${t===c.Bp.HORIZONTAL&&!a&&"line-height: 1.2;"}\n\n      & .ant-slider-track {\n        background-color: ${n&&(null==(i=e.colors[n])?void 0:i.light1)};\n      }\n      & .ant-slider-handle {\n        border: ${n&&`2px solid ${null==(u=e.colors[n])?void 0:u.light1}`};\n        &:focus {\n          box-shadow: 0 0 0 3px\n            ${(0,r.rgba)(null==(s=e.colors[n||"primary"])?void 0:s.base,.2)};\n        }\n      }\n      & .ant-slider-mark {\n        font-size: ${e.typography.sizes.s}px;\n      }\n\n      &:hover {\n        & .ant-slider-track {\n          background-color: ${n&&(null==(d=e.colors[n])?void 0:d.base)};\n        }\n        & .ant-slider-handle {\n          border: ${n&&`2px solid ${null==(m=e.colors[n])?void 0:m.base}`};\n        }\n      }\n    }\n  `}}
`,A=(0,i.JB)(u.Z.SMART_NUMBER),B=e=>A(e),E=(e,n)=>null!==e&&null!==n&&e===n?`x = ${A(e)}`:null!==e&&null!==n?`${A(e)} \u2264 x \u2264 ${A(n)}`:null!==e?`x \u2265 ${A(e)}`:null!==n?`x \u2264 ${A(n)}`:"",R=(e,n)=>{const t={};return null!==e&&(t[e]=A(e)),null!==n&&(t[n]=A(n)),t};function I(e){const{data:n,formData:t,height:r,width:o,setDataMask:i,setFocusedFilter:u,unsetFocusedFilter:f,setHoveredFilter:p,unsetHoveredFilter:g,setFilterActive:h,filterState:b,inputRef:x,filterBarOrientation:Z,isOverflowingFilterBar:S}=e,[k]=n,{min:N,max:A}=k,{groupby:I,defaultValue:T,enableSingleValue:D}=t,K=D===F.c.Minimum,j=D===F.c.Maximum,H=D===F.c.Exact,J=void 0===D,[L=""]=(0,s.Z)(I).map(d.Z),[z,U]=(0,a.useState)(null!=T?T:[N,H?N:A]),[V,_]=(0,a.useState)({}),W=null!=z?z:[N,A],q=(0,a.useCallback)((e=>{const[n,t]=e;return H?{lower:n,upper:t}:{lower:n>N?n:null,upper:t<A?t:null}}),[A,N,H]),G=(0,a.useCallback)((e=>{U(e);const{lower:n,upper:t}=q(e);_(R(n,t)),i({extraFormData:(0,w.WO)(L,n,t),filterState:{value:null!==n||null!==t?e:null,label:E(n,t)}})}),[L,q,i]),P=(0,a.useCallback)((e=>{U(e)}),[]);(0,a.useEffect)((()=>{var e;if(void 0===(null==k?void 0:k.min)&&void 0===(null==k?void 0:k.max))return;let n=null!=(e=b.value)?e:[N,A];if(j){const e=n[1]<=W[1]?n[1]:W[1];n=[N,e]}else if(K){n=[n[0]>=W[0]?n[0]:W[0],A]}else H&&(n=[W[0],W[0]]);G(n)}),[j,K,H,JSON.stringify(b.value),JSON.stringify(n)]);const Q=(0,a.useMemo)((()=>{if(b.validateMessage)return(0,$.tZ)(C.Am,{status:b.validateStatus},b.validateMessage)}),[b.validateMessage,b.validateStatus]);(0,a.useEffect)((()=>{j&&G([N,W[1]])}),[j]),(0,a.useEffect)((()=>{K&&G([W[0],A])}),[K]),(0,a.useEffect)((()=>{H&&G([W[0],W[0]])}),[H]);const[X,Y]=(0,a.useState)(!1);return(0,l.v9)((e=>{var n,t;return null==(n=e.dashboardInfo)||null==(t=n.metadata)?void 0:t.layout_mode}))===c.kB.MOBILE?(0,$.tZ)(y,{id:null==t?void 0:t.ftId,name:null==t?void 0:t.ftName,data:e,filterState:b,visible:X,onClose:()=>Y(!1),onOpen:()=>Y(!0),onDetermine:e=>{G(e),Y(!1)},onRese:e=>{G(e),Y(!1)}}):(0,$.tZ)(C.un,{height:r,width:o},Number.isNaN(Number(N))||Number.isNaN(Number(A))?(0,$.tZ)("h4",null,(0,m.t)("Chosen non-numeric column")):(0,$.tZ)(C.jp,{extra:Q},(0,$.tZ)(M,{tabIndex:-1,ref:x,validateStatus:b.validateStatus,orientation:Z,isOverflowing:S,onFocus:u,onBlur:f,onMouseEnter:p,onMouseLeave:g,onMouseDown:()=>h(!0),onMouseUp:()=>h(!1)},(0,$.tZ)("div",{style:{position:"absolute",left:0,top:-10,fontSize:12,color:"#999"}},N),j&&(0,$.tZ)(v.rb,{min:N,max:A,value:W[1],tipFormatter:B,marks:V,onAfterChange:e=>G([N,e]),onChange:e=>P([N,e])}),K&&(0,$.tZ)(O,{validateStatus:b.validateStatus,min:N,max:A,value:W[0],tipFormatter:B,marks:V,onAfterChange:e=>G([e,A]),onChange:e=>P([e,A])}),H&&(0,$.tZ)(v.rb,{min:N,max:A,included:!1,value:W[0],tipFormatter:B,marks:V,onAfterChange:e=>G([e,e]),onChange:e=>P([e,e])}),J&&(0,$.tZ)(v.rb,{range:!0,min:N,max:A,value:W,onAfterChange:G,onChange:P,tipFormatter:B,marks:V}),(0,$.tZ)("div",{style:{position:"absolute",right:0,top:-10,alignItems:"right",fontSize:12,color:"#999"}},A))))}},174448:(e,n,t)=>{t.d(n,{Am:()=>i,jp:()=>o,un:()=>r});var a=t(751995),l=t(804591);const r=a.iK.div`
  min-height: ${({height:e})=>e}px;
  width: ${({width:e})=>e}px;
`,o=(0,a.iK)(l.Z)`
  &.ant-row.ant-form-item {
    margin: 0;
  }
`,i=a.iK.div`
  color: ${({theme:e,status:n="error"})=>{var t;return null==(t=e.colors[n])?void 0:t.base}};
`}}]);